"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[372],{3372:function(e,a,l){l.r(a),l.d(a,{default:function(){return H}});l(8743);var t=l(641),u=l(9322),r=l(2644),o=l(9841),n=l(4335),s=l(5220),i=l(2798);const v=e=>((0,t.Qi)("data-v-42ce6b2f"),e=e(),(0,t.jt)(),e),p={class:"priority-page"},d=v(()=>(0,t.Lk)("h2",{class:"priority-title"},"후원 결과 승인 요청 목록",-1)),c={class:"priority-filters"},k=["onKeyup"],y=v(()=>(0,t.Lk)("option",{value:""},"전체",-1)),L=v(()=>(0,t.Lk)("option",{value:"BA1"},"요청",-1)),_=v(()=>(0,t.Lk)("option",{value:"BA2"},"승인",-1)),h=v(()=>(0,t.Lk)("option",{value:"BA3"},"반려",-1)),g=[y,L,_,h],b=v(()=>(0,t.Lk)("option",{value:"latest"},"최신순",-1)),f=v(()=>(0,t.Lk)("option",{value:"oldest"},"오래된순",-1)),C=v(()=>(0,t.Lk)("option",{value:"name"},"프로그램명순",-1)),m=v(()=>(0,t.Lk)("option",{value:"goal"},"목표금액순",-1)),A=[b,f,C,m],E={class:"priority-card"},B={key:0,class:"priority-loading"},K={key:1,class:"priority-table"},R=v(()=>(0,t.Lk)("th",null,"승인코드",-1)),w=v(()=>(0,t.Lk)("th",null,"프로그램",-1)),X={key:0},W=v(()=>(0,t.Lk)("th",null,"작성일",-1)),I=v(()=>(0,t.Lk)("th",null,"후원유형",-1)),Q=v(()=>(0,t.Lk)("th",null,"목표기간",-1)),N=v(()=>(0,t.Lk)("th",null,"목표금액",-1)),S=v(()=>(0,t.Lk)("th",null,"상태",-1)),V=v(()=>(0,t.Lk)("th",null,"처리일",-1)),$=["onClick"],j={key:0},U={key:0},q=["colspan"],z={key:2,class:"priority-pagination"},F=["disabled"],J={class:"priority-page-info"},M=["disabled"];var x={__name:"SponsorshipResultApproval",setup(e){const a=(0,s.rd)(),l=(0,i.n)(),v=(0,o.KR)([]),y=(0,o.KR)(1),L=(0,o.KR)(10),_=(0,o.KR)(0),h=(0,o.KR)(!1),b=(0,t.EW)(()=>_.value>0?Math.ceil(_.value/L.value):1),f=(0,o.KR)(""),C=(0,o.KR)(""),m=(0,o.KR)("latest"),x=(0,t.EW)(()=>l.role||l.user&&l.user.roleCode||""),D=(0,t.EW)(()=>l.userId||l.loginId||l.id||l.user&&l.user.userId||""),G=(0,t.EW)(()=>"AA3"===x.value),H=(0,t.EW)(()=>"AA4"===x.value),O=(0,t.EW)(()=>G.value||H.value),P=(0,t.EW)(()=>!G.value),T=(0,t.EW)(()=>H.value?4:3),Y={BA1:"요청",BA2:"승인",BA3:"반려",EB1:"정기후원",EB2:"일시후원"};function Z(e){return e?Y[e]||e:""}function ee(e){switch(e){case"BA1":return"priority-badge-request";case"BA2":return"priority-badge-approve";case"BA3":return"priority-badge-reject";default:return"priority-badge-default"}}function ae(e){if(!e)return"";const a=String(e);return a.length>=10?a.slice(0,10):a}function le(e,a){const l=ae(e),t=ae(a);return l||t?l&&!t?`${l} ~`:!l&&t?`~ ${t}`:`${l} ~ ${t}`:""}function te(e){if(null==e)return"";const a=Number(e);return Number.isNaN(a)?e:a.toLocaleString("ko-KR")+"원"}function ue(){y.value=1,re()}async function re(){h.value=!0;try{const e=await n.A.get("/api/approvals/sponsorship-result",{params:{page:y.value,size:L.value,keyword:f.value,state:C.value,orderBy:m.value,loginId:D.value,role:x.value}}),a=e.data?.data||{},l=Array.isArray(a.rows)?a.rows:[];v.value=l,_.value=a.totalCount??0}catch(e){console.error("[SponsorshipResultsApproval] loadList error:",e),v.value=[],_.value=0}finally{h.value=!1}}function oe(e){e<1||e>b.value||e!==y.value&&(y.value=e,re())}function ne(e){a.push({name:"sponsorship-result-detail",params:{programCode:e.program_code},query:{role:T.value}})}return(0,t.sV)(()=>{if(!O.value)return alert("기관 관리자 및 시스템 관리자만 접근할 수 있습니다."),void a.push("/");re()}),(e,a)=>((0,t.uX)(),(0,t.CE)("div",p,[d,(0,t.Lk)("div",c,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),class:"priority-input",placeholder:"프로그램명/후원유형/기관 검색",onKeyup:(0,u.jR)(ue,["enter"])},null,40,k),[[u.Jo,f.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e),class:"priority-select",onChange:ue},g,544),[[u.u1,C.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),class:"priority-select",onChange:ue},A,544),[[u.u1,m.value]])]),(0,t.Lk)("div",E,[h.value?((0,t.uX)(),(0,t.CE)("div",B,"불러오는 중...")):((0,t.uX)(),(0,t.CE)("table",K,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[R,w,P.value?((0,t.uX)(),(0,t.CE)("th",X,"기관")):(0,t.Q3)("",!0),W,I,Q,N,S,V])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.approval_code,class:"priority-row",onClick:a=>ne(e)},[(0,t.Lk)("td",null,(0,r.v_)(e.approval_code),1),(0,t.Lk)("td",null,"["+(0,r.v_)(e.program_code)+"] "+(0,r.v_)(e.program_name),1),P.value?((0,t.uX)(),(0,t.CE)("td",j,(0,r.v_)(e.org_name),1)):(0,t.Q3)("",!0),(0,t.Lk)("td",null,(0,r.v_)(ae(e.written_at||e.create_date)),1),(0,t.Lk)("td",null,(0,r.v_)(Z(e.sponsor_type)),1),(0,t.Lk)("td",null,(0,r.v_)(le(e.start_date,e.end_date)),1),(0,t.Lk)("td",null,(0,r.v_)(te(e.goal_amount)),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["priority-badge",ee(e.state)])},(0,r.v_)(Z(e.state)),3)]),(0,t.Lk)("td",null,(0,r.v_)("BA1"!==e.state&&e.approval_date?ae(e.approval_date):"-"),1)],8,$))),128)),0===v.value.length?((0,t.uX)(),(0,t.CE)("tr",U,[(0,t.Lk)("td",{class:"priority-empty",colspan:P.value?9:8}," 데이터가 없습니다. ",8,q)])):(0,t.Q3)("",!0)])])),!h.value&&b.value>1?((0,t.uX)(),(0,t.CE)("div",z,[(0,t.Lk)("button",{class:"priority-page-btn",disabled:1===y.value,onClick:a[3]||(a[3]=e=>oe(y.value-1))}," 이전 ",8,F),(0,t.Lk)("span",J,(0,r.v_)(y.value)+" / "+(0,r.v_)(b.value)+" (총 "+(0,r.v_)(_.value)+"건) ",1),(0,t.Lk)("button",{class:"priority-page-btn",disabled:y.value===b.value,onClick:a[4]||(a[4]=e=>oe(y.value+1))}," 다음 ",8,M)])):(0,t.Q3)("",!0)])]))}},D=l(6262);const G=(0,D.A)(x,[["__scopeId","data-v-42ce6b2f"]]);var H=G}}]);
//# sourceMappingURL=372.e6de6ca6.js.map