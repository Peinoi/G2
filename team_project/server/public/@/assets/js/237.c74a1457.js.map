{"version":3,"file":"@/assets/js/237.c74a1457.js","mappings":"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","sources":["webpack://vue-material-dashboard-2/./src/views/HistoryList.vue","webpack://vue-material-dashboard-2/./src/views/HistoryList.vue?a23c"],"sourcesContent":["<!-- src/views/HistoryList.vue -->\r\n<template>\r\n  <div class=\"hist-page\">\r\n    <h2 class=\"hist-title\">ÌûàÏä§ÌÜ†Î¶¨</h2>\r\n\r\n    <!-- Í∂åÌïú ÏóÜÏùå -->\r\n    <div v-if=\"!isSystem && !isOrgManager\" class=\"hist-no-auth\">\r\n      <p>Ï†ëÍ∑º Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§. (ÏãúÏä§ÌÖú Í¥ÄÎ¶¨Ïûê / Í∏∞Í¥Ä Í¥ÄÎ¶¨Ïûê Ï†ÑÏö©)</p>\r\n    </div>\r\n\r\n    <!-- Í∂åÌïú ÏûàÏùÑ ÎïåÎßå -->\r\n    <div v-else>\r\n      <!-- ÌïÑÌÑ∞ ÏòÅÏó≠ -->\r\n      <div class=\"hist-toolbar\">\r\n        <!-- 1Ìñâ: Í≤ÄÏÉâÏ°∞Í±¥ + Í≤ÄÏÉâÏ∞Ω + Í≤ÄÏÉâÎ≤ÑÌäº -->\r\n        <div class=\"hist-filters-row\">\r\n          <!-- Í≤ÄÏÉâ Í∏∞Ï§Ä -->\r\n          <select\r\n            v-model=\"searchField\"\r\n            class=\"hist-select\"\r\n            @change=\"onFilterChange\"\r\n          >\r\n            <option value=\"all\">Ï†ÑÏ≤¥</option>\r\n            <option value=\"revision_date\">ÏàòÏ†ïÏùºÏãú</option>\r\n            <option value=\"modifier_name\">ÏàòÏ†ïÏûê</option>\r\n          </select>\r\n\r\n          <!-- Í≤ÄÏÉâ ÏûÖÎ†• -->\r\n          <input\r\n            v-model.trim=\"keyword\"\r\n            class=\"hist-input\"\r\n            placeholder=\"Í≤ÄÏÉâÏñ¥ ÏûÖÎ†•\"\r\n            @keyup.enter=\"fetchList\"\r\n          />\r\n\r\n          <button class=\"hist-btn hist-btn-primary\" @click=\"fetchList\">\r\n            Í≤ÄÏÉâ\r\n          </button>\r\n        </div>\r\n\r\n        <!-- 2Ìñâ: Ï†ïÎ†¨/Ïú†Ìòï/Í∏∞Í¥Ä ÎòêÎäî Îã¥ÎãπÏûê -->\r\n        <div class=\"hist-filters-row\">\r\n          <!-- Ï†ïÎ†¨ -->\r\n          <select\r\n            v-model=\"orderBy\"\r\n            class=\"hist-select\"\r\n            @change=\"onFilterChange\"\r\n          >\r\n            <option value=\"latest\">ÏµúÏã†Ïàú</option>\r\n            <option value=\"oldest\">Ïò§ÎûòÎêúÏàú</option>\r\n          </select>\r\n\r\n          <!-- BD Í≥µÌÜµÏΩîÎìú Ïú†Ìòï -->\r\n          <select\r\n            v-model=\"typeCode\"\r\n            class=\"hist-select\"\r\n            @change=\"onFilterChange\"\r\n          >\r\n            <option value=\"\">Ï†ÑÏ≤¥</option>\r\n            <option value=\"BD1\">Ï°∞ÏÇ¨ÏßÄ</option>\r\n            <option value=\"BD2\">ÏÉÅÎã¥</option>\r\n            <option value=\"BD3\">ÏßÄÏõêÍ≥ÑÌöç</option>\r\n            <option value=\"BD4\">ÏßÄÏõêÍ≤∞Í≥º</option>\r\n            <option value=\"BD5\">Ïù¥Î≤§Ìä∏ Í≥ÑÌöç</option>\r\n            <option value=\"BD6\">Ïù¥Î≤§Ìä∏ Í≤∞Í≥º</option>\r\n            <option value=\"BD7\">ÌõÑÏõê Í≥ÑÌöç</option>\r\n            <option value=\"BD8\">ÌõÑÏõê Í≤∞Í≥º</option>\r\n          </select>\r\n\r\n          <!-- ÏãúÏä§ÌÖú Í¥ÄÎ¶¨Ïûê: Í∏∞Í¥Ä ÏÑ†ÌÉù -->\r\n          <template v-if=\"isSystem\">\r\n            <select\r\n              v-model=\"orgCode\"\r\n              class=\"hist-select\"\r\n              @change=\"onFilterChange\"\r\n            >\r\n              <option value=\"\">Í∏∞Í¥Ä Ï†ÑÏ≤¥</option>\r\n              <option\r\n                v-for=\"org in orgOptions\"\r\n                :key=\"org.org_code\"\r\n                :value=\"org.org_code\"\r\n              >\r\n                {{ org.org_name }}\r\n              </option>\r\n            </select>\r\n          </template>\r\n\r\n          <!-- Í∏∞Í¥Ä Í¥ÄÎ¶¨Ïûê: Îã¥ÎãπÏûê ÏÑ†ÌÉù (user_code Í∏∞Ï§Ä) -->\r\n          <template v-else-if=\"isOrgManager\">\r\n            <select\r\n              v-model=\"managerCode\"\r\n              class=\"hist-select\"\r\n              @change=\"onFilterChange\"\r\n            >\r\n              <option value=\"\">Îã¥ÎãπÏûê Ï†ÑÏ≤¥</option>\r\n              <option\r\n                v-for=\"m in managerOptions\"\r\n                :key=\"m.user_code\"\r\n                :value=\"m.user_code\"\r\n              >\r\n                {{ m.name }}\r\n              </option>\r\n            </select>\r\n          </template>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ÌÖåÏù¥Î∏î -->\r\n      <div class=\"hist-table-wrap\">\r\n        <table class=\"hist-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Í∏∞Î°ùÏΩîÎìú</th>\r\n              <th>ÏàòÏ†ïÏùºÏãú</th>\r\n              <th>Ïú†Ìòï</th>\r\n              <th v-if=\"isSystem\">Í∏∞Í¥Ä</th>\r\n              <th>ÏàòÏ†ïÏûê</th>\r\n              <th>ÏàòÏ†ïÏûê Í∂åÌïú</th>\r\n              <th>Î≥ÄÍ≤Ω Ìï≠Î™©</th>\r\n              <th>Î≥ÄÍ≤Ω Ï†Ñ</th>\r\n              <th>Î≥ÄÍ≤Ω ÌõÑ</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            <!-- Îç∞Ïù¥ÌÑ∞ ÏóÜÏùÑ Îïå -->\r\n            <tr v-if=\"!loading && items.length === 0\">\r\n              <td :colspan=\"isSystem ? 9 : 8\" class=\"hist-empty\">\r\n                Ï°∞ÌöåÎêú Ïù¥Î†•Ïù¥ ÏóÜÏäµÎãàÎã§.\r\n              </td>\r\n            </tr>\r\n\r\n            <!-- Î™©Î°ù Ìñâ -->\r\n            <tr v-for=\"row in items\" :key=\"row.record_code\">\r\n              <td>{{ row.record_code }}</td>\r\n              <td>{{ formatDateTime(row.revision_date) }}</td>\r\n\r\n              <!-- Ïú†Ìòï: BD ÏΩîÎìú ‚Üí ÌïúÍ∏Ä -->\r\n              <td>{{ getTypeName(row.type_code) }}</td>\r\n\r\n              <td v-if=\"isSystem\">{{ row.org_name || \"-\" }}</td>\r\n\r\n              <td>{{ row.modifier_name }}</td>\r\n\r\n              <!-- üîπ ÏÉà Ïª¨Îüº: ÏàòÏ†ïÏûê Í∂åÌïú (AA1~AA4) ‚Üí ÌïúÍ∏Ä -->\r\n              <td>{{ getModifierRoleName(row.modifier_role) }}</td>\r\n\r\n              <td>{{ getChangeItemLabel(row) }}</td>\r\n\r\n              <td class=\"hist-before\">\r\n                {{ formatHistoryValue(row.before_change) }}\r\n              </td>\r\n              <td class=\"hist-after\">\r\n                {{ formatHistoryValue(row.after_change) }}\r\n              </td>\r\n            </tr>\r\n\r\n            <!-- Î°úÎî© Ï§ë -->\r\n            <tr v-if=\"loading\">\r\n              <td :colspan=\"isSystem ? 9 : 8\" class=\"hist-loading\">\r\n                Î°úÎî© Ï§ë...\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- ÌéòÏù¥Ïßï -->\r\n      <div class=\"hist-pagination\" v-if=\"totalPages > 1\">\r\n        <button\r\n          class=\"hist-btn\"\r\n          :disabled=\"page === 1 || loading\"\r\n          @click=\"changePage(page - 1)\"\r\n        >\r\n          Ïù¥Ï†Ñ\r\n        </button>\r\n\r\n        <span class=\"hist-page-info\">{{ page }} / {{ totalPages }}</span>\r\n\r\n        <button\r\n          class=\"hist-btn\"\r\n          :disabled=\"page === totalPages || loading\"\r\n          @click=\"changePage(page + 1)\"\r\n        >\r\n          Îã§Ïùå\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useAuthStore } from \"@/store/authLogin\";\r\n\r\nconst auth = useAuthStore();\r\n\r\n// Í∂åÌïú Ï≤¥ÌÅ¨\r\nconst isSystem = computed(() => auth.role === \"AA4\");\r\nconst isOrgManager = computed(() => auth.role === \"AA3\");\r\n\r\nconst searchField = ref(\"all\");\r\nconst keyword = ref(\"\");\r\nconst orderBy = ref(\"latest\");\r\nconst typeCode = ref(\"\"); // BD1~BD8\r\n\r\nconst orgCode = ref(\"\");\r\nconst managerCode = ref(\"\"); // ‚úÖ users.user_code Í∏∞Ï§ÄÏúºÎ°ú ÏÇ¨Ïö©\r\n\r\nconst items = ref([]);\r\nconst page = ref(1);\r\nconst size = ref(20);\r\nconst totalCount = ref(0);\r\nconst loading = ref(false);\r\n\r\nconst orgOptions = ref([]);\r\nconst managerOptions = ref([]);\r\n\r\nconst totalPages = computed(() =>\r\n  totalCount.value === 0 ? 1 : Math.ceil(totalCount.value / size.value)\r\n);\r\n\r\n// Ïú†Ìòï(BD) Îß§Ìïë\r\nconst typeMap = {\r\n  BD1: \"Ï°∞ÏÇ¨ÏßÄ\",\r\n  BD2: \"ÏÉÅÎã¥\",\r\n  BD3: \"ÏßÄÏõêÍ≥ÑÌöç\",\r\n  BD4: \"ÏßÄÏõêÍ≤∞Í≥º\",\r\n  BD5: \"Ïù¥Î≤§Ìä∏ Í≥ÑÌöç\",\r\n  BD6: \"Ïù¥Î≤§Ìä∏ Í≤∞Í≥º\",\r\n  BD7: \"ÌõÑÏõê Í≥ÑÌöç\",\r\n  BD8: \"ÌõÑÏõê Í≤∞Í≥º\",\r\n};\r\nconst getTypeName = (code) => typeMap[code] || \"-\";\r\n\r\n// üîπ ÏàòÏ†ïÏûê Í∂åÌïú Îß§Ìïë (AA ÏΩîÎìú)\r\nconst modifierRoleMap = {\r\n  AA1: \"ÏùºÎ∞ò ÏÇ¨Ïö©Ïûê\",\r\n  AA2: \"Í∏∞Í¥Ä Îã¥ÎãπÏûê\",\r\n  AA3: \"Í∏∞Í¥Ä Í¥ÄÎ¶¨Ïûê\",\r\n  AA4: \"ÏãúÏä§ÌÖú Í¥ÄÎ¶¨Ïûê\",\r\n};\r\n\r\n// üîπ Ïö∞ÏÑ†ÏàúÏúÑ(BB ÏΩîÎìú) Îß§Ìïë\r\nconst priorityMap = {\r\n  BB1: \"Í∏¥Í∏â\",\r\n  BB2: \"Ï§ëÏ†ê\",\r\n  BB3: \"Ï§ÄÎπÑ\",\r\n};\r\n\r\nconst getModifierRoleName = (roleCode) => modifierRoleMap[roleCode] || \"-\";\r\n\r\n// üîπ Î≥ÄÍ≤Ω Ìï≠Î™© Ïª¨ÎüºÎ™ÖÏùÑ ÌïúÍ∏ÄÎ°ú Î≥ÄÌôò\r\nconst getChangeItemLabel = (row) => {\r\n  if (!row) return \"\";\r\n\r\n  const rawColumn = row.change_item || \"\"; // Ïòà: answers, answers.76, survey_answer.answers\r\n\r\n  // . ÎòêÎäî [ Í∏∞Ï§ÄÏúºÎ°ú ÏïûÎ∂ÄÎ∂ÑÎßå Ïª¨ÎüºÎ™ÖÏúºÎ°ú ÏÇ¨Ïö©\r\n  // Í∏∞Ï°¥: rawColumn.split(/[.\\[]/)[0];\r\n  const baseColumn = rawColumn.split(/[.[[]/)[0]; // answers.76 -> answers\r\n\r\n  // Í≥µÌÜµ Ïª¨ÎüºÎ™Ö Îß§Ìïë\r\n  const commonColumnLabelMap = {\r\n    status: \"ÏÉÅÌÉú\",\r\n    answers: \"Ï°∞ÏÇ¨ÏßÄ ÎãµÎ≥Ä\",\r\n    name: \"Ïù¥Î¶Ñ\",\r\n    role: \"Í∂åÌïú Íµ¨Î∂Ñ\",\r\n    is_active: \"Í∞ÄÏûÖ ÏÉÅÌÉú\",\r\n    org_code: \"ÏÜåÏÜç Í∏∞Í¥Ä\",\r\n\r\n    main_title: \"Ï†úÎ™©\",\r\n    main_content: \"ÎÇ¥Ïö©\",\r\n    main_counsel_date: \"ÏùºÏûê\",\r\n    plan_from: \"ÏòàÏÉÅ ÏßÄÏõê ÏãúÏûëÏùº\",\r\n    plan_to: \"ÏòàÏÉÅ ÏßÄÏõê Ï¢ÖÎ£åÏùº\",\r\n\r\n    goal_p: \"Í≥ÑÌöç Î™©Ìëú\",\r\n    publicContent_p: \"Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    privateContent_p: \"Í∏∞Í¥Ä ÎÇ¥Ïö©\",\r\n\r\n    actual_from: \"Ïã§Ï†ú ÏßÄÏõê ÏãúÏûëÏùº\",\r\n    actual_to: \"Ïã§Ï†ú ÏßÄÏõê Ï¢ÖÎ£åÏùº\",\r\n    goal: \"Í≥ÑÌöçÌñàÎçò Î™©Ìëú\",\r\n    publicContent: \"ÏùºÎ∞òÏö© ÎÇ¥Ïö©\",\r\n    privateContent: \"Í∏∞Í¥ÄÏö© ÎÇ¥Ïö©\",\r\n    priority: \"Ïö∞ÏÑ†ÏàúÏúÑ\",\r\n\r\n    detail_title: \"Ï∂îÍ∞Ä Ï†úÎ™©\",\r\n    detail1_title: \"Ï∂îÍ∞Ä-1 Ï†úÎ™©\",\r\n    detail2_title: \"Ï∂îÍ∞Ä-2 Ï†úÎ™©\",\r\n    detail3_title: \"Ï∂îÍ∞Ä-3 Ï†úÎ™©\",\r\n    detail4_title: \"Ï∂îÍ∞Ä-4 Ï†úÎ™©\",\r\n    detail5_title: \"Ï∂îÍ∞Ä-5 Ï†úÎ™©\",\r\n    detail6_title: \"Ï∂îÍ∞Ä-6 Ï†úÎ™©\",\r\n    detail7_title: \"Ï∂îÍ∞Ä-7 Ï†úÎ™©\",\r\n    detail8_title: \"Ï∂îÍ∞Ä-8 Ï†úÎ™©\",\r\n    detail9_title: \"Ï∂îÍ∞Ä-9 Ï†úÎ™©\",\r\n    detail10_title: \"Ï∂îÍ∞Ä-10 Ï†úÎ™©\",\r\n\r\n    detail_content: \"Ï∂îÍ∞Ä ÎÇ¥Ïö©\",\r\n    detail1_content: \"Ï∂îÍ∞Ä-1 ÎÇ¥Ïö©\",\r\n    detail2_content: \"Ï∂îÍ∞Ä-2 ÎÇ¥Ïö©\",\r\n    detail3_content: \"Ï∂îÍ∞Ä-3 ÎÇ¥Ïö©\",\r\n    detail4_content: \"Ï∂îÍ∞Ä-4 ÎÇ¥Ïö©\",\r\n    detail5_content: \"Ï∂îÍ∞Ä-5 ÎÇ¥Ïö©\",\r\n    detail6_content: \"Ï∂îÍ∞Ä-6 ÎÇ¥Ïö©\",\r\n    detail7_content: \"Ï∂îÍ∞Ä-7 ÎÇ¥Ïö©\",\r\n    detail8_content: \"Ï∂îÍ∞Ä-8 ÎÇ¥Ïö©\",\r\n    detail9_content: \"Ï∂îÍ∞Ä-9 ÎÇ¥Ïö©\",\r\n    detail10_content: \"Ï∂îÍ∞Ä-10 ÎÇ¥Ïö©\",\r\n\r\n    detail_date: \"Ï∂îÍ∞Ä ÏùºÏûê\",\r\n    detail1_date: \"Ï∂îÍ∞Ä-1 ÏùºÏûê\",\r\n    detail2_date: \"Ï∂îÍ∞Ä-2 ÏùºÏûê\",\r\n    detail3_date: \"Ï∂îÍ∞Ä-3 ÏùºÏûê\",\r\n    detail4_date: \"Ï∂îÍ∞Ä-4 ÏùºÏûê\",\r\n    detail5_date: \"Ï∂îÍ∞Ä-5 ÏùºÏûê\",\r\n    detail6_date: \"Ï∂îÍ∞Ä-6 ÏùºÏûê\",\r\n    detail7_date: \"Ï∂îÍ∞Ä-7 ÏùºÏûê\",\r\n    detail8_date: \"Ï∂îÍ∞Ä-8 ÏùºÏûê\",\r\n    detail9_date: \"Ï∂îÍ∞Ä-9 ÏùºÏûê\",\r\n    detail10_date: \"Ï∂îÍ∞Ä-10 ÏùºÏûê\",\r\n\r\n    item_private: \"Ï∂îÍ∞Ä Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item1_private: \"Ï∂îÍ∞Ä-1 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item2_private: \"Ï∂îÍ∞Ä-2 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item3_private: \"Ï∂îÍ∞Ä-3 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item4_private: \"Ï∂îÍ∞Ä-4 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item5_private: \"Ï∂îÍ∞Ä-5 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item6_private: \"Ï∂îÍ∞Ä-6 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item7_private: \"Ï∂îÍ∞Ä-7 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item8_private: \"Ï∂îÍ∞Ä-8 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item9_private: \"Ï∂îÍ∞Ä-9 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n    item10_private: \"Ï∂îÍ∞Ä-10 Í¥ÄÎ¶¨Ïûê ÎÇ¥Ïö©\",\r\n\r\n    item_public: \"Ï∂îÍ∞Ä Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item1_public: \"Ï∂îÍ∞Ä-1 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item2_public: \"Ï∂îÍ∞Ä-2 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item3_public: \"Ï∂îÍ∞Ä-3 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item4_public: \"Ï∂îÍ∞Ä-4 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item5_public: \"Ï∂îÍ∞Ä-5 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item6_public: \"Ï∂îÍ∞Ä-6 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item7_public: \"Ï∂îÍ∞Ä-7 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item8_public: \"Ï∂îÍ∞Ä-8 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item9_public: \"Ï∂îÍ∞Ä-9 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n    item10_public: \"Ï∂îÍ∞Ä-10 Ïù¥Ïö©Ïûê ÎÇ¥Ïö©\",\r\n\r\n    item_goal: \"Ï∂îÍ∞Ä Î™©Ìëú\",\r\n    item1_goal: \"Ï∂îÍ∞Ä-1 Î™©Ìëú\",\r\n    item2_goal: \"Ï∂îÍ∞Ä-2 Î™©Ìëú\",\r\n    item3_goal: \"Ï∂îÍ∞Ä-3 Î™©Ìëú\",\r\n    item4_goal: \"Ï∂îÍ∞Ä-4 Î™©Ìëú\",\r\n    item5_goal: \"Ï∂îÍ∞Ä-5 Î™©Ìëú\",\r\n    item6_goal: \"Ï∂îÍ∞Ä-6 Î™©Ìëú\",\r\n    item7_goal: \"Ï∂îÍ∞Ä-7 Î™©Ìëú\",\r\n    item8_goal: \"Ï∂îÍ∞Ä-8 Î™©Ìëú\",\r\n    item9_goal: \"Ï∂îÍ∞Ä-9 Î™©Ìëú\",\r\n    item10_goal: \"Ï∂îÍ∞Ä-10 Î™©Ìëú\",\r\n  };\r\n\r\n  if (commonColumnLabelMap[baseColumn]) {\r\n    return commonColumnLabelMap[baseColumn];\r\n  }\r\n\r\n  // Í∑∏ÎûòÎèÑ ÏóÜÏúºÎ©¥ ÏõêÎûò Î¨∏ÏûêÏó¥ Í∑∏ÎåÄÎ°ú\r\n  return rawColumn;\r\n};\r\n\r\n// üîπ before_change / after_change Í∞í Ìè¨Îß∑ÌåÖ\r\nconst formatHistoryValue = (value) => {\r\n  if (value == null || value === \"\") return \"\";\r\n\r\n  const str = String(value).trim();\r\n\r\n  // JSON Object ÌòïÏãùÏù∏ÏßÄ ÌôïÏù∏\r\n  if (str.startsWith(\"{\") && str.endsWith(\"}\")) {\r\n    try {\r\n      const obj = JSON.parse(str);\r\n\r\n      if (typeof obj !== \"object\" || Array.isArray(obj) || obj === null) {\r\n        // JSONÏù¥ ÏïÑÎãå Îã®Ïùº Í∞íÏù¥ BB ÏΩîÎìúÏùº ÏàòÎèÑ ÏûàÏúºÎãà Îß§Ìïë\r\n        return priorityMap[str] || str;\r\n      }\r\n\r\n      // JSON Í∞ùÏ≤¥Ïùº Îïå ÎÇ¥Î∂Ä Í∞íÏùÑ Îß§Ìïë\r\n      const parts = Object.entries(obj).map(([key, val]) => {\r\n        // Î∞∞Ïó¥Ïù¥Î©¥ ÎÇ¥Î∂Ä Ìï≠Î™©ÎèÑ Îß§Ìïë\r\n        if (Array.isArray(val)) {\r\n          const mappedArr = val.map((v) =>\r\n            typeof v === \"string\" && priorityMap[v] ? priorityMap[v] : v\r\n          );\r\n          return `${key}: ${mappedArr.join(\", \")}`;\r\n        }\r\n\r\n        // Îã®Ïùº Í∞íÏù¥ BB ÏΩîÎìúÎùºÎ©¥ ÏπòÌôò\r\n        if (typeof val === \"string\" && priorityMap[val]) {\r\n          return `${key}: ${priorityMap[val]}`;\r\n        }\r\n\r\n        return `${key}: ${val}`;\r\n      });\r\n\r\n      return parts.join(\", \");\r\n    } catch (e) {\r\n      // JSON ÌååÏã± Ïã§Ìå® ‚Üí Îã®Ïùº Í∞íÏù¥ BB ÏΩîÎìúÎ©¥ Îß§Ìïë\r\n      return priorityMap[str] || str;\r\n    }\r\n  }\r\n\r\n  // JSONÏù¥ ÏïÑÎãàÎ©¥ Îã®Ïùº Í∞íÏù¥ BB ÏΩîÎìúÏù∏ÏßÄ Ï≤¥ÌÅ¨\r\n  return priorityMap[str] || str;\r\n};\r\n\r\n// ÎÇ†Ïßú format\r\nconst formatDateTime = (v) =>\r\n  v ? String(v).replace(\"T\", \" \").substring(0, 19) : \"\";\r\n\r\n// ÌïÑÌÑ∞ Î≥ÄÍ≤Ω Ïãú Î¶¨Î°úÎìú\r\nconst onFilterChange = () => {\r\n  page.value = 1;\r\n  fetchList();\r\n};\r\n\r\n// ÌéòÏù¥ÏßÄ Ïù¥Îèô\r\nconst changePage = (p) => {\r\n  if (p < 1 || p > totalPages.value) return;\r\n  page.value = p;\r\n  fetchList();\r\n};\r\n\r\n// Ïù¥Î†• Ï°∞Ìöå\r\nconst fetchList = async () => {\r\n  if (!isSystem.value && !isOrgManager.value) return;\r\n\r\n  loading.value = true;\r\n  try {\r\n    const params = {\r\n      page: page.value,\r\n      size: size.value,\r\n      searchField: searchField.value,\r\n      keyword: keyword.value,\r\n      orderBy: orderBy.value,\r\n      typeCode: typeCode.value,\r\n      // üîπ Í∂åÌïú/Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ÎèÑ Ìï≠ÏÉÅ Í∞ôÏù¥ Ï†ÑÎã¨\r\n      loginId: auth.userId,\r\n      role: auth.role,\r\n    };\r\n\r\n    if (isSystem.value && orgCode.value) {\r\n      params.orgCode = orgCode.value;\r\n    }\r\n    if (isOrgManager.value && managerCode.value) {\r\n      // ‚úÖ managerCodeÎäî users.user_code\r\n      params.managerCode = managerCode.value;\r\n    }\r\n\r\n    const res = await axios.get(\"/api/histories\", { params });\r\n\r\n    items.value = res.data?.data?.list ?? [];\r\n    totalCount.value = res.data?.data?.totalCount ?? 0;\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(\"Ïù¥Î†• Î™©Î°ù Ï°∞Ìöå Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// Í∏∞Í¥ÄÎ™©Î°ù / Îã¥ÎãπÏûê Î™©Î°ù\r\nconst fetchOrgOptions = async () => {\r\n  if (!isSystem.value) return;\r\n  try {\r\n    const res = await axios.get(\"/api/organization/simple\");\r\n    orgOptions.value = res.data?.data ?? [];\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nconst fetchManagerOptions = async () => {\r\n  if (!isOrgManager.value) return;\r\n  try {\r\n    const res = await axios.get(\"/api/managers/simple\", {\r\n      // ‚¨áÔ∏è Í∏∞Ï°¥: orgCode: auth.orgCode (undefinedÎùºÏÑú 400 ÎÇ®)\r\n      // params: { orgCode: auth.orgCode },\r\n      params: { loginId: auth.userId }, // ‚úÖ Î°úÍ∑∏Ïù∏ ÏïÑÏù¥Îîî Í∏∞Ï§ÄÏúºÎ°ú ÏöîÏ≤≠\r\n    });\r\n\r\n    const raw = res.data?.data ?? [];\r\n\r\n    managerOptions.value = raw.map((m) => ({\r\n      user_code: m.user_code ?? m.manager_code,\r\n      name: m.name ?? m.manager_name,\r\n    }));\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  if (isSystem.value) await fetchOrgOptions();\r\n  if (isOrgManager.value) await fetchManagerOptions();\r\n\r\n  fetchList();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  font-size: 15px;\r\n}\r\n\r\n.hist-page {\r\n  padding: 24px;\r\n  max-width: 1600px;\r\n}\r\n\r\n.hist-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.hist-no-auth {\r\n  padding: 30px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 10px;\r\n  background: #fafafa;\r\n  text-align: center;\r\n  font-size: 14px;\r\n}\r\n\r\n/* ===========================\r\n   üî∑ ÌïÑÌÑ∞ ÏòÅÏó≠\r\n   =========================== */\r\n\r\n.hist-toolbar {\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.hist-filters-row {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.hist-select,\r\n.hist-input {\r\n  padding: 6px 10px;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 6px;\r\n  background: #fff;\r\n  font-size: 13px;\r\n}\r\n\r\n.hist-input {\r\n  min-width: 220px;\r\n}\r\n\r\n.hist-btn {\r\n  padding: 6px 12px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ccc;\r\n  cursor: pointer;\r\n  background: white;\r\n}\r\n\r\n.hist-btn-primary {\r\n  background: #409eff;\r\n  border-color: #409eff;\r\n  color: white;\r\n}\r\n\r\n/* ===========================\r\n   üî∑ ÌÖåÏù¥Î∏î Í∞êÏã∏Îäî Ïπ¥Îìú Ïä§ÌÉÄÏùº\r\n   (ÌõÑÏõêÍ≤∞Í≥º priority-card Í∏∞Î∞ò)\r\n   =========================== */\r\n\r\n.hist-table-wrap {\r\n  background: #ffffff;\r\n  border-radius: 12px;\r\n  border: 1px solid #e5e7eb;\r\n  box-shadow: 0 1px 4px rgba(15, 23, 42, 0.06);\r\n  padding: 12px 16px;\r\n  overflow-x: auto;\r\n}\r\n\r\n/* ===========================\r\n   üî∑ ÌÖåÏù¥Î∏î Ï†ÑÏ≤¥ Ïä§ÌÉÄÏùº\r\n   (priority-table Ïä§ÌÉÄÏùº 100% Ï†ÅÏö©)\r\n   =========================== */\r\n\r\n.hist-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 13px;\r\n  min-width: 1000px; /* Í∏∞Ï°¥ Ïú†ÏßÄ */\r\n}\r\n\r\n.hist-table thead th {\r\n  text-align: center;\r\n  padding: 10px 8px;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  background: #f9fafb;\r\n  white-space: nowrap;\r\n}\r\n\r\n.hist-table tbody td {\r\n  padding: 9px 8px;\r\n  border-bottom: 1px solid #f3f4f6;\r\n  color: #374151;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n}\r\n\r\n/* hover Ìö®Í≥º ÌÜµÏùº */\r\n.hist-table tbody tr:hover {\r\n  background: #f3f4ff;\r\n  transform: translateY(-1px);\r\n  transition:\r\n    background-color 0.12s ease,\r\n    transform 0.06s ease;\r\n}\r\n\r\n/* ===========================\r\n   üî∑ before / afterÎßå ÏôºÏ™Ω Ï†ïÎ†¨ + Ïó¨Îü¨ Ï§Ñ ÌóàÏö©\r\n   =========================== */\r\n\r\n.hist-table td.hist-before,\r\n.hist-table td.hist-after {\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n  overflow: visible;\r\n  text-overflow: unset;\r\n  text-align: left;\r\n}\r\n\r\n/* ===========================\r\n   üî∑ empty & loading\r\n   =========================== */\r\n\r\n.hist-empty,\r\n.hist-loading {\r\n  text-align: center;\r\n  padding: 14px 0;\r\n  color: #9ca3af;\r\n}\r\n\r\n/* ===========================\r\n   üî∑ ÌéòÏù¥Ïßï\r\n   =========================== */\r\n\r\n.hist-pagination {\r\n  margin-top: 14px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.hist-page-info {\r\n  font-size: 13px;\r\n}\r\n</style>\r\n","import script from \"./HistoryList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HistoryList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HistoryList.vue?vue&type=style&index=0&id=44a9f295&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-44a9f295\"]])\n\nexport default __exports__"],"names":["auth","useAuthStore","isSystem","computed","role","isOrgManager","searchField","ref","keyword","orderBy","typeCode","orgCode","managerCode","items","page","size","totalCount","loading","orgOptions","managerOptions","totalPages","value","Math","ceil","typeMap","BD1","BD2","BD3","BD4","BD5","BD6","BD7","BD8","getTypeName","code","modifierRoleMap","AA1","AA2","AA3","AA4","priorityMap","BB1","BB2","BB3","getModifierRoleName","roleCode","getChangeItemLabel","row","rawColumn","change_item","baseColumn","split","commonColumnLabelMap","status","answers","name","is_active","org_code","main_title","main_content","main_counsel_date","plan_from","plan_to","goal_p","publicContent_p","privateContent_p","actual_from","actual_to","goal","publicContent","privateContent","priority","detail_title","detail1_title","detail2_title","detail3_title","detail4_title","detail5_title","detail6_title","detail7_title","detail8_title","detail9_title","detail10_title","detail_content","detail1_content","detail2_content","detail3_content","detail4_content","detail5_content","detail6_content","detail7_content","detail8_content","detail9_content","detail10_content","detail_date","detail1_date","detail2_date","detail3_date","detail4_date","detail5_date","detail6_date","detail7_date","detail8_date","detail9_date","detail10_date","item_private","item1_private","item2_private","item3_private","item4_private","item5_private","item6_private","item7_private","item8_private","item9_private","item10_private","item_public","item1_public","item2_public","item3_public","item4_public","item5_public","item6_public","item7_public","item8_public","item9_public","item10_public","item_goal","item1_goal","item2_goal","item3_goal","item4_goal","item5_goal","item6_goal","item7_goal","item8_goal","item9_goal","item10_goal","formatHistoryValue","str","String","trim","startsWith","endsWith","obj","JSON","parse","Array","isArray","parts","Object","entries","map","key","val","mappedArr","v","join","e","formatDateTime","replace","substring","onFilterChange","fetchList","changePage","p","async","params","loginId","userId","res","axios","get","data","list","err","console","error","alert","fetchOrgOptions","fetchManagerOptions","raw","m","user_code","manager_code","manager_name","onMounted","__exports__"],"sourceRoot":""}