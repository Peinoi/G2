"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[566],{1566:function(e,a,l){l.r(a),l.d(a,{default:function(){return N}});l(8743);var t=l(641),u=l(9322),r=l(2644),n=l(9841),o=l(4335),i=l(5220),s=l(2798);const v=e=>((0,t.Qi)("data-v-3c66c0a6"),e=e(),(0,t.jt)(),e),d={class:"priority-page"},p=v(()=>(0,t.Lk)("h2",{class:"priority-title"},"이벤트 결과 승인 요청 목록",-1)),c={class:"priority-filters"},k=["placeholder","onKeyup"],_=v(()=>(0,t.Lk)("option",{value:""},"전체",-1)),L=v(()=>(0,t.Lk)("option",{value:"BA1"},"요청",-1)),y=v(()=>(0,t.Lk)("option",{value:"BA2"},"승인",-1)),h=v(()=>(0,t.Lk)("option",{value:"BA3"},"반려",-1)),g=[_,L,y,h],b=v(()=>(0,t.Lk)("option",{value:"latest"},"최신순",-1)),C=v(()=>(0,t.Lk)("option",{value:"oldest"},"오래된순",-1)),E=v(()=>(0,t.Lk)("option",{value:"name"},"이벤트명순",-1)),f=[b,C,E],A={class:"priority-card"},m={key:0,class:"priority-loading"},R={key:1,class:"priority-table"},B=v(()=>(0,t.Lk)("th",null,"승인코드",-1)),K=v(()=>(0,t.Lk)("th",null,"이벤트명",-1)),w=v(()=>(0,t.Lk)("th",null,"담당자",-1)),W={key:0},X=v(()=>(0,t.Lk)("th",null,"작성일",-1)),I=v(()=>(0,t.Lk)("th",null,"모집인원",-1)),Q=v(()=>(0,t.Lk)("th",null,"모집기간",-1)),V=v(()=>(0,t.Lk)("th",null,"시행기간",-1)),j=v(()=>(0,t.Lk)("th",null,"상태",-1)),U=v(()=>(0,t.Lk)("th",null,"처리일",-1)),q=["onClick"],S={key:0},$={key:0},x=["colspan"],z={key:2,class:"priority-pagination"},F=["disabled"],J={class:"priority-page-info"},M=["disabled"];var D={__name:"EventResultApproval",setup(e){const a=(0,i.rd)(),l=(0,s.n)(),v=(0,n.KR)([]),_=(0,n.KR)(1),L=(0,n.KR)(10),y=(0,n.KR)(0),h=(0,n.KR)(!1),b=(0,t.EW)(()=>y.value>0?Math.ceil(y.value/L.value):1),C=(0,n.KR)(""),E=(0,n.KR)(""),D=(0,n.KR)("latest"),G=(0,t.EW)(()=>l.role||l.user&&l.user.roleCode||""),H=(0,t.EW)(()=>l.userId||l.loginId||l.id||l.user&&l.user.userId||""),N=(0,t.EW)(()=>"AA3"===G.value),O=(0,t.EW)(()=>"AA4"===G.value),P=(0,t.EW)(()=>N.value||O.value),T=(0,t.EW)(()=>!N.value),Y=(0,t.EW)(()=>O.value?4:3),Z=(0,t.EW)(()=>O.value?"이벤트명/담당자/기관 검색":"이벤트명/담당자 검색"),ee={BA1:"요청",BA2:"승인",BA3:"반려"};function ae(){_.value=1,ne()}function le(e){return e?ee[e]||e:""}function te(e){switch(e){case"BA1":return"priority-badge-request";case"BA2":return"priority-badge-approve";case"BA3":return"priority-badge-reject";default:return"priority-badge-default"}}function ue(e){if(!e)return"";const a=String(e);return a.length>=10?a.slice(0,10):a}function re(e,a){const l=ue(e),t=ue(a);return l||t?l&&!t?l:!l&&t?t:`${l} ~ ${t}`:""}async function ne(){h.value=!0;try{const e=await o.A.get("/api/approvals/event-result",{params:{page:_.value,size:L.value,keyword:C.value,state:E.value,orderBy:D.value,loginId:H.value,role:G.value}}),a=e.data?.data||{},l=Array.isArray(a.rows)?a.rows:[];v.value=l,y.value=a.totalCount??0}catch(e){console.error("[EventResultApproval] loadList error:",e),v.value=[],y.value=0}finally{h.value=!1}}function oe(e){e<1||e>b.value||e!==_.value&&(_.value=e,ne())}function ie(e){a.push({name:"EventResultInfo",params:{resultCode:e.result_code},query:{role:Y.value}})}return(0,t.sV)(()=>(l.reload?.(),l.isLogin?P.value?void ne():(alert("기관 관리자 및 시스템 관리자만 접근할 수 있습니다."),void a.push("/")):(alert("로그인이 필요합니다."),void a.push({name:"SignIn"})))),(e,a)=>((0,t.uX)(),(0,t.CE)("div",d,[p,(0,t.Lk)("div",c,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),class:"priority-input",placeholder:Z.value,onKeyup:(0,u.jR)(ae,["enter"])},null,40,k),[[u.Jo,C.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>E.value=e),class:"priority-select",onChange:ae},g,544),[[u.u1,E.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),class:"priority-select",onChange:ae},f,544),[[u.u1,D.value]])]),(0,t.Lk)("div",A,[h.value?((0,t.uX)(),(0,t.CE)("div",m,"불러오는 중...")):((0,t.uX)(),(0,t.CE)("table",R,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[B,K,w,T.value?((0,t.uX)(),(0,t.CE)("th",W,"기관")):(0,t.Q3)("",!0),X,I,Q,V,j,U])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.approval_code,onClick:a=>ie(e),class:"priority-row"},[(0,t.Lk)("td",null,(0,r.v_)(e.approval_code),1),(0,t.Lk)("td",null,(0,r.v_)(e.event_name),1),(0,t.Lk)("td",null,(0,r.v_)(e.manager_name),1),T.value?((0,t.uX)(),(0,t.CE)("td",S,(0,r.v_)(e.org_name),1)):(0,t.Q3)("",!0),(0,t.Lk)("td",null,(0,r.v_)(ue(e.written_at||e.report_register_date||e.create_date)),1),(0,t.Lk)("td",null,(0,r.v_)(e.max_participants),1),(0,t.Lk)("td",null,(0,r.v_)(re(e.recruit_start_date,e.recruit_end_date)),1),(0,t.Lk)("td",null,(0,r.v_)(re(e.event_start_date,e.event_end_date)),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["priority-badge",te(e.state)])},(0,r.v_)(le(e.state)),3)]),(0,t.Lk)("td",null,(0,r.v_)("BA1"!==e.state&&e.approval_date?ue(e.approval_date):"-"),1)],8,q))),128)),0===v.value.length?((0,t.uX)(),(0,t.CE)("tr",$,[(0,t.Lk)("td",{class:"priority-empty",colspan:T.value?10:9}," 데이터가 없습니다. ",8,x)])):(0,t.Q3)("",!0)])])),!h.value&&b.value>1?((0,t.uX)(),(0,t.CE)("div",z,[(0,t.Lk)("button",{class:"priority-page-btn",disabled:1===_.value,onClick:a[3]||(a[3]=e=>oe(_.value-1))}," 이전 ",8,F),(0,t.Lk)("span",J,(0,r.v_)(_.value)+" / "+(0,r.v_)(b.value)+" (총 "+(0,r.v_)(y.value)+"건) ",1),(0,t.Lk)("button",{class:"priority-page-btn",disabled:_.value===b.value,onClick:a[4]||(a[4]=e=>oe(_.value+1))}," 다음 ",8,M)])):(0,t.Q3)("",!0)])]))}},G=l(6262);const H=(0,G.A)(D,[["__scopeId","data-v-3c66c0a6"]]);var N=H}}]);
//# sourceMappingURL=566.cabe1573.js.map