{"version":3,"file":"@/assets/js/781.80fafd74.js","mappings":"mxEAiXA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAWC,EAAAA,EAAAA,IAAI,IACrB,IAAIC,EAAM,EACV,MAAMC,EAAQA,IAAMD,IACdE,EAAgBC,GACpB,CAAC,QAAS,YAAYC,SAASC,OAAOF,GAAGG,eAG3C,SAASC,IACPT,EAASU,MAAMC,KAAK,CAAEC,GAAIT,IAASU,MAAO,GAAIC,KAAM,GAAIC,YAAa,IACvE,CACA,SAASC,EAAcC,GACrBjB,EAASU,MAAMQ,OAAOD,EAAG,EAC3B,CAGA,SAASE,GAAcF,GACrBjB,EAASU,MAAMO,GAAGF,YAAYJ,KAAK,CACjCC,GAAIT,IACJU,MAAO,GACPC,KAAM,GACNM,MAAO,IAEX,CACA,SAASC,GAAiBJ,EAAGK,GAC3BtB,EAASU,MAAMO,GAAGF,YAAYG,OAAOI,EAAG,EAC1C,CAGA,SAASC,GAAQN,EAAGK,GAClBtB,EAASU,MAAMO,GAAGF,YAAYO,GAAGF,MAAMT,KAAK,CAC1CC,GAAIT,IACJqB,KAAM,OACNC,KAAM,GACNC,UAAU,EACVC,QAAS,IAEb,CACA,SAASC,GAAWX,EAAGK,EAAGO,GACxB7B,EAASU,MAAMO,GAAGF,YAAYO,GAAGF,MAAMF,OAAOW,EAAG,EACnD,CAGA,SAASC,GAAaC,GAChB3B,EAAa2B,EAAKP,OACfQ,MAAMC,QAAQF,EAAKJ,WAAUI,EAAKJ,QAAU,IACrB,IAAxBI,EAAKJ,QAAQO,QACfH,EAAKJ,QAAQhB,KAAK,CAAEC,GAAIT,IAASgC,MAAO,MAE1CJ,EAAKJ,QAAU,EAEnB,CAGA,SAASS,GAAUnB,EAAGK,EAAGO,GACvB,MAAME,EAAO/B,EAASU,MAAMO,GAAGF,YAAYO,GAAGF,MAAMS,GACpDE,EAAKJ,QAAQhB,KAAK,CAAEC,GAAIT,IAASgC,MAAO,IAC1C,CACA,SAASE,GAAapB,EAAGK,EAAGO,EAAGS,GAC7B,MAAMP,EAAO/B,EAASU,MAAMO,GAAGF,YAAYO,GAAGF,MAAMS,GACpDE,EAAKJ,QAAQT,OAAOoB,EAAG,EACzB,CAGA,MAAMC,IAAUC,EAAAA,EAAAA,IAAS,KAAM,CAC7BC,SAAU,CACRC,WAAY,MACZC,OAAQ,SACRC,WAAY,EACZC,YAAY,IAAIC,MAAOC,cAAcC,MAAM,EAAG,KAEhDhD,SAAUA,EAASU,MAAMuC,IAAI,CAACC,EAAKC,KAAS,CAC1CC,MAAOD,EAAO,EACdtC,MAAOqC,EAAIrC,MACXC,KAAMoC,EAAIpC,KACVC,YAAamC,EAAInC,YAAYkC,IAAI,CAACI,EAAKC,KAAW,CAChDF,MAAOE,EAAS,EAChBzC,MAAOwC,EAAIxC,MACXC,KAAMuC,EAAIvC,KACVM,MAAOiC,EAAIjC,MAAM6B,IAAI,CAACM,EAAIC,KAAS,CACjCJ,MAAOI,EAAO,EACdC,cAAeF,EAAG/B,KAClBkC,cAAeH,EAAG9B,KAClBkC,YAAaJ,EAAG7B,SAAW,IAAM,IAEjCkC,cAAexD,EAAamD,EAAG/B,MAC3B+B,EAAG5B,QAAQsB,IAAI,CAACY,EAAIhC,KAClB,MAAMiC,EAAOD,EAAG1B,OAAS,GACzB,MAAO,CACLA,MAAO2B,EACPpD,MAAOoD,EACPV,MAAOvB,EAAI,KAGf,iBAMNkC,IAAc9D,EAAAA,EAAAA,KAAI,GAExB,SAAS+D,KACPD,GAAYrD,OAAQ,CACtB,CAGAuD,eAAeC,KACb,IACE,MAAM,KAAEC,SAAeC,EAAAA,EAAMC,KAAK,kBAAmB9B,GAAQ7B,OACzDyD,GAAMG,SACRC,MAAM,cACNzE,EAAOa,KAAK,oBAEZ4D,MAAM,QAEV,CAAE,MAAOC,GACPC,QAAQC,MAAM,cAAeF,GAC7BD,MAAM,WAAaC,EAAEG,UAAUR,MAAMS,SAAWJ,EAAEI,SACpD,CACF,CAEA,SAASC,KACP/E,EAAOa,KAAK,CAAEmE,KAAM,iBACtB,C,ssLCveA,MAAMC,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE,S","sources":["webpack://vue-material-dashboard-2/./src/views/SurveyNew.vue","webpack://vue-material-dashboard-2/./src/views/SurveyNew.vue?5380"],"sourcesContent":["<template>\r\n  <section class=\"p-6 max-w-5xl mx-auto\">\r\n    <!-- í—¤ë” -->\r\n    <header class=\"flex items-center justify-between header-row\">\r\n      <h2 class=\"text-2xl font-semibold\">ìƒˆ ë²„ì „ ì‘ì„±</h2>\r\n\r\n      <div class=\"space-x-2\">\r\n        <MaterialButton\r\n          color=\"dark\"\r\n          size=\"sm\"\r\n          variant=\"outlined\"\r\n          @click=\"goBack\"\r\n        >\r\n          â† ëª©ë¡\r\n        </MaterialButton>\r\n      </div>\r\n    </header>\r\n\r\n    <!-- ë¹„ì–´ìˆì„ ë•Œ -->\r\n    <div v-if=\"sections.length === 0\" class=\"empty-state\">\r\n      <div class=\"text-gray-600 mb-4\">ì•„ì§ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</div>\r\n      <MaterialButton color=\"dark\" size=\"sm\" @click=\"addSection\">\r\n        + í•­ëª© ì¶”ê°€\r\n      </MaterialButton>\r\n    </div>\r\n\r\n    <!-- ì„¹ì…˜ ìˆì„ ë•Œ -->\r\n    <div v-else class=\"space-y-6\">\r\n      <div v-for=\"(sec, sIndex) in sections\" :key=\"sec.id\" class=\"section-card\">\r\n        <!-- ì„¹ì…˜ í—¤ë” -->\r\n        <div class=\"section-header\">\r\n          <h3 class=\"section-title\">í•­ëª© #{{ sIndex + 1 }}</h3>\r\n          <div class=\"space-x-2\">\r\n            <MaterialButton\r\n              color=\"dark\"\r\n              size=\"sm\"\r\n              variant=\"outlined\"\r\n              @click=\"addSubsection(sIndex)\"\r\n            >\r\n              ì„¸ë¶€í•­ëª© ì¶”ê°€\r\n            </MaterialButton>\r\n            <MaterialButton\r\n              color=\"dark\"\r\n              size=\"sm\"\r\n              variant=\"outlined\"\r\n              @click=\"removeSection(sIndex)\"\r\n            >\r\n              ì‚­ì œ\r\n            </MaterialButton>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ì„¹ì…˜ ê¸°ë³¸ ì •ë³´ -->\r\n        <div class=\"grid md:grid-cols-2 gap-3 mb-4\">\r\n          <div>\r\n            <MaterialInput\r\n              v-model=\"sec.title\"\r\n              :id=\"`sec-title-${sIndex}`\"\r\n              label=\"í•­ëª© ì œëª©\"\r\n              variant=\"static\"\r\n              size=\"default\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <MaterialInput\r\n              v-model=\"sec.desc\"\r\n              :id=\"`sec-desc-${sIndex}`\"\r\n              label=\"í•­ëª© ì„¤ëª…\"\r\n              variant=\"static\"\r\n              size=\"default\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ì„¸ë¶€í•­ëª©ë“¤ -->\r\n        <div class=\"space-y-4\">\r\n          <div\r\n            v-for=\"(sub, subIndex) in sec.subsections\"\r\n            :key=\"sub.id\"\r\n            class=\"subsection-card\"\r\n          >\r\n            <!-- ì„œë¸Œ í—¤ë” -->\r\n            <div class=\"sub-header\">\r\n              <div class=\"font-medium text-sm\">\r\n                ì„¸ë¶€í•­ëª© #{{ subIndex + 1 }}\r\n              </div>\r\n              <div class=\"space-x-2\">\r\n                <MaterialButton\r\n                  color=\"dark\"\r\n                  size=\"sm\"\r\n                  variant=\"outlined\"\r\n                  @click=\"addItem(sIndex, subIndex)\"\r\n                >\r\n                  ì§ˆë¬¸ ì¶”ê°€\r\n                </MaterialButton>\r\n                <MaterialButton\r\n                  color=\"dark\"\r\n                  size=\"sm\"\r\n                  variant=\"outlined\"\r\n                  @click=\"removeSubsection(sIndex, subIndex)\"\r\n                >\r\n                  ì‚­ì œ\r\n                </MaterialButton>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- ì„œë¸Œ ê¸°ë³¸ ì •ë³´ -->\r\n            <div class=\"grid md:grid-cols-2 gap-3 mb-3\">\r\n              <div>\r\n                <MaterialInput\r\n                  v-model=\"sub.title\"\r\n                  :id=\"`sub-title-${sIndex}-${subIndex}`\"\r\n                  label=\"ì„¸ë¶€í•­ëª© ì œëª©\"\r\n                  variant=\"static\"\r\n                  size=\"default\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <MaterialInput\r\n                  v-model=\"sub.desc\"\r\n                  :id=\"`sub-desc-${sIndex}-${subIndex}`\"\r\n                  label=\"ì„¸ë¶€í•­ëª© ì„¤ëª…\"\r\n                  variant=\"static\"\r\n                  size=\"default\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <!-- ì§ˆë¬¸ë“¤ -->\r\n            <div class=\"space-y-3\">\r\n              <div\r\n                v-for=\"(it, iIndex) in sub.items\"\r\n                :key=\"it.id\"\r\n                class=\"question-card\"\r\n              >\r\n                <div class=\"question-header\">\r\n                  <div class=\"font-medium text-sm text-gray-800\">\r\n                    ì§ˆë¬¸ #{{ iIndex + 1 }}\r\n                  </div>\r\n                  <MaterialButton\r\n                    color=\"dark\"\r\n                    size=\"sm\"\r\n                    variant=\"outlined\"\r\n                    @click=\"removeItem(sIndex, subIndex, iIndex)\"\r\n                  >\r\n                    ì‚­ì œ\r\n                  </MaterialButton>\r\n                </div>\r\n\r\n                <div class=\"grid md:grid-cols-3 gap-3\">\r\n                  <div>\r\n                    <label class=\"block text-xs font-medium text-gray-500 mb-1\">\r\n                      ì§ˆë¬¸ íƒ€ì…\r\n                    </label>\r\n                    <select\r\n                      v-model=\"it.type\"\r\n                      class=\"w-full input-basic\"\r\n                      @change=\"onChangeType(it)\"\r\n                    >\r\n                      <option value=\"TEXT\">ë‹¨ë‹µí˜•</option>\r\n                      <option value=\"TEXTAREA\">ì„œìˆ í˜•</option>\r\n                      <option value=\"RADIO\">ë‹¨ì¼ ì„ íƒ</option>\r\n                      <option value=\"CHECKBOX\">ë‹¤ì¤‘ ì„ íƒ</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div class=\"md:col-span-2\">\r\n                    <MaterialInput\r\n                      v-model=\"it.text\"\r\n                      :id=\"`q-text-${sIndex}-${subIndex}-${iIndex}`\"\r\n                      label=\"ì§ˆë¬¸ ë‚´ìš©\"\r\n                      variant=\"static\"\r\n                      size=\"default\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- í•„ìˆ˜ ì—¬ë¶€ (ìŠ¤ìœ„ì¹˜) -->\r\n                <div class=\"mt-2\">\r\n                  <MaterialSwitch\r\n                    :id=\"`required-${sIndex}-${subIndex}-${iIndex}`\"\r\n                    :name=\"`required-${sIndex}-${subIndex}-${iIndex}`\"\r\n                    :checked=\"it.required\"\r\n                    labelClass=\"text-xs text-gray-700\"\r\n                    @click=\"it.required = !it.required\"\r\n                  >\r\n                    í•„ìˆ˜ ì§ˆë¬¸\r\n                  </MaterialSwitch>\r\n                </div>\r\n\r\n                <!-- ì˜µì…˜ (ë¼ë²¨ë§Œ) -->\r\n                <div v-if=\"isChoiceType(it.type)\" class=\"mt-4 border-t pt-3\">\r\n                  <div class=\"flex items-center justify-between mb-2\">\r\n                    <div class=\"text-xs font-medium text-gray-700\">\r\n                      ì˜µì…˜ ({{ it.options.length }})\r\n                    </div>\r\n                    <MaterialButton\r\n                      color=\"dark\"\r\n                      size=\"sm\"\r\n                      variant=\"outlined\"\r\n                      @click=\"addOption(sIndex, subIndex, iIndex)\"\r\n                    >\r\n                      + ì˜µì…˜ ì¶”ê°€\r\n                    </MaterialButton>\r\n                  </div>\r\n\r\n                  <div class=\"space-y-2\">\r\n                    <div\r\n                      v-for=\"(op, oIndex) in it.options\"\r\n                      :key=\"op.id\"\r\n                      class=\"option-row\"\r\n                    >\r\n                      <!-- ë²ˆí˜¸ -->\r\n                      <div class=\"text-[11px] text-gray-500\">\r\n                        #{{ oIndex + 1 }}\r\n                      </div>\r\n\r\n                      <!-- ë¼ë²¨ë§Œ ì‚¬ìš© -->\r\n                      <div>\r\n                        <MaterialInput\r\n                          v-model=\"op.label\"\r\n                          :id=\"`label-${op.id}`\"\r\n                          label=\"ì˜µì…˜ ë¼ë²¨\"\r\n                          variant=\"static\"\r\n                          size=\"default\"\r\n                        />\r\n                      </div>\r\n\r\n                      <!-- ì‚­ì œ ë²„íŠ¼ -->\r\n                      <div class=\"flex justify-end\">\r\n                        <MaterialButton\r\n                          color=\"dark\"\r\n                          size=\"sm\"\r\n                          variant=\"outlined\"\r\n                          @click=\"\r\n                            removeOption(sIndex, subIndex, iIndex, oIndex)\r\n                          \"\r\n                        >\r\n                          ì‚­ì œ\r\n                        </MaterialButton>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <!-- // ì§ˆë¬¸ í•˜ë‚˜ -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ -->\r\n      <div class=\"form-actions\">\r\n        <MaterialButton\r\n          color=\"dark\"\r\n          size=\"sm\"\r\n          variant=\"outlined\"\r\n          @click=\"addSection\"\r\n        >\r\n          + í•­ëª© ì¶”ê°€\r\n        </MaterialButton>\r\n\r\n        <!-- ì‘ì„± ì™„ë£Œ ë²„íŠ¼ -->\r\n        <MaterialButton\r\n          color=\"dark\"\r\n          size=\"sm\"\r\n          class=\"px-5\"\r\n          @click=\"openPreview\"\r\n        >\r\n          ì‘ì„± ì™„ë£Œ\r\n        </MaterialButton>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- =======================\r\n        PREVIEW MODAL\r\n    ======================= -->\r\n    <div v-if=\"previewOpen\" class=\"modal-overlay\">\r\n      <div class=\"modal-box\">\r\n        <h3 class=\"text-xl font-semibold mb-4\">ì‘ì„± ë‚´ìš© í™•ì¸</h3>\r\n\r\n        <div class=\"preview-scroll space-y-4 pr-2\">\r\n          <div\r\n            v-for=\"(sec, sIdx) in sections\"\r\n            :key=\"sec.id\"\r\n            class=\"preview-section\"\r\n          >\r\n            <h4 class=\"font-semibold text-lg mb-1\">\r\n              í•­ëª© #{{ sIdx + 1 }} â€” {{ sec.title || 'ì œëª© ì—†ìŒ' }}\r\n            </h4>\r\n            <p class=\"text-gray-600 mb-3\">\r\n              {{ sec.desc || 'ì„¤ëª… ì—†ìŒ' }}\r\n            </p>\r\n\r\n            <div\r\n              v-for=\"(sub, subIdx) in sec.subsections\"\r\n              :key=\"sub.id\"\r\n              class=\"preview-subsection\"\r\n            >\r\n              <h5 class=\"font-medium\">\r\n                ì„¸ë¶€í•­ëª© #{{ subIdx + 1 }} â€” {{ sub.title || 'ì œëª© ì—†ìŒ' }}\r\n              </h5>\r\n              <p class=\"text-gray-500 mb-2\">\r\n                {{ sub.desc || 'ì„¤ëª… ì—†ìŒ' }}\r\n              </p>\r\n\r\n              <div\r\n                v-for=\"(it, iIdx) in sub.items\"\r\n                :key=\"it.id\"\r\n                class=\"preview-question\"\r\n              >\r\n                <div class=\"font-medium mb-1\">\r\n                  ì§ˆë¬¸ #{{ iIdx + 1 }}\r\n                  <span v-if=\"it.required\" class=\"text-red-600 text-sm\">\r\n                    *í•„ìˆ˜\r\n                  </span>\r\n                </div>\r\n\r\n                <div class=\"text-gray-800 mb-2\">\r\n                  {{ it.text || 'ì§ˆë¬¸ ë‚´ìš© ì—†ìŒ' }}\r\n                </div>\r\n\r\n                <!-- ì˜µì…˜ -->\r\n                <div v-if=\"isChoiceType(it.type)\" class=\"mt-2\">\r\n                  <div class=\"text-xs text-gray-600 mb-1\">ì˜µì…˜</div>\r\n                  <ul class=\"list-disc pl-6 text-sm\">\r\n                    <li v-for=\"op in it.options\" :key=\"op.id\">\r\n                      {{ op.label || 'ë¼ë²¨ ì—†ìŒ' }}\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-actions\">\r\n          <MaterialButton\r\n            color=\"dark\"\r\n            size=\"sm\"\r\n            variant=\"outlined\"\r\n            @click=\"previewOpen = false\"\r\n          >\r\n            ìˆ˜ì •í•˜ê¸°\r\n          </MaterialButton>\r\n\r\n          <MaterialButton\r\n            color=\"dark\"\r\n            size=\"sm\"\r\n            class=\"px-5\"\r\n            @click=\"saveDraft\"\r\n          >\r\n            ìµœì¢… ì œì¶œí•˜ê¸°\r\n          </MaterialButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\n\r\nimport MaterialButton from '@/components/MaterialButton.vue';\r\nimport MaterialInput from '@/components/MaterialInput.vue';\r\nimport MaterialSwitch from '@/components/MaterialSwitch.vue';\r\n\r\nconst router = useRouter();\r\nconst sections = ref([]);\r\nlet uid = 1;\r\nconst newId = () => uid++;\r\nconst isChoiceType = (t) =>\r\n  ['RADIO', 'CHECKBOX'].includes(String(t).toUpperCase());\r\n\r\n// ì„¹ì…˜\r\nfunction addSection() {\r\n  sections.value.push({ id: newId(), title: '', desc: '', subsections: [] });\r\n}\r\nfunction removeSection(i) {\r\n  sections.value.splice(i, 1);\r\n}\r\n\r\n// ì„œë¸Œì„¹ì…˜\r\nfunction addSubsection(i) {\r\n  sections.value[i].subsections.push({\r\n    id: newId(),\r\n    title: '',\r\n    desc: '',\r\n    items: [],\r\n  });\r\n}\r\nfunction removeSubsection(i, j) {\r\n  sections.value[i].subsections.splice(j, 1);\r\n}\r\n\r\n// ì§ˆë¬¸\r\nfunction addItem(i, j) {\r\n  sections.value[i].subsections[j].items.push({\r\n    id: newId(),\r\n    type: 'TEXT',\r\n    text: '',\r\n    required: false,\r\n    options: [],\r\n  });\r\n}\r\nfunction removeItem(i, j, k) {\r\n  sections.value[i].subsections[j].items.splice(k, 1);\r\n}\r\n\r\n// íƒ€ì… ë³€ê²½ ì‹œ ì˜µì…˜ ì´ˆê¸°í™”\r\nfunction onChangeType(item) {\r\n  if (isChoiceType(item.type)) {\r\n    if (!Array.isArray(item.options)) item.options = [];\r\n    if (item.options.length === 0)\r\n      item.options.push({ id: newId(), label: '' }); // ğŸ”¥ value/order ì œê±°\r\n  } else {\r\n    item.options = [];\r\n  }\r\n}\r\n\r\n// ì˜µì…˜ ì¶”ê°€/ì‚­ì œ\r\nfunction addOption(i, j, k) {\r\n  const item = sections.value[i].subsections[j].items[k];\r\n  item.options.push({ id: newId(), label: '' }); // ğŸ”¥ value/order ì œê±°\r\n}\r\nfunction removeOption(i, j, k, o) {\r\n  const item = sections.value[i].subsections[j].items[k];\r\n  item.options.splice(o, 1); // ğŸ”¥ order ì¬ì •ë ¬ í•„ìš” ì—†ìŒ\r\n}\r\n\r\n// ì €ì¥í•  ë°ì´í„° êµ¬ì¡° (ë°±ì—”ë“œ insertSurveyì— ë§ì¶¤)\r\nconst payload = computed(() => ({\r\n  template: {\r\n    version_no: '2.0',\r\n    status: 'ACTIVE',\r\n    created_by: 1,\r\n    created_at: new Date().toISOString().slice(0, 10),\r\n  },\r\n  sections: sections.value.map((sec, sIdx) => ({\r\n    order: sIdx + 1,\r\n    title: sec.title,\r\n    desc: sec.desc,\r\n    subsections: sec.subsections.map((sub, subIdx) => ({\r\n      order: subIdx + 1,\r\n      title: sub.title,\r\n      desc: sub.desc,\r\n      items: sub.items.map((it, iIdx) => ({\r\n        order: iIdx + 1,\r\n        question_type: it.type,\r\n        question_text: it.text,\r\n        is_required: it.required ? 'Y' : 'N',\r\n        // ğŸ”¥ ì„ íƒí˜•ì¼ ë•Œë§Œ option_values ì±„ì›€\r\n        option_values: isChoiceType(it.type)\r\n          ? it.options.map((op, k) => {\r\n              const base = op.label || ''; // ë¼ë²¨ë§Œ ì‚¬ìš©\r\n              return {\r\n                label: base,\r\n                value: base, // valueëŠ” labelê³¼ ë™ì¼í•˜ê²Œ ìë™ ì„¸íŒ…\r\n                order: k + 1, // ìˆœì„œëŠ” ì—¬ê¸°ì„œ ìë™ ìƒì„±\r\n              };\r\n            })\r\n          : null,\r\n      })),\r\n    })),\r\n  })),\r\n}));\r\n\r\nconst previewOpen = ref(false);\r\n\r\nfunction openPreview() {\r\n  previewOpen.value = true;\r\n}\r\n\r\n// âœ… ì €ì¥ í•¨ìˆ˜ (ë°±ì—”ë“œ ì—°ë™)\r\nasync function saveDraft() {\r\n  try {\r\n    const { data } = await axios.post('/api/survey/new', payload.value);\r\n    if (data?.success) {\r\n      alert('ì¡°ì‚¬ì§€ ì €ì¥ ì™„ë£Œ!');\r\n      router.push('/survey-version');\r\n    } else {\r\n      alert('ì €ì¥ ì‹¤íŒ¨');\r\n    }\r\n  } catch (e) {\r\n    console.error('save error:', e);\r\n    alert('ì„œë²„ ì˜¤ë¥˜: ' + (e.response?.data?.message || e.message));\r\n  }\r\n}\r\n\r\nfunction goBack() {\r\n  router.push({ name: 'surveyVersion' });\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nsection {\r\n  color: #111;\r\n}\r\n\r\n/* í—¤ë” í•œ ì¤„ ê³ ì • */\r\n.header-row {\r\n  flex-wrap: nowrap;\r\n  margin-bottom: 1.25rem;\r\n}\r\n\r\n:deep(.input-group) {\r\n  margin-top: 0.2rem;\r\n  margin-bottom: 0.2rem;\r\n}\r\n\r\n/* ë¹ˆ ìƒíƒœ */\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 4rem 1rem;\r\n  border-radius: 0.75rem;\r\n  border: 1px dashed #d1d5db;\r\n  color: #4b5563;\r\n  background: #f9fafb;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n/* ê³µí†µ ì¸í’‹ ìŠ¤íƒ€ì¼ (select ë“±ì—ì„œ ì‚¬ìš©) */\r\n.input-basic {\r\n  border-radius: 0.5rem;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 0.5rem 0.75rem;\r\n  font-size: 0.875rem;\r\n  outline: none;\r\n  background-color: #ffffff;\r\n  transition:\r\n    border-color 0.15s ease,\r\n    box-shadow 0.15s ease;\r\n}\r\n\r\n.input-basic:focus {\r\n  border-color: #111827;\r\n  box-shadow: 0 0 0 1px rgba(17, 24, 39, 0.2);\r\n}\r\n\r\n/* ì„¹ì…˜ ì¹´ë“œ */\r\n.section-card {\r\n  border-radius: 0.9rem;\r\n  border: 1px solid #e5e7eb;\r\n  background-color: #ffffff;\r\n  padding: 1.25rem;\r\n  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);\r\n}\r\n\r\n/* ì„¹ì…˜ í—¤ë” ì¤„ */\r\n.section-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding-bottom: 0.75rem;\r\n  margin-bottom: 1rem;\r\n  border-bottom: 1px solid #e5e7eb;\r\n}\r\n\r\n.section-title {\r\n  font-size: 0.95rem;\r\n  letter-spacing: 0.04em;\r\n  text-transform: uppercase;\r\n  color: #4b5563;\r\n}\r\n\r\n/* ì„¸ë¶€í•­ëª© ì¹´ë“œ */\r\n.subsection-card {\r\n  border-radius: 0.75rem;\r\n  border: 1px solid #e5e7eb;\r\n  background-color: #f9fafb;\r\n  padding: 0.9rem;\r\n}\r\n\r\n/* ì„¸ë¶€í•­ëª© í—¤ë” */\r\n.sub-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n/* ì§ˆë¬¸ ì¹´ë“œ */\r\n.question-card {\r\n  border-radius: 0.75rem;\r\n  border: 1px dashed #d1d5db;\r\n  padding: 0.9rem;\r\n  background-color: #ffffff;\r\n}\r\n\r\n.question-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n/* ì˜µì…˜ í–‰ (ë²ˆí˜¸ + ë¼ë²¨ + ì‚­ì œ ë²„íŠ¼) */\r\n.option-row {\r\n  display: grid;\r\n  grid-template-columns: 40px minmax(0, 1fr) 80px; /* ğŸ”¥ 3ì»¬ëŸ¼ìœ¼ë¡œ ë³€ê²½ */\r\n  gap: 0.5rem;\r\n  align-items: center;\r\n}\r\n\r\n/* ëª¨ë‹¬ */\r\n.modal-overlay {\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999;\r\n}\r\n\r\n.modal-box {\r\n  background: white;\r\n  border-radius: 0.85rem;\r\n  padding: 1.5rem;\r\n  width: 100%;\r\n  max-width: 720px;\r\n  max-height: 90vh;\r\n  /* ğŸ”¥ ì—¬ê¸°ë¶€í„° ì¶”ê°€/ìˆ˜ì • */\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden; /* ëª¨ë‹¬ ë°”ê¹¥ìœ¼ë¡œ ë„˜ì¹˜ëŠ” ê²ƒë§Œ ì˜ë¼ì£¼ê³  */\r\n}\r\n\r\n/* ë‚´ìš© ë¶€ë¶„ë§Œ ìŠ¤í¬ë¡¤ ë˜ê²Œ */\r\n.preview-scroll {\r\n  flex: 1; /* ë‚¨ëŠ” ë†’ì´ë¥¼ ë‹¤ ì°¨ì§€í•˜ê³  */\r\n  overflow-y: auto; /* ì—¬ê¸°ë§Œ ì„¸ë¡œ ìŠ¤í¬ë¡¤ */\r\n  margin-bottom: 0.75rem; /* ë²„íŠ¼ê³¼ ì‚´ì§ ê°„ê²© */\r\n}\r\n\r\n/* í”„ë¦¬ë·° ì•ˆìª½ ì¹´ë“œë“¤ */\r\n.preview-section {\r\n  border-radius: 0.75rem;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 0.9rem;\r\n  background-color: #f9fafb;\r\n}\r\n\r\n.preview-subsection {\r\n  border-radius: 0.75rem;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 0.75rem;\r\n  background-color: #ffffff;\r\n  margin-top: 0.75rem;\r\n}\r\n\r\n.preview-question {\r\n  border-radius: 0.6rem;\r\n  border: 1px dashed #d1d5db;\r\n  padding: 0.6rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.form-actions {\r\n  margin-top: 10px;\r\n  padding-top: 0.9rem;\r\n  border-top: 1px solid #e5e7eb;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 0.5rem;\r\n}\r\n/* <style scoped> ì•ˆì— ì¶”ê°€ */\r\n.question-add-wrap {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n</style>\r\n","import script from \"./SurveyNew.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SurveyNew.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SurveyNew.vue?vue&type=style&index=0&id=f483e8ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f483e8ba\"]])\n\nexport default __exports__"],"names":["router","useRouter","sections","ref","uid","newId","isChoiceType","t","includes","String","toUpperCase","addSection","value","push","id","title","desc","subsections","removeSection","i","splice","addSubsection","items","removeSubsection","j","addItem","type","text","required","options","removeItem","k","onChangeType","item","Array","isArray","length","label","addOption","removeOption","o","payload","computed","template","version_no","status","created_by","created_at","Date","toISOString","slice","map","sec","sIdx","order","sub","subIdx","it","iIdx","question_type","question_text","is_required","option_values","op","base","previewOpen","openPreview","async","saveDraft","data","axios","post","success","alert","e","console","error","response","message","goBack","name","__exports__"],"sourceRoot":""}