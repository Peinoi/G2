{"version":3,"file":"@/assets/js/446.3a3f5cbd.js","mappings":"wrCAwHA,MAAMA,GAASC,EAAAA,EAAAA,MAETC,GAAUC,EAAAA,EAAAA,IAAI,CAClBC,YAAa,GACbC,UAAW,GACXC,YAAa,KAGTC,GAAOJ,EAAAA,EAAAA,IAAI,IACXK,GAAeC,EAAAA,EAAAA,IAAS,KAE5B,MAAMC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,SAAW,MAClDC,EAAOL,EAAKK,KACZC,EAAWN,EAAKO,UAEtB,IAAIC,EAAOX,EAAKY,MAGhB,GAAa,QAATJ,EACFG,EAAOA,EAAKE,OAAQC,GAAMA,EAAEJ,YAAcD,QACrC,GAAa,QAATD,EACT,MAAO,GAQT,OAJIb,EAAQiB,MAAMf,cAChBc,EAAOA,EAAKE,OAAQC,GAAMA,EAAEC,eAAiBpB,EAAQiB,MAAMf,cAGtDc,IAGHK,GAAapB,EAAAA,EAAAA,IAAI,GAGjBqB,GAAOrB,EAAAA,EAAAA,IAAI,GACXsB,GAAOtB,EAAAA,EAAAA,IAAI,IAEXuB,GAAajB,EAAAA,EAAAA,IAAS,IAC1BkB,KAAKC,IAAI,EAAGD,KAAKE,KAAKN,EAAWJ,MAAQM,EAAKN,SAI1CW,EAAOC,UACX,IACE,MAAMC,QAAYC,EAAAA,EAAMC,IAAI,4BAA6B,CACvDC,OAAQ,CACN/B,YAAaF,EAAQiB,MAAMf,aAAe,KAC1CC,UAAWH,EAAQiB,MAAMd,WAAa,KACtCC,YAAaJ,EAAQiB,MAAMb,aAAe,KAC1CkB,KAAMA,EAAKL,MACXM,KAAMA,EAAKN,SAIS,YAApBa,EAAII,KAAKC,SACX9B,EAAKY,MAAQa,EAAII,KAAKA,KAAK7B,KAC3BgB,EAAWJ,MAAQa,EAAII,KAAKA,KAAKb,WAErC,CAAE,MAAOe,GACPC,QAAQC,MAAMF,GACdG,MAAM,iBACR,GAGF,SAASC,IACPlB,EAAKL,MAAQ,EACbW,GACF,CAEA,SAASa,IACPzC,EAAQiB,MAAMf,YAAc,GAC5BF,EAAQiB,MAAMd,UAAY,GAC1BH,EAAQiB,MAAMb,YAAc,GAC5BkB,EAAKL,MAAQ,EACbW,GACF,CAEA,SAASc,EAAWC,GACdA,EAAO,GAAKA,EAAOnB,EAAWP,QAClCK,EAAKL,MAAQ0B,EACbf,IACF,CAEA,SAASgB,EAAWC,GAClB,OAAKA,EACEC,OAAOD,GAAGE,MAAM,EAAG,IADX,EAEjB,CAGA,SAASC,EAAUC,GACjB,MAAMC,EAAM,CACVC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,OAEP,OAAOL,EAAID,IAASA,GAAQ,EAC9B,CAGA,SAASO,EAAgBP,GACvB,OAAQA,GACN,IAAK,MACH,MAAO,yBACT,IAAK,MACH,MAAO,yBACT,IAAK,MACH,MAAO,wBACT,IAAK,MACH,MAAO,yBACT,IAAK,MACH,MAAO,wBACT,QACE,MAAO,yBAEb,CAGA,MAAMQ,EAAkBA,CAACC,EAAYC,KACnC7D,EAAO8D,KAAK,CACVC,KAAM,mBACN5B,OAAQ,CAAE6B,UAAWJ,EAAYK,UAAWJ,M,OAIhDK,EAAAA,EAAAA,IAAUpC,G,+yDCjPV,MAAMqC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue-material-dashboard-2/./src/views/EventAttendanceList.vue","webpack://vue-material-dashboard-2/./src/views/EventAttendanceList.vue?1e08"],"sourcesContent":["<!-- src/views/EventAttendanceList.vue -->\r\n<template>\r\n  <section class=\"priority-page\">\r\n    <h2 class=\"priority-title\">참가자 목록</h2>\r\n\r\n    <!-- 검색 영역 -->\r\n    <div class=\"priority-filters\">\r\n      <input\r\n        v-model=\"filters.eventName\"\r\n        class=\"priority-input\"\r\n        placeholder=\"이벤트명\"\r\n        @keyup.enter=\"search\"\r\n      />\r\n\r\n      <input\r\n        v-model=\"filters.managerName\"\r\n        class=\"priority-input\"\r\n        placeholder=\"메인매니저명\"\r\n        @keyup.enter=\"search\"\r\n      />\r\n\r\n      <select\r\n        v-model=\"filters.applyStatus\"\r\n        class=\"priority-select\"\r\n        @change=\"search\"\r\n      >\r\n        <option value=\"\">전체</option>\r\n        <option value=\"DE1\">요청</option>\r\n        <option value=\"DE2\">승인</option>\r\n        <option value=\"DE4\">취소</option>\r\n      </select>\r\n\r\n      <div class=\"flex gap-2\">\r\n        <button class=\"priority-btn-search\" @click=\"search\">검색</button>\r\n        <button class=\"priority-btn-reset\" @click=\"reset\">초기화</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 테이블 -->\r\n    <div class=\"priority-card\">\r\n      <table class=\"priority-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>신청코드</th>\r\n            <th>이벤트명</th>\r\n            <th>신청자</th>\r\n            <th>신청일</th>\r\n            <th>메인매니저</th>\r\n            <th>신청상태</th>\r\n            <!-- <th>참석상태</th> -->\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          <tr\r\n            v-for=\"(row, idx) in filteredRows\"\r\n            :key=\"row.apply_code || idx\"\r\n            class=\"priority-row\"\r\n            @click=\"viewApplyDetail(row.apply_code, row.event_code)\"\r\n          >\r\n            <td>{{ row.apply_code }}</td>\r\n            <td>{{ row.event_name }}</td>\r\n            <td>{{ row.applicant_name }}</td>\r\n            <td>{{ formatDate(row.apply_date) }}</td>\r\n            <td>{{ row.manager_name }}</td>\r\n\r\n            <td>\r\n              <span\r\n                :class=\"['priority-badge', stateBadgeClass(row.apply_status)]\"\r\n              >\r\n                {{ codeLabel(row.apply_status_name || \"\") }}\r\n              </span>\r\n            </td>\r\n\r\n            <!-- <td>\r\n              <span\r\n                :class=\"['priority-badge', stateBadgeClass(row.attend_status)]\"\r\n              >\r\n                {{ codeLabel(row.attend_status_name) }}\r\n              </span>\r\n            </td> -->\r\n          </tr>\r\n\r\n          <tr v-if=\"filteredRows.length === 0\">\r\n            <td class=\"priority-empty\" colspan=\"6\">조회 결과가 없습니다.</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- 페이징 -->\r\n    <div class=\"priority-pagination\">\r\n      <button\r\n        class=\"priority-page-btn\"\r\n        :disabled=\"page <= 1\"\r\n        @click=\"changePage(page - 1)\"\r\n      >\r\n        이전\r\n      </button>\r\n\r\n      <span class=\"priority-page-info\"\r\n        >{{ page }} / {{ totalPages }} (총 {{ totalCount }}건)</span\r\n      >\r\n\r\n      <button\r\n        class=\"priority-page-btn\"\r\n        :disabled=\"page >= totalPages\"\r\n        @click=\"changePage(page + 1)\"\r\n      >\r\n        다음\r\n      </button>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst router = useRouter();\r\n\r\nconst filters = ref({\r\n  applyStatus: \"\",\r\n  eventName: \"\",\r\n  managerName: \"\",\r\n});\r\n\r\nconst rows = ref([]);\r\nconst filteredRows = computed(() => {\r\n  // 로그인 정보\r\n  const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\r\n  const role = user.role;\r\n  const userCode = user.user_code;\r\n\r\n  let list = rows.value;\r\n\r\n  // role 필터\r\n  if (role === \"AA2\") {\r\n    list = list.filter((r) => r.user_code === userCode);\r\n  } else if (role !== \"AA3\") {\r\n    return [];\r\n  }\r\n\r\n  // 상태 필터\r\n  if (filters.value.applyStatus) {\r\n    list = list.filter((r) => r.apply_status === filters.value.applyStatus);\r\n  }\r\n\r\n  return list;\r\n});\r\n\r\nconst totalCount = ref(0);\r\n\r\n// 페이징\r\nconst page = ref(1);\r\nconst size = ref(20);\r\n\r\nconst totalPages = computed(() =>\r\n  Math.max(1, Math.ceil(totalCount.value / size.value))\r\n);\r\n\r\n// API 호출\r\nconst load = async () => {\r\n  try {\r\n    const res = await axios.get(\"/api/event/attendanceList\", {\r\n      params: {\r\n        applyStatus: filters.value.applyStatus || null,\r\n        eventName: filters.value.eventName || null,\r\n        managerName: filters.value.managerName || null,\r\n        page: page.value,\r\n        size: size.value,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === \"success\") {\r\n      rows.value = res.data.data.rows;\r\n      totalCount.value = res.data.data.totalCount;\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(\"서버 오류가 발생했습니다.\");\r\n  }\r\n};\r\n\r\nfunction search() {\r\n  page.value = 1;\r\n  load();\r\n}\r\n\r\nfunction reset() {\r\n  filters.value.applyStatus = \"\";\r\n  filters.value.eventName = \"\";\r\n  filters.value.managerName = \"\";\r\n  page.value = 1;\r\n  load();\r\n}\r\n\r\nfunction changePage(next) {\r\n  if (next < 1 || next > totalPages.value) return;\r\n  page.value = next;\r\n  load();\r\n}\r\n\r\nfunction formatDate(v) {\r\n  if (!v) return \"\";\r\n  return String(v).slice(0, 10);\r\n}\r\n\r\n// 상태 라벨\r\nfunction codeLabel(code) {\r\n  const map = {\r\n    DE1: \"요청\",\r\n    DE2: \"승인\",\r\n    DE4: \"취소\",\r\n    DG1: \"참석\",\r\n    DG2: \"미참석\",\r\n  };\r\n  return map[code] || code || \"\";\r\n}\r\n\r\n// badge 색상\r\nfunction stateBadgeClass(code) {\r\n  switch (code) {\r\n    case \"DE1\":\r\n      return \"priority-badge-request\"; // 요청\r\n    case \"DE2\":\r\n      return \"priority-badge-approve\"; // 승인\r\n    case \"DE4\":\r\n      return \"priority-badge-reject\"; // 취소\r\n    case \"DG1\":\r\n      return \"priority-badge-approve\"; // 참석\r\n    case \"DG2\":\r\n      return \"priority-badge-reject\"; // 미참석\r\n    default:\r\n      return \"priority-badge-default\";\r\n  }\r\n}\r\n\r\n// 이벤트 상세화면 보기\r\nconst viewApplyDetail = (apply_code, event_code) => {\r\n  router.push({\r\n    name: \"EventMyApplyInfo\",\r\n    params: { applyCode: apply_code, eventCode: event_code },\r\n  });\r\n};\r\n\r\nonMounted(load);\r\n</script>\r\n\r\n<style scoped>\r\n/* ========== priority 공통 디자인 그대로 사용 ========== */\r\n* {\r\n  font-size: 15px;\r\n}\r\n/* 페이지 전체 */\r\n.priority-page {\r\n  width: 1600px; /* 전체 폭 고정 */\r\n  margin: 24px auto 40px; /* 좌우 가운데 정렬 */\r\n  padding: 0 16px;\r\n}\r\n\r\n.priority-title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  margin-bottom: 16px;\r\n  color: #111827;\r\n}\r\n\r\n.priority-filters {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 12px;\r\n  align-items: center;\r\n}\r\n\r\n.priority-input,\r\n.priority-select {\r\n  padding: 7px 8px;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n}\r\n\r\n.priority-btn-search {\r\n  background: #2563eb;\r\n  color: white;\r\n  border-radius: 6px;\r\n  padding: 6px 12px;\r\n  font-size: 12px;\r\n}\r\n\r\n.priority-btn-reset {\r\n  border: 1px solid #d1d5db;\r\n  padding: 6px 12px;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n}\r\n\r\n/* 카드 */\r\n.priority-card {\r\n  width: 100%; /* 부모 폭에 맞춤 */\r\n  max-width: 1600px; /* 최대 폭 동일 */\r\n  margin: 0 auto;\r\n  padding: 12px 16px;\r\n  overflow-x: hidden;\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  border: 1px solid #e5e7eb;\r\n  box-shadow: 0 1px 4px rgba(15, 23, 42, 0.06);\r\n}\r\n\r\n/* 테이블 */\r\n.priority-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 15px;\r\n  table-layout: fixed; /* 컬럼 폭 고정 */\r\n}\r\n\r\n/* th 스타일 */\r\n.priority-table thead th {\r\n  text-align: center;\r\n  padding: 6px 4px; /* 패딩 최소화 */\r\n  font-size: 15px;\r\n  color: #6b7280;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  background: #f9fafb;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n/* td 기본 스타일 */\r\n.priority-table tbody td {\r\n  padding: 6px 4px; /* 패딩 최소화 */\r\n  border-bottom: 1px solid #f3f4f6;\r\n  text-align: center;\r\n  font-size: 15px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n/* 컬럼 폭 조정 */\r\n.priority-table th:nth-child(1),\r\n.priority-table td:nth-child(1) {\r\n  width: 6%;\r\n} /* 신청코드 */\r\n.priority-table th:nth-child(2),\r\n.priority-table td:nth-child(2) {\r\n  width: 30%;\r\n} /* 이벤트명 */\r\n.priority-table th:nth-child(3),\r\n.priority-table td:nth-child(3) {\r\n  width: 14%;\r\n} /* 신청자 */\r\n.priority-table th:nth-child(4),\r\n.priority-table td:nth-child(4) {\r\n  width: 12%;\r\n} /* 신청일 */\r\n.priority-table th:nth-child(5),\r\n.priority-table td:nth-child(5) {\r\n  width: 14%;\r\n} /* 메인매니저 */\r\n.priority-table th:nth-child(6),\r\n.priority-table td:nth-child(6) {\r\n  width: 14%;\r\n} /* 신청상태 */\r\n\r\n/* 이름 컬럼 왼쪽 정렬 */\r\n.priority-table tbody td:nth-child(2) {\r\n  text-align: left;\r\n}\r\n\r\n/* 버튼/상태 컬럼 중앙 */\r\n.priority-table tbody td:nth-child(1),\r\n.priority-table tbody td:nth-child(3),\r\n.priority-table tbody td:nth-child(5),\r\n.priority-table tbody td:nth-child(6) {\r\n  text-align: center;\r\n}\r\n\r\n/* hover */\r\n.priority-row:hover {\r\n  background: #f3f4ff;\r\n}\r\n\r\n.priority-empty {\r\n  text-align: center;\r\n  padding: 14px 0;\r\n  color: #9ca3af;\r\n}\r\n\r\n.priority-pagination {\r\n  margin-top: 14px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 12px;\r\n}\r\n\r\n.priority-page-btn {\r\n  padding: 4px 10px;\r\n  border-radius: 999px;\r\n  border: 1px solid #d1d5db;\r\n  background: #f9fafb;\r\n  font-size: 12px;\r\n}\r\n\r\n.priority-page-btn:disabled {\r\n  opacity: 0.5;\r\n}\r\n\r\n.priority-badge {\r\n  padding: 2px 8px;\r\n  border-radius: 999px;\r\n  font-size: 11px;\r\n  border: 1px solid transparent;\r\n}\r\n\r\n.priority-badge-request {\r\n  background: #eef2ff;\r\n  color: #3730a3;\r\n  border-color: #c7d2fe;\r\n}\r\n\r\n.priority-badge-approve {\r\n  background: #ecfdf5;\r\n  color: #166534;\r\n  border-color: #bbf7d0;\r\n}\r\n\r\n.priority-badge-reject {\r\n  background: #fef2f2;\r\n  color: #b91c1c;\r\n  border-color: #fecaca;\r\n}\r\n\r\n.priority-badge-default {\r\n  background: #f3f4f6;\r\n  color: #4b5563;\r\n  border-color: #e5e7eb;\r\n}\r\n\r\n* {\r\n  font-size: 15px;\r\n}\r\n</style>\r\n","import script from \"./EventAttendanceList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EventAttendanceList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EventAttendanceList.vue?vue&type=style&index=0&id=3497ebcc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3497ebcc\"]])\n\nexport default __exports__"],"names":["router","useRouter","filters","ref","applyStatus","eventName","managerName","rows","filteredRows","computed","user","JSON","parse","localStorage","getItem","role","userCode","user_code","list","value","filter","r","apply_status","totalCount","page","size","totalPages","Math","max","ceil","load","async","res","axios","get","params","data","status","err","console","error","alert","search","reset","changePage","next","formatDate","v","String","slice","codeLabel","code","map","DE1","DE2","DE4","DG1","DG2","stateBadgeClass","viewApplyDetail","apply_code","event_code","push","name","applyCode","eventCode","onMounted","__exports__"],"sourceRoot":""}