"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[208],{2208:function(e,a,l){l.r(a),l.d(a,{default:function(){return H}});l(8743);var t=l(641),u=l(9322),r=l(2644),n=l(9841),o=l(4335),i=l(5220),v=l(2798);const s=e=>((0,t.Qi)("data-v-c5de751c"),e=e(),(0,t.jt)(),e),d={class:"priority-page"},p=s(()=>(0,t.Lk)("h2",{class:"priority-title"},"이벤트 계획 승인 요청 목록",-1)),c={class:"priority-filters"},k=["onKeyup"],_=s(()=>(0,t.Lk)("option",{value:""},"전체",-1)),y=s(()=>(0,t.Lk)("option",{value:"BA1"},"요청",-1)),L=s(()=>(0,t.Lk)("option",{value:"BA2"},"승인",-1)),h=s(()=>(0,t.Lk)("option",{value:"BA3"},"반려",-1)),b=[_,y,L,h],g=s(()=>(0,t.Lk)("option",{value:"latest"},"최신순",-1)),f=s(()=>(0,t.Lk)("option",{value:"oldest"},"오래된순",-1)),A=s(()=>(0,t.Lk)("option",{value:"name"},"이벤트명순",-1)),C=[g,f,A],E={class:"priority-card"},m={key:0,class:"priority-loading"},B={key:1,class:"priority-table"},K=s(()=>(0,t.Lk)("th",null,"승인코드",-1)),w=s(()=>(0,t.Lk)("th",null,"이벤트명",-1)),R=s(()=>(0,t.Lk)("th",null,"담당자",-1)),X={key:0},W=s(()=>(0,t.Lk)("th",null,"작성일",-1)),I=s(()=>(0,t.Lk)("th",null,"모집인원",-1)),Q=s(()=>(0,t.Lk)("th",null,"모집기간",-1)),V=s(()=>(0,t.Lk)("th",null,"시행기간",-1)),j=s(()=>(0,t.Lk)("th",null,"상태",-1)),U=s(()=>(0,t.Lk)("th",null,"처리일",-1)),q=["onClick"],P={key:0},$={key:0},x=["colspan"],z={key:2,class:"priority-pagination"},F=["disabled"],J={class:"priority-page-info"},M=["disabled"];var S={__name:"EventPlanApproval",setup(e){const a=(0,i.rd)(),l=(0,v.n)(),s=(0,n.KR)([]),_=(0,n.KR)(1),y=(0,n.KR)(10),L=(0,n.KR)(0),h=(0,n.KR)(!1),g=(0,t.EW)(()=>L.value>0?Math.ceil(L.value/y.value):1),f=(0,n.KR)(""),A=(0,n.KR)(""),S=(0,n.KR)("latest"),D=(0,t.EW)(()=>l.role||l.user&&l.user.roleCode||""),G=(0,t.EW)(()=>l.userId||l.loginId||l.id||l.user&&l.user.userId||""),H=(0,t.EW)(()=>"AA3"===D.value),N=(0,t.EW)(()=>"AA4"===D.value),O=(0,t.EW)(()=>H.value||N.value),T=(0,t.EW)(()=>!H.value),Y=(0,t.EW)(()=>N.value?4:3),Z={BA1:"요청",BA2:"승인",BA3:"반려"};function ee(){_.value=1,re()}function ae(e){return e?Z[e]||e:""}function le(e){switch(e){case"BA1":return"priority-badge-request";case"BA2":return"priority-badge-approve";case"BA3":return"priority-badge-reject";default:return"priority-badge-default"}}function te(e){if(!e)return"";const a=String(e);return a.length>=10?a.slice(0,10):a}function ue(e,a){const l=te(e),t=te(a);return l||t?l&&!t?l:!l&&t?t:`${l} ~ ${t}`:""}async function re(){h.value=!0;try{const e=await o.A.get("/api/approvals/event-plan",{params:{page:_.value,size:y.value,keyword:f.value,state:A.value,orderBy:S.value,loginId:G.value,role:D.value}}),a=e.data?.data||{},l=Array.isArray(a.rows)?a.rows:[];s.value=l,L.value=a.totalCount??0}catch(e){console.error("[EventPlanApproval] loadList error:",e),s.value=[],L.value=0}finally{h.value=!1}}function ne(e){e<1||e>g.value||e!==_.value&&(_.value=e,re())}function oe(e){a.push({name:"EventApplyInfo",params:{eventCode:e.event_code},query:{role:Y.value}})}return(0,t.sV)(()=>{if(!O.value)return alert("기관 관리자 및 시스템 관리자만 접근할 수 있습니다."),void a.push("/");re()}),(e,a)=>((0,t.uX)(),(0,t.CE)("div",d,[p,(0,t.Lk)("div",c,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),class:"priority-input",placeholder:"이벤트명/담당자/기관 검색",onKeyup:(0,u.jR)(ee,["enter"])},null,40,k),[[u.Jo,f.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),class:"priority-select",onChange:ee},b,544),[[u.u1,A.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),class:"priority-select",onChange:ee},C,544),[[u.u1,S.value]])]),(0,t.Lk)("div",E,[h.value?((0,t.uX)(),(0,t.CE)("div",m,"불러오는 중...")):((0,t.uX)(),(0,t.CE)("table",B,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[K,w,R,T.value?((0,t.uX)(),(0,t.CE)("th",X,"기관")):(0,t.Q3)("",!0),W,I,Q,V,j,U])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.value,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.approval_code,onClick:a=>oe(e),class:"priority-row"},[(0,t.Lk)("td",null,(0,r.v_)(e.approval_code),1),(0,t.Lk)("td",null,(0,r.v_)(e.event_name),1),(0,t.Lk)("td",null,(0,r.v_)(e.manager_name),1),T.value?((0,t.uX)(),(0,t.CE)("td",P,(0,r.v_)(e.org_name),1)):(0,t.Q3)("",!0),(0,t.Lk)("td",null,(0,r.v_)(te(e.written_at||e.create_date)),1),(0,t.Lk)("td",null,(0,r.v_)(e.max_participants),1),(0,t.Lk)("td",null,(0,r.v_)(ue(e.recruit_start_date,e.recruit_end_date)),1),(0,t.Lk)("td",null,(0,r.v_)(ue(e.event_start_date,e.event_end_date)),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["priority-badge",le(e.state)])},(0,r.v_)(ae(e.state)),3)]),(0,t.Lk)("td",null,(0,r.v_)("BA1"!==e.state&&e.approval_date?te(e.approval_date):"-"),1)],8,q))),128)),0===s.value.length?((0,t.uX)(),(0,t.CE)("tr",$,[(0,t.Lk)("td",{class:"priority-empty",colspan:T.value?10:9}," 데이터가 없습니다. ",8,x)])):(0,t.Q3)("",!0)])])),!h.value&&g.value>1?((0,t.uX)(),(0,t.CE)("div",z,[(0,t.Lk)("button",{class:"priority-page-btn",disabled:1===_.value,onClick:a[3]||(a[3]=e=>ne(_.value-1))}," 이전 ",8,F),(0,t.Lk)("span",J,(0,r.v_)(_.value)+" / "+(0,r.v_)(g.value)+" (총 "+(0,r.v_)(L.value)+"건) ",1),(0,t.Lk)("button",{class:"priority-page-btn",disabled:_.value===g.value,onClick:a[4]||(a[4]=e=>ne(_.value+1))}," 다음 ",8,M)])):(0,t.Q3)("",!0)])]))}},D=l(6262);const G=(0,D.A)(S,[["__scopeId","data-v-c5de751c"]]);var H=G}}]);
//# sourceMappingURL=208.7600d99c.js.map