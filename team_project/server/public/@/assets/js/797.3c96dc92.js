"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[797],{9797:function(e,l,a){a.r(l),a.d(l,{default:function(){return P}});a(8743);var t=a(641),u=a(9322),r=a(2644),i=a(9841),o=a(4335),n=a(5220),s=a(2798);const p=e=>((0,t.Qi)("data-v-44f64fcd"),e=e(),(0,t.jt)(),e),v={class:"priority-page"},d=p(()=>(0,t.Lk)("h2",{class:"priority-title"},"지원결과 승인 요청 목록",-1)),c={class:"priority-filters"},k=["onKeyup"],y=p(()=>(0,t.Lk)("option",{value:""},"전체",-1)),L=p(()=>(0,t.Lk)("option",{value:"BA1"},"요청",-1)),_=p(()=>(0,t.Lk)("option",{value:"BA2"},"승인",-1)),h=p(()=>(0,t.Lk)("option",{value:"BA3"},"반려",-1)),f=[y,L,_,h],b=p(()=>(0,t.Lk)("option",{value:"latest"},"최신순",-1)),g=p(()=>(0,t.Lk)("option",{value:"oldest"},"오래된순",-1)),C=p(()=>(0,t.Lk)("option",{value:"name"},"이름순",-1)),B=p(()=>(0,t.Lk)("option",{value:"priority"},"우선순위순",-1)),A=[b,g,C,B],m={class:"priority-card"},E={key:0,class:"priority-loading"},w={key:1,class:"priority-table"},K=p(()=>(0,t.Lk)("th",null,"승인코드",-1)),R=p(()=>(0,t.Lk)("th",null,"이름",-1)),X=p(()=>(0,t.Lk)("th",null,"장애유형",-1)),W=p(()=>(0,t.Lk)("th",null,"보호자",-1)),I=p(()=>(0,t.Lk)("th",null,"담당자",-1)),Q={key:0},V=p(()=>(0,t.Lk)("th",null,"결과 작성일",-1)),j=p(()=>(0,t.Lk)("th",null,"우선순위",-1)),S=p(()=>(0,t.Lk)("th",null,"상태",-1)),U=p(()=>(0,t.Lk)("th",null,"처리일",-1)),q=["onClick"],z={key:0},D={key:0},F=["colspan"],J={key:2,class:"priority-pagination"},M=["disabled"],x={class:"priority-page-info"},G=["disabled"];var H={__name:"SupportResultApproval",setup(e){const l=(0,n.rd)(),a=(0,s.n)(),p=(0,i.KR)([]),y=(0,i.KR)(1),L=(0,i.KR)(10),_=(0,i.KR)(0),h=(0,i.KR)(!1),b=(0,t.EW)(()=>_.value>0?Math.ceil(_.value/L.value):1),g=(0,i.KR)(""),C=(0,i.KR)(""),B=(0,i.KR)("latest"),H=(0,t.EW)(()=>a.role||a.user&&a.user.roleCode||""),N=(0,t.EW)(()=>a.userId||a.loginId||a.id||a.user&&a.user.userId||""),O=(0,t.EW)(()=>"AA3"===H.value),P=(0,t.EW)(()=>"AA4"===H.value),T=(0,t.EW)(()=>O.value||P.value),Y=(0,t.EW)(()=>!O.value),Z=(0,t.EW)(()=>P.value?4:3),$={BA1:"요청",BA2:"승인",BA3:"반려",BB1:"긴급",BB2:"중점",BB3:"준비"};function ee(){y.value=1,re()}function le(e){return e?$[e]||e:""}function ae(e){switch(e){case"BB1":return"priority-chip-danger";case"BB2":return"priority-chip-warning";case"BB3":return"priority-chip-info";default:return"priority-chip-default"}}function te(e){switch(e){case"BA1":return"priority-badge-request";case"BA2":return"priority-badge-approve";case"BA3":return"priority-badge-reject";default:return"priority-badge-default"}}function ue(e){if(!e)return"";const l=String(e);return l.length>=10?l.slice(0,10):l}async function re(){h.value=!0;try{const e=await o.A.get("/api/approvals/support-result",{params:{page:y.value,size:L.value,keyword:g.value,state:C.value,orderBy:B.value,loginId:N.value,role:H.value}}),l=e.data?.data||{},a=Array.isArray(l.rows)?l.rows:[];p.value=a,_.value=l.totalCount??0}catch(e){console.error("[SupportResultApproval] loadList error:",e),p.value=[],_.value=0}finally{h.value=!1}}function ie(e){e<1||e>b.value||e!==y.value&&(y.value=e,re())}function oe(e){l.push({name:"resultDetail",params:{resultCode:e.result_code},query:{role:Z.value,submitCode:e.submit_code,planCode:e.plan_code}})}return(0,t.sV)(()=>{if(!T.value)return alert("기관 관리자 및 시스템 관리자만 접근할 수 있습니다."),void l.push("/");re()}),(e,l)=>((0,t.uX)(),(0,t.CE)("div",v,[d,(0,t.Lk)("div",c,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),class:"priority-input",placeholder:"이름/보호자/기관 검색",onKeyup:(0,u.jR)(ee,["enter"])},null,40,k),[[u.Jo,g.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e),class:"priority-select",onChange:ee},f,544),[[u.u1,C.value]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>B.value=e),class:"priority-select",onChange:ee},A,544),[[u.u1,B.value]])]),(0,t.Lk)("div",m,[h.value?((0,t.uX)(),(0,t.CE)("div",E,"불러오는 중...")):((0,t.uX)(),(0,t.CE)("table",w,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[K,R,X,W,I,Y.value?((0,t.uX)(),(0,t.CE)("th",Q,"기관")):(0,t.Q3)("",!0),V,j,S,U])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(p.value,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.approval_code,onClick:l=>oe(e),class:"priority-row"},[(0,t.Lk)("td",null,(0,r.v_)(e.approval_code),1),(0,t.Lk)("td",null,(0,r.v_)(e.child_name||"본인"),1),(0,t.Lk)("td",null,(0,r.v_)(e.disability_type),1),(0,t.Lk)("td",null,(0,r.v_)(e.parent_name),1),(0,t.Lk)("td",null,(0,r.v_)(e.manager_name),1),Y.value?((0,t.uX)(),(0,t.CE)("td",z,(0,r.v_)(e.org_name),1)):(0,t.Q3)("",!0),(0,t.Lk)("td",null,(0,r.v_)(ue(e.written_at)),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["priority-chip",ae(e.priority_level)])},(0,r.v_)(le(e.priority_level)),3)]),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["priority-badge",te(e.state)])},(0,r.v_)(le(e.state)),3)]),(0,t.Lk)("td",null,(0,r.v_)("BA1"!==e.state&&e.approval_date?ue(e.approval_date):"-"),1)],8,q))),128)),0===p.value.length?((0,t.uX)(),(0,t.CE)("tr",D,[(0,t.Lk)("td",{class:"priority-empty",colspan:Y.value?10:9}," 데이터가 없습니다. ",8,F)])):(0,t.Q3)("",!0)])])),!h.value&&b.value>1?((0,t.uX)(),(0,t.CE)("div",J,[(0,t.Lk)("button",{class:"priority-page-btn",disabled:1===y.value,onClick:l[3]||(l[3]=e=>ie(y.value-1))}," 이전 ",8,M),(0,t.Lk)("span",x,(0,r.v_)(y.value)+" / "+(0,r.v_)(b.value)+" (총 "+(0,r.v_)(_.value)+"건) ",1),(0,t.Lk)("button",{class:"priority-page-btn",disabled:y.value===b.value,onClick:l[4]||(l[4]=e=>ie(y.value+1))}," 다음 ",8,G)])):(0,t.Q3)("",!0)])]))}},N=a(6262);const O=(0,N.A)(H,[["__scopeId","data-v-44f64fcd"]]);var P=O}}]);
//# sourceMappingURL=797.3c96dc92.js.map