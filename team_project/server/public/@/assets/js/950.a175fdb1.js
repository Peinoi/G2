"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[950],{3950:function(t,a,l){l.r(a),l.d(a,{default:function(){return I}});l(8743),l(3725),l(5019),l(1339);var e=l(641),s=l(2644),n=l(9841),u=l(4335),r=l(2798),c=l(5220);const i=t=>((0,e.Qi)("data-v-86497a42"),t=t(),(0,e.jt)(),t),o={class:"as-page"},d=i(()=>(0,e.Lk)("h2",{class:"as-title"},"나의 지원 신청 현황",-1)),k={key:0,class:"as-no-auth"},p=i(()=>(0,e.Lk)("p",null,"접근 권한이 없습니다. (일반 이용자 전용 페이지)",-1)),C=[p],_={key:1},v={class:"as-table-wrap"},L={class:"as-table"},h=i(()=>(0,e.Lk)("thead",null,[(0,e.Lk)("tr",null,[(0,e.Lk)("th",null,"No"),(0,e.Lk)("th",null,"이름"),(0,e.Lk)("th",null,"보호자"),(0,e.Lk)("th",null,"담당자"),(0,e.Lk)("th",null,"기관"),(0,e.Lk)("th",null,"지원 신청일"),(0,e.Lk)("th",null,"우선순위"),(0,e.Lk)("th",null,"계획 현황"),(0,e.Lk)("th",null,"결과 현황")])],-1)),m={key:0},y=i(()=>(0,e.Lk)("td",{colspan:"9",class:"as-empty"},"불러오는 중...",-1)),N=[y],f={key:1},b=i(()=>(0,e.Lk)("td",{colspan:"9",class:"as-empty"},"조회된 신청 내역이 없습니다.",-1)),E=[b],O=["onClick"],g=["onClick"],A=["onClick"];var D={__name:"ApplicationStatus",setup(t){const a=(0,r.n)(),l=(0,c.rd)(),i=(0,e.EW)(()=>"AA1"===a.role),p=(0,n.KR)(!1),y=(0,n.KR)([]),b=t=>t?t.substring(0,10):"-",D=t=>{switch(t){case"BB1":return"긴급";case"BB2":return"중점";case"BB3":return"준비";default:return"-"}};function w(t){return Array.isArray(t)?t:t?String(t).split(",").map(t=>t.trim()).filter(Boolean):[]}function G(t){switch(t){case"CC1":case"CC2":return"NONE";case"CC3":case"CC4":return"ONGOING";case"CC5":return"DONE";default:return"NONE"}}function I(t){const a=w(t),l=a.map(G),e=a.length;return 0===e?"-":l.includes("ONGOING")?`진행 ${e}건`:l.includes("DONE")?`완료 ${e}건`:"-"}function B(t){switch(t){case"CD1":case"CD2":case"CD3":return"NONE";case"CD4":return"ONGOING";case"CD5":return"DONE";default:return"NONE"}}function X(t){const a=w(t),l=a.filter(t=>"CD3"!==t),e=l.length;if(0===e)return"-";const s=l.map(B);return s.includes("ONGOING")?`진행 ${e}건`:s.includes("DONE")?`완료 ${e}건`:"-"}const $=t=>{t&&l.push(`/survey/submission/${t}`)},S=t=>{t&&l.push({name:"planList",query:{submitCode:t}})},K=t=>{t&&l.push({name:"resultList",query:{submitCode:t}})},j=async()=>{p.value=!0;try{const t=await u.A.get("/api/applications/mine",{params:{loginId:a.userId,role:a.role}});console.log("[ApplicationStatus] raw response:",t.data);const l=t.data?.data??[];let e=[];Array.isArray(l)?e=l:l&&"object"===typeof l&&(e=[l]),y.value=e.filter(t=>t&&t.submit_code)}catch(t){console.error("[ApplicationStatus] 조회 실패:",t)}finally{p.value=!1}};return(0,e.sV)(()=>{i.value&&j()}),(t,a)=>((0,e.uX)(),(0,e.CE)("div",o,[d,i.value?((0,e.uX)(),(0,e.CE)("div",_,[(0,e.Lk)("div",v,[(0,e.Lk)("table",L,[h,(0,e.Lk)("tbody",null,[p.value?((0,e.uX)(),(0,e.CE)("tr",m,N)):0===y.value.length?((0,e.uX)(),(0,e.CE)("tr",f,E)):((0,e.uX)(!0),(0,e.CE)(e.FK,{key:2},(0,e.pI)(y.value,(t,a)=>((0,e.uX)(),(0,e.CE)("tr",{key:t.submit_code||a},[(0,e.Lk)("td",null,(0,s.v_)(a+1),1),(0,e.Lk)("td",null,(0,s.v_)(t.child_name||"본인"),1),(0,e.Lk)("td",null,(0,s.v_)(t.name),1),(0,e.Lk)("td",null,(0,s.v_)(t.assi_name||"-"),1),(0,e.Lk)("td",null,(0,s.v_)(t.org_name||"-"),1),(0,e.Lk)("td",{class:"as-link",onClick:a=>$(t.submit_code)},(0,s.v_)(b(t.survey_date)),9,O),(0,e.Lk)("td",null,[(0,e.Lk)("span",{class:(0,s.C4)(["as-tag","lvl-"+t.priority_level])},(0,s.v_)(D(t.priority_level)),3)]),(0,e.Lk)("td",{class:"as-link",onClick:a=>S(t.submit_code)},(0,s.v_)(I(t.plan_status_list||[])),9,g),(0,e.Lk)("td",{class:"as-link",onClick:a=>K(t.submit_code)},(0,s.v_)(X(t.result_status_list||[])),9,A)]))),128))])])])])):((0,e.uX)(),(0,e.CE)("div",k,C))]))}},w=l(6262);const G=(0,w.A)(D,[["__scopeId","data-v-86497a42"]]);var I=G}}]);
//# sourceMappingURL=950.a175fdb1.js.map