"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[446],{5446:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});t(8743),t(3725),t(5019);var l=t(641),n=t(9322),u=t(2644),r=t(9841),s=t(4335),o=t(5220);const p=e=>((0,l.Qi)("data-v-3497ebcc"),e=e(),(0,l.jt)(),e),i={class:"priority-page"},c=p(()=>(0,l.Lk)("h2",{class:"priority-title"},"참가자 목록",-1)),v={class:"priority-filters"},d=["onKeyup"],y=["onKeyup"],k=p(()=>(0,l.Lk)("option",{value:""},"전체",-1)),L=p(()=>(0,l.Lk)("option",{value:"DE1"},"요청",-1)),m=p(()=>(0,l.Lk)("option",{value:"DE2"},"승인",-1)),_=p(()=>(0,l.Lk)("option",{value:"DE4"},"취소",-1)),b=[k,L,m,_],g={class:"priority-card"},h={class:"priority-table"},f=p(()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"신청코드"),(0,l.Lk)("th",null,"이벤트명"),(0,l.Lk)("th",null,"신청자"),(0,l.Lk)("th",null,"신청일"),(0,l.Lk)("th",null,"메인매니저"),(0,l.Lk)("th",null,"신청상태")])],-1)),C=["onClick"],E={key:0},D=p(()=>(0,l.Lk)("td",{class:"priority-empty",colspan:"6"},"조회 결과가 없습니다.",-1)),N=[D],S={class:"priority-pagination"},K=["disabled"],A={class:"priority-page-info"},R=["disabled"];var w={__name:"EventAttendanceList",setup(e){const a=(0,o.rd)(),t=(0,r.KR)({applyStatus:"",eventName:"",managerName:""}),p=(0,r.KR)([]),k=(0,l.EW)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),a=e.role,l=e.user_code;let n=p.value;if("AA2"===a)n=n.filter(e=>e.user_code===l);else if("AA3"!==a)return[];return t.value.applyStatus&&(n=n.filter(e=>e.apply_status===t.value.applyStatus)),n}),L=(0,r.KR)(0),m=(0,r.KR)(1),_=(0,r.KR)(20),D=(0,l.EW)(()=>Math.max(1,Math.ceil(L.value/_.value))),w=async()=>{try{const e=await s.A.get("/api/event/attendanceList",{params:{applyStatus:t.value.applyStatus||null,eventName:t.value.eventName||null,managerName:t.value.managerName||null,page:m.value,size:_.value}});"success"===e.data.status&&(p.value=e.data.data.rows,L.value=e.data.data.totalCount)}catch(e){console.error(e),alert("서버 오류가 발생했습니다.")}};function j(){m.value=1,w()}function G(){t.value.applyStatus="",t.value.eventName="",t.value.managerName="",m.value=1,w()}function I(e){e<1||e>D.value||(m.value=e,w())}function V(e){return e?String(e).slice(0,10):""}function X(e){const a={DE1:"요청",DE2:"승인",DE4:"취소",DG1:"참석",DG2:"미참석"};return a[e]||e||""}function J(e){switch(e){case"DE1":return"priority-badge-request";case"DE2":return"priority-badge-approve";case"DE4":return"priority-badge-reject";case"DG1":return"priority-badge-approve";case"DG2":return"priority-badge-reject";default:return"priority-badge-default"}}const M=(e,t)=>{a.push({name:"EventMyApplyInfo",params:{applyCode:e,eventCode:t}})};return(0,l.sV)(w),(e,a)=>((0,l.uX)(),(0,l.CE)("section",i,[c,(0,l.Lk)("div",v,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.eventName=e),class:"priority-input",placeholder:"이벤트명",onKeyup:(0,n.jR)(j,["enter"])},null,40,d),[[n.Jo,t.value.eventName]]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.managerName=e),class:"priority-input",placeholder:"메인매니저명",onKeyup:(0,n.jR)(j,["enter"])},null,40,y),[[n.Jo,t.value.managerName]]),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.applyStatus=e),class:"priority-select",onChange:j},b,544),[[n.u1,t.value.applyStatus]]),(0,l.Lk)("div",{class:"flex gap-2"},[(0,l.Lk)("button",{class:"priority-btn-search",onClick:j},"검색"),(0,l.Lk)("button",{class:"priority-btn-reset",onClick:G},"초기화")])]),(0,l.Lk)("div",g,[(0,l.Lk)("table",h,[f,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(k.value,(e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:e.apply_code||a,class:"priority-row",onClick:a=>M(e.apply_code,e.event_code)},[(0,l.Lk)("td",null,(0,u.v_)(e.apply_code),1),(0,l.Lk)("td",null,(0,u.v_)(e.event_name),1),(0,l.Lk)("td",null,(0,u.v_)(e.applicant_name),1),(0,l.Lk)("td",null,(0,u.v_)(V(e.apply_date)),1),(0,l.Lk)("td",null,(0,u.v_)(e.manager_name),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,u.C4)(["priority-badge",J(e.apply_status)])},(0,u.v_)(X(e.apply_status_name||"")),3)])],8,C))),128)),0===k.value.length?((0,l.uX)(),(0,l.CE)("tr",E,N)):(0,l.Q3)("",!0)])])]),(0,l.Lk)("div",S,[(0,l.Lk)("button",{class:"priority-page-btn",disabled:m.value<=1,onClick:a[3]||(a[3]=e=>I(m.value-1))}," 이전 ",8,K),(0,l.Lk)("span",A,(0,u.v_)(m.value)+" / "+(0,u.v_)(D.value)+" (총 "+(0,u.v_)(L.value)+"건)",1),(0,l.Lk)("button",{class:"priority-page-btn",disabled:m.value>=D.value,onClick:a[4]||(a[4]=e=>I(m.value+1))}," 다음 ",8,R)])]))}},j=t(6262);const G=(0,j.A)(w,[["__scopeId","data-v-3497ebcc"]]);var I=G}}]);
//# sourceMappingURL=446.3a3f5cbd.js.map