"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[225],{6225:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ee}});l(8743),l(3725),l(5019);var a=l(641),s=l(9322),u=l(2644),r=l(9841),n=l(4335),o=l(5220),c=l(6698),i=l(6888),d=l(8896);const v=e=>((0,a.Qi)("data-v-30562467"),e=e(),(0,a.jt)(),e),p={class:"p-6"},C={class:"page-shell"},k={class:"header-row mb-4"},m=v(()=>(0,a.Lk)("div",{class:"header-title"},[(0,a.Lk)("h2",{class:"text-2xl md:text-3xl font-bold tracking-tight"}," 지원결과 목록 ")],-1)),f={key:0,class:"header-action"},y={key:0,class:"filter-row"},h=["onSubmit"],L={class:"filter-field filter-field--search"},b=["placeholder","onKeyup"],E={class:"filter-field filter-field--select select-wrapper"},g=(0,a.Fv)('<option value="ALL" data-v-30562467>전체 상태</option><option value="ING" data-v-30562467>지원중</option><option value="REVIEW" data-v-30562467>검토중</option><option value="DONE" data-v-30562467>지원완료</option><option value="RESUBMIT" data-v-30562467>재승인요청</option><option value="REJECT" data-v-30562467>반려</option>',6),A=[g],_={class:"filter-field filter-field--select select-wrapper"},D=(0,a.Fv)('<option value="RESULT_RECENT" data-v-30562467>결과 작성일 최신순</option><option value="RESULT_OLD" data-v-30562467>결과 작성일 오래된순</option><option value="PLAN_RECENT" data-v-30562467>계획 작성일 최신순</option><option value="PLAN_OLD" data-v-30562467>계획 작성일 오래된순</option><option value="NAME" data-v-30562467>이름순</option>',5),x=[D],w={class:"filter-field filter-field--button"},N={key:1,class:"text-gray-500 text-sm"},R={key:2,class:"text-red-600 text-sm"},X={key:3,class:"empty-state"},W={key:4,class:"empty-state"},K={key:5,class:"table-wrapper"},S={class:"table-card"},T={class:"nice-table"},$=v(()=>(0,a.Lk)("th",{class:"th-cell text-center w-14"},"No",-1)),U=v(()=>(0,a.Lk)("th",{class:"th-cell"},"지원자 이름",-1)),B=v(()=>(0,a.Lk)("th",{class:"th-cell"},"보호자 이름",-1)),I=v(()=>(0,a.Lk)("th",{class:"th-cell"},"담당자 이름",-1)),F={key:0,class:"th-cell"},j=v(()=>(0,a.Lk)("th",{class:"th-cell"},"계획 작성일",-1)),z=v(()=>(0,a.Lk)("th",{class:"th-cell"},"결과 작성일",-1)),Q=v(()=>(0,a.Lk)("th",{class:"th-cell"},"우선순위",-1)),M=v(()=>(0,a.Lk)("th",{class:"th-cell text-center"},"상태",-1)),q=v(()=>(0,a.Lk)("th",{class:"th-cell text-center w-28"},null,-1)),O=["onClick"],P={class:"td-cell text-center"},V={class:"td-cell"},J={class:"td-cell"},G={class:"td-cell"},H={key:0,class:"td-cell"},Y={class:"td-cell"},Z={class:"td-cell"},ee={class:"td-cell"},te={class:"td-cell text-center td-status"},le=["onClick"],ae={class:"td-cell"},se={class:"flex items-center justify-center"},ue={key:3,class:"text-gray-400 text-xs"},re={key:1,class:"text-gray-400 text-xs"},ne={key:0,class:"mt-6 text-center"},oe={key:6,class:"modal-overlay"},ce={class:"modal-container"},ie=v(()=>(0,a.Lk)("h3",{class:"text-lg font-semibold mb-3"},"반려 사유",-1)),de={key:0,class:"text-sm text-gray-500"},ve={key:1,class:"text-sm text-red-600"},pe={key:2,class:"space-y-2"},Ce={class:"text-sm text-gray-600"},ke={class:"font-medium"},me={class:"text-sm whitespace-pre-line text-gray-800 max-h-60 overflow-y-auto border rounded px-3 py-2 bg-gray-50"},fe={class:"modal-actions mt-4 flex justify-end gap-2"},ye=10;var he={__name:"ResultList",setup(e){const t=(0,o.rd)(),l=(0,o.lq)(),v=(0,r.KR)(l.query.submitCode||null),g=(0,r.KR)(null),D=(0,r.KR)(""),he=(0,r.KR)(1);function Le(e){switch(e){case"AA1":return 1;case"AA2":return 2;case"AA3":return 3;case"AA4":return 4;default:return 1}}const be=(0,r.KR)([]),Ee=(0,r.KR)(!1),ge=(0,r.KR)(""),Ae=e=>e?String(e).slice(0,10):"-";function _e(e){return(e??"").toString().trim().toUpperCase()}function De(e){switch(_e(e)){case"CD1":case"CD3":return"지원중";case"CD4":return"검토중";case"CD5":return"지원완료";case"CD6":return"재승인요청";case"CD7":return"반려";default:return e||"-"}}function xe(e){switch(_e(e)){case"CD1":case"CD3":return"p-gray";case"CD4":return"p-yellow";case"CD5":return"p-green";case"CD6":return"p-orange";case"CD7":return"p-red";default:return"p-gray"}}const we=(0,r.KR)(""),Ne=(0,r.KR)(""),Re=(0,r.KR)("ALL"),Xe=(0,r.KR)("RESULT_RECENT"),We=(0,a.EW)(()=>4===he.value?"지원자, 보호자, 담당자, 기관명 검색":"지원자, 보호자, 담당자 검색"),Ke=(0,a.EW)(()=>{let e=[...be.value];1===he.value&&(e=e.filter(e=>{const t=_e(e.status);return"CD1"!==t&&"CD3"!==t})),v.value&&(e=e.filter(e=>String(e.submitCode)===String(v.value)));const t=Ne.value.trim().toLowerCase();return t&&(e=e.filter(e=>{const l=[e.childName,e.writerName,e.assiName],a=4===he.value?[e.orgName]:[],s=[...l,...a];return s.some(e=>String(e||"").toLowerCase().includes(t))})),"ALL"!==Re.value&&(e=e.filter(e=>{const t=_e(e.status);switch(Re.value){case"ING":return"CD1"===t||"CD3"===t;case"REVIEW":return"CD4"===t;case"DONE":return"CD5"===t;case"RESUBMIT":return"CD6"===t;case"REJECT":return"CD7"===t;default:return!0}})),"RESULT_RECENT"===Xe.value?e.sort((e,t)=>{const l=e.resultWrittenAt??"",a=t.resultWrittenAt??"";if(l&&a&&l!==a)return a.localeCompare(l);const s=e.writtenAt??"",u=t.writtenAt??"";return s&&u&&s!==u?u.localeCompare(s):Number(t.resultCode||0)-Number(e.resultCode||0)}):"RESULT_OLD"===Xe.value?e.sort((e,t)=>{const l=e.resultWrittenAt??"",a=t.resultWrittenAt??"";if(l&&a&&l!==a)return l.localeCompare(a);const s=e.writtenAt??"",u=t.writtenAt??"";return s&&u&&s!==u?s.localeCompare(u):Number(e.resultCode||0)-Number(t.resultCode||0)}):"PLAN_RECENT"===Xe.value?e.sort((e,t)=>{const l=e.writtenAt??"",a=t.writtenAt??"";return l&&a&&l!==a?a.localeCompare(l):Number(t.resultCode||0)-Number(e.resultCode||0)}):"PLAN_OLD"===Xe.value?e.sort((e,t)=>{const l=e.writtenAt??"",a=t.writtenAt??"";return l&&a&&l!==a?l.localeCompare(a):Number(e.resultCode||0)-Number(t.resultCode||0)}):"NAME"===Xe.value&&e.sort((e,t)=>{const l=e.childName||"본인",a=t.childName||"본인";return l.localeCompare(a,"ko")}),e}),Se=(0,r.KR)(1),Te=(0,a.EW)(()=>Math.max(1,Math.ceil(Ke.value.length/ye)||1)),$e=(0,a.EW)(()=>{const e=(Se.value-1)*ye;return Ke.value.slice(e,e+ye)});function Ue(e){e<1||e>Te.value||(Se.value=e)}function Be(){Ne.value=we.value,Se.value=1}function Ie(){Se.value=1}function Fe(){v.value=null,Se.value=1;const e={...l.query};delete e.submitCode,t.replace({name:l.name,query:e})}const je=async()=>{Ee.value=!0,ge.value="";try{const e=await n.A.get("/api/result",{params:{role:he.value,userId:g.value}});be.value=e.data?.result||[],Se.value=1}catch(e){console.error(e),ge.value=e.message||"지원결과 목록 조회 중 오류",be.value=[]}finally{Ee.value=!1}};function ze(e){const t=(e||"").toUpperCase();switch(t){case"BB1":return"긴급";case"BB2":return"중점";case"BB3":return"계획";default:return"-"}}(0,a.sV)(()=>{try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e),l=t.user_code??null,a=t.role??"AA1";g.value=l?Number(l):null,D.value=String(a).toUpperCase(),he.value=Le(D.value)}else g.value=null,D.value="AA1",he.value=Le("AA1")}catch(e){console.error("localStorage user 파싱 오류:",e),g.value=null,D.value="AA1",he.value=Le("AA1")}je()});const Qe=e=>{t.push({name:"result-write",params:{submitcode:e.submitCode}})},Me=e=>{t.push({name:"result-edit",params:{resultCode:e.resultCode},query:{planCode:e.planCode,submitCode:e.submitCode}})},qe=e=>{t.push({name:"result-edit",params:{resultCode:e.resultCode},query:{planCode:e.planCode,submitCode:e.submitCode}})};function Oe(e){t.push({name:"resultDetail",params:{resultCode:e.resultCode},query:{submitCode:e.submitCode,planCode:e.planCode,role:he.value}})}const Pe=(0,r.KR)(!1),Ve=(0,r.KR)(""),Je=(0,r.KR)(""),Ge=(0,r.KR)(!1),He=(0,r.KR)("");async function Ye(e){Pe.value=!0,Ve.value="",Je.value="",He.value="",Ge.value=!0;try{const{data:t}=await n.A.get(`/api/result/${e.resultCode}/rejection-reason`);if(!1===t?.success)throw new Error(t.message||"반려 사유를 불러오지 못했습니다.");Ve.value=t?.result?.rejection_reason??t?.rejection_reason??"",Je.value=t?.result?.approval_date??t?.approval_date??""}catch(t){console.error(t),He.value=t.response?.data?.message||t.message||"반려 사유 조회 중 오류"}finally{Ge.value=!1}}function Ze(){Pe.value=!1}return(e,t)=>((0,a.uX)(),(0,a.CE)("section",p,[(0,a.Lk)("div",C,[(0,a.Lk)("header",k,[m,v.value?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(c.A,{color:"dark",size:"sm",variant:"outlined",onClick:Fe},{default:(0,a.k6)(()=>[(0,a.eW)(" 전체 결과 목록 보기 ")]),_:1})])):(0,a.Q3)("",!0)]),1!==he.value?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("form",{class:"filter-form",onSubmit:(0,s.D$)(Be,["prevent"])},[(0,a.Lk)("div",L,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>we.value=e),type:"text",class:"search-input",placeholder:We.value,onKeyup:(0,s.jR)(Be,["enter"])},null,40,b),[[s.Jo,we.value]])]),(0,a.Lk)("div",E,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Re.value=e),class:"select-input",onChange:Ie},A,544),[[s.u1,Re.value]])]),(0,a.Lk)("div",_,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Xe.value=e),class:"select-input",onChange:Ie},x,544),[[s.u1,Xe.value]])]),(0,a.Lk)("div",w,[(0,a.bF)(c.A,{type:"submit",color:"dark",size:"sm"},{default:(0,a.k6)(()=>[(0,a.eW)(" 검색 ")]),_:1})])],40,h)])):(0,a.Q3)("",!0),Ee.value?((0,a.uX)(),(0,a.CE)("div",N,"불러오는 중...")):ge.value?((0,a.uX)(),(0,a.CE)("div",R,(0,u.v_)(ge.value),1)):be.value.length?Ke.value.length?((0,a.uX)(),(0,a.CE)("div",K,[(0,a.Lk)("div",S,[(0,a.Lk)("table",T,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[$,U,B,I,4===he.value?((0,a.uX)(),(0,a.CE)("th",F,"기관명")):(0,a.Q3)("",!0),j,z,Q,M,q])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)($e.value,(e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.resultCode||e.planCode||t,class:"table-row-item",onClick:(0,s.D$)(t=>Oe(e),["stop"])},[(0,a.Lk)("td",P,(0,u.v_)((Se.value-1)*ye+t+1),1),(0,a.Lk)("td",V,(0,u.v_)(e.childName||"본인"),1),(0,a.Lk)("td",J,(0,u.v_)(e.writerName||"-"),1),(0,a.Lk)("td",G,(0,u.v_)(e.assiName||"-"),1),4===he.value?((0,a.uX)(),(0,a.CE)("td",H,(0,u.v_)(e.orgName||"-"),1)):(0,a.Q3)("",!0),(0,a.Lk)("td",Y,(0,u.v_)(Ae(e.writtenAt)),1),(0,a.Lk)("td",Z,(0,u.v_)(["CD1","CD3"].includes(_e(e.status))?"-":Ae(e.resultWrittenAt)),1),(0,a.Lk)("td",ee,(0,u.v_)(ze(e.level)),1),(0,a.Lk)("td",te,["CD7"===_e(e.status)&&1!==he.value?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"status-pill status-pill--rejected status-pill--clickable",onClick:(0,s.D$)(t=>Ye(e),["stop"])},(0,u.v_)(De(e.status)),9,le)):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,u.C4)(["status-pill",xe(e.status)])},(0,u.v_)(De(e.status)),3))]),(0,a.Lk)("td",ae,[(0,a.Lk)("div",se,[2===he.value?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[["CD1","CD3"].includes(_e(e.status))?((0,a.uX)(),(0,a.Wv)(c.A,{key:0,color:"dark",size:"sm",onClick:(0,s.D$)(t=>Qe(e),["stop"])},{default:(0,a.k6)(()=>[(0,a.eW)(" 작성하기 ")]),_:2},1032,["onClick"])):"CD4"===_e(e.status)?((0,a.uX)(),(0,a.Wv)(c.A,{key:1,color:"dark",size:"sm",onClick:(0,s.D$)(t=>Me(e),["stop"])},{default:(0,a.k6)(()=>[(0,a.eW)(" 수정하기 ")]),_:2},1032,["onClick"])):"CD7"===_e(e.status)?((0,a.uX)(),(0,a.Wv)(c.A,{key:2,color:"dark",size:"sm",onClick:(0,s.D$)(t=>qe(e),["stop"])},{default:(0,a.k6)(()=>[(0,a.eW)(" 재수정하기 ")]),_:2},1032,["onClick"])):((0,a.uX)(),(0,a.CE)("span",ue))],64)):((0,a.uX)(),(0,a.CE)("span",re))])])],8,O))),128))])])]),Te.value>1?((0,a.uX)(),(0,a.CE)("div",ne,[(0,a.bF)(i.A,{color:"dark",size:"md",class:"pagination"},{default:(0,a.k6)(()=>[(0,a.bF)(d.A,{prev:"",disabled:1===Se.value,onClick:t[3]||(t[3]=e=>Ue(Se.value-1))},null,8,["disabled"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Te.value,e=>((0,a.uX)(),(0,a.Wv)(d.A,{key:e,label:String(e),active:e===Se.value,onClick:t=>Ue(e)},null,8,["label","active","onClick"]))),128)),(0,a.bF)(d.A,{next:"",disabled:Se.value===Te.value,onClick:t[4]||(t[4]=e=>Ue(Se.value+1))},null,8,["disabled"])]),_:1})])):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",W," 등록된 지원결과가 없습니다. ")):((0,a.uX)(),(0,a.CE)("div",X," 등록된 지원결과가 없습니다. ")),Pe.value?((0,a.uX)(),(0,a.CE)("div",oe,[(0,a.Lk)("div",ce,[ie,Ge.value?((0,a.uX)(),(0,a.CE)("div",de," 불러오는 중... ")):He.value?((0,a.uX)(),(0,a.CE)("div",ve,(0,u.v_)(He.value),1)):((0,a.uX)(),(0,a.CE)("div",pe,[(0,a.Lk)("p",Ce,[(0,a.eW)(" 반려일자: "),(0,a.Lk)("span",ke,(0,u.v_)(Ae(Je.value)),1)]),(0,a.Lk)("div",me,(0,u.v_)(Ve.value||"등록된 반려 사유가 없습니다."),1)])),(0,a.Lk)("div",fe,[(0,a.bF)(c.A,{color:"dark",size:"sm",onClick:Ze},{default:(0,a.k6)(()=>[(0,a.eW)(" 닫기 ")]),_:1})])])])):(0,a.Q3)("",!0)])]))}},Le=l(6262);const be=(0,Le.A)(he,[["__scopeId","data-v-30562467"]]);var Ee=be},6888:function(e,t,l){l.d(t,{A:function(){return c}});var a=l(641),s=l(2644);function u(e,t,l,u,r,n){return(0,a.uX)(),(0,a.CE)("ul",{class:(0,s.C4)(["pagination",n.getClasses(l.color,l.size)])},[(0,a.RG)(e.$slots,"default")],2)}var r={name:"MaterialPagination",props:{color:{type:String,default:"success"},size:{type:String,default:"md"}},methods:{getClasses:(e,t)=>{let l,a;return l=e?`pagination-${e}`:null,a=t?`pagination-${t}`:null,`${l} ${a}`}}},n=l(6262);const o=(0,n.A)(r,[["render",u]]);var c=o},8896:function(e,t,l){l.d(t,{A:function(){return v}});var a=l(641),s=l(2644);const u={class:"page-link",href:"javascript:;"},r={key:0,class:"fa fa-angle-left"},n={key:1,class:"fa fa-angle-right"};function o(e,t,l,o,c,i){return(0,a.uX)(),(0,a.CE)("li",{class:(0,s.C4)(["page-item",i.getClasses(l.active,l.disabled)])},[(0,a.Lk)("a",u,[(0,a.eW)((0,s.v_)(l.prev||l.next?null:l.label)+" ",1),l.prev?((0,a.uX)(),(0,a.CE)("i",r)):(0,a.Q3)("",!0),l.next?((0,a.uX)(),(0,a.CE)("i",n)):(0,a.Q3)("",!0)])],2)}var c={name:"MaterialPaginationItem",props:{label:{type:String,default:""},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},prev:{type:Boolean,default:!1},next:{type:Boolean,default:!1}},methods:{getClasses:(e,t)=>{let l,a;return l=e?"active":null,a=t?"disabled":null,`${l} ${a}`}}},i=l(6262);const d=(0,i.A)(c,[["render",o]]);var v=d}}]);
//# sourceMappingURL=225.9fb8b553.js.map