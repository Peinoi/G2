"use strict";(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[478],{9478:function(e,s,a){a.r(s),a.d(s,{default:function(){return le}});a(8743),a(3725),a(2598),a(9838),a(1339);var t=a(641),l=a(2644),i=a(9841),n=a(5220),u=a(4335),r=a(6698);const c=e=>((0,t.Qi)("data-v-64ac9021"),e=e(),(0,t.jt)(),e),o={class:"p-6 max-w-5xl mx-auto relative"},v={class:"form-action"},d={key:0,class:"absolute right-8 top-6 z-10"},p={class:"detail-card"},k={class:"flex justify-between items-start detail-header"},m=c(()=>(0,t.Lk)("h2",{class:"text-2xl font-semibold mb-1"},"조사지 답변",-1)),_={key:0,class:"text-gray-500 py-6"},y={key:1,class:"text-red-600 py-6"},f={key:2,class:"text-gray-500 py-6"},b={key:3,class:"detail-body"},L={class:"meta-card"},h={class:"meta-grid"},C={class:"meta-item"},E=c(()=>(0,t.Lk)("span",{class:"meta-label"},"지원자",-1)),g={class:"meta-value"},A={class:"meta-item"},X=c(()=>(0,t.Lk)("span",{class:"meta-label"},"보호자",-1)),w={class:"meta-value"},W={class:"meta-item"},q=c(()=>(0,t.Lk)("span",{class:"meta-label"},"담당자",-1)),x={class:"meta-value"},S={class:"meta-item"},K=c(()=>(0,t.Lk)("span",{class:"meta-label"},"장애유형",-1)),I={class:"meta-value"},N={class:"meta-item"},j=c(()=>(0,t.Lk)("span",{class:"meta-label"},"제출일",-1)),F={class:"meta-value"},O={class:"meta-item"},Q=c(()=>(0,t.Lk)("span",{class:"meta-label"},"수정일",-1)),z={class:"meta-value"},J={class:"section-header"},R={class:"section-title"},D={key:0,class:"section-desc"},$={class:"sub-header"},B={class:"sub-title"},H={key:0,class:"sub-desc"},U={class:"space-y-3"},V={class:"question-top"},Y={class:"question-title"},G={key:0,class:"required-mark"},M={class:"answer-row"},P=c(()=>(0,t.Lk)("span",{class:"answer-label"},"답변",-1)),T={class:"answer-value"},Z={key:0,class:"option-hint"},ee={class:"form-actions"};var se={__name:"SurveySubmissionDetail",setup(e){const s=(0,n.lq)(),a=(0,n.rd)(),c=s.params.submitCode,se=(0,t.EW)(()=>Number(s.query.role||1)),ae=(0,t.EW)(()=>Number(s.query.userId||1)),te=(0,t.EW)(()=>1===se.value),le=(0,t.EW)(()=>3===se.value),ie=(0,i.KR)(null),ne=(0,t.EW)(()=>ie.value),ue=(0,i.KR)(!1),re=(0,i.KR)("");async function ce(){ue.value=!0,re.value="";try{const e=await u.A.get(`/api/survey/submission/${c}`);if(!1===e.data?.success)throw new Error(e.data.message||"조회 실패");const s=e.data?.result??e.data;ie.value=Le(s)}catch(e){re.value=e?.response?.data?.message||e.message||"조회 실패"}finally{ue.value=!1}}function oe(){a.push("/survey-list")}function ve(){a.push({path:"/pendingapproval"})}function de(){a.push({path:`/survey/submission/${c}/edit`,query:{role:se.value,userId:ae.value}})}function pe(e){switch(e){case"CA1":return"미검토";case"CA3":return"검토완료";default:return e||"-"}}(0,t.sV)(ce);const ke=["RADIO","CHECKBOX"];function me(e){return ke.includes(String(e).toUpperCase())}function _e(e,s=[]){const a=s.find(s=>(s?.value??s?.label)===e);if(a)return a.label??a.value??e;const t=s.find(s=>s?.label===e);return t?t.label??e:e}function ye(e){if(null==e)return null;if(Array.isArray(e))return e;if("object"===typeof e)return e;if("string"===typeof e){const s=e.trim();if(!s)return"";if(s.startsWith("[")&&s.endsWith("]")||s.startsWith("{")&&s.endsWith("}"))try{return JSON.parse(s)}catch{return s}return s}return String(e)}function fe(e){const s=Array.isArray(e.option_values)?e.option_values:[],a=ye(e.answer_text);return me(e.question_type)?Array.isArray(a)?a.map(e=>_e(e,s)):null==a||""===a?"":_e(a,s):Array.isArray(a)?a.join(", "):a??""}function be(e){if(null==e)return[];if(Array.isArray(e))return e;if("object"===typeof e)return e;if("string"===typeof e){const s=e.trim();if(!s)return[];try{return JSON.parse(s)}catch{return[]}}return[]}function Le(e){if(!e)return e;const s=JSON.parse(JSON.stringify(e));return s.sections?.forEach(e=>{e.subsections?.forEach(e=>{e.items?.forEach(e=>{e.option_values=be(e.option_values)})})}),s}function he(e){if(!e)return"-";const s=new Date(e);return isNaN(s)?String(e):s.toISOString().slice(0,10)}return(e,s)=>((0,t.uX)(),(0,t.CE)("section",o,[(0,t.Lk)("div",v,[(0,t.bF)(r.A,{color:"dark",size:"sm",variant:"outlined",onClick:oe},{default:(0,t.k6)(()=>[(0,t.eW)(" ← 목록으로 ")]),_:1}),le.value?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.bF)(r.A,{color:"dark",size:"sm",onClick:ve},{default:(0,t.k6)(()=>[(0,t.eW)(" 담당자 배정 ")]),_:1})])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",p,[(0,t.Lk)("header",k,[m,(0,t.Lk)("span",{class:(0,l.C4)(["status-pill","CA3"===ne.value?.status?"status-pill--done":"status-pill--pending"])},(0,l.v_)(pe(ne.value?.status)),3)]),ue.value?((0,t.uX)(),(0,t.CE)("div",_,"불러오는 중...")):re.value?((0,t.uX)(),(0,t.CE)("div",y,(0,l.v_)(re.value),1)):ne.value?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("div",L,[(0,t.Lk)("div",h,[(0,t.Lk)("div",C,[E,(0,t.Lk)("span",g,(0,l.v_)(ne.value.child_name||"본인"),1)]),(0,t.Lk)("div",A,[X,(0,t.Lk)("span",w,(0,l.v_)(ne.value.written_by_name||"-"),1)]),(0,t.Lk)("div",W,[q,(0,t.Lk)("span",x,(0,l.v_)(ne.value.assignee_name||"-"),1)]),(0,t.Lk)("div",S,[K,(0,t.Lk)("span",I,(0,l.v_)(ne.value.disability_type||"-"),1)]),(0,t.Lk)("div",N,[j,(0,t.Lk)("span",F,(0,l.v_)(he(ne.value.submit_at)),1)]),(0,t.Lk)("div",O,[Q,(0,t.Lk)("span",z,(0,l.v_)(he(ne.value.updated_at)),1)])])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ne.value.sections,(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:e.section_code,class:"section-block"},[(0,t.Lk)("div",J,[(0,t.Lk)("div",null,[(0,t.Lk)("h3",R,(0,l.v_)(s+1)+". "+(0,l.v_)(e.section_title),1),e.section_desc?((0,t.uX)(),(0,t.CE)("p",D,(0,l.v_)(e.section_desc),1)):(0,t.Q3)("",!0)])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.subsections,(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:e.subsection_code,class:"subsection-block"},[(0,t.Lk)("div",$,[(0,t.Lk)("div",null,[(0,t.Lk)("h4",B,(0,l.v_)(s+1)+"."+(0,l.v_)(a+1)+" "+(0,l.v_)(e.subsection_title),1),e.subsection_desc?((0,t.uX)(),(0,t.CE)("p",H,(0,l.v_)(e.subsection_desc),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("ul",U,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.items,(e,i)=>((0,t.uX)(),(0,t.CE)("li",{key:e.item_code,class:"question-item"},[(0,t.Lk)("div",V,[(0,t.Lk)("div",Y,[(0,t.eW)((0,l.v_)(s+1)+"."+(0,l.v_)(a+1)+"."+(0,l.v_)(i+1)+" "+(0,l.v_)(e.question_text)+" ",1),"Y"===e.is_required?((0,t.uX)(),(0,t.CE)("span",G," *필수 ")):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",M,[P,(0,t.Lk)("span",T,[Array.isArray(fe(e))?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)((0,l.v_)(fe(e).join(", ")||"-"),1)],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,l.v_)(fe(e)||"-"),1)],64))])]),me(e.question_type)&&e.option_values?.length?((0,t.uX)(),(0,t.CE)("div",Z," 선택지: "+(0,l.v_)(e.option_values.map(e=>e.label??e.value).join(", ")),1)):(0,t.Q3)("",!0)]))),128))])]))),128))]))),128))])):((0,t.uX)(),(0,t.CE)("div",f," 데이터를 찾을 수 없습니다. "))]),(0,t.Lk)("div",ee,[te.value?((0,t.uX)(),(0,t.Wv)(r.A,{key:0,color:"dark",size:"sm",class:"fixed right-6 bottom-6 shadow-lg rounded-full mt-3",onClick:de},{default:(0,t.k6)(()=>[(0,t.eW)(" 수정하기 ")]),_:1})):(0,t.Q3)("",!0)])]))}},ae=a(6262);const te=(0,ae.A)(se,[["__scopeId","data-v-64ac9021"]]);var le=te}}]);
//# sourceMappingURL=478.57c48d65.js.map