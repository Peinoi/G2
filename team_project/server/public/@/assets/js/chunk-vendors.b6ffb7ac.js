(self["webpackChunkvue_material_dashboard_2"]=self["webpackChunkvue_material_dashboard_2"]||[]).push([[504],{2:function(t,e,n){"use strict";var i=n(6926),o=n(9310);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},200:function(t,e,n){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},281:function(t,e,n){"use strict";var i=n(8823),o=Function.prototype,r=o.call,s=i&&o.bind.bind(r,r);t.exports=i?s:function(t){return function(){return r.apply(t,arguments)}}},290:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},474:function(t,e,n){"use strict";n.d(e,{Ay$:function(){return te}});var i,o,r,s,a,l,c,u,d=n(641),h=n(1635),f={},p=[],g=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function m(t,e){for(var n in e)t[n]=e[n];return t}function b(t){var e=t.parentNode;e&&e.removeChild(t)}function v(t,e,n){var o,r,s,a={};for(s in e)"key"==s?o=e[s]:"ref"==s?r=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===a[s]&&(a[s]=t.defaultProps[s]);return w(t,a,o,r,null)}function w(t,e,n,i,s){var a={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++r:s};return null==s&&null!=o.vnode&&o.vnode(a),a}function _(){return{current:null}}function y(t){return t.children}function k(t,e,n,i,o){var r;for(r in n)"children"===r||"key"===r||r in e||x(t,r,null,n[r],i);for(r in e)o&&"function"!=typeof e[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===e[r]||x(t,r,e[r],n[r],i)}function C(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||g.test(e)?n:n+"px"}function x(t,e,n,i,o){var r;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||C(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||C(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?i||t.addEventListener(e,r?S:E,r):t.removeEventListener(e,r?S:E,r);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&-1==e.indexOf("-")?t.removeAttribute(e):t.setAttribute(e,n))}}function E(t){s=!0;try{return this.l[t.type+!1](o.event?o.event(t):t)}finally{s=!1}}function S(t){s=!0;try{return this.l[t.type+!0](o.event?o.event(t):t)}finally{s=!1}}function T(t,e){this.props=t,this.context=e}function A(t,e){if(null==e)return t.__?A(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?A(t):null}function P(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return P(t)}}function I(t){s?setTimeout(t):c(t)}function R(t){(!t.__d&&(t.__d=!0)&&a.push(t)&&!O.__r++||l!==o.debounceRendering)&&((l=o.debounceRendering)||I)(O)}function O(){var t,e,n,i,o,r,s,l;for(a.sort(function(t,e){return t.__v.__b-e.__v.__b});t=a.shift();)t.__d&&(e=a.length,i=void 0,o=void 0,s=(r=(n=t).__v).__e,(l=n.__P)&&(i=[],(o=m({},r)).__v=r.__v+1,B(l,r,o,n.__n,void 0!==l.ownerSVGElement,null!=r.__h?[s]:null,i,null==s?A(r):s,r.__h),F(i,r),r.__e!=s&&P(r)),a.length>e&&a.sort(function(t,e){return t.__v.__b-e.__v.__b}));O.__r=0}function M(t,e,n,i,o,r,s,a,l,c){var u,d,h,g,m,b,v,_=i&&i.__k||p,k=_.length;for(n.__k=[],u=0;u<e.length;u++)if(null!=(g=n.__k[u]=null==(g=e[u])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?w(null,g,null,null,g):Array.isArray(g)?w(y,{children:g},null,null,null):g.__b>0?w(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(h=_[u])||h&&g.key==h.key&&g.type===h.type)_[u]=void 0;else for(d=0;d<k;d++){if((h=_[d])&&g.key==h.key&&g.type===h.type){_[d]=void 0;break}h=null}B(t,g,h=h||f,o,r,s,a,l,c),m=g.__e,(d=g.ref)&&h.ref!=d&&(v||(v=[]),h.ref&&v.push(h.ref,null,g),v.push(d,g.__c||m,g)),null!=m?(null==b&&(b=m),"function"==typeof g.type&&g.__k===h.__k?g.__d=l=D(g,l,t):l=N(t,g,h,_,m,l),"function"==typeof n.type&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=t&&(l=A(h))}for(n.__e=b,u=k;u--;)null!=_[u]&&("function"==typeof n.type&&null!=_[u].__e&&_[u].__e==n.__d&&(n.__d=L(i).nextSibling),W(_[u],_[u]));if(v)for(u=0;u<v.length;u++)H(v[u],v[++u],v[++u])}function D(t,e,n){for(var i,o=t.__k,r=0;o&&r<o.length;r++)(i=o[r])&&(i.__=t,e="function"==typeof i.type?D(i,e,n):N(n,i,i,o,i.__e,e));return e}function V(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some(function(t){V(t,e)}):e.push(t)),e}function N(t,e,n,i,o,r){var s,a,l;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==n||o!=r||null==o.parentNode)t:if(null==r||r.parentNode!==t)t.appendChild(o),s=null;else{for(a=r,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==o)break t;t.insertBefore(o,r),s=r}return void 0!==s?s:o.nextSibling}function L(t){var e,n,i;if(null==t.type||"string"==typeof t.type)return t.__e;if(t.__k)for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(i=L(n)))return i;return null}function B(t,e,n,i,r,s,a,l,c){var u,d,h,f,p,g,b,v,w,_,k,C,x,E,S,A=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(c=n.__h,l=e.__e=n.__e,e.__h=null,s=[l]),(u=o.__b)&&u(e);try{t:if("function"==typeof A){if(v=e.props,w=(u=A.contextType)&&i[u.__c],_=u?w?w.props.value:u.__:i,n.__c?b=(d=e.__c=n.__c).__=d.__E:("prototype"in A&&A.prototype.render?e.__c=d=new A(v,_):(e.__c=d=new T(v,_),d.constructor=A,d.render=j),w&&w.sub(d),d.props=v,d.state||(d.state={}),d.context=_,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=A.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=m({},d.__s)),m(d.__s,A.getDerivedStateFromProps(v,d.__s))),f=d.props,p=d.state,d.__v=e,h)null==A.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==A.getDerivedStateFromProps&&v!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,_),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,_)||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(t){t&&(t.__=e)}),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[],d.__h.length&&a.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,_),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(f,p,g)})}if(d.context=_,d.props=v,d.__P=t,C=o.__r,x=0,"prototype"in A&&A.prototype.render){for(d.state=d.__s,d.__d=!1,C&&C(e),u=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do{d.__d=!1,C&&C(e),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++x<25);d.state=d.__s,null!=d.getChildContext&&(i=m(m({},i),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(f,p)),S=null!=u&&u.type===y&&null==u.key?u.props.children:u,M(t,Array.isArray(S)?S:[S],e,n,i,r,s,a,l,c),d.base=e.__e,e.__h=null,d.__h.length&&a.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==s&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=z(n.__e,e,n,i,r,s,a,c);(u=o.diffed)&&u(e)}catch(t){e.__v=null,(c||null!=s)&&(e.__e=l,e.__h=!!c,s[s.indexOf(l)]=null),o.__e(t,e,n)}}function F(t,e){o.__c&&o.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){o.__e(t,e.__v)}})}function z(t,e,n,o,r,s,a,l){var c,u,d,h=n.props,p=e.props,g=e.type,m=0;if("svg"===g&&(r=!0),null!=s)for(;m<s.length;m++)if((c=s[m])&&"setAttribute"in c==!!g&&(g?c.localName===g:3===c.nodeType)){t=c,s[m]=null;break}if(null==t){if(null===g)return document.createTextNode(p);t=r?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,p.is&&p),s=null,l=!1}if(null===g)h===p||l&&t.data===p||(t.data=p);else{if(s=s&&i.call(t.childNodes),u=(h=n.props||f).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!l){if(null!=s)for(h={},m=0;m<t.attributes.length;m++)h[t.attributes[m].name]=t.attributes[m].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(k(t,p,h,r,l),d)e.__k=[];else if(m=e.props.children,M(t,Array.isArray(m)?m:[m],e,n,o,r&&"foreignObject"!==g,s,a,s?s[0]:n.__k&&A(n,0),l),null!=s)for(m=s.length;m--;)null!=s[m]&&b(s[m]);l||("value"in p&&void 0!==(m=p.value)&&(m!==t.value||"progress"===g&&!m||"option"===g&&m!==h.value)&&x(t,"value",m,h.value,!1),"checked"in p&&void 0!==(m=p.checked)&&m!==t.checked&&x(t,"checked",m,h.checked,!1))}return t}function H(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){o.__e(t,n)}}function W(t,e,n){var i,r;if(o.unmount&&o.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||H(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){o.__e(t,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&W(i[r],e,n||"function"!=typeof t.type);n||null==t.__e||b(t.__e),t.__=t.__e=t.__d=void 0}function j(t,e,n){return this.constructor(t,n)}function $(t,e,n){var r,s,a;o.__&&o.__(t,e),s=(r="function"==typeof n)?null:n&&n.__k||e.__k,a=[],B(e,t=(!r&&n||e).__k=v(y,null,[t]),s||f,f,void 0!==e.ownerSVGElement,!r&&n?[n]:s?null:e.firstChild?i.call(e.childNodes):null,a,!r&&n?n:s?s.__e:e.firstChild,r),F(a,t)}function U(t,e){var n={__c:e="__cC"+u++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,i;return this.getChildContext||(n=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(function(t){t.__e=!0,R(t)})},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}i=p.slice,o={__e:function(t,e,n,i){for(var o,r,s;e=e.__;)if((o=e.__c)&&!o.__)try{if((r=o.constructor)&&null!=r.getDerivedStateFromError&&(o.setState(r.getDerivedStateFromError(t)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,i||{}),s=o.__d),s)return o.__E=o}catch(e){t=e}throw t}},r=0,s=!1,T.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof t&&(t=t(m({},n),this.props)),t&&m(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),R(this))},T.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),R(this))},T.prototype.render=y,a=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,O.__r=0,u=0;var q,G,K,Y=[],X=[],J=o.__b,Z=o.__r,Q=o.diffed,tt=o.__c,et=o.unmount;function nt(){for(var t;t=Y.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(rt),t.__H.__h.forEach(st),t.__H.__h=[]}catch(a){t.__H.__h=[],o.__e(a,t.__v)}}o.__b=function(t){q=null,J&&J(t)},o.__r=function(t){Z&&Z(t);var e=(q=t.__c).__H;e&&(G===q?(e.__h=[],q.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=X,t.__N=t.i=void 0})):(e.__h.forEach(rt),e.__h.forEach(st),e.__h=[])),G=q},o.diffed=function(t){Q&&Q(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==Y.push(e)&&K===o.requestAnimationFrame||((K=o.requestAnimationFrame)||ot)(nt)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==X&&(t.__=t.__V),t.i=void 0,t.__V=X})),G=q=null},o.__c=function(t,e){e.some(function(t){try{t.__h.forEach(rt),t.__h=t.__h.filter(function(t){return!t.__||st(t)})}catch(r){e.some(function(t){t.__h&&(t.__h=[])}),e=[],o.__e(r,t.__v)}}),tt&&tt(t,e)},o.unmount=function(t){et&&et(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(t){try{rt(t)}catch(t){e=t}}),n.__H=void 0,e&&o.__e(e,n.__v))};var it="function"==typeof requestAnimationFrame;function ot(t){var e,n=function(){clearTimeout(i),it&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);it&&(e=requestAnimationFrame(n))}function rt(t){var e=q,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),q=e}function st(t){var e=q;t.__c=t.__(),q=e}function at(t,e){for(var n in e)t[n]=e[n];return t}function lt(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var i in e)if("__source"!==i&&t[i]!==e[i])return!0;return!1}function ct(t){this.props=t}(ct.prototype=new T).isPureReactComponent=!0,ct.prototype.shouldComponentUpdate=function(t,e){return lt(this.props,t)||lt(this.state,e)};var ut=o.__b;o.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ut&&ut(t)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var dt=o.__e;o.__e=function(t,e,n,i){if(t.then)for(var o,r=e;r=r.__;)if((o=r.__c)&&o.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e);dt(t,e,n,i)};var ht=o.unmount;function ft(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(t){"function"==typeof t.__c&&t.__c()}),t.__c.__H=null),null!=(t=at({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return ft(t,e,n)})),t}function pt(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return pt(t,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function gt(){this.__u=0,this.t=null,this.__b=null}function mt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function bt(){this.u=null,this.o=null}o.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),ht&&ht(t)},(gt.prototype=new T).__c=function(t,e){var n=e.__c,i=this;null==i.t&&(i.t=[]),i.t.push(n);var o=mt(i.__v),r=!1,s=function(){r||(r=!0,n.__R=null,o?o(a):a())};n.__R=s;var a=function(){if(! --i.__u){if(i.state.__a){var t=i.state.__a;i.__v.__k[0]=pt(t,t.__c.__P,t.__c.__O)}var e;for(i.setState({__a:i.__b=null});e=i.t.pop();)e.forceUpdate()}},l=!0===e.__h;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(s,s)},gt.prototype.componentWillUnmount=function(){this.t=[]},gt.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=ft(this.__b,n,i.__O=i.__P)}this.__b=null}var o=e.__a&&v(y,null,t.fallback);return o&&(o.__h=null),[v(y,null,e.__a?null:t.children),o]};var vt=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function wt(t){return this.getChildContext=function(){return t.context},t.children}function _t(t){var e=this,n=t.i;e.componentWillUnmount=function(){$(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),$(v(wt,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function yt(t,e){var n=v(_t,{__v:t,i:e});return n.containerInfo=e,n}(bt.prototype=new T).__a=function(t){var e=this,n=mt(e.__v),i=e.o.get(t);return i[0]++,function(o){var r=function(){e.props.revealOrder?(i.push(o),vt(e,t,i)):o()};n?n(r):r()}},bt.prototype.render=function(t){this.u=null,this.o=new Map;var e=V(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},bt.prototype.componentDidUpdate=bt.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){vt(t,n,e)})};var kt="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Ct=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,xt="undefined"!=typeof document,Et=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};T.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(T.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var St=o.event;function Tt(){}function At(){return this.cancelBubble}function Pt(){return this.defaultPrevented}o.event=function(t){return St&&(t=St(t)),t.persist=Tt,t.isPropagationStopped=At,t.isDefaultPrevented=Pt,t.nativeEvent=t};var It={configurable:!0,get:function(){return this.class}},Rt=o.vnode;o.vnode=function(t){var e=t.type,n=t.props,i=n;if("string"==typeof e){var o=-1===e.indexOf("-");for(var r in i={},n){var s=n[r];xt&&"children"===r&&"noscript"===e||"value"===r&&"defaultValue"in n&&null==s||("defaultValue"===r&&"value"in n&&null==n.value?r="value":"download"===r&&!0===s?s="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!Et(n.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():o&&Ct.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===s&&(s=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),i[r]&&(r="oninputCapture")),i[r]=s)}"select"==e&&i.multiple&&Array.isArray(i.value)&&(i.value=V(n.children).forEach(function(t){t.props.selected=-1!=i.value.indexOf(t.props.value)})),"select"==e&&null!=i.defaultValue&&(i.value=V(n.children).forEach(function(t){t.props.selected=i.multiple?-1!=i.defaultValue.indexOf(t.props.value):i.defaultValue==t.props.value})),t.props=i,n.class!=n.className&&(It.enumerable="className"in n,null!=n.className&&(i.class=n.className),Object.defineProperty(i,"className",It))}t.$$typeof=kt,Rt&&Rt(t)};var Ot=o.__r;o.__r=function(t){Ot&&Ot(t),t.__c};var Mt="undefined"!==typeof globalThis?globalThis:window;function Dt(t){t();var e=o.debounceRendering,n=[];function i(t){n.push(t)}o.debounceRendering=i,$(v(Vt,{}),document.createElement("div"));while(n.length)n.shift()();o.debounceRendering=e}Mt.FullCalendarVDom?console.warn("FullCalendar VDOM already loaded"):Mt.FullCalendarVDom={Component:T,createElement:v,render:$,createRef:_,Fragment:y,createContext:Nt,createPortal:yt,flushSync:Dt,unmountComponentAtNode:Lt};var Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,h.C6)(e,t),e.prototype.render=function(){return v("div",{})},e.prototype.componentDidMount=function(){this.setState({})},e}(T);function Nt(t){var e=U(t),n=e.Provider;return e.Provider=function(){var t=this,e=!this.getChildContext,i=n.apply(this,arguments);if(e){var o=[];this.shouldComponentUpdate=function(e){t.props.value!==e.value&&o.forEach(function(t){t.context=e.value,t.forceUpdate()})},this.sub=function(t){o.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){o.splice(o.indexOf(t),1),e&&e.call(t)}}}return i},e}function Lt(t){$(null,t)}var Bt=n(6794),Ft=function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this)||this;return i.isRendering=!1,i.isRendered=!1,i.currentClassNames=[],i.customContentRenderId=0,i.handleAction=function(t){switch(t.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":i.renderRunner.tryDrain()}},i.handleData=function(t){i.currentData=t,i.renderRunner.request(t.calendarOptions.rerenderDelay)},i.handleRenderRequest=function(){if(i.isRendering){i.isRendered=!0;var t=i.currentData;(0,Bt.qXv)(function(){(0,Bt.XXf)((0,Bt.na4)(Bt.xRE,{options:t.calendarOptions,theme:t.theme,emitter:t.emitter},function(e,n,o,r){return i.setClassNames(e),i.setHeight(n),(0,Bt.na4)(Bt.avU.Provider,{value:i.customContentRenderId},(0,Bt.na4)(Bt.o3v,(0,h.Cl)({isHeightAuto:o,forPrint:r},t)))}),i.el)})}else i.isRendered&&(i.isRendered=!1,(0,Bt.xJs)(i.el),i.setClassNames([]),i.setHeight(""))},i.el=e,i.renderRunner=new Bt.p91(i.handleRenderRequest),new Bt.KXp({optionOverrides:n,calendarApi:i,onAction:i.handleAction,onData:i.handleData}),i}return(0,h.C6)(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this.currentData.viewApi},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()},e.prototype.destroy=function(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())},e.prototype.updateSize=function(){var e=this;(0,Bt.qXv)(function(){t.prototype.updateSize.call(e)})},e.prototype.batchRendering=function(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")},e.prototype.pauseRendering=function(){this.renderRunner.pause("pauseRendering")},e.prototype.resumeRendering=function(){this.renderRunner.resume("pauseRendering",!0)},e.prototype.resetOptions=function(t,e){this.currentDataManager.resetOptions(t,e)},e.prototype.setClassNames=function(t){if(!(0,Bt.x0N)(t,this.currentClassNames)){for(var e=this.el.classList,n=0,i=this.currentClassNames;n<i.length;n++){var o=i[n];e.remove(o)}for(var r=0,s=t;r<s.length;r++){o=s[r];e.add(o)}this.currentClassNames=t}},e.prototype.setHeight=function(t){(0,Bt.Hfi)(this.el,"height",t)},e}(Bt.fhD);const zt={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0};function Ht(t){return"object"===typeof t&&(Array.isArray(t)?t=Array.prototype.slice.call(t):t&&(t={...t})),t}function Wt(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i],i));return n}var jt=n(9322);function $t(t){return function(e){return{vue:t(e)}}}function Ut(t){return(0,Bt.i1g)({contentTypeHandlers:{vue:()=>qt(t)}})}function qt(t){let e,n,i;function o(o,r){if(e!==o&&(e&&n&&n.unmount(),e=o),n)i.content=r;else{n=Gt(r,t);let e=document.createElement("span");o.appendChild(e),i=n.mount(e)}}function r(){n&&n.unmount()}return{render:o,destroy:r}}function Gt(t,e){return(0,jt.Ef)({data(){return{content:t}},render(){let{content:t}=this;return 1===t.length?t[0]:(0,d.h)("span",{},t)}})}const Kt=(0,d.pM)({props:{options:Object},data:Xt,render(){return(0,d.h)("div",{attrs:{"data-fc-render-id":this.renderId}})},mounted(){this.slotOptions=Wt(this.$slots,$t);let t=this.buildOptions(this.options,this.$.appContext),e=new Ft(this.$el,t);this.calendar=e,e.render()},methods:{getApi:Zt,buildOptions:Jt},beforeUpdate(){this.getApi().resumeRendering()},beforeUnmount(){this.getApi().destroy()},watch:Qt()});var Yt=Kt;function Xt(){return{renderId:0}}function Jt(t,e){return t=t||{},{...this.slotOptions,...t,plugins:(t.plugins||[]).concat([Ut(e)])}}function Zt(){return this.calendar}function Qt(){let t={options:{deep:!0,handler(t){let e=this.getApi();e.pauseRendering();let n=this.buildOptions(t,this.$.appContext);e.resetOptions(n),this.renderId++}}};for(let e in zt)t[`options.${e}`]={deep:!0,handler(t){if(void 0!==t){let n=this.getApi();n.pauseRendering(),n.resetOptions({[e]:Ht(t)},!0),this.renderId++}}};return t}var te=Yt},641:function(t,e,n){"use strict";n.d(e,{$u:function(){return St},$y:function(){return Nt},CE:function(){return ln},Df:function(){return ut},EW:function(){return Jn},FK:function(){return Xe},Fv:function(){return yn},Gt:function(){return pe},Gy:function(){return tt},Im:function(){return Ke},K9:function(){return Ne},KC:function(){return Ct},Lk:function(){return gn},MZ:function(){return ct},OW:function(){return st},PS:function(){return me},Q3:function(){return kn},QP:function(){return nt},Qi:function(){return V},RG:function(){return zt},WQ:function(){return ge},Wv:function(){return cn},bF:function(){return mn},bo:function(){return Z},dY:function(){return v},eW:function(){return _n},fn:function(){return qt},g2:function(){return Dt},h:function(){return Zn},jt:function(){return N},k6:function(){return L},nI:function(){return On},pI:function(){return Ft},pM:function(){return dt},pR:function(){return ot},qL:function(){return s},rE:function(){return ei},sV:function(){return xt},uX:function(){return nn},v6:function(){return Sn},wB:function(){return G},xo:function(){return Tt},zz:function(){return Kt}});var i=n(9841),o=n(2644);function r(t,e,n,i){let o;try{o=i?t(...i):t()}catch(r){a(r,e,n)}return o}function s(t,e,n,i){if((0,o.Tn)(t)){const s=r(t,e,n,i);return s&&(0,o.yL)(s)&&s.catch(t=>{a(t,e,n)}),s}const l=[];for(let o=0;o<t.length;o++)l.push(s(t[o],e,n,i));return l}function a(t,e,n,i=!0){const o=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,s=n;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,o,s))return;i=i.parent}const a=e.appContext.config.errorHandler;if(a)return void r(a,null,10,[t,o,s])}l(t,n,o,i)}function l(t,e,n,i=!0){console.error(t)}let c=!1,u=!1;const d=[];let h=0;const f=[];let p=null,g=0;const m=Promise.resolve();let b=null;function v(t){const e=b||m;return t?e.then(this?t.bind(this):t):e}function w(t){let e=h+1,n=d.length;while(e<n){const i=e+n>>>1,o=S(d[i]);o<t?e=i+1:n=i}return e}function _(t){d.length&&d.includes(t,c&&t.allowRecurse?h+1:h)||(null==t.id?d.push(t):d.splice(w(t.id),0,t),y())}function y(){c||u||(u=!0,b=m.then(A))}function k(t){const e=d.indexOf(t);e>h&&d.splice(e,1)}function C(t){(0,o.cy)(t)?f.push(...t):p&&p.includes(t,t.allowRecurse?g+1:g)||f.push(t),y()}function x(t,e=(c?h+1:0)){for(0;e<d.length;e++){const t=d[e];t&&t.pre&&(d.splice(e,1),e--,t())}}function E(t){if(f.length){const t=[...new Set(f)];if(f.length=0,p)return void p.push(...t);for(p=t,p.sort((t,e)=>S(t)-S(e)),g=0;g<p.length;g++)p[g]();p=null,g=0}}const S=t=>null==t.id?1/0:t.id,T=(t,e)=>{const n=S(t)-S(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function A(t){u=!1,c=!0,d.sort(T);o.tE;try{for(h=0;h<d.length;h++){const t=d[h];t&&!1!==t.active&&r(t,null,14)}}finally{h=0,d.length=0,E(t),c=!1,b=null,(d.length||f.length)&&A(t)}}function P(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||o.MZ;let r=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in i){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:s}=i[t]||o.MZ;s&&(r=n.map(t=>(0,o.Kg)(t)?t.trim():t)),e&&(r=n.map(o.bB))}let c;let u=i[c=(0,o.rU)(e)]||i[c=(0,o.rU)((0,o.PT)(e))];!u&&a&&(u=i[c=(0,o.rU)((0,o.Tg)(e))]),u&&s(u,t,6,r);const d=i[c+"Once"];if(d){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,s(d,t,6,r)}}function I(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(void 0!==r)return r;const s=t.emits;let a={},l=!1;if(!(0,o.Tn)(t)){const i=t=>{const n=I(t,e,!0);n&&(l=!0,(0,o.X$)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return s||l?((0,o.cy)(s)?s.forEach(t=>a[t]=null):(0,o.X$)(a,s),(0,o.Gv)(t)&&i.set(t,a),a):((0,o.Gv)(t)&&i.set(t,null),null)}function R(t,e){return!(!t||!(0,o.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,o.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,o.$3)(t,(0,o.Tg)(e))||(0,o.$3)(t,e))}let O=null,M=null;function D(t){const e=O;return O=t,M=t&&t.type.__scopeId||null,e}function V(t){M=t}function N(){M=null}function L(t,e=O,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&sn(-1);const o=D(e);let r;try{r=t(...n)}finally{D(o),i._d&&sn(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function B(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[l],slots:c,attrs:u,emit:d,render:h,renderCache:f,data:p,setupState:g,ctx:m,inheritAttrs:b}=t;let v,w;const _=D(t);try{if(4&n.shapeFlag){const t=r||i;v=Cn(h.call(t,t,f,s,g,p,m)),w=u}else{const t=e;0,v=Cn(t.length>1?t(s,{attrs:u,slots:c,emit:d}):t(s,null)),w=e.props?u:F(u)}}catch(k){tn.length=0,a(k,t,1),v=mn(Ze)}let y=v;if(w&&!1!==b){const t=Object.keys(w),{shapeFlag:e}=y;t.length&&7&e&&(l&&t.some(o.CP)&&(w=z(w,l)),y=wn(y,w))}return n.dirs&&(y=wn(y),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),v=y,D(_),v}const F=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,o.Mp)(n))&&((e||(e={}))[n]=t[n]);return e},z=(t,e)=>{const n={};for(const i in t)(0,o.CP)(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function H(t,e,n){const{props:i,children:o,component:r}=t,{props:s,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!o&&!a||a&&a.$stable)||i!==s&&(i?!s||W(i,s,c):!!s);if(1024&l)return!0;if(16&l)return i?W(i,s,c):!!s;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==i[n]&&!R(c,n))return!0}}return!1}function W(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const r=i[o];if(e[r]!==t[r]&&!R(n,r))return!0}return!1}function j({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const $=t=>t.__isSuspense;function U(t,e){e&&e.pendingBranch?(0,o.cy)(t)?e.effects.push(...t):e.effects.push(t):C(t)}const q={};function G(t,e,n){return K(t,e,n)}function K(t,e,{immediate:n,deep:a,flush:l,onTrack:c,onTrigger:u}=o.MZ){var d;const h=(0,i.o5)()===(null==(d=Rn)?void 0:d.scope)?Rn:null;let f,p,g=!1,m=!1;if((0,i.i9)(t)?(f=()=>t.value,g=(0,i.fE)(t)):(0,i.g8)(t)?(f=()=>t,a=!0):(0,o.cy)(t)?(m=!0,g=t.some(t=>(0,i.g8)(t)||(0,i.fE)(t)),f=()=>t.map(t=>(0,i.i9)(t)?t.value:(0,i.g8)(t)?J(t):(0,o.Tn)(t)?r(t,h,2):void 0)):f=(0,o.Tn)(t)?e?()=>r(t,h,2):()=>{if(!h||!h.isUnmounted)return p&&p(),s(t,h,3,[v])}:o.tE,e&&a){const t=f;f=()=>J(t())}let b,v=t=>{p=C.onStop=()=>{r(t,h,4)}};if(Hn){if(v=o.tE,e?n&&s(e,h,3,[f(),m?[]:void 0,v]):f(),"sync"!==l)return o.tE;{const t=ti();b=t.__watcherHandles||(t.__watcherHandles=[])}}let w=m?new Array(t.length).fill(q):q;const y=()=>{if(C.active)if(e){const t=C.run();(a||g||(m?t.some((t,e)=>(0,o.$H)(t,w[e])):(0,o.$H)(t,w)))&&(p&&p(),s(e,h,3,[t,w===q?void 0:m&&w[0]===q?[]:w,v]),w=t)}else C.run()};let k;y.allowRecurse=!!e,"sync"===l?k=y:"post"===l?k=()=>Ve(y,h&&h.suspense):(y.pre=!0,h&&(y.id=h.uid),k=()=>_(y));const C=new i.X2(f,k);e?n?y():w=C.run():"post"===l?Ve(C.run.bind(C),h&&h.suspense):C.run();const x=()=>{C.stop(),h&&h.scope&&(0,o.TF)(h.scope.effects,C)};return b&&b.push(x),x}function Y(t,e,n){const i=this.proxy,r=(0,o.Kg)(t)?t.includes(".")?X(i,t):()=>i[t]:t.bind(i,i);let s;(0,o.Tn)(e)?s=e:(s=e.handler,n=e);const a=Rn;Nn(this);const l=K(r,s.bind(i),n);return a?Nn(a):Ln(),l}function X(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function J(t,e){if(!(0,o.Gv)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,i.i9)(t))J(t.value,e);else if((0,o.cy)(t))for(let n=0;n<t.length;n++)J(t[n],e);else if((0,o.vM)(t)||(0,o.jh)(t))t.forEach(t=>{J(t,e)});else if((0,o.Qd)(t))for(const n in t)J(t[n],e);return t}function Z(t,e){const n=O;if(null===n)return t;const i=Kn(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,l=o.MZ]=e[s];t&&((0,o.Tn)(t)&&(t={mounted:t,updated:t}),t.deep&&J(n),r.push({dir:t,instance:i,value:n,oldValue:void 0,arg:a,modifiers:l}))}return t}function Q(t,e,n,o){const r=t.dirs,a=e&&e.dirs;for(let l=0;l<r.length;l++){const c=r[l];a&&(c.oldValue=a[l].value);let u=c.dir[o];u&&((0,i.C4)(),s(u,n,8,[t.el,c,t,e]),(0,i.bl)())}}function tt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xt(()=>{t.isMounted=!0}),Tt(()=>{t.isUnmounting=!0}),t}const et=[Function,Array],nt={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:et,onEnter:et,onAfterEnter:et,onEnterCancelled:et,onBeforeLeave:et,onLeave:et,onAfterLeave:et,onLeaveCancelled:et,onBeforeAppear:et,onAppear:et,onAfterAppear:et,onAppearCancelled:et},it={name:"BaseTransition",props:nt,setup(t,{slots:e}){const n=On(),o=tt();let r;return()=>{const s=e.default&&ut(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==Ze){0,a=e,t=!0;break}}const l=(0,i.ux)(t),{mode:c}=l;if(o.isLeaving)return at(a);const u=lt(a);if(!u)return at(a);const d=st(u,l,o,n);ct(u,d);const h=n.subTree,f=h&&lt(h);let p=!1;const{getTransitionKey:g}=u.type;if(g){const t=g();void 0===r?r=t:t!==r&&(r=t,p=!0)}if(f&&f.type!==Ze&&(!dn(u,f)||p)){const t=st(f,l,o,n);if(ct(f,t),"out-in"===c)return o.isLeaving=!0,t.afterLeave=()=>{o.isLeaving=!1,!1!==n.update.active&&n.update()},at(a);"in-out"===c&&u.type!==Ze&&(t.delayLeave=(t,e,n)=>{const i=rt(o,f);i[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=n})}return a}}},ot=it;function rt(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function st(t,e,n,i){const{appear:r,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:b,onAppear:v,onAfterAppear:w,onAppearCancelled:_}=e,y=String(t.key),k=rt(n,t),C=(t,e)=>{t&&s(t,i,9,e)},x=(t,e)=>{const n=e[1];C(t,e),(0,o.cy)(t)?t.every(t=>t.length<=1)&&n():t.length<=1&&n()},E={mode:a,persisted:l,beforeEnter(e){let i=c;if(!n.isMounted){if(!r)return;i=b||c}e._leaveCb&&e._leaveCb(!0);const o=k[y];o&&dn(t,o)&&o.el._leaveCb&&o.el._leaveCb(),C(i,[e])},enter(t){let e=u,i=d,o=h;if(!n.isMounted){if(!r)return;e=v||u,i=w||d,o=_||h}let s=!1;const a=t._enterCb=e=>{s||(s=!0,C(e?o:i,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?x(e,[t,a]):a()},leave(e,i){const o=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return i();C(f,[e]);let r=!1;const s=e._leaveCb=n=>{r||(r=!0,i(),C(n?m:g,[e]),e._leaveCb=void 0,k[o]===t&&delete k[o])};k[o]=t,p?x(p,[e,s]):s()},clone(t){return st(t,e,n,i)}};return E}function at(t){if(ft(t))return t=wn(t),t.children=null,t}function lt(t){return ft(t)?t.children?t.children[0]:void 0:t}function ct(t,e){6&t.shapeFlag&&t.component?ct(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ut(t,e=!1,n){let i=[],o=0;for(let r=0;r<t.length;r++){let s=t[r];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:r);s.type===Xe?(128&s.patchFlag&&o++,i=i.concat(ut(s.children,e,a))):(e||s.type!==Ze)&&i.push(null!=a?wn(s,{key:a}):s)}if(o>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function dt(t,e){return(0,o.Tn)(t)?(()=>(0,o.X$)({name:t.name},e,{setup:t}))():t}const ht=t=>!!t.type.__asyncLoader;const ft=t=>t.type.__isKeepAlive;RegExp,RegExp;function pt(t,e){return(0,o.cy)(t)?t.some(t=>pt(t,e)):(0,o.Kg)(t)?t.split(",").includes(e):!!(0,o.gd)(t)&&t.test(e)}function gt(t,e){bt(t,"a",e)}function mt(t,e){bt(t,"da",e)}function bt(t,e,n=Rn){const i=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(yt(e,i,n),n){let t=n.parent;while(t&&t.parent)ft(t.parent.vnode)&&vt(i,e,n,t),t=t.parent}}function vt(t,e,n,i){const r=yt(e,t,i,!0);At(()=>{(0,o.TF)(i[e],r)},n)}function wt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function _t(t){return 128&t.shapeFlag?t.ssContent:t}function yt(t,e,n=Rn,o=!1){if(n){const r=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;(0,i.C4)(),Nn(n);const r=s(e,n,t,o);return Ln(),(0,i.bl)(),r});return o?r.unshift(a):r.push(a),a}}const kt=t=>(e,n=Rn)=>(!Hn||"sp"===t)&&yt(t,(...t)=>e(...t),n),Ct=kt("bm"),xt=kt("m"),Et=kt("bu"),St=kt("u"),Tt=kt("bum"),At=kt("um"),Pt=kt("sp"),It=kt("rtg"),Rt=kt("rtc");function Ot(t,e=Rn){yt("ec",t,e)}const Mt="components";function Dt(t,e){return Lt(Mt,t,!0,e)||t}const Vt=Symbol.for("v-ndc");function Nt(t){return(0,o.Kg)(t)?Lt(Mt,t,!1)||t:t||Vt}function Lt(t,e,n=!0,i=!1){const r=O||Rn;if(r){const n=r.type;if(t===Mt){const t=Yn(n,!1);if(t&&(t===e||t===(0,o.PT)(e)||t===(0,o.ZH)((0,o.PT)(e))))return n}const s=Bt(r[t]||n[t],e)||Bt(r.appContext[t],e);return!s&&i?n:s}}function Bt(t,e){return t&&(t[e]||t[(0,o.PT)(e)]||t[(0,o.ZH)((0,o.PT)(e))])}function Ft(t,e,n,i){let r;const s=n&&n[i];if((0,o.cy)(t)||(0,o.Kg)(t)){r=new Array(t.length);for(let n=0,i=t.length;n<i;n++)r[n]=e(t[n],n,void 0,s&&s[n])}else if("number"===typeof t){0,r=new Array(t);for(let n=0;n<t;n++)r[n]=e(n+1,n,void 0,s&&s[n])}else if((0,o.Gv)(t))if(t[Symbol.iterator])r=Array.from(t,(t,n)=>e(t,n,void 0,s&&s[n]));else{const n=Object.keys(t);r=new Array(n.length);for(let i=0,o=n.length;i<o;i++){const o=n[i];r[i]=e(t[o],o,i,s&&s[i])}}else r=[];return n&&(n[i]=r),r}function zt(t,e,n={},i,o){if(O.isCE||O.parent&&ht(O.parent)&&O.parent.isCE)return"default"!==e&&(n.name=e),mn("slot",n,i&&i());let r=t[e];r&&r._c&&(r._d=!1),nn();const s=r&&Ht(r(n)),a=cn(Xe,{key:n.key||s&&s.key||`_${e}`},s||(i?i():[]),s&&1===t._?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Ht(t){return t.some(t=>!un(t)||t.type!==Ze&&!(t.type===Xe&&!Ht(t.children)))?t:null}const Wt=t=>t?Bn(t)?Kn(t)||t.proxy:Wt(t.parent):null,jt=(0,o.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wt(t.parent),$root:t=>Wt(t.root),$emit:t=>t.emit,$options:t=>te(t),$forceUpdate:t=>t.f||(t.f=()=>_(t.update)),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>Y.bind(t)}),$t=(t,e)=>t!==o.MZ&&!t.__isScriptSetup&&(0,o.$3)(t,e),Ut={get({_:t},e){const{ctx:n,setupState:r,data:s,props:a,accessCache:l,type:c,appContext:u}=t;let d;if("$"!==e[0]){const i=l[e];if(void 0!==i)switch(i){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if($t(r,e))return l[e]=1,r[e];if(s!==o.MZ&&(0,o.$3)(s,e))return l[e]=2,s[e];if((d=t.propsOptions[0])&&(0,o.$3)(d,e))return l[e]=3,a[e];if(n!==o.MZ&&(0,o.$3)(n,e))return l[e]=4,n[e];Yt&&(l[e]=0)}}const h=jt[e];let f,p;return h?("$attrs"===e&&(0,i.u4)(t,"get",e),h(t)):(f=c.__cssModules)&&(f=f[e])?f:n!==o.MZ&&(0,o.$3)(n,e)?(l[e]=4,n[e]):(p=u.config.globalProperties,(0,o.$3)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:i,setupState:r,ctx:s}=t;return $t(r,e)?(r[e]=n,!0):i!==o.MZ&&(0,o.$3)(i,e)?(i[e]=n,!0):!(0,o.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:s}},a){let l;return!!n[a]||t!==o.MZ&&(0,o.$3)(t,a)||$t(e,a)||(l=s[0])&&(0,o.$3)(l,a)||(0,o.$3)(i,a)||(0,o.$3)(jt,a)||(0,o.$3)(r.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,o.$3)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qt(t,e,n){const o=On();if(n&&n.local){const n=(0,i.KR)(t[e]);return G(()=>t[e],t=>n.value=t),G(n,n=>{n!==t[e]&&o.emit(`update:${e}`,n)}),n}return{__v_isRef:!0,get value(){return t[e]},set value(t){o.emit(`update:${e}`,t)}}}function Gt(t){return(0,o.cy)(t)?t.reduce((t,e)=>(t[e]=null,t),{}):t}function Kt(t,e){return t&&e?(0,o.cy)(t)&&(0,o.cy)(e)?t.concat(e):(0,o.X$)({},Gt(t),Gt(e)):t||e}let Yt=!0;function Xt(t){const e=te(t),n=t.proxy,r=t.ctx;Yt=!1,e.beforeCreate&&Zt(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:c,provide:u,inject:d,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:b,deactivated:v,beforeDestroy:w,beforeUnmount:_,destroyed:y,unmounted:k,render:C,renderTracked:x,renderTriggered:E,errorCaptured:S,serverPrefetch:T,expose:A,inheritAttrs:P,components:I,directives:R,filters:O}=e,M=null;if(d&&Jt(d,r,M),l)for(const i in l){const t=l[i];(0,o.Tn)(t)&&(r[i]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,o.Gv)(e)&&(t.data=(0,i.Kh)(e))}if(Yt=!0,a)for(const i in a){const t=a[i],e=(0,o.Tn)(t)?t.bind(n,n):(0,o.Tn)(t.get)?t.get.bind(n,n):o.tE;0;const s=!(0,o.Tn)(t)&&(0,o.Tn)(t.set)?t.set.bind(n):o.tE,l=Jn({get:e,set:s});Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(c)for(const i in c)Qt(c[i],r,n,i);if(u){const t=(0,o.Tn)(u)?u.call(n):u;Reflect.ownKeys(t).forEach(e=>{pe(e,t[e])})}function D(t,e){(0,o.cy)(e)?e.forEach(e=>t(e.bind(n))):e&&t(e.bind(n))}if(h&&Zt(h,t,"c"),D(Ct,f),D(xt,p),D(Et,g),D(St,m),D(gt,b),D(mt,v),D(Ot,S),D(Rt,x),D(It,E),D(Tt,_),D(At,k),D(Pt,T),(0,o.cy)(A))if(A.length){const e=t.exposed||(t.exposed={});A.forEach(t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})})}else t.exposed||(t.exposed={});C&&t.render===o.tE&&(t.render=C),null!=P&&(t.inheritAttrs=P),I&&(t.components=I),R&&(t.directives=R)}function Jt(t,e,n=o.tE){(0,o.cy)(t)&&(t=re(t));for(const r in t){const n=t[r];let s;s=(0,o.Gv)(n)?"default"in n?ge(n.from||r,n.default,!0):ge(n.from||r):ge(n),(0,i.i9)(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[r]=s}}function Zt(t,e,n){s((0,o.cy)(t)?t.map(t=>t.bind(e.proxy)):t.bind(e.proxy),e,n)}function Qt(t,e,n,i){const r=i.includes(".")?X(n,i):()=>n[i];if((0,o.Kg)(t)){const n=e[t];(0,o.Tn)(n)&&G(r,n)}else if((0,o.Tn)(t))G(r,t.bind(n));else if((0,o.Gv)(t))if((0,o.cy)(t))t.forEach(t=>Qt(t,e,n,i));else{const i=(0,o.Tn)(t.handler)?t.handler.bind(n):e[t.handler];(0,o.Tn)(i)&&G(r,i,t)}else 0}function te(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let c;return l?c=l:r.length||n||i?(c={},r.length&&r.forEach(t=>ee(c,t,a,!0)),ee(c,e,a)):c=e,(0,o.Gv)(e)&&s.set(e,c),c}function ee(t,e,n,i=!1){const{mixins:o,extends:r}=e;r&&ee(t,r,n,!0),o&&o.forEach(e=>ee(t,e,n,!0));for(const s in e)if(i&&"expose"===s);else{const i=ne[s]||n&&n[s];t[s]=i?i(t[s],e[s]):e[s]}return t}const ne={data:ie,props:le,emits:le,methods:ae,computed:ae,beforeCreate:se,created:se,beforeMount:se,mounted:se,beforeUpdate:se,updated:se,beforeDestroy:se,beforeUnmount:se,destroyed:se,unmounted:se,activated:se,deactivated:se,errorCaptured:se,serverPrefetch:se,components:ae,directives:ae,watch:ce,provide:ie,inject:oe};function ie(t,e){return e?t?function(){return(0,o.X$)((0,o.Tn)(t)?t.call(this,this):t,(0,o.Tn)(e)?e.call(this,this):e)}:e:t}function oe(t,e){return ae(re(t),re(e))}function re(t){if((0,o.cy)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function se(t,e){return t?[...new Set([].concat(t,e))]:e}function ae(t,e){return t?(0,o.X$)(Object.create(null),t,e):e}function le(t,e){return t?(0,o.cy)(t)&&(0,o.cy)(e)?[...new Set([...t,...e])]:(0,o.X$)(Object.create(null),Gt(t),Gt(null!=e?e:{})):e}function ce(t,e){if(!t)return e;if(!e)return t;const n=(0,o.X$)(Object.create(null),t);for(const i in e)n[i]=se(t[i],e[i]);return n}function ue(){return{app:null,config:{isNativeTag:o.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let de=0;function he(t,e){return function(n,i=null){(0,o.Tn)(n)||(n=(0,o.X$)({},n)),null==i||(0,o.Gv)(i)||(i=null);const r=ue();const s=new Set;let a=!1;const l=r.app={_uid:de++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:ei,get config(){return r.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,o.Tn)(t.install)?(s.add(t),t.install(l,...e)):(0,o.Tn)(t)&&(s.add(t),t(l,...e))),l},mixin(t){return r.mixins.includes(t)||r.mixins.push(t),l},component(t,e){return e?(r.components[t]=e,l):r.components[t]},directive(t,e){return e?(r.directives[t]=e,l):r.directives[t]},mount(o,s,c){if(!a){0;const u=mn(n,i);return u.appContext=r,s&&e?e(u,o):t(u,o,c),a=!0,l._container=o,o.__vue_app__=l,Kn(u.component)||u.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return r.provides[t]=e,l},runWithContext(t){fe=l;try{return t()}finally{fe=null}}};return l}}let fe=null;function pe(t,e){if(Rn){let n=Rn.provides;const i=Rn.parent&&Rn.parent.provides;i===n&&(n=Rn.provides=Object.create(i)),n[t]=e}else 0}function ge(t,e,n=!1){const i=Rn||O;if(i||fe){const r=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:fe._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&(0,o.Tn)(e)?e.call(i&&i.proxy):e}else 0}function me(){return!!(Rn||O||fe)}function be(t,e,n,r=!1){const s={},a={};(0,o.yQ)(a,hn,1),t.propsDefaults=Object.create(null),we(t,e,s,a);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=r?s:(0,i.Gc)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function ve(t,e,n,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,c=(0,i.ux)(s),[u]=t.propsOptions;let d=!1;if(!(r||l>0)||16&l){let i;we(t,e,s,a)&&(d=!0);for(const r in c)e&&((0,o.$3)(e,r)||(i=(0,o.Tg)(r))!==r&&(0,o.$3)(e,i))||(u?!n||void 0===n[r]&&void 0===n[i]||(s[r]=_e(u,c,r,void 0,t,!0)):delete s[r]);if(a!==c)for(const t in a)e&&(0,o.$3)(e,t)||(delete a[t],d=!0)}else if(8&l){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){let r=n[i];if(R(t.emitsOptions,r))continue;const l=e[r];if(u)if((0,o.$3)(a,r))l!==a[r]&&(a[r]=l,d=!0);else{const e=(0,o.PT)(r);s[e]=_e(u,c,e,l,t,!1)}else l!==a[r]&&(a[r]=l,d=!0)}}d&&(0,i.hZ)(t,"set","$attrs")}function we(t,e,n,r){const[s,a]=t.propsOptions;let l,c=!1;if(e)for(let i in e){if((0,o.SU)(i))continue;const u=e[i];let d;s&&(0,o.$3)(s,d=(0,o.PT)(i))?a&&a.includes(d)?(l||(l={}))[d]=u:n[d]=u:R(t.emitsOptions,i)||i in r&&u===r[i]||(r[i]=u,c=!0)}if(a){const e=(0,i.ux)(n),r=l||o.MZ;for(let i=0;i<a.length;i++){const l=a[i];n[l]=_e(s,e,l,r[l],t,!(0,o.$3)(r,l))}}return c}function _e(t,e,n,i,r,s){const a=t[n];if(null!=a){const t=(0,o.$3)(a,"default");if(t&&void 0===i){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,o.Tn)(t)){const{propsDefaults:o}=r;n in o?i=o[n]:(Nn(r),i=o[n]=t.call(null,e),Ln())}else i=t}a[0]&&(s&&!t?i=!1:!a[1]||""!==i&&i!==(0,o.Tg)(n)||(i=!0))}return i}function ye(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const s=t.props,a={},l=[];let c=!1;if(!(0,o.Tn)(t)){const i=t=>{c=!0;const[n,i]=ye(t,e,!0);(0,o.X$)(a,n),i&&l.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!s&&!c)return(0,o.Gv)(t)&&i.set(t,o.Oj),o.Oj;if((0,o.cy)(s))for(let d=0;d<s.length;d++){0;const t=(0,o.PT)(s[d]);ke(t)&&(a[t]=o.MZ)}else if(s){0;for(const t in s){const e=(0,o.PT)(t);if(ke(e)){const n=s[t],i=a[e]=(0,o.cy)(n)||(0,o.Tn)(n)?{type:n}:(0,o.X$)({},n);if(i){const t=Ee(Boolean,i.type),n=Ee(String,i.type);i[0]=t>-1,i[1]=n<0||t<n,(t>-1||(0,o.$3)(i,"default"))&&l.push(e)}}}}const u=[a,l];return(0,o.Gv)(t)&&i.set(t,u),u}function ke(t){return"$"!==t[0]}function Ce(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function xe(t,e){return Ce(t)===Ce(e)}function Ee(t,e){return(0,o.cy)(e)?e.findIndex(e=>xe(e,t)):(0,o.Tn)(e)&&xe(e,t)?0:-1}const Se=t=>"_"===t[0]||"$stable"===t,Te=t=>(0,o.cy)(t)?t.map(Cn):[Cn(t)],Ae=(t,e,n)=>{if(e._n)return e;const i=L((...t)=>Te(e(...t)),n);return i._c=!1,i},Pe=(t,e,n)=>{const i=t._ctx;for(const r in t){if(Se(r))continue;const n=t[r];if((0,o.Tn)(n))e[r]=Ae(r,n,i);else if(null!=n){0;const t=Te(n);e[r]=()=>t}}},Ie=(t,e)=>{const n=Te(e);t.slots.default=()=>n},Re=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,i.ux)(e),(0,o.yQ)(e,"_",n)):Pe(e,t.slots={})}else t.slots={},e&&Ie(t,e);(0,o.yQ)(t.slots,hn,1)},Oe=(t,e,n)=>{const{vnode:i,slots:r}=t;let s=!0,a=o.MZ;if(32&i.shapeFlag){const t=e._;t?n&&1===t?s=!1:((0,o.X$)(r,e),n||1!==t||delete r._):(s=!e.$stable,Pe(e,r)),a=e}else e&&(Ie(t,e),a={default:1});if(s)for(const o in r)Se(o)||o in a||delete r[o]};function Me(t,e,n,s,a=!1){if((0,o.cy)(t))return void t.forEach((t,i)=>Me(t,e&&((0,o.cy)(e)?e[i]:e),n,s,a));if(ht(s)&&!a)return;const l=4&s.shapeFlag?Kn(s.component)||s.component.proxy:s.el,c=a?null:l,{i:u,r:d}=t;const h=e&&e.r,f=u.refs===o.MZ?u.refs={}:u.refs,p=u.setupState;if(null!=h&&h!==d&&((0,o.Kg)(h)?(f[h]=null,(0,o.$3)(p,h)&&(p[h]=null)):(0,i.i9)(h)&&(h.value=null)),(0,o.Tn)(d))r(d,u,12,[c,f]);else{const e=(0,o.Kg)(d),r=(0,i.i9)(d);if(e||r){const i=()=>{if(t.f){const n=e?(0,o.$3)(p,d)?p[d]:f[d]:d.value;a?(0,o.cy)(n)&&(0,o.TF)(n,l):(0,o.cy)(n)?n.includes(l)||n.push(l):e?(f[d]=[l],(0,o.$3)(p,d)&&(p[d]=f[d])):(d.value=[l],t.k&&(f[t.k]=d.value))}else e?(f[d]=c,(0,o.$3)(p,d)&&(p[d]=c)):r&&(d.value=c,t.k&&(f[t.k]=c))};c?(i.id=-1,Ve(i,n)):i()}else 0}}function De(){}const Ve=U;function Ne(t){return Le(t)}function Le(t,e){De();const n=(0,o.We)();n.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:c,createComment:u,setText:d,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=o.tE,insertStaticContent:m}=t,b=(t,e,n,i=null,o=null,r=null,s=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!dn(t,e)&&(i=Z(t),G(t,o,r,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=e;switch(c){case Je:v(t,e,n,i);break;case Ze:w(t,e,n,i);break;case Qe:null==t&&y(e,n,i,s);break;case Xe:D(t,e,n,i,o,r,s,a,l);break;default:1&d?T(t,e,n,i,o,r,s,a,l):6&d?V(t,e,n,i,o,r,s,a,l):(64&d||128&d)&&c.process(t,e,n,i,o,r,s,a,l,et)}null!=u&&o&&Me(u,t&&t.ref,r,e||t,!e)},v=(t,e,n,i)=>{if(null==t)r(e.el=c(e.children),n,i);else{const n=e.el=t.el;e.children!==t.children&&d(n,e.children)}},w=(t,e,n,i)=>{null==t?r(e.el=u(e.children||""),n,i):e.el=t.el},y=(t,e,n,i)=>{[t.el,t.anchor]=m(t.children,e,n,i,t.el,t.anchor)},C=({el:t,anchor:e},n,i)=>{let o;while(t&&t!==e)o=p(t),r(t,n,i),t=o;r(e,n,i)},S=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},T=(t,e,n,i,o,r,s,a,l)=>{s=s||"svg"===e.type,null==t?A(e,n,i,o,r,s,a,l):R(t,e,o,r,s,a,l)},A=(t,e,n,i,s,c,u,d)=>{let f,p;const{type:g,props:m,shapeFlag:b,transition:v,dirs:w}=t;if(f=t.el=l(t.type,c,m&&m.is,m),8&b?h(f,t.children):16&b&&I(t.children,f,null,i,s,c&&"foreignObject"!==g,u,d),w&&Q(t,null,i,"created"),P(f,t,t.scopeId,u,i),m){for(const e in m)"value"===e||(0,o.SU)(e)||a(f,e,null,m[e],c,t.children,i,s,J);"value"in m&&a(f,"value",null,m.value),(p=m.onVnodeBeforeMount)&&Tn(p,i,t)}w&&Q(t,null,i,"beforeMount");const _=(!s||s&&!s.pendingBranch)&&v&&!v.persisted;_&&v.beforeEnter(f),r(f,e,n),((p=m&&m.onVnodeMounted)||_||w)&&Ve(()=>{p&&Tn(p,i,t),_&&v.enter(f),w&&Q(t,null,i,"mounted")},s)},P=(t,e,n,i,o)=>{if(n&&g(t,n),i)for(let r=0;r<i.length;r++)g(t,i[r]);if(o){let n=o.subTree;if(e===n){const e=o.vnode;P(t,e,e.scopeId,e.slotScopeIds,o.parent)}}},I=(t,e,n,i,o,r,s,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?xn(t[c]):Cn(t[c]);b(null,l,e,n,i,o,r,s,a)}},R=(t,e,n,i,r,s,l)=>{const c=e.el=t.el;let{patchFlag:u,dynamicChildren:d,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||o.MZ,g=e.props||o.MZ;let m;n&&Be(n,!1),(m=g.onVnodeBeforeUpdate)&&Tn(m,n,e,t),f&&Q(e,t,n,"beforeUpdate"),n&&Be(n,!0);const b=r&&"foreignObject"!==e.type;if(d?O(t.dynamicChildren,d,c,n,i,b,s):l||W(t,e,c,null,n,i,b,s,!1),u>0){if(16&u)M(c,e,p,g,n,i,r);else if(2&u&&p.class!==g.class&&a(c,"class",null,g.class,r),4&u&&a(c,"style",p.style,g.style,r),8&u){const o=e.dynamicProps;for(let e=0;e<o.length;e++){const s=o[e],l=p[s],u=g[s];u===l&&"value"!==s||a(c,s,l,u,r,t.children,n,i,J)}}1&u&&t.children!==e.children&&h(c,e.children)}else l||null!=d||M(c,e,p,g,n,i,r);((m=g.onVnodeUpdated)||f)&&Ve(()=>{m&&Tn(m,n,e,t),f&&Q(e,t,n,"updated")},i)},O=(t,e,n,i,o,r,s)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],u=l.el&&(l.type===Xe||!dn(l,c)||70&l.shapeFlag)?f(l.el):n;b(l,c,u,null,i,o,r,s,!0)}},M=(t,e,n,i,r,s,l)=>{if(n!==i){if(n!==o.MZ)for(const c in n)(0,o.SU)(c)||c in i||a(t,c,n[c],null,l,e.children,r,s,J);for(const c in i){if((0,o.SU)(c))continue;const u=i[c],d=n[c];u!==d&&"value"!==c&&a(t,c,d,u,l,e.children,r,s,J)}"value"in i&&a(t,"value",n.value,i.value)}},D=(t,e,n,i,o,s,a,l,u)=>{const d=e.el=t?t.el:c(""),h=e.anchor=t?t.anchor:c("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(l=l?l.concat(g):g),null==t?(r(d,n,i),r(h,n,i),I(e.children,n,h,o,s,a,l,u)):f>0&&64&f&&p&&t.dynamicChildren?(O(t.dynamicChildren,p,n,o,s,a,l),(null!=e.key||o&&e===o.subTree)&&Fe(t,e,!0)):W(t,e,n,h,o,s,a,l,u)},V=(t,e,n,i,o,r,s,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?o.ctx.activate(e,n,i,s,l):N(e,n,i,o,r,s,l):L(t,e,l)},N=(t,e,n,i,o,r,s)=>{const a=t.component=In(t,i,o);if(ft(t)&&(a.ctx.renderer=et),Wn(a),a.asyncDep){if(o&&o.registerDep(a,F),!t.el){const t=a.subTree=mn(Ze);w(null,t,e,n)}}else F(a,t,e,n,o,r,s)},L=(t,e,n)=>{const i=e.component=t.component;if(H(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void z(i,e,n);i.next=e,k(i.update),i.update()}else e.el=t.el,i.vnode=e},F=(t,e,n,r,s,a,l)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:i,u:r,parent:c,vnode:u}=t,d=n;0,Be(t,!1),n?(n.el=u.el,z(t,n,l)):n=u,i&&(0,o.DY)(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Tn(e,c,n,u),Be(t,!0);const h=B(t);0;const p=t.subTree;t.subTree=h,b(p,h,f(p.el),Z(p),t,s,a),n.el=h.el,null===d&&j(t,h.el),r&&Ve(r,s),(e=n.props&&n.props.onVnodeUpdated)&&Ve(()=>Tn(e,c,n,u),s)}else{let i;const{el:l,props:c}=e,{bm:u,m:d,parent:h}=t,f=ht(e);if(Be(t,!1),u&&(0,o.DY)(u),!f&&(i=c&&c.onVnodeBeforeMount)&&Tn(i,h,e),Be(t,!0),l&&it){const n=()=>{t.subTree=B(t),it(l,t.subTree,t,s,null)};f?e.type.__asyncLoader().then(()=>!t.isUnmounted&&n()):n()}else{0;const i=t.subTree=B(t);0,b(null,i,n,r,t,s,a),e.el=i.el}if(d&&Ve(d,s),!f&&(i=c&&c.onVnodeMounted)){const t=e;Ve(()=>Tn(i,h,t),s)}(256&e.shapeFlag||h&&ht(h.vnode)&&256&h.vnode.shapeFlag)&&t.a&&Ve(t.a,s),t.isMounted=!0,e=n=r=null}},u=t.effect=new i.X2(c,()=>_(d),t.scope),d=t.update=()=>u.run();d.id=t.uid,Be(t,!0),d()},z=(t,e,n)=>{e.component=t;const o=t.vnode.props;t.vnode=e,t.next=null,ve(t,e.props,o,n),Oe(t,e.children,n),(0,i.C4)(),x(),(0,i.bl)()},W=(t,e,n,i,o,r,s,a,l=!1)=>{const c=t&&t.children,u=t?t.shapeFlag:0,d=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void U(c,d,n,i,o,r,s,a,l);if(256&f)return void $(c,d,n,i,o,r,s,a,l)}8&p?(16&u&&J(c,o,r),d!==c&&h(n,d)):16&u?16&p?U(c,d,n,i,o,r,s,a,l):J(c,o,r,!0):(8&u&&h(n,""),16&p&&I(d,n,i,o,r,s,a,l))},$=(t,e,n,i,r,s,a,l,c)=>{t=t||o.Oj,e=e||o.Oj;const u=t.length,d=e.length,h=Math.min(u,d);let f;for(f=0;f<h;f++){const i=e[f]=c?xn(e[f]):Cn(e[f]);b(t[f],i,n,null,r,s,a,l,c)}u>d?J(t,r,s,!0,!1,h):I(e,n,i,r,s,a,l,c,h)},U=(t,e,n,i,r,s,a,l,c)=>{let u=0;const d=e.length;let h=t.length-1,f=d-1;while(u<=h&&u<=f){const i=t[u],o=e[u]=c?xn(e[u]):Cn(e[u]);if(!dn(i,o))break;b(i,o,n,null,r,s,a,l,c),u++}while(u<=h&&u<=f){const i=t[h],o=e[f]=c?xn(e[f]):Cn(e[f]);if(!dn(i,o))break;b(i,o,n,null,r,s,a,l,c),h--,f--}if(u>h){if(u<=f){const t=f+1,o=t<d?e[t].el:i;while(u<=f)b(null,e[u]=c?xn(e[u]):Cn(e[u]),n,o,r,s,a,l,c),u++}}else if(u>f)while(u<=h)G(t[u],r,s,!0),u++;else{const p=u,g=u,m=new Map;for(u=g;u<=f;u++){const t=e[u]=c?xn(e[u]):Cn(e[u]);null!=t.key&&m.set(t.key,u)}let v,w=0;const _=f-g+1;let y=!1,k=0;const C=new Array(_);for(u=0;u<_;u++)C[u]=0;for(u=p;u<=h;u++){const i=t[u];if(w>=_){G(i,r,s,!0);continue}let o;if(null!=i.key)o=m.get(i.key);else for(v=g;v<=f;v++)if(0===C[v-g]&&dn(i,e[v])){o=v;break}void 0===o?G(i,r,s,!0):(C[o-g]=u+1,o>=k?k=o:y=!0,b(i,e[o],n,null,r,s,a,l,c),w++)}const x=y?ze(C):o.Oj;for(v=x.length-1,u=_-1;u>=0;u--){const t=g+u,o=e[t],h=t+1<d?e[t+1].el:i;0===C[u]?b(null,o,n,h,r,s,a,l,c):y&&(v<0||u!==x[v]?q(o,n,h,2):v--)}}},q=(t,e,n,i,o=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:u}=t;if(6&u)return void q(t.component.subTree,e,n,i);if(128&u)return void t.suspense.move(e,n,i);if(64&u)return void a.move(t,e,n,et);if(a===Xe){r(s,e,n);for(let t=0;t<c.length;t++)q(c[t],e,n,i);return void r(t.anchor,e,n)}if(a===Qe)return void C(t,e,n);const d=2!==i&&1&u&&l;if(d)if(0===i)l.beforeEnter(s),r(s,e,n),Ve(()=>l.enter(s),o);else{const{leave:t,delayLeave:i,afterLeave:o}=l,a=()=>r(s,e,n),c=()=>{t(s,()=>{a(),o&&o()})};i?i(s,a,c):c()}else r(s,e,n)},G=(t,e,n,i=!1,o=!1)=>{const{type:r,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h}=t;if(null!=a&&Me(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&h,p=!ht(t);let g;if(p&&(g=s&&s.onVnodeBeforeUnmount)&&Tn(g,e,t),6&u)X(t.component,n,i);else{if(128&u)return void t.suspense.unmount(n,i);f&&Q(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,o,et,i):c&&(r!==Xe||d>0&&64&d)?J(c,e,n,!1,!0):(r===Xe&&384&d||!o&&16&u)&&J(l,e,n),i&&K(t)}(p&&(g=s&&s.onVnodeUnmounted)||f)&&Ve(()=>{g&&Tn(g,e,t),f&&Q(t,null,e,"unmounted")},n)},K=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Xe)return void Y(n,i);if(e===Qe)return void S(t);const r=()=>{s(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:i}=o,s=()=>e(n,r);i?i(t.el,r,s):s()}else r()},Y=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},X=(t,e,n)=>{const{bum:i,scope:r,update:s,subTree:a,um:l}=t;i&&(0,o.DY)(i),r.stop(),s&&(s.active=!1,G(a,t,e,n)),l&&Ve(l,e),Ve(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,n,i=!1,o=!1,r=0)=>{for(let s=r;s<t.length;s++)G(t[s],e,n,i,o)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&G(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,n),x(),E(),e._vnode=t},et={p:b,um:G,m:q,r:K,mt:N,mc:I,pc:W,pbc:O,n:Z,o:t};let nt,it;return e&&([nt,it]=e(et)),{render:tt,hydrate:nt,createApp:he(tt,nt)}}function Be({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Fe(t,e,n=!1){const i=t.children,r=e.children;if((0,o.cy)(i)&&(0,o.cy)(r))for(let o=0;o<i.length;o++){const t=i[o];let e=r[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=r[o]=xn(r[o]),e.el=t.el),n||Fe(t,e)),e.type===Je&&(e.el=t.el)}}function ze(t){const e=t.slice(),n=[0];let i,o,r,s,a;const l=t.length;for(i=0;i<l;i++){const l=t[i];if(0!==l){if(o=n[n.length-1],t[o]<l){e[i]=o,n.push(i);continue}r=0,s=n.length-1;while(r<s)a=r+s>>1,t[n[a]]<l?r=a+1:s=a;l<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}r=n.length,s=n[r-1];while(r-- >0)n[r]=s,s=e[s];return n}const He=t=>t.__isTeleport,We=t=>t&&(t.disabled||""===t.disabled),je=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,$e=(t,e)=>{const n=t&&t.to;if((0,o.Kg)(n)){if(e){const t=e(n);return t}return null}return n},Ue={__isTeleport:!0,process(t,e,n,i,o,r,s,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:g,createComment:m}}=c,b=We(e.props);let{shapeFlag:v,children:w,dynamicChildren:_}=e;if(null==t){const t=e.el=g(""),c=e.anchor=g("");f(t,n,i),f(c,n,i);const d=e.target=$e(e.props,p),h=e.targetAnchor=g("");d&&(f(h,d),s=s||je(d));const m=(t,e)=>{16&v&&u(w,t,e,o,r,s,a,l)};b?m(n,c):d&&m(d,h)}else{e.el=t.el;const i=e.anchor=t.anchor,u=e.target=t.target,f=e.targetAnchor=t.targetAnchor,g=We(t.props),m=g?n:u,v=g?i:f;if(s=s||je(u),_?(h(t.dynamicChildren,_,m,o,r,s,a),Fe(t,e,!0)):l||d(t,e,m,v,o,r,s,a,!1),b)g||qe(e,n,i,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=$e(e.props,p);t&&qe(e,t,null,c,0)}else g&&qe(e,u,f,c,1)}Ye(e)},remove(t,e,n,i,{um:o,o:{remove:r}},s){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&r(u),(s||!We(h))&&(r(c),16&a))for(let f=0;f<l.length;f++){const t=l[f];o(t,e,n,!0,!!t.dynamicChildren)}},move:qe,hydrate:Ge};function qe(t,e,n,{o:{insert:i},m:o},r=2){0===r&&i(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:l,children:c,props:u}=t,d=2===r;if(d&&i(s,e,n),(!d||We(u))&&16&l)for(let h=0;h<c.length;h++)o(c[h],e,n,2);d&&i(a,e,n)}function Ge(t,e,n,i,o,r,{o:{nextSibling:s,parentNode:a,querySelector:l}},c){const u=e.target=$e(e.props,l);if(u){const l=u._lpa||u.firstChild;if(16&e.shapeFlag)if(We(e.props))e.anchor=c(s(t),e,a(t),n,i,o,r),e.targetAnchor=l;else{e.anchor=s(t);let a=l;while(a)if(a=s(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}c(l,e,u,n,i,o,r)}Ye(e)}return e.anchor&&s(e.anchor)}const Ke=Ue;function Ye(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;while(n!==t.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Xe=Symbol.for("v-fgt"),Je=Symbol.for("v-txt"),Ze=Symbol.for("v-cmt"),Qe=Symbol.for("v-stc"),tn=[];let en=null;function nn(t=!1){tn.push(en=t?null:[])}function on(){tn.pop(),en=tn[tn.length-1]||null}let rn=1;function sn(t){rn+=t}function an(t){return t.dynamicChildren=rn>0?en||o.Oj:null,on(),rn>0&&en&&en.push(t),t}function ln(t,e,n,i,o,r){return an(gn(t,e,n,i,o,r,!0))}function cn(t,e,n,i,o){return an(mn(t,e,n,i,o,!0))}function un(t){return!!t&&!0===t.__v_isVNode}function dn(t,e){return t.type===e.type&&t.key===e.key}const hn="__vInternal",fn=({key:t})=>null!=t?t:null,pn=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,o.Kg)(t)||(0,i.i9)(t)||(0,o.Tn)(t)?{i:O,r:t,k:e,f:!!n}:t:null);function gn(t,e=null,n=null,i=0,r=null,s=(t===Xe?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fn(e),ref:e&&pn(e),scopeId:M,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:O};return l?(En(c,n),128&s&&t.normalize(c)):n&&(c.shapeFlag|=(0,o.Kg)(n)?8:16),rn>0&&!a&&en&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&en.push(c),c}const mn=bn;function bn(t,e=null,n=null,r=0,s=null,a=!1){if(t&&t!==Vt||(t=Ze),un(t)){const i=wn(t,e,!0);return n&&En(i,n),rn>0&&!a&&en&&(6&i.shapeFlag?en[en.indexOf(t)]=i:en.push(i)),i.patchFlag|=-2,i}if(Xn(t)&&(t=t.__vccOpts),e){e=vn(e);let{class:t,style:n}=e;t&&!(0,o.Kg)(t)&&(e.class=(0,o.C4)(t)),(0,o.Gv)(n)&&((0,i.ju)(n)&&!(0,o.cy)(n)&&(n=(0,o.X$)({},n)),e.style=(0,o.Tr)(n))}const l=(0,o.Kg)(t)?1:$(t)?128:He(t)?64:(0,o.Gv)(t)?4:(0,o.Tn)(t)?2:0;return gn(t,e,n,r,s,l,a,!0)}function vn(t){return t?(0,i.ju)(t)||hn in t?(0,o.X$)({},t):t:null}function wn(t,e,n=!1){const{props:i,ref:r,patchFlag:s,children:a}=t,l=e?Sn(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&fn(l),ref:e&&e.ref?n&&r?(0,o.cy)(r)?r.concat(pn(e)):[r,pn(e)]:pn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Xe?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wn(t.ssContent),ssFallback:t.ssFallback&&wn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c}function _n(t=" ",e=0){return mn(Je,null,t,e)}function yn(t,e){const n=mn(Qe,null,t);return n.staticCount=e,n}function kn(t="",e=!1){return e?(nn(),cn(Ze,null,t)):mn(Ze,null,t)}function Cn(t){return null==t||"boolean"===typeof t?mn(Ze):(0,o.cy)(t)?mn(Xe,null,t.slice()):"object"===typeof t?xn(t):mn(Je,null,String(t))}function xn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:wn(t)}function En(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if((0,o.cy)(e))n=16;else if("object"===typeof e){if(65&i){const n=e.default;return void(n&&(n._c&&(n._d=!1),En(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||hn in e?3===i&&O&&(1===O.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=O}}else(0,o.Tn)(e)?(e={default:e,_ctx:O},n=32):(e=String(e),64&i?(n=16,e=[_n(e)]):n=8);t.children=e,t.shapeFlag|=n}function Sn(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=(0,o.C4)([e.class,i.class]));else if("style"===t)e.style=(0,o.Tr)([e.style,i.style]);else if((0,o.Mp)(t)){const n=e[t],r=i[t];!r||n===r||(0,o.cy)(n)&&n.includes(r)||(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}function Tn(t,e,n,i=null){s(t,e,7,[n,i])}const An=ue();let Pn=0;function In(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||An,a={uid:Pn++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ye(r,s),emitsOptions:I(r,s),emit:null,emitted:null,propsDefaults:o.MZ,inheritAttrs:r.inheritAttrs,ctx:o.MZ,data:o.MZ,props:o.MZ,attrs:o.MZ,slots:o.MZ,refs:o.MZ,setupState:o.MZ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=P.bind(null,a),t.ce&&t.ce(a),a}let Rn=null;const On=()=>Rn||O;let Mn,Dn,Vn="__VUE_INSTANCE_SETTERS__";(Dn=(0,o.We)()[Vn])||(Dn=(0,o.We)()[Vn]=[]),Dn.push(t=>Rn=t),Mn=t=>{Dn.length>1?Dn.forEach(e=>e(t)):Dn[0](t)};const Nn=t=>{Mn(t),t.scope.on()},Ln=()=>{Rn&&Rn.scope.off(),Mn(null)};function Bn(t){return 4&t.vnode.shapeFlag}let Fn,zn,Hn=!1;function Wn(t,e=!1){Hn=e;const{props:n,children:i}=t.vnode,o=Bn(t);be(t,n,o,e),Re(t,i);const r=o?jn(t,e):void 0;return Hn=!1,r}function jn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,i.IG)(new Proxy(t.ctx,Ut));const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?Gn(t):null;Nn(t),(0,i.C4)();const l=r(s,t,0,[t.props,n]);if((0,i.bl)(),Ln(),(0,o.yL)(l)){if(l.then(Ln,Ln),e)return l.then(n=>{$n(t,n,e)}).catch(e=>{a(e,t,0)});t.asyncDep=l}else $n(t,l,e)}else Un(t,e)}function $n(t,e,n){(0,o.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,o.Gv)(e)&&(t.setupState=(0,i.Pr)(e)),Un(t,n)}function Un(t,e,n){const r=t.type;if(!t.render){if(!e&&Fn&&!r.render){const e=r.template||te(t).template;if(e){0;const{isCustomElement:n,compilerOptions:i}=t.appContext.config,{delimiters:s,compilerOptions:a}=r,l=(0,o.X$)((0,o.X$)({isCustomElement:n,delimiters:s},i),a);r.render=Fn(e,l)}}t.render=r.render||o.tE,zn&&zn(t)}Nn(t),(0,i.C4)(),Xt(t),(0,i.bl)(),Ln()}function qn(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,i.u4)(t,"get","$attrs"),e[n]}}))}function Gn(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return qn(t)},slots:t.slots,emit:t.emit,expose:e}}function Kn(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,i.Pr)((0,i.IG)(t.exposed)),{get(e,n){return n in e?e[n]:n in jt?jt[n](t):void 0},has(t,e){return e in t||e in jt}}))}function Yn(t,e=!0){return(0,o.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function Xn(t){return(0,o.Tn)(t)&&"__vccOpts"in t}const Jn=(t,e)=>(0,i.EW)(t,e,Hn);function Zn(t,e,n){const i=arguments.length;return 2===i?(0,o.Gv)(e)&&!(0,o.cy)(e)?un(e)?mn(t,null,[e]):mn(t,e):mn(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&un(n)&&(n=[n]),mn(t,e,n))}const Qn=Symbol.for("v-scx"),ti=()=>{{const t=ge(Qn);return t}};const ei="3.3.4"},665:function(t,e,n){"use strict";var i=n(281),o=0,r=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+r,36)}},810:function(t,e,n){"use strict";n.d(e,{Ey:function(){return C},nY:function(){return L}});var i=n(9841),o=n(641);
/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */
const r="undefined"!==typeof window;let s;const a=t=>s=t,l=Symbol();function c(t){return t&&"object"===typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!==typeof t.toJSON}var u;(function(t){t["direct"]="direct",t["patchObject"]="patch object",t["patchFunction"]="patch function"})(u||(u={}));const d=(()=>"object"===typeof window&&window.window===window?window:"object"===typeof self&&self.self===self?self:"object"===typeof global&&global.global===global?global:"object"===typeof globalThis?globalThis:{HTMLElement:null})();function h(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function f(t,e,n){const i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){v(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function p(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(n){}return e.status>=200&&e.status<=299}function g(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){const n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:80,screenY:20,clientX:80,clientY:20,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});t.dispatchEvent(n)}}const m="object"===typeof navigator?navigator:{userAgent:""},b=(()=>/Macintosh/.test(m.userAgent)&&/AppleWebKit/.test(m.userAgent)&&!/Safari/.test(m.userAgent))(),v=r?"undefined"!==typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!b?w:"msSaveOrOpenBlob"in m?_:y:()=>{};function w(t,e="download",n){const i=document.createElement("a");i.download=e,i.rel="noopener","string"===typeof t?(i.href=t,i.origin!==location.origin?p(i.href)?f(t,e,n):(i.target="_blank",g(i)):g(i)):(i.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(i.href)},4e4),setTimeout(function(){g(i)},0))}function _(t,e="download",n){if("string"===typeof t)if(p(t))f(t,e,n);else{const e=document.createElement("a");e.href=t,e.target="_blank",setTimeout(function(){g(e)})}else navigator.msSaveOrOpenBlob(h(t,n),e)}function y(t,e,n,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"===typeof t)return f(t,e,n);const o="application/octet-stream"===t.type,r=/constructor/i.test(String(d.HTMLElement))||"safari"in d,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||o&&r||b)&&"undefined"!==typeof FileReader){const e=new FileReader;e.onloadend=function(){let t=e.result;if("string"!==typeof t)throw i=null,new Error("Wrong reader.result type");t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location.assign(t),i=null},e.readAsDataURL(t)}else{const e=URL.createObjectURL(t);i?i.location.assign(e):location.href=e,i=null,setTimeout(function(){URL.revokeObjectURL(e)},4e4)}}const{assign:k}=Object;function C(){const t=(0,i.uY)(!0),e=t.run(()=>(0,i.KR)({}));let n=[],o=[];const r=(0,i.IG)({install(t){a(r),r._a=t,t.provide(l,r),t.config.globalProperties.$pinia=r,o.forEach(t=>n.push(t)),o=[]},use(t){return this._a?n.push(t):o.push(t),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const x=()=>{};function E(t,e,n,o=x){t.add(e);const r=()=>{const n=t.delete(e);n&&o()};return!n&&(0,i.o5)()&&(0,i.jr)(r),r}function S(t,...e){t.forEach(t=>{t(...e)})}const T=t=>t(),A=Symbol(),P=Symbol();function I(t,e){t instanceof Map&&e instanceof Map?e.forEach((e,n)=>t.set(n,e)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n],r=t[n];c(r)&&c(o)&&t.hasOwnProperty(n)&&!(0,i.i9)(o)&&!(0,i.g8)(o)?t[n]=I(r,o):t[n]=o}return t}const R=Symbol();function O(t){return!c(t)||!Object.prototype.hasOwnProperty.call(t,R)}const{assign:M}=Object;function D(t){return!(!(0,i.i9)(t)||!t.effect)}function V(t,e,n,r){const{state:s,actions:l,getters:c}=e,u=n.state.value[t];let d;function h(){u||(n.state.value[t]=s?s():{});const e=(0,i.QW)(n.state.value[t]);return M(e,l,Object.keys(c||{}).reduce((e,r)=>(e[r]=(0,i.IG)((0,o.EW)(()=>{a(n);const e=n._s.get(t);return c[r].call(e,e)})),e),{}))}return d=N(t,h,e,n,r,!0),d}function N(t,e,n={},r,s,l){let c;const d=M({actions:{}},n);const h={deep:!0};let f,p;let g,m=new Set,b=new Set;const v=r.state.value[t];l||v||(r.state.value[t]={});(0,i.KR)({});let w;function _(e){let n;f=p=!1,"function"===typeof e?(e(r.state.value[t]),n={type:u.patchFunction,storeId:t,events:g}):(I(r.state.value[t],e),n={type:u.patchObject,payload:e,storeId:t,events:g});const i=w=Symbol();(0,o.dY)().then(()=>{w===i&&(f=!0)}),p=!0,S(m,n,r.state.value[t])}const y=l?function(){const{state:t}=n,e=t?t():{};this.$patch(t=>{M(t,e)})}:x;function k(){c.stop(),m.clear(),b.clear(),r._s.delete(t)}const C=(e,n="")=>{if(A in e)return e[P]=n,e;const i=function(){a(r);const n=Array.from(arguments),o=new Set,s=new Set;function l(t){o.add(t)}function c(t){s.add(t)}let u;S(b,{args:n,name:i[P],store:V,after:l,onError:c});try{u=e.apply(this&&this.$id===t?this:V,n)}catch(d){throw S(s,d),d}return u instanceof Promise?u.then(t=>(S(o,t),t)).catch(t=>(S(s,t),Promise.reject(t))):(S(o,u),u)};return i[A]=!0,i[P]=n,i},R={_p:r,$id:t,$onAction:E.bind(null,b),$patch:_,$reset:y,$subscribe(e,n={}){const i=E(m,e,n.detached,()=>s()),s=c.run(()=>(0,o.wB)(()=>r.state.value[t],i=>{("sync"===n.flush?p:f)&&e({storeId:t,type:u.direct,events:g},i)},M({},h,n)));return i},$dispose:k},V=(0,i.Kh)(R);r._s.set(t,V);const N=r._a&&r._a.runWithContext||T,L=N(()=>r._e.run(()=>(c=(0,i.uY)()).run(()=>e({action:C}))));for(const o in L){const e=L[o];if((0,i.i9)(e)&&!D(e)||(0,i.g8)(e))l||(v&&O(e)&&((0,i.i9)(e)?e.value=v[o]:I(e,v[o])),r.state.value[t][o]=e);else if("function"===typeof e){const t=C(e,o);L[o]=t,d.actions[o]=e}else 0}return M(V,L),M((0,i.ux)(V),L),Object.defineProperty(V,"$state",{get:()=>r.state.value[t],set:t=>{_(e=>{M(e,t)})}}),r._p.forEach(t=>{M(V,c.run(()=>t({store:V,app:r._a,pinia:r,options:d})))}),v&&l&&n.hydrate&&n.hydrate(V.$state,v),f=!0,p=!0,V}
/*! #__NO_SIDE_EFFECTS__ */function L(t,e,n){let i;const r="function"===typeof e;function c(n,c){const u=(0,o.PS)();n=n||(u?(0,o.WQ)(l,null):null),n&&a(n),n=s,n._s.has(t)||(r?N(t,e,i,n):V(t,i,n));const d=n._s.get(t);return d}return i=r?n:e,c.$id=t,c}},874:function(t,e,n){"use strict";var i=n(2368),o=n(5335),r=n(2328),s=n(6457),a=n(9751),l=n(1602),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!o(t)||r(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!o(n)||r(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},938:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1059:function(t,e,n){"use strict";var i=n(7485),o=n(281),r=n(5362),s=n(6589),a=URLSearchParams,l=a.prototype,c=o(l.getAll),u=o(l.has),d=new a("a=1");!d.has("a",2)&&d.has("a",void 0)||i(l,"has",function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return u(this,t);var i=c(this,t);s(e,1);var o=r(n),a=0;while(a<i.length)if(i[a++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})},1182:function(t,e,n){"use strict";var i=n(6794),o=n(1635);
/*!
FullCalendar v5.11.3
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/
i.$WB.touchMouseIgnoreWait=500;var r=0,s=0,a=!1,l=function(){function t(t){var e=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(t){if(!e.shouldIgnoreMouse()&&c(t)&&e.tryStart(t)){var n=e.createEventFromMouse(t,!0);e.emitter.trigger("pointerdown",n),e.initScrollWatch(n),e.shouldIgnoreMove||document.addEventListener("mousemove",e.handleMouseMove),document.addEventListener("mouseup",e.handleMouseUp)}},this.handleMouseMove=function(t){var n=e.createEventFromMouse(t);e.recordCoords(n),e.emitter.trigger("pointermove",n)},this.handleMouseUp=function(t){document.removeEventListener("mousemove",e.handleMouseMove),document.removeEventListener("mouseup",e.handleMouseUp),e.emitter.trigger("pointerup",e.createEventFromMouse(t)),e.cleanup()},this.handleTouchStart=function(t){if(e.tryStart(t)){e.isTouchDragging=!0;var n=e.createEventFromTouch(t,!0);e.emitter.trigger("pointerdown",n),e.initScrollWatch(n);var i=t.target;e.shouldIgnoreMove||i.addEventListener("touchmove",e.handleTouchMove),i.addEventListener("touchend",e.handleTouchEnd),i.addEventListener("touchcancel",e.handleTouchEnd),window.addEventListener("scroll",e.handleTouchScroll,!0)}},this.handleTouchMove=function(t){var n=e.createEventFromTouch(t);e.recordCoords(n),e.emitter.trigger("pointermove",n)},this.handleTouchEnd=function(t){if(e.isDragging){var n=t.target;n.removeEventListener("touchmove",e.handleTouchMove),n.removeEventListener("touchend",e.handleTouchEnd),n.removeEventListener("touchcancel",e.handleTouchEnd),window.removeEventListener("scroll",e.handleTouchScroll,!0),e.emitter.trigger("pointerup",e.createEventFromTouch(t)),e.cleanup(),e.isTouchDragging=!1,u()}},this.handleTouchScroll=function(){e.wasTouchScroll=!0},this.handleScroll=function(t){if(!e.shouldIgnoreMove){var n=window.pageXOffset-e.prevScrollX+e.prevPageX,i=window.pageYOffset-e.prevScrollY+e.prevPageY;e.emitter.trigger("pointermove",{origEvent:t,isTouch:e.isTouchDragging,subjectEl:e.subjectEl,pageX:n,pageY:i,deltaX:n-e.origPageX,deltaY:i-e.origPageY})}},this.containerEl=t,this.emitter=new i.vli,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),d()}return t.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),h()},t.prototype.tryStart=function(t){var e=this.querySubjectEl(t),n=t.target;return!(!e||this.handleSelector&&!(0,i.YAv)(n,this.handleSelector))&&(this.subjectEl=e,this.isDragging=!0,this.wasTouchScroll=!1,!0)},t.prototype.cleanup=function(){a=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},t.prototype.querySubjectEl=function(t){return this.selector?(0,i.YAv)(t.target,this.selector):this.containerEl},t.prototype.shouldIgnoreMouse=function(){return r||this.isTouchDragging},t.prototype.cancelTouchScroll=function(){this.isDragging&&(a=!0)},t.prototype.initScrollWatch=function(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))},t.prototype.recordCoords=function(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},t.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},t.prototype.createEventFromMouse=function(t,e){var n=0,i=0;return e?(this.origPageX=t.pageX,this.origPageY=t.pageY):(n=t.pageX-this.origPageX,i=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:n,deltaY:i}},t.prototype.createEventFromTouch=function(t,e){var n,i,o=t.touches,r=0,s=0;return o&&o.length?(n=o[0].pageX,i=o[0].pageY):(n=t.pageX,i=t.pageY),e?(this.origPageX=n,this.origPageY=i):(r=n-this.origPageX,s=i-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:i,deltaX:r,deltaY:s}},t}();function c(t){return 0===t.button&&!t.ctrlKey}function u(){r+=1,setTimeout(function(){r-=1},i.$WB.touchMouseIgnoreWait)}function d(){s+=1,1===s&&window.addEventListener("touchmove",f,{passive:!1})}function h(){s-=1,s||window.removeEventListener("touchmove",f,{passive:!1})}function f(t){a&&t.preventDefault()}var p=function(){function t(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return t.prototype.start=function(t,e,n){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=e-window.pageXOffset,this.origScreenY=n-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},t.prototype.handleMove=function(t,e){this.deltaX=t-window.pageXOffset-this.origScreenX,this.deltaY=e-window.pageYOffset-this.origScreenY,this.updateElPosition()},t.prototype.setIsVisible=function(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)},t.prototype.stop=function(t,e){var n=this,i=function(){n.cleanup(),e()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)},t.prototype.doRevertAnimation=function(t,e){var n=this.mirrorEl,o=this.sourceEl.getBoundingClientRect();n.style.transition="top "+e+"ms,left "+e+"ms",(0,i.AVT)(n,{left:o.left,top:o.top}),(0,i.SH7)(n,function(){n.style.transition="",t()})},t.prototype.cleanup=function(){this.mirrorEl&&((0,i.NzY)(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},t.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&(0,i.AVT)(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},t.prototype.getMirrorEl=function(){var t=this.sourceElRect,e=this.mirrorEl;return e||(e=this.mirrorEl=this.sourceEl.cloneNode(!0),e.classList.add("fc-unselectable"),e.classList.add("fc-event-dragging"),(0,i.AVT)(e,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(e)),e},t}(),g=function(t){function e(e,n){var i=t.call(this)||this;return i.handleScroll=function(){i.scrollTop=i.scrollController.getScrollTop(),i.scrollLeft=i.scrollController.getScrollLeft(),i.handleScrollChange()},i.scrollController=e,i.doesListening=n,i.scrollTop=i.origScrollTop=e.getScrollTop(),i.scrollLeft=i.origScrollLeft=e.getScrollLeft(),i.scrollWidth=e.getScrollWidth(),i.scrollHeight=e.getScrollHeight(),i.clientWidth=e.getClientWidth(),i.clientHeight=e.getClientHeight(),i.clientRect=i.computeClientRect(),i.doesListening&&i.getEventTarget().addEventListener("scroll",i.handleScroll),i}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},e.prototype.getScrollTop=function(){return this.scrollTop},e.prototype.getScrollLeft=function(){return this.scrollLeft},e.prototype.setScrollTop=function(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())},e.prototype.setScrollLeft=function(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())},e.prototype.getClientWidth=function(){return this.clientWidth},e.prototype.getClientHeight=function(){return this.clientHeight},e.prototype.getScrollWidth=function(){return this.scrollWidth},e.prototype.getScrollHeight=function(){return this.scrollHeight},e.prototype.handleScrollChange=function(){},e}(i.w1c),m=function(t){function e(e,n){return t.call(this,new i._n8(e),n)||this}return(0,o.C6)(e,t),e.prototype.getEventTarget=function(){return this.scrollController.el},e.prototype.computeClientRect=function(){return(0,i.Qfg)(this.scrollController.el)},e}(g),b=function(t){function e(e){return t.call(this,new i.Wkc,e)||this}return(0,o.C6)(e,t),e.prototype.getEventTarget=function(){return window},e.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},e.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},e}(g),v="function"===typeof performance?performance.now:Date.now,w=function(){function t(){var t=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(t.isAnimating){var e=t.computeBestEdge(t.pointerScreenX+window.pageXOffset,t.pointerScreenY+window.pageYOffset);if(e){var n=v();t.handleSide(e,(n-t.msSinceRequest)/1e3),t.requestAnimation(n)}else t.isAnimating=!1}}}return t.prototype.start=function(t,e,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,e))},t.prototype.handleMove=function(t,e){if(this.isEnabled){var n=t-window.pageXOffset,i=e-window.pageYOffset,o=null===this.pointerScreenY?0:i-this.pointerScreenY,r=null===this.pointerScreenX?0:n-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),r<0?this.everMovedLeft=!0:r>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(v()))}},t.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var t=0,e=this.scrollCaches;t<e.length;t++){var n=e[t];n.destroy()}this.scrollCaches=null}},t.prototype.requestAnimation=function(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)},t.prototype.handleSide=function(t,e){var n=t.scrollCache,i=this.edgeThreshold,o=i-t.distance,r=o*o/(i*i)*this.maxVelocity*e,s=1;switch(t.name){case"left":s=-1;case"right":n.setScrollLeft(n.getScrollLeft()+r*s);break;case"top":s=-1;case"bottom":n.setScrollTop(n.getScrollTop()+r*s);break}},t.prototype.computeBestEdge=function(t,e){for(var n=this.edgeThreshold,i=null,o=this.scrollCaches||[],r=0,s=o;r<s.length;r++){var a=s[r],l=a.clientRect,c=t-l.left,u=l.right-t,d=e-l.top,h=l.bottom-e;c>=0&&u>=0&&d>=0&&h>=0&&(d<=n&&this.everMovedUp&&a.canScrollUp()&&(!i||i.distance>d)&&(i={scrollCache:a,name:"top",distance:d}),h<=n&&this.everMovedDown&&a.canScrollDown()&&(!i||i.distance>h)&&(i={scrollCache:a,name:"bottom",distance:h}),c<=n&&this.everMovedLeft&&a.canScrollLeft()&&(!i||i.distance>c)&&(i={scrollCache:a,name:"left",distance:c}),u<=n&&this.everMovedRight&&a.canScrollRight()&&(!i||i.distance>u)&&(i={scrollCache:a,name:"right",distance:u}))}return i},t.prototype.buildCaches=function(t){return this.queryScrollEls(t).map(function(t){return t===window?new b(!1):new m(t,!1)})},t.prototype.queryScrollEls=function(t){for(var e=[],n=0,o=this.scrollQuery;n<o.length;n++){var r=o[n];"object"===typeof r?e.push(r):e.push.apply(e,Array.prototype.slice.call((0,i.UOc)(t).querySelectorAll(r)))}return e},t}(),_=function(t){function e(e,n){var o=t.call(this,e)||this;o.containerEl=e,o.delay=null,o.minDistance=0,o.touchScrollAllowed=!0,o.mirrorNeedsRevert=!1,o.isInteracting=!1,o.isDragging=!1,o.isDelayEnded=!1,o.isDistanceSurpassed=!1,o.delayTimeoutId=null,o.onPointerDown=function(t){o.isDragging||(o.isInteracting=!0,o.isDelayEnded=!1,o.isDistanceSurpassed=!1,(0,i.vFY)(document.body),(0,i.N7h)(document.body),t.isTouch||t.origEvent.preventDefault(),o.emitter.trigger("pointerdown",t),o.isInteracting&&!o.pointer.shouldIgnoreMove&&(o.mirror.setIsVisible(!1),o.mirror.start(t.subjectEl,t.pageX,t.pageY),o.startDelay(t),o.minDistance||o.handleDistanceSurpassed(t)))},o.onPointerMove=function(t){if(o.isInteracting){if(o.emitter.trigger("pointermove",t),!o.isDistanceSurpassed){var e=o.minDistance,n=void 0,i=t.deltaX,r=t.deltaY;n=i*i+r*r,n>=e*e&&o.handleDistanceSurpassed(t)}o.isDragging&&("scroll"!==t.origEvent.type&&(o.mirror.handleMove(t.pageX,t.pageY),o.autoScroller.handleMove(t.pageX,t.pageY)),o.emitter.trigger("dragmove",t))}},o.onPointerUp=function(t){o.isInteracting&&(o.isInteracting=!1,(0,i._8O)(document.body),(0,i.iDH)(document.body),o.emitter.trigger("pointerup",t),o.isDragging&&(o.autoScroller.stop(),o.tryStopDrag(t)),o.delayTimeoutId&&(clearTimeout(o.delayTimeoutId),o.delayTimeoutId=null))};var r=o.pointer=new l(e);return r.emitter.on("pointerdown",o.onPointerDown),r.emitter.on("pointermove",o.onPointerMove),r.emitter.on("pointerup",o.onPointerUp),n&&(r.selector=n),o.mirror=new p,o.autoScroller=new w,o}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},e.prototype.startDelay=function(t){var e=this;"number"===typeof this.delay?this.delayTimeoutId=setTimeout(function(){e.delayTimeoutId=null,e.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},e.prototype.handleDelayEnd=function(t){this.isDelayEnded=!0,this.tryStartDrag(t)},e.prototype.handleDistanceSurpassed=function(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)},e.prototype.tryStartDrag=function(t){this.isDelayEnded&&this.isDistanceSurpassed&&(this.pointer.wasTouchScroll&&!this.touchScrollAllowed||(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll()))},e.prototype.tryStopDrag=function(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))},e.prototype.stopDrag=function(t){this.isDragging=!1,this.emitter.trigger("dragend",t)},e.prototype.setIgnoreMove=function(t){this.pointer.shouldIgnoreMove=t},e.prototype.setMirrorIsVisible=function(t){this.mirror.setIsVisible(t)},e.prototype.setMirrorNeedsRevert=function(t){this.mirrorNeedsRevert=t},e.prototype.setAutoScrollEnabled=function(t){this.autoScroller.isEnabled=t},e}(i.WDw),y=function(){function t(t){this.origRect=(0,i.Cc$)(t),this.scrollCaches=(0,i.ccu)(t).map(function(t){return new m(t,!0)})}return t.prototype.destroy=function(){for(var t=0,e=this.scrollCaches;t<e.length;t++){var n=e[t];n.destroy()}},t.prototype.computeLeft=function(){for(var t=this.origRect.left,e=0,n=this.scrollCaches;e<n.length;e++){var i=n[e];t+=i.origScrollLeft-i.getScrollLeft()}return t},t.prototype.computeTop=function(){for(var t=this.origRect.top,e=0,n=this.scrollCaches;e<n.length;e++){var i=n[e];t+=i.origScrollTop-i.getScrollTop()}return t},t.prototype.isWithinClipping=function(t,e){for(var n={left:t,top:e},o=0,r=this.scrollCaches;o<r.length;o++){var s=r[o];if(!k(s.getEventTarget())&&!(0,i.$UH)(n,s.clientRect))return!1}return!0},t}();function k(t){var e=t.tagName;return"HTML"===e||"BODY"===e}var C=function(){function t(t,e){var n=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(t){var e=n.dragging;n.initialHit=null,n.movingHit=null,n.finalHit=null,n.prepareHits(),n.processFirstCoord(t),n.initialHit||!n.requireInitial?(e.setIgnoreMove(!1),n.emitter.trigger("pointerdown",t)):e.setIgnoreMove(!0)},this.handleDragStart=function(t){n.emitter.trigger("dragstart",t),n.handleMove(t,!0)},this.handleDragMove=function(t){n.emitter.trigger("dragmove",t),n.handleMove(t)},this.handlePointerUp=function(t){n.releaseHits(),n.emitter.trigger("pointerup",t)},this.handleDragEnd=function(t){n.movingHit&&n.emitter.trigger("hitupdate",null,!0,t),n.finalHit=n.movingHit,n.movingHit=null,n.emitter.trigger("dragend",t)},this.droppableStore=e,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new i.vli}return t.prototype.processFirstCoord=function(t){var e,n={left:t.pageX,top:t.pageY},o=n,r=t.subjectEl;r instanceof HTMLElement&&(e=(0,i.Cc$)(r),o=(0,i.AF1)(o,e));var s=this.initialHit=this.queryHitForOffset(o.left,o.top);if(s){if(this.useSubjectCenter&&e){var a=(0,i.B_7)(e,s.rect);a&&(o=(0,i.QvU)(a))}this.coordAdjust=(0,i.puS)(o,n)}else this.coordAdjust={left:0,top:0}},t.prototype.handleMove=function(t,e){var n=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);!e&&x(this.movingHit,n)||(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,t))},t.prototype.prepareHits=function(){this.offsetTrackers=(0,i.d_K)(this.droppableStore,function(t){return t.component.prepareHits(),new y(t.el)})},t.prototype.releaseHits=function(){var t=this.offsetTrackers;for(var e in t)t[e].destroy();this.offsetTrackers={}},t.prototype.queryHitForOffset=function(t,e){var n=this,o=n.droppableStore,r=n.offsetTrackers,s=null;for(var a in o){var l=o[a].component,c=r[a];if(c&&c.isWithinClipping(t,e)){var u=c.computeLeft(),d=c.computeTop(),h=t-u,f=e-d,p=c.origRect,g=p.right-p.left,m=p.bottom-p.top;if(h>=0&&h<g&&f>=0&&f<m){var b=l.queryHit(h,f,g,m);b&&(0,i.wj3)(b.dateProfile.activeRange,b.dateSpan.range)&&(!s||b.layer>s.layer)&&(b.componentId=a,b.context=l.context,b.rect.left+=u,b.rect.right+=u,b.rect.top+=d,b.rect.bottom+=d,s=b)}}}return s},t}();function x(t,e){return!t&&!e||Boolean(t)===Boolean(e)&&(0,i.U6q)(t.dateSpan,e.dateSpan)}function E(t,e){for(var n={},i=0,r=e.pluginHooks.datePointTransforms;i<r.length;i++){var s=r[i];(0,o.Cl)(n,s(t,e))}return(0,o.Cl)(n,S(t,e.dateEnv)),n}function S(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}var T=function(t){function e(e){var n=t.call(this,e)||this;n.handlePointerDown=function(t){var e=n.dragging,i=t.origEvent.target;e.setIgnoreMove(!n.component.isValidDateDownEl(i))},n.handleDragEnd=function(t){var e=n.component,i=n.dragging.pointer;if(!i.wasTouchScroll){var r=n.hitDragging,s=r.initialHit,a=r.finalHit;if(s&&a&&x(s,a)){var l=e.context,c=(0,o.Cl)((0,o.Cl)({},E(s.dateSpan,l)),{dayEl:s.dayEl,jsEvent:t.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",c)}}},n.dragging=new _(e.el),n.dragging.autoScroller.isEnabled=!1;var r=n.hitDragging=new C(n.dragging,(0,i.qIM)(e));return r.emitter.on("pointerdown",n.handlePointerDown),r.emitter.on("dragend",n.handleDragEnd),n}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.dragging.destroy()},e}(i.N3M),A=function(t){function e(e){var n=t.call(this,e)||this;n.dragSelection=null,n.handlePointerDown=function(t){var e=n,i=e.component,o=e.dragging,r=i.context.options,s=r.selectable&&i.isValidDateDownEl(t.origEvent.target);o.setIgnoreMove(!s),o.delay=t.isTouch?P(i):null},n.handleDragStart=function(t){n.component.context.calendarApi.unselect(t)},n.handleHitUpdate=function(t,e){var o=n.component.context,r=null,s=!1;if(t){var a=n.hitDragging.initialHit,l=t.componentId===a.componentId&&n.isHitComboAllowed&&!n.isHitComboAllowed(a,t);l||(r=I(a,t,o.pluginHooks.dateSelectionTransformers)),r&&(0,i.rjW)(r,t.dateProfile,o)||(s=!0,r=null)}r?o.dispatch({type:"SELECT_DATES",selection:r}):e||o.dispatch({type:"UNSELECT_DATES"}),s?(0,i.tOV)():(0,i.q2g)(),e||(n.dragSelection=r)},n.handlePointerUp=function(t){n.dragSelection&&((0,i.F5O)(n.dragSelection,t,n.component.context),n.dragSelection=null)};var o=e.component,r=o.context.options,s=n.dragging=new _(e.el);s.touchScrollAllowed=!1,s.minDistance=r.selectMinDistance||0,s.autoScroller.isEnabled=r.dragScroll;var a=n.hitDragging=new C(n.dragging,(0,i.qIM)(e));return a.emitter.on("pointerdown",n.handlePointerDown),a.emitter.on("dragstart",n.handleDragStart),a.emitter.on("hitupdate",n.handleHitUpdate),a.emitter.on("pointerup",n.handlePointerUp),n}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.dragging.destroy()},e}(i.N3M);function P(t){var e=t.context.options,n=e.selectLongPressDelay;return null==n&&(n=e.longPressDelay),n}function I(t,e,n){var r=t.dateSpan,s=e.dateSpan,a=[r.range.start,r.range.end,s.range.start,s.range.end];a.sort(i.S$d);for(var l={},c=0,u=n;c<u.length;c++){var d=u[c],h=d(t,e);if(!1===h)return null;h&&(0,o.Cl)(l,h)}return l.range={start:a[0],end:a[3]},l.allDay=r.allDay,l}var R=function(t){function e(n){var r=t.call(this,n)||this;r.subjectEl=null,r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingContext=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(t){var e=t.origEvent.target,n=r,o=n.component,s=n.dragging,a=s.mirror,l=o.context.options,c=o.context;r.subjectEl=t.subjectEl;var u=r.subjectSeg=(0,i.VVT)(t.subjectEl),d=r.eventRange=u.eventRange,h=d.instance.instanceId;r.relevantEvents=(0,i.LkY)(c.getCurrentData().eventStore,h),s.minDistance=t.isTouch?0:l.eventDragMinDistance,s.delay=t.isTouch&&h!==o.props.eventSelection?M(o):null,l.fixedMirrorParent?a.parentNode=l.fixedMirrorParent:a.parentNode=(0,i.YAv)(e,".fc"),a.revertDuration=l.dragRevertDuration;var f=o.isValidSegDownEl(e)&&!(0,i.YAv)(e,".fc-event-resizer");s.setIgnoreMove(!f),r.isDragging=f&&t.subjectEl.classList.contains("fc-event-draggable")},r.handleDragStart=function(t){var e=r.component.context,n=r.eventRange,o=n.instance.instanceId;t.isTouch?o!==r.component.props.eventSelection&&e.dispatch({type:"SELECT_EVENT",eventInstanceId:o}):e.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(e.calendarApi.unselect(t),e.emitter.trigger("eventDragStart",{el:r.subjectEl,event:new i.fhX(e,n.def,n.instance),jsEvent:t.origEvent,view:e.viewApi}))},r.handleHitUpdate=function(t,e){if(r.isDragging){var n=r.relevantEvents,o=r.hitDragging.initialHit,s=r.component.context,a=null,l=null,c=null,u=!1,d={affectedEvents:n,mutatedEvents:(0,i.H8x)(),isEvent:!0};if(t){a=t.context;var h=a.options;s===a||h.editable&&h.droppable?(l=O(o,t,a.getCurrentData().pluginHooks.eventDragMutationMassagers),l&&(c=(0,i.on3)(n,a.getCurrentData().eventUiBases,l,a),d.mutatedEvents=c,(0,i.lVx)(d,t.dateProfile,a)||(u=!0,l=null,c=null,d.mutatedEvents=(0,i.H8x)()))):a=null}r.displayDrag(a,d),u?(0,i.tOV)():(0,i.q2g)(),e||(s===a&&x(o,t)&&(l=null),r.dragging.setMirrorNeedsRevert(!l),r.dragging.setMirrorIsVisible(!t||!(0,i.UOc)(r.subjectEl).querySelector(".fc-event-mirror")),r.receivingContext=a,r.validMutation=l,r.mutatedRelevantEvents=c)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(t){if(r.isDragging){var e=r.component.context,n=e.viewApi,s=r,a=s.receivingContext,l=s.validMutation,c=r.eventRange.def,u=r.eventRange.instance,d=new i.fhX(e,c,u),h=r.relevantEvents,f=r.mutatedRelevantEvents,p=r.hitDragging.finalHit;if(r.clearDrag(),e.emitter.trigger("eventDragStop",{el:r.subjectEl,event:d,jsEvent:t.origEvent,view:n}),l){if(a===e){var g=new i.fhX(e,f.defs[c.defId],u?f.instances[u.instanceId]:null);e.dispatch({type:"MERGE_EVENTS",eventStore:f});for(var m={oldEvent:d,event:g,relatedEvents:(0,i.uEb)(f,e,u),revert:function(){e.dispatch({type:"MERGE_EVENTS",eventStore:h})}},b={},v=0,w=e.getCurrentData().pluginHooks.eventDropTransformers;v<w.length;v++){var _=w[v];(0,o.Cl)(b,_(l,e))}e.emitter.trigger("eventDrop",(0,o.Cl)((0,o.Cl)((0,o.Cl)({},m),b),{el:t.subjectEl,delta:l.datesDelta,jsEvent:t.origEvent,view:n})),e.emitter.trigger("eventChange",m)}else if(a){var y={event:d,relatedEvents:(0,i.uEb)(h,e,u),revert:function(){e.dispatch({type:"MERGE_EVENTS",eventStore:h})}};e.emitter.trigger("eventLeave",(0,o.Cl)((0,o.Cl)({},y),{draggedEl:t.subjectEl,view:n})),e.dispatch({type:"REMOVE_EVENTS",eventStore:h}),e.emitter.trigger("eventRemove",y);var k=f.defs[c.defId],C=f.instances[u.instanceId],x=new i.fhX(a,k,C);a.dispatch({type:"MERGE_EVENTS",eventStore:f});var S={event:x,relatedEvents:(0,i.uEb)(f,a,C),revert:function(){a.dispatch({type:"REMOVE_EVENTS",eventStore:f})}};a.emitter.trigger("eventAdd",S),t.isTouch&&a.dispatch({type:"SELECT_EVENT",eventInstanceId:u.instanceId}),a.emitter.trigger("drop",(0,o.Cl)((0,o.Cl)({},E(p.dateSpan,a)),{draggedEl:t.subjectEl,jsEvent:t.origEvent,view:p.context.viewApi})),a.emitter.trigger("eventReceive",(0,o.Cl)((0,o.Cl)({},S),{draggedEl:t.subjectEl,view:p.context.viewApi}))}}else e.emitter.trigger("_noEventDrop")}r.cleanup()};var s=r.component,a=s.context.options,l=r.dragging=new _(n.el);l.pointer.selector=e.SELECTOR,l.touchScrollAllowed=!1,l.autoScroller.isEnabled=a.dragScroll;var c=r.hitDragging=new C(r.dragging,i.BNQ);return c.useSubjectCenter=n.useEventCenter,c.emitter.on("pointerdown",r.handlePointerDown),c.emitter.on("dragstart",r.handleDragStart),c.emitter.on("hitupdate",r.handleHitUpdate),c.emitter.on("pointerup",r.handlePointerUp),c.emitter.on("dragend",r.handleDragEnd),r}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.dragging.destroy()},e.prototype.displayDrag=function(t,e){var n=this.component.context,o=this.receivingContext;o&&o!==t&&(o===n?o.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:e.affectedEvents,mutatedEvents:(0,i.H8x)(),isEvent:!0}}):o.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:e})},e.prototype.clearDrag=function(){var t=this.component.context,e=this.receivingContext;e&&e.dispatch({type:"UNSET_EVENT_DRAG"}),t!==e&&t.dispatch({type:"UNSET_EVENT_DRAG"})},e.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},e.SELECTOR=".fc-event-draggable, .fc-event-resizable",e}(i.N3M);function O(t,e,n){var o=t.dateSpan,r=e.dateSpan,s=o.range.start,a=r.range.start,l={};o.allDay!==r.allDay&&(l.allDay=r.allDay,l.hasEnd=e.context.options.allDayMaintainDuration,r.allDay&&(s=(0,i.ol1)(s)));var c=(0,i.FjJ)(s,a,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);c.milliseconds&&(l.allDay=!1);for(var u={datesDelta:c,standardProps:l},d=0,h=n;d<h.length;d++){var f=h[d];f(u,t,e)}return u}function M(t){var e=t.context.options,n=e.eventLongPressDelay;return null==n&&(n=e.longPressDelay),n}var D=function(t){function e(e){var n=t.call(this,e)||this;n.draggingSegEl=null,n.draggingSeg=null,n.eventRange=null,n.relevantEvents=null,n.validMutation=null,n.mutatedRelevantEvents=null,n.handlePointerDown=function(t){var e=n.component,o=n.querySegEl(t),r=(0,i.VVT)(o),s=n.eventRange=r.eventRange;n.dragging.minDistance=e.context.options.eventDragMinDistance,n.dragging.setIgnoreMove(!n.component.isValidSegDownEl(t.origEvent.target)||t.isTouch&&n.component.props.eventSelection!==s.instance.instanceId)},n.handleDragStart=function(t){var e=n.component.context,o=n.eventRange;n.relevantEvents=(0,i.LkY)(e.getCurrentData().eventStore,n.eventRange.instance.instanceId);var r=n.querySegEl(t);n.draggingSegEl=r,n.draggingSeg=(0,i.VVT)(r),e.calendarApi.unselect(),e.emitter.trigger("eventResizeStart",{el:r,event:new i.fhX(e,o.def,o.instance),jsEvent:t.origEvent,view:e.viewApi})},n.handleHitUpdate=function(t,e,o){var r=n.component.context,s=n.relevantEvents,a=n.hitDragging.initialHit,l=n.eventRange.instance,c=null,u=null,d=!1,h={affectedEvents:s,mutatedEvents:(0,i.H8x)(),isEvent:!0};if(t){var f=t.componentId===a.componentId&&n.isHitComboAllowed&&!n.isHitComboAllowed(a,t);f||(c=V(a,t,o.subjectEl.classList.contains("fc-event-resizer-start"),l.range))}c&&(u=(0,i.on3)(s,r.getCurrentData().eventUiBases,c,r),h.mutatedEvents=u,(0,i.lVx)(h,t.dateProfile,r)||(d=!0,c=null,u=null,h.mutatedEvents=null)),u?r.dispatch({type:"SET_EVENT_RESIZE",state:h}):r.dispatch({type:"UNSET_EVENT_RESIZE"}),d?(0,i.tOV)():(0,i.q2g)(),e||(c&&x(a,t)&&(c=null),n.validMutation=c,n.mutatedRelevantEvents=u)},n.handleDragEnd=function(t){var e=n.component.context,r=n.eventRange.def,s=n.eventRange.instance,a=new i.fhX(e,r,s),l=n.relevantEvents,c=n.mutatedRelevantEvents;if(e.emitter.trigger("eventResizeStop",{el:n.draggingSegEl,event:a,jsEvent:t.origEvent,view:e.viewApi}),n.validMutation){var u=new i.fhX(e,c.defs[r.defId],s?c.instances[s.instanceId]:null);e.dispatch({type:"MERGE_EVENTS",eventStore:c});var d={oldEvent:a,event:u,relatedEvents:(0,i.uEb)(c,e,s),revert:function(){e.dispatch({type:"MERGE_EVENTS",eventStore:l})}};e.emitter.trigger("eventResize",(0,o.Cl)((0,o.Cl)({},d),{el:n.draggingSegEl,startDelta:n.validMutation.startDelta||(0,i.xCT)(0),endDelta:n.validMutation.endDelta||(0,i.xCT)(0),jsEvent:t.origEvent,view:e.viewApi})),e.emitter.trigger("eventChange",d)}else e.emitter.trigger("_noEventResize");n.draggingSeg=null,n.relevantEvents=null,n.validMutation=null};var r=e.component,s=n.dragging=new _(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=r.context.options.dragScroll;var a=n.hitDragging=new C(n.dragging,(0,i.qIM)(e));return a.emitter.on("pointerdown",n.handlePointerDown),a.emitter.on("dragstart",n.handleDragStart),a.emitter.on("hitupdate",n.handleHitUpdate),a.emitter.on("dragend",n.handleDragEnd),n}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.dragging.destroy()},e.prototype.querySegEl=function(t){return(0,i.YAv)(t.subjectEl,".fc-event")},e}(i.N3M);function V(t,e,n,o){var r=t.context.dateEnv,s=t.dateSpan.range.start,a=e.dateSpan.range.start,l=(0,i.FjJ)(s,a,r,t.largeUnit);if(n){if(r.add(o.start,l)<o.end)return{startDelta:l}}else if(r.add(o.end,l)>o.start)return{endDelta:l};return null}var N=function(){function t(t){var e=this;this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(t){t.jsEvent&&(e.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(t){var n=e.context.options.unselectCancel,o=(0,i.Mpm)(t.origEvent);e.matchesCancel=!!(0,i.YAv)(o,n),e.matchesEvent=!!(0,i.YAv)(o,R.SELECTOR)},this.onDocumentPointerUp=function(t){var n=e.context,i=e.documentPointer,o=n.getCurrentData();if(!i.wasTouchScroll){if(o.dateSelection&&!e.isRecentPointerDateSelect){var r=n.options.unselectAuto;!r||r&&e.matchesCancel||n.calendarApi.unselect(t)}o.eventSelection&&!e.matchesEvent&&n.dispatch({type:"UNSELECT_EVENT"})}e.isRecentPointerDateSelect=!1};var n=this.documentPointer=new l(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}return t.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},t}(),L={fixedMirrorParent:i.D_O},B={dateClick:i.D_O,eventDragStart:i.D_O,eventDragStop:i.D_O,eventDrop:i.D_O,eventResizeStart:i.D_O,eventResizeStop:i.D_O,eventResize:i.D_O,drop:i.D_O,eventReceive:i.D_O,eventLeave:i.D_O},F=function(){function t(t,e){var n=this;this.receivingContext=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=function(t){n.dragMeta=n.buildDragMeta(t.subjectEl)},this.handleHitUpdate=function(t,e,o){var r=n.hitDragging.dragging,s=null,a=null,l=!1,c={affectedEvents:(0,i.H8x)(),mutatedEvents:(0,i.H8x)(),isEvent:n.dragMeta.create};t&&(s=t.context,n.canDropElOnCalendar(o.subjectEl,s)&&(a=z(t.dateSpan,n.dragMeta,s),c.mutatedEvents=(0,i.tbu)(a),l=!(0,i.lVx)(c,t.dateProfile,s),l&&(c.mutatedEvents=(0,i.H8x)(),a=null))),n.displayDrag(s,c),r.setMirrorIsVisible(e||!a||!document.querySelector(".fc-event-mirror")),l?(0,i.tOV)():(0,i.q2g)(),e||(r.setMirrorNeedsRevert(!a),n.receivingContext=s,n.droppableEvent=a)},this.handleDragEnd=function(t){var e=n,r=e.receivingContext,s=e.droppableEvent;if(n.clearDrag(),r&&s){var a=n.hitDragging.finalHit,l=a.context.viewApi,c=n.dragMeta;if(r.emitter.trigger("drop",(0,o.Cl)((0,o.Cl)({},E(a.dateSpan,r)),{draggedEl:t.subjectEl,jsEvent:t.origEvent,view:l})),c.create){var u=(0,i.tbu)(s);r.dispatch({type:"MERGE_EVENTS",eventStore:u}),t.isTouch&&r.dispatch({type:"SELECT_EVENT",eventInstanceId:s.instance.instanceId}),r.emitter.trigger("eventReceive",{event:new i.fhX(r,s.def,s.instance),relatedEvents:[],revert:function(){r.dispatch({type:"REMOVE_EVENTS",eventStore:u})},draggedEl:t.subjectEl,view:l})}}n.receivingContext=null,n.droppableEvent=null};var r=this.hitDragging=new C(t,i.BNQ);r.requireInitial=!1,r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=e}return t.prototype.buildDragMeta=function(t){return"object"===typeof this.suppliedDragMeta?(0,i.PWO)(this.suppliedDragMeta):"function"===typeof this.suppliedDragMeta?(0,i.PWO)(this.suppliedDragMeta(t)):H(t)},t.prototype.displayDrag=function(t,e){var n=this.receivingContext;n&&n!==t&&n.dispatch({type:"UNSET_EVENT_DRAG"}),t&&t.dispatch({type:"SET_EVENT_DRAG",state:e})},t.prototype.clearDrag=function(){this.receivingContext&&this.receivingContext.dispatch({type:"UNSET_EVENT_DRAG"})},t.prototype.canDropElOnCalendar=function(t,e){var n=e.options.dropAccept;return"function"===typeof n?n.call(e.calendarApi,t):"string"!==typeof n||!n||Boolean((0,i.C4N)(t,n))},t}();function z(t,e,n){for(var r=(0,o.Cl)({},e.leftoverProps),s=0,a=n.pluginHooks.externalDefTransforms;s<a.length;s++){var l=a[s];(0,o.Cl)(r,l(t,e))}var c=(0,i.Zl2)(r,n),u=c.refined,d=c.extra,h=(0,i.Rjd)(u,d,e.sourceId,t.allDay,n.options.forceEventDuration||Boolean(e.duration),n),f=t.range.start;t.allDay&&e.startTime&&(f=n.dateEnv.add(f,e.startTime));var p=e.duration?n.dateEnv.add(f,e.duration):(0,i.hax)(t.allDay,f,n),g=(0,i.OEO)(h.defId,{start:f,end:p});return{def:h,instance:g}}function H(t){var e=W(t,"event"),n=e?JSON.parse(e):{create:!1};return(0,i.PWO)(n)}function W(t,e){var n=i.$WB.dataAttrPrefix,o=(n?n+"-":"")+e;return t.getAttribute("data-"+o)||""}i.$WB.dataAttrPrefix="";(function(){function t(t,e){var n=this;void 0===e&&(e={}),this.handlePointerDown=function(t){var e=n.dragging,o=n.settings,r=o.minDistance,s=o.longPressDelay;e.minDistance=null!=r?r:t.isTouch?0:i.p3z.eventDragMinDistance,e.delay=t.isTouch?null!=s?s:i.p3z.longPressDelay:0},this.handleDragStart=function(t){t.isTouch&&n.dragging.delay&&t.subjectEl.classList.contains("fc-event")&&n.dragging.mirror.getMirrorEl().classList.add("fc-event-selected")},this.settings=e;var o=this.dragging=new _(t);o.touchScrollAllowed=!1,null!=e.itemSelector&&(o.pointer.selector=e.itemSelector),null!=e.appendTo&&(o.mirror.parentNode=e.appendTo),o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),new F(o,e.eventData)}t.prototype.destroy=function(){this.dragging.destroy()}})();var j=function(t){function e(e){var n=t.call(this,e)||this;n.shouldIgnoreMove=!1,n.mirrorSelector="",n.currentMirrorEl=null,n.handlePointerDown=function(t){n.emitter.trigger("pointerdown",t),n.shouldIgnoreMove||n.emitter.trigger("dragstart",t)},n.handlePointerMove=function(t){n.shouldIgnoreMove||n.emitter.trigger("dragmove",t)},n.handlePointerUp=function(t){n.emitter.trigger("pointerup",t),n.shouldIgnoreMove||n.emitter.trigger("dragend",t)};var i=n.pointer=new l(e);return i.emitter.on("pointerdown",n.handlePointerDown),i.emitter.on("pointermove",n.handlePointerMove),i.emitter.on("pointerup",n.handlePointerUp),n}return(0,o.C6)(e,t),e.prototype.destroy=function(){this.pointer.destroy()},e.prototype.setIgnoreMove=function(t){this.shouldIgnoreMove=t},e.prototype.setMirrorIsVisible=function(t){if(t)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var e=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;e&&(this.currentMirrorEl=e,e.style.visibility="hidden")}},e}(i.WDw),$=(function(){function t(t,e){var n=document;t===document||t instanceof Element?(n=t,e=e||{}):e=t||{};var i=this.dragging=new j(n);"string"===typeof e.itemSelector?i.pointer.selector=e.itemSelector:n===document&&(i.pointer.selector="[data-event]"),"string"===typeof e.mirrorSelector&&(i.mirrorSelector=e.mirrorSelector),new F(i,e.eventData)}t.prototype.destroy=function(){this.dragging.destroy()}}(),(0,i.i1g)({componentInteractions:[T,A,R,D],calendarInteractions:[N],elementDraggingImpl:_,optionRefiners:L,listenerRefiners:B}));e.Ay=$},1216:function(t,e,n){"use strict";n.r(e),n.d(e,{afterMain:function(){return k},afterRead:function(){return w},afterWrite:function(){return E},applyStyles:function(){return D},arrow:function(){return st},auto:function(){return a},basePlacements:function(){return l},beforeMain:function(){return _},beforeRead:function(){return b},beforeWrite:function(){return C},bottom:function(){return o},clippingParents:function(){return d},computeStyles:function(){return ht},createPopper:function(){return ce},createPopperBase:function(){return ae},createPopperLite:function(){return de},detectOverflow:function(){return Mt},end:function(){return u},eventListeners:function(){return gt},flip:function(){return Lt},hide:function(){return Ht},left:function(){return s},main:function(){return y},modifierPhases:function(){return S},offset:function(){return $t},placements:function(){return m},popper:function(){return f},popperGenerator:function(){return se},popperOffsets:function(){return qt},preventOverflow:function(){return Yt},read:function(){return v},reference:function(){return p},right:function(){return r},start:function(){return c},top:function(){return i},variationPlacements:function(){return g},viewport:function(){return h},write:function(){return x}});var i="top",o="bottom",r="right",s="left",a="auto",l=[i,o,r,s],c="start",u="end",d="clippingParents",h="viewport",f="popper",p="reference",g=l.reduce(function(t,e){return t.concat([e+"-"+c,e+"-"+u])},[]),m=[].concat(l,[a]).reduce(function(t,e){return t.concat([e,e+"-"+c,e+"-"+u])},[]),b="beforeRead",v="read",w="afterRead",_="beforeMain",y="main",k="afterMain",C="beforeWrite",x="write",E="afterWrite",S=[b,v,w,_,y,k,C,x,E];function T(t){return t?(t.nodeName||"").toLowerCase():null}function A(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function P(t){var e=A(t).Element;return t instanceof e||t instanceof Element}function I(t){var e=A(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function R(t){if("undefined"===typeof ShadowRoot)return!1;var e=A(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function O(t){var e=t.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];I(o)&&T(o)&&(Object.assign(o.style,n),Object.keys(i).forEach(function(t){var e=i[t];!1===e?o.removeAttribute(t):o.setAttribute(t,!0===e?"":e)}))})}function M(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(t){var i=e.elements[t],o=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),s=r.reduce(function(t,e){return t[e]="",t},{});I(i)&&T(i)&&(Object.assign(i.style,s),Object.keys(o).forEach(function(t){i.removeAttribute(t)}))})}}var D={name:"applyStyles",enabled:!0,phase:"write",fn:O,effect:M,requires:["computeStyles"]};function V(t){return t.split("-")[0]}var N=Math.max,L=Math.min,B=Math.round;function F(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function z(){return!/^((?!chrome|android).)*safari/i.test(F())}function H(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),o=1,r=1;e&&I(t)&&(o=t.offsetWidth>0&&B(i.width)/t.offsetWidth||1,r=t.offsetHeight>0&&B(i.height)/t.offsetHeight||1);var s=P(t)?A(t):window,a=s.visualViewport,l=!z()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/o,u=(i.top+(l&&a?a.offsetTop:0))/r,d=i.width/o,h=i.height/r;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function W(t){var e=H(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function j(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&R(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function $(t){return A(t).getComputedStyle(t)}function U(t){return["table","td","th"].indexOf(T(t))>=0}function q(t){return((P(t)?t.ownerDocument:t.document)||window.document).documentElement}function G(t){return"html"===T(t)?t:t.assignedSlot||t.parentNode||(R(t)?t.host:null)||q(t)}function K(t){return I(t)&&"fixed"!==$(t).position?t.offsetParent:null}function Y(t){var e=/firefox/i.test(F()),n=/Trident/i.test(F());if(n&&I(t)){var i=$(t);if("fixed"===i.position)return null}var o=G(t);R(o)&&(o=o.host);while(I(o)&&["html","body"].indexOf(T(o))<0){var r=$(o);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return o;o=o.parentNode}return null}function X(t){var e=A(t),n=K(t);while(n&&U(n)&&"static"===$(n).position)n=K(n);return n&&("html"===T(n)||"body"===T(n)&&"static"===$(n).position)?e:n||Y(t)||e}function J(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Z(t,e,n){return N(t,L(e,n))}function Q(t,e,n){var i=Z(t,e,n);return i>n?n:i}function tt(){return{top:0,right:0,bottom:0,left:0}}function et(t){return Object.assign({},tt(),t)}function nt(t,e){return e.reduce(function(e,n){return e[n]=t,e},{})}var it=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,et("number"!==typeof t?t:nt(t,l))};function ot(t){var e,n=t.state,a=t.name,l=t.options,c=n.elements.arrow,u=n.modifiersData.popperOffsets,d=V(n.placement),h=J(d),f=[s,r].indexOf(d)>=0,p=f?"height":"width";if(c&&u){var g=it(l.padding,n),m=W(c),b="y"===h?i:s,v="y"===h?o:r,w=n.rects.reference[p]+n.rects.reference[h]-u[h]-n.rects.popper[p],_=u[h]-n.rects.reference[h],y=X(c),k=y?"y"===h?y.clientHeight||0:y.clientWidth||0:0,C=w/2-_/2,x=g[b],E=k-m[p]-g[v],S=k/2-m[p]/2+C,T=Z(x,S,E),A=h;n.modifiersData[a]=(e={},e[A]=T,e.centerOffset=T-S,e)}}function rt(t){var e=t.state,n=t.options,i=n.element,o=void 0===i?"[data-popper-arrow]":i;null!=o&&("string"!==typeof o||(o=e.elements.popper.querySelector(o),o))&&j(e.elements.popper,o)&&(e.elements.arrow=o)}var st={name:"arrow",enabled:!0,phase:"main",fn:ot,effect:rt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function at(t){return t.split("-")[1]}var lt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ct(t,e){var n=t.x,i=t.y,o=e.devicePixelRatio||1;return{x:B(n*o)/o||0,y:B(i*o)/o||0}}function ut(t){var e,n=t.popper,a=t.popperRect,l=t.placement,c=t.variation,d=t.offsets,h=t.position,f=t.gpuAcceleration,p=t.adaptive,g=t.roundOffsets,m=t.isFixed,b=d.x,v=void 0===b?0:b,w=d.y,_=void 0===w?0:w,y="function"===typeof g?g({x:v,y:_}):{x:v,y:_};v=y.x,_=y.y;var k=d.hasOwnProperty("x"),C=d.hasOwnProperty("y"),x=s,E=i,S=window;if(p){var T=X(n),P="clientHeight",I="clientWidth";if(T===A(n)&&(T=q(n),"static"!==$(T).position&&"absolute"===h&&(P="scrollHeight",I="scrollWidth")),l===i||(l===s||l===r)&&c===u){E=o;var R=m&&T===S&&S.visualViewport?S.visualViewport.height:T[P];_-=R-a.height,_*=f?1:-1}if(l===s||(l===i||l===o)&&c===u){x=r;var O=m&&T===S&&S.visualViewport?S.visualViewport.width:T[I];v-=O-a.width,v*=f?1:-1}}var M,D=Object.assign({position:h},p&&lt),V=!0===g?ct({x:v,y:_},A(n)):{x:v,y:_};return v=V.x,_=V.y,f?Object.assign({},D,(M={},M[E]=C?"0":"",M[x]=k?"0":"",M.transform=(S.devicePixelRatio||1)<=1?"translate("+v+"px, "+_+"px)":"translate3d("+v+"px, "+_+"px, 0)",M)):Object.assign({},D,(e={},e[E]=C?_+"px":"",e[x]=k?v+"px":"",e.transform="",e))}function dt(t){var e=t.state,n=t.options,i=n.gpuAcceleration,o=void 0===i||i,r=n.adaptive,s=void 0===r||r,a=n.roundOffsets,l=void 0===a||a,c={placement:V(e.placement),variation:at(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ut(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ut(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var ht={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dt,data:{}},ft={passive:!0};function pt(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,r=void 0===o||o,s=i.resize,a=void 0===s||s,l=A(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(t){t.addEventListener("scroll",n.update,ft)}),a&&l.addEventListener("resize",n.update,ft),function(){r&&c.forEach(function(t){t.removeEventListener("scroll",n.update,ft)}),a&&l.removeEventListener("resize",n.update,ft)}}var gt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:pt,data:{}},mt={left:"right",right:"left",bottom:"top",top:"bottom"};function bt(t){return t.replace(/left|right|bottom|top/g,function(t){return mt[t]})}var vt={start:"end",end:"start"};function wt(t){return t.replace(/start|end/g,function(t){return vt[t]})}function _t(t){var e=A(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function yt(t){return H(q(t)).left+_t(t).scrollLeft}function kt(t,e){var n=A(t),i=q(t),o=n.visualViewport,r=i.clientWidth,s=i.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;var c=z();(c||!c&&"fixed"===e)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a+yt(t),y:l}}function Ct(t){var e,n=q(t),i=_t(t),o=null==(e=t.ownerDocument)?void 0:e.body,r=N(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=N(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-i.scrollLeft+yt(t),l=-i.scrollTop;return"rtl"===$(o||n).direction&&(a+=N(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}function xt(t){var e=$(t),n=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function Et(t){return["html","body","#document"].indexOf(T(t))>=0?t.ownerDocument.body:I(t)&&xt(t)?t:Et(G(t))}function St(t,e){var n;void 0===e&&(e=[]);var i=Et(t),o=i===(null==(n=t.ownerDocument)?void 0:n.body),r=A(i),s=o?[r].concat(r.visualViewport||[],xt(i)?i:[]):i,a=e.concat(s);return o?a:a.concat(St(G(s)))}function Tt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function At(t,e){var n=H(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Pt(t,e,n){return e===h?Tt(kt(t,n)):P(e)?At(e,n):Tt(Ct(q(t)))}function It(t){var e=St(G(t)),n=["absolute","fixed"].indexOf($(t).position)>=0,i=n&&I(t)?X(t):t;return P(i)?e.filter(function(t){return P(t)&&j(t,i)&&"body"!==T(t)}):[]}function Rt(t,e,n,i){var o="clippingParents"===e?It(t):[].concat(e),r=[].concat(o,[n]),s=r[0],a=r.reduce(function(e,n){var o=Pt(t,n,i);return e.top=N(o.top,e.top),e.right=L(o.right,e.right),e.bottom=L(o.bottom,e.bottom),e.left=N(o.left,e.left),e},Pt(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ot(t){var e,n=t.reference,a=t.element,l=t.placement,d=l?V(l):null,h=l?at(l):null,f=n.x+n.width/2-a.width/2,p=n.y+n.height/2-a.height/2;switch(d){case i:e={x:f,y:n.y-a.height};break;case o:e={x:f,y:n.y+n.height};break;case r:e={x:n.x+n.width,y:p};break;case s:e={x:n.x-a.width,y:p};break;default:e={x:n.x,y:n.y}}var g=d?J(d):null;if(null!=g){var m="y"===g?"height":"width";switch(h){case c:e[g]=e[g]-(n[m]/2-a[m]/2);break;case u:e[g]=e[g]+(n[m]/2-a[m]/2);break;default:}}return e}function Mt(t,e){void 0===e&&(e={});var n=e,s=n.placement,a=void 0===s?t.placement:s,c=n.strategy,u=void 0===c?t.strategy:c,g=n.boundary,m=void 0===g?d:g,b=n.rootBoundary,v=void 0===b?h:b,w=n.elementContext,_=void 0===w?f:w,y=n.altBoundary,k=void 0!==y&&y,C=n.padding,x=void 0===C?0:C,E=et("number"!==typeof x?x:nt(x,l)),S=_===f?p:f,T=t.rects.popper,A=t.elements[k?S:_],I=Rt(P(A)?A:A.contextElement||q(t.elements.popper),m,v,u),R=H(t.elements.reference),O=Ot({reference:R,element:T,strategy:"absolute",placement:a}),M=Tt(Object.assign({},T,O)),D=_===f?M:R,V={top:I.top-D.top+E.top,bottom:D.bottom-I.bottom+E.bottom,left:I.left-D.left+E.left,right:D.right-I.right+E.right},N=t.modifiersData.offset;if(_===f&&N){var L=N[a];Object.keys(V).forEach(function(t){var e=[r,o].indexOf(t)>=0?1:-1,n=[i,o].indexOf(t)>=0?"y":"x";V[t]+=L[n]*e})}return V}function Dt(t,e){void 0===e&&(e={});var n=e,i=n.placement,o=n.boundary,r=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?m:c,d=at(i),h=d?a?g:g.filter(function(t){return at(t)===d}):l,f=h.filter(function(t){return u.indexOf(t)>=0});0===f.length&&(f=h);var p=f.reduce(function(e,n){return e[n]=Mt(t,{placement:n,boundary:o,rootBoundary:r,padding:s})[V(n)],e},{});return Object.keys(p).sort(function(t,e){return p[t]-p[e]})}function Vt(t){if(V(t)===a)return[];var e=bt(t);return[wt(t),e,wt(e)]}function Nt(t){var e=t.state,n=t.options,l=t.name;if(!e.modifiersData[l]._skip){for(var u=n.mainAxis,d=void 0===u||u,h=n.altAxis,f=void 0===h||h,p=n.fallbackPlacements,g=n.padding,m=n.boundary,b=n.rootBoundary,v=n.altBoundary,w=n.flipVariations,_=void 0===w||w,y=n.allowedAutoPlacements,k=e.options.placement,C=V(k),x=C===k,E=p||(x||!_?[bt(k)]:Vt(k)),S=[k].concat(E).reduce(function(t,n){return t.concat(V(n)===a?Dt(e,{placement:n,boundary:m,rootBoundary:b,padding:g,flipVariations:_,allowedAutoPlacements:y}):n)},[]),T=e.rects.reference,A=e.rects.popper,P=new Map,I=!0,R=S[0],O=0;O<S.length;O++){var M=S[O],D=V(M),N=at(M)===c,L=[i,o].indexOf(D)>=0,B=L?"width":"height",F=Mt(e,{placement:M,boundary:m,rootBoundary:b,altBoundary:v,padding:g}),z=L?N?r:s:N?o:i;T[B]>A[B]&&(z=bt(z));var H=bt(z),W=[];if(d&&W.push(F[D]<=0),f&&W.push(F[z]<=0,F[H]<=0),W.every(function(t){return t})){R=M,I=!1;break}P.set(M,W)}if(I)for(var j=_?3:1,$=function(t){var e=S.find(function(e){var n=P.get(e);if(n)return n.slice(0,t).every(function(t){return t})});if(e)return R=e,"break"},U=j;U>0;U--){var q=$(U);if("break"===q)break}e.placement!==R&&(e.modifiersData[l]._skip=!0,e.placement=R,e.reset=!0)}}var Lt={name:"flip",enabled:!0,phase:"main",fn:Nt,requiresIfExists:["offset"],data:{_skip:!1}};function Bt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ft(t){return[i,r,o,s].some(function(e){return t[e]>=0})}function zt(t){var e=t.state,n=t.name,i=e.rects.reference,o=e.rects.popper,r=e.modifiersData.preventOverflow,s=Mt(e,{elementContext:"reference"}),a=Mt(e,{altBoundary:!0}),l=Bt(s,i),c=Bt(a,o,r),u=Ft(l),d=Ft(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var Ht={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:zt};function Wt(t,e,n){var o=V(t),a=[s,i].indexOf(o)>=0?-1:1,l="function"===typeof n?n(Object.assign({},e,{placement:t})):n,c=l[0],u=l[1];return c=c||0,u=(u||0)*a,[s,r].indexOf(o)>=0?{x:u,y:c}:{x:c,y:u}}function jt(t){var e=t.state,n=t.options,i=t.name,o=n.offset,r=void 0===o?[0,0]:o,s=m.reduce(function(t,n){return t[n]=Wt(n,e.rects,r),t},{}),a=s[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}var $t={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:jt};function Ut(t){var e=t.state,n=t.name;e.modifiersData[n]=Ot({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var qt={name:"popperOffsets",enabled:!0,phase:"read",fn:Ut,data:{}};function Gt(t){return"x"===t?"y":"x"}function Kt(t){var e=t.state,n=t.options,a=t.name,l=n.mainAxis,u=void 0===l||l,d=n.altAxis,h=void 0!==d&&d,f=n.boundary,p=n.rootBoundary,g=n.altBoundary,m=n.padding,b=n.tether,v=void 0===b||b,w=n.tetherOffset,_=void 0===w?0:w,y=Mt(e,{boundary:f,rootBoundary:p,padding:m,altBoundary:g}),k=V(e.placement),C=at(e.placement),x=!C,E=J(k),S=Gt(E),T=e.modifiersData.popperOffsets,A=e.rects.reference,P=e.rects.popper,I="function"===typeof _?_(Object.assign({},e.rects,{placement:e.placement})):_,R="number"===typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(T){if(u){var D,B="y"===E?i:s,F="y"===E?o:r,z="y"===E?"height":"width",H=T[E],j=H+y[B],$=H-y[F],U=v?-P[z]/2:0,q=C===c?A[z]:P[z],G=C===c?-P[z]:-A[z],K=e.elements.arrow,Y=v&&K?W(K):{width:0,height:0},et=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tt(),nt=et[B],it=et[F],ot=Z(0,A[z],Y[z]),rt=x?A[z]/2-U-ot-nt-R.mainAxis:q-ot-nt-R.mainAxis,st=x?-A[z]/2+U+ot+it+R.mainAxis:G+ot+it+R.mainAxis,lt=e.elements.arrow&&X(e.elements.arrow),ct=lt?"y"===E?lt.clientTop||0:lt.clientLeft||0:0,ut=null!=(D=null==O?void 0:O[E])?D:0,dt=H+rt-ut-ct,ht=H+st-ut,ft=Z(v?L(j,dt):j,H,v?N($,ht):$);T[E]=ft,M[E]=ft-H}if(h){var pt,gt="x"===E?i:s,mt="x"===E?o:r,bt=T[S],vt="y"===S?"height":"width",wt=bt+y[gt],_t=bt-y[mt],yt=-1!==[i,s].indexOf(k),kt=null!=(pt=null==O?void 0:O[S])?pt:0,Ct=yt?wt:bt-A[vt]-P[vt]-kt+R.altAxis,xt=yt?bt+A[vt]+P[vt]-kt-R.altAxis:_t,Et=v&&yt?Q(Ct,bt,xt):Z(v?Ct:wt,bt,v?xt:_t);T[S]=Et,M[S]=Et-bt}e.modifiersData[a]=M}}var Yt={name:"preventOverflow",enabled:!0,phase:"main",fn:Kt,requiresIfExists:["offset"]};function Xt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Jt(t){return t!==A(t)&&I(t)?Xt(t):_t(t)}function Zt(t){var e=t.getBoundingClientRect(),n=B(e.width)/t.offsetWidth||1,i=B(e.height)/t.offsetHeight||1;return 1!==n||1!==i}function Qt(t,e,n){void 0===n&&(n=!1);var i=I(e),o=I(e)&&Zt(e),r=q(e),s=H(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==T(e)||xt(r))&&(a=Jt(e)),I(e)?(l=H(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=yt(r))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function te(t){var e=new Map,n=new Set,i=[];function o(t){n.add(t.name);var r=[].concat(t.requires||[],t.requiresIfExists||[]);r.forEach(function(t){if(!n.has(t)){var i=e.get(t);i&&o(i)}}),i.push(t)}return t.forEach(function(t){e.set(t.name,t)}),t.forEach(function(t){n.has(t.name)||o(t)}),i}function ee(t){var e=te(t);return S.reduce(function(t,n){return t.concat(e.filter(function(t){return t.phase===n}))},[])}function ne(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ie(t){var e=t.reduce(function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t},{});return Object.keys(e).map(function(t){return e[t]})}var oe={placement:"bottom",modifiers:[],strategy:"absolute"};function re(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(t){return!(t&&"function"===typeof t.getBoundingClientRect)})}function se(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,o=e.defaultOptions,r=void 0===o?oe:o;return function(t,e,n){void 0===n&&(n=r);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},oe,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],a=!1,l={state:o,setOptions:function(n){var s="function"===typeof n?n(o.options):n;u(),o.options=Object.assign({},r,o.options,s),o.scrollParents={reference:P(t)?St(t):t.contextElement?St(t.contextElement):[],popper:St(e)};var a=ee(ie([].concat(i,o.options.modifiers)));return o.orderedModifiers=a.filter(function(t){return t.enabled}),c(),l.update()},forceUpdate:function(){if(!a){var t=o.elements,e=t.reference,n=t.popper;if(re(e,n)){o.rects={reference:Qt(e,X(n),"fixed"===o.options.strategy),popper:W(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(t){return o.modifiersData[t.name]=Object.assign({},t.data)});for(var i=0;i<o.orderedModifiers.length;i++)if(!0!==o.reset){var r=o.orderedModifiers[i],s=r.fn,c=r.options,u=void 0===c?{}:c,d=r.name;"function"===typeof s&&(o=s({state:o,options:u,name:d,instance:l})||o)}else o.reset=!1,i=-1}}},update:ne(function(){return new Promise(function(t){l.forceUpdate(),t(o)})}),destroy:function(){u(),a=!0}};if(!re(t,e))return l;function c(){o.orderedModifiers.forEach(function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"===typeof r){var a=r({state:o,name:e,instance:l,options:i}),c=function(){};s.push(a||c)}})}function u(){s.forEach(function(t){return t()}),s=[]}return l.setOptions(n).then(function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)}),l}}var ae=se(),le=[gt,qt,ht,D,$t,Lt,Yt,st,Ht],ce=se({defaultModifiers:le}),ue=[gt,qt,ht,D],de=se({defaultModifiers:ue})},1229:function(t,e,n){"use strict";var i=n(8406),o=TypeError;t.exports=function(t){if(i(t))throw new o("Can't call method on "+t);return t}},1332:function(t,e,n){"use strict";var i=n(3938),o=n(9868);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(s){o(t,"throw",s)}}},1339:function(t,e,n){"use strict";var i=n(1605),o=n(8318),r=n(6926);i({target:"Iterator",proto:!0,real:!0,forced:r},{map:o})},1523:function(t,e,n){"use strict";var i=n(2368),o=n(3105),r=n(7712),s=n(2760),a=n(1602),l=n(9206),c=n(6457),u=n(9306).IteratorPrototype,d=n(8296),h=n(9868),f=a("toStringTag"),p="IteratorHelper",g="WrapForValidIterator",m=l.set,b=function(t){var e=l.getterFor(t?g:p);return s(o(u),{next:function(){var n=e(this);if(t)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return d(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var n=e(this),o=n.iterator;if(n.done=!0,t){var r=c(o,"return");return r?i(r,o):d(void 0,!0)}if(n.inner)try{h(n.inner.iterator,"normal")}catch(s){return h(o,"throw",s)}return h(o,"normal"),d(void 0,!0)}})},v=b(!0),w=b(!1);r(w,f,"Iterator Helper"),t.exports=function(t,e){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=e?g:p,i.nextHandler=t,i.counter=0,i.done=!1,m(this,i)};return n.prototype=e?v:w,n}},1602:function(t,e,n){"use strict";var i=n(200),o=n(2),r=n(6490),s=n(665),a=n(2072),l=n(5225),c=i.Symbol,u=o("wks"),d=l?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return r(u,t)||(u[t]=a&&r(c,t)?c[t]:d("Symbol."+t)),u[t]}},1605:function(t,e,n){"use strict";var i=n(200),o=n(7632).f,r=n(7712),s=n(7485),a=n(9430),l=n(4361),c=n(4977);t.exports=function(t,e){var n,u,d,h,f,p,g=t.target,m=t.global,b=t.stat;if(u=m?i:b?i[g]||a(g,{}):(i[g]||{}).prototype,u)for(d in e){if(f=e[d],t.dontCallGetSet?(p=o(u,d),h=p&&p.value):h=u[d],n=c(m?d:g+(b?".":"#")+d,t.forced),!n&&void 0!==h){if(typeof f==typeof h)continue;l(f,h)}(t.sham||h&&h.sham)&&r(f,"sham",!0),s(u,d,f,t)}}},1635:function(t,e,n){"use strict";n.d(e,{C6:function(){return o},Cl:function(){return r},fX:function(){return s}});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.create;function s(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError},1641:function(t,e,n){"use strict";var i=n(6347),o=n(290);t.exports=Object.keys||function(t){return i(t,o)}},1740:function(t,e,n){"use strict";n.d(e,{Gp:function(){return pt}});var i=n(641),o=n(9841);function r(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var s=r,a="object"==typeof global&&global&&global.Object===Object&&global,l=a,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=u,h=function(){return d.Date.now()},f=h,p=/\s/;function g(t){var e=t.length;while(e--&&p.test(t.charAt(e)));return e}var m=g,b=/^\s+/;function v(t){return t?t.slice(0,m(t)+1).replace(b,""):t}var w=v,_=d.Symbol,y=_,k=Object.prototype,C=k.hasOwnProperty,x=k.toString,E=y?y.toStringTag:void 0;function S(t){var e=C.call(t,E),n=t[E];try{t[E]=void 0;var i=!0}catch(r){}var o=x.call(t);return i&&(e?t[E]=n:delete t[E]),o}var T=S,A=Object.prototype,P=A.toString;function I(t){return P.call(t)}var R=I,O="[object Null]",M="[object Undefined]",D=y?y.toStringTag:void 0;function V(t){return null==t?void 0===t?M:O:D&&D in Object(t)?T(t):R(t)}var N=V;function L(t){return null!=t&&"object"==typeof t}var B=L,F="[object Symbol]";function z(t){return"symbol"==typeof t||B(t)&&N(t)==F}var H=z,W=NaN,j=/^[-+]0x[0-9a-f]+$/i,$=/^0b[01]+$/i,U=/^0o[0-7]+$/i,q=parseInt;function G(t){if("number"==typeof t)return t;if(H(t))return W;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=w(t);var n=$.test(t);return n||U.test(t)?q(t.slice(2),n?2:8):j.test(t)?W:+t}var K=G,Y="Expected a function",X=Math.max,J=Math.min;function Z(t,e,n){var i,o,r,a,l,c,u=0,d=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError(Y);function g(e){var n=i,r=o;return i=o=void 0,u=e,a=t.apply(r,n),a}function m(t){return u=t,l=setTimeout(w,e),d?g(t):a}function b(t){var n=t-c,i=t-u,o=e-n;return h?J(o,r-i):o}function v(t){var n=t-c,i=t-u;return void 0===c||n>=e||n<0||h&&i>=r}function w(){var t=f();if(v(t))return _(t);l=setTimeout(w,b(t))}function _(t){return l=void 0,p&&i?g(t):(i=o=void 0,a)}function y(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0}function k(){return void 0===l?a:_(f())}function C(){var t=f(),n=v(t);if(i=arguments,o=this,c=t,n){if(void 0===l)return m(c);if(h)return clearTimeout(l),l=setTimeout(w,e),g(c)}return void 0===l&&(l=setTimeout(w,e)),a}return e=K(e)||0,s(n)&&(d=!!n.leading,h="maxWait"in n,r=h?X(K(n.maxWait)||0,e):r,p="trailing"in n?!!n.trailing:p),C.cancel=y,C.flush=k,C}var Q=Z;
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function tt(t,e){const n=t.extraPlugins||[];return{...t,extraPlugins:[...n,...e.filter(t=>!n.includes(t))]}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function et(t){return!!t&&/^\d+\.\d+\.\d+/.test(t)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nt(t){return!!t&&["nightly","alpha","internal","nightly-","staging"].some(e=>t.includes(e))}function it(t){return et(t)||nt(t)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ot(t){if(!et(t))throw new Error(`Invalid semantic version: ${t||"<blank>"}.`);const[e,n,i]=t.split(".");return{major:Number.parseInt(e,10),minor:Number.parseInt(n,10),patch:Number.parseInt(i,10)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rt(t){if(nt(t))return 3;const{major:e}=ot(t);switch(!0){case e>=44:return 3;case e>=38:return 2;default:return 1}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function st(){const{CKEDITOR_VERSION:t,CKEDITOR:e}=window;return it(t)?{source:e?"cdn":"npm",version:t}:null}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function at(){const t=st();return t?rt(t.version):null}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lt(t,e){switch(e||=at()||void 0,e){case 1:case 2:return void 0===t;case 3:return"GPL"===t;default:return!1}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ct(t,e){return function(n){lt(n.config.get("licenseKey"))||n.on("collectUsageData",(n,{setUsageData:i})=>{i(`integration.${t}`,e)})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
const ut=ct("vue",{version:"7.3.0",frameworkVersion:i.rE});
/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function dt(t){return lt(t.licenseKey)?t:tt(t,[ut])}const ht="Lock from Vue integration (@ckeditor/ckeditor5-vue)",ft=300,pt=(0,i.pM)({name:"CKEditor",__name:"ckeditor",props:(0,i.zz)({editor:{},config:{default:()=>({})},tagName:{default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:(0,i.zz)(["ready","destroy","blur","focus","input","update:modelValue"],["update:modelValue"]),setup(t,{expose:e,emit:n}){const r=(0,i.fn)(t,"modelValue"),s=t,a=n,l=(0,o.KR)(),c=(0,o.KR)(),u=(0,o.KR)();function d(){const t=window.CKEDITOR_VERSION;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}function h(t){const e=Q(e=>{if(s.disableTwoWayDataBinding)return;const n=u.value=t.data.get();a("update:modelValue",n,e,t),a("input",n,e,t)},ft,{leading:!0});t.model.document.on("change:data",e),t.editing.view.document.on("focus",e=>{a("focus",e,t)}),t.editing.view.document.on("blur",e=>{a("blur",e,t)})}return e({instance:c,lastEditorData:u}),(0,i.wB)(r,t=>{c.value&&t!==u.value&&c.value.data.set(t)}),(0,i.wB)(()=>s.disabled,t=>{t?c.value.enableReadOnlyMode(ht):c.value.disableReadOnlyMode(ht)}),d(),(0,i.sV)(()=>{const t=dt(Object.assign({},s.config));r.value&&(t.initialData=r.value),s.editor.create(l.value,t).then(e=>{c.value=(0,o.IG)(e),h(e),r.value!==t.initialData&&e.data.set(r.value),s.disabled&&e.enableReadOnlyMode(ht),a("ready",e)}).catch(t=>{console.error(t)})}),(0,i.xo)(()=>{c.value&&(c.value.destroy(),c.value=void 0),a("destroy")}),(t,e)=>((0,i.uX)(),(0,i.Wv)((0,i.$y)(t.tagName),{ref_key:"element",ref:l},null,512))}});
/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
/* istanbul ignore if -- @preserve */
if(!i.rE||!i.rE.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html")},1836:function(t,e,n){"use strict";n.d(e,{t7:function(){return R}});var i=n(6794),o=n(1635),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headerElRef=(0,i._3b)(),e}return(0,o.C6)(e,t),e.prototype.renderSimpleLayout=function(t,e){var n=this,o=n.props,r=n.context,s=[],a=(0,i._Dp)(r.options);return t&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:e}}),(0,i.na4)(i.q4f,{viewSpec:r.viewSpec},function(t,e){return(0,i.na4)("div",{ref:t,className:["fc-daygrid"].concat(e).join(" ")},(0,i.na4)(i.en1,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[],sections:s}))})},e.prototype.renderHScrollLayout=function(t,e,n,o){var r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");var s=this,a=s.props,l=s.context,c=!a.forPrint&&(0,i._Dp)(l.options),u=!a.forPrint&&(0,i.v2o)(l.options),d=[];return t&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:e}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:i.bLJ}]}),(0,i.na4)(i.q4f,{viewSpec:l.viewSpec},function(t,e){return(0,i.na4)("div",{ref:t,className:["fc-daygrid"].concat(e).join(" ")},(0,i.na4)(r,{liquid:!a.isHeightAuto&&!a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:n,minWidth:o}]}],sections:d}))})},e}(i.gzh);function s(t,e){for(var n=[],i=0;i<e;i+=1)n[i]=[];for(var o=0,r=t;o<r.length;o++){var s=r[o];n[s.row].push(s)}return n}function a(t,e){for(var n=[],i=0;i<e;i+=1)n[i]=[];for(var o=0,r=t;o<r.length;o++){var s=r[o];n[s.firstCol].push(s)}return n}function l(t,e){var n=[];if(t){for(s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(var i=0,o=t.segs;i<o.length;i++){var r=o[i];n[r.row].segs.push(r)}}else for(var s=0;s<e;s+=1)n[s]=null;return n}var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this.props,e=(0,i.myk)(this.context,t.date);return(0,i.na4)(i.ux1,{date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,showDayNumber:t.showDayNumber,extraHookProps:t.extraHookProps,defaultContent:u},function(n,r){return(r||t.forceDayTop)&&(0,i.na4)("div",{className:"fc-daygrid-day-top",ref:n},(0,i.na4)("a",(0,o.Cl)({id:t.dayNumberId,className:"fc-daygrid-day-number"},e),r||(0,i.na4)(i.FK,null,"Â ")))})},e}(i.$GR);function u(t){return t.dayNumberText}var d=(0,i.xi1)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function h(t){var e=t.eventRange.ui.display;return"list-item"===e||"auto"===e&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this.props;return(0,i.na4)(i.y8j,(0,o.Cl)({},t,{extraClassNames:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:d,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))},e}(i.$GR),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,r=n.options.eventTimeFormat||d,s=(0,i.wWN)(e.seg,r,n,!0,e.defaultDisplayEventEnd);return(0,i.na4)(i.Nty,{seg:e.seg,timeText:s,defaultContent:g,isDragging:e.isDragging,isResizing:!1,isDateSelecting:!1,isSelected:e.isSelected,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},function(t,r,s,a){return(0,i.na4)("a",(0,o.Cl)({className:["fc-daygrid-event","fc-daygrid-dot-event"].concat(r).join(" "),ref:t},(0,i.tPU)(e.seg,n)),a)})},e}(i.$GR);function g(t){return(0,i.na4)(i.FK,null,(0,i.na4)("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&(0,i.na4)("div",{className:"fc-event-time"},t.timeText),(0,i.na4)("div",{className:"fc-event-title"},t.event.title||(0,i.na4)(i.FK,null,"Â ")))}var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.compileSegs=(0,i.BjF)(b),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this.props,e=this.compileSegs(t.singlePlacements),n=e.allSegs,r=e.invisibleSegs;return(0,i.na4)(i.knM,{dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:function(){var e=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return(0,i.na4)(i.FK,null,n.map(function(n){var r=n.eventRange.instance.instanceId;return(0,i.na4)("div",{className:"fc-daygrid-event-harness",key:r,style:{visibility:e[r]?"hidden":""}},h(n)?(0,i.na4)(p,(0,o.Cl)({seg:n,isDragging:!1,isSelected:r===t.eventSelection,defaultDisplayEventEnd:!1},(0,i.F29)(n,t.todayRange))):(0,i.na4)(f,(0,o.Cl)({seg:n,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:r===t.eventSelection,defaultDisplayEventEnd:!1},(0,i.F29)(n,t.todayRange))))}))}},function(t,e,n,r,s,a,l,c){return(0,i.na4)("a",(0,o.Cl)({ref:t,className:["fc-daygrid-more-link"].concat(e).join(" "),title:a,"aria-expanded":l,"aria-controls":c},(0,i.kfp)(s)),r)})},e}(i.$GR);function b(t){for(var e=[],n=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push(r.seg),r.isVisible||n.push(r.seg)}return{allSegs:e,invisibleSegs:n}}var v=(0,i.xi1)({week:"narrow"}),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootElRef=(0,i._3b)(),e.state={dayNumberId:(0,i.znd)()},e.handleRootEl=function(t){(0,i.cZi)(e.rootElRef,t),(0,i.cZi)(e.props.elRef,t)},e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=t.context,n=t.props,r=t.state,s=t.rootElRef,a=n.date,l=n.dateProfile,u=(0,i.myk)(e,a,"week");return(0,i.na4)(i.rrN,{date:a,dateProfile:l,todayRange:n.todayRange,showDayNumber:n.showDayNumber,extraHookProps:n.extraHookProps,elRef:this.handleRootEl},function(t,e,d,h){return(0,i.na4)("td",(0,o.Cl)({ref:t,role:"gridcell",className:["fc-daygrid-day"].concat(e,n.extraClassNames||[]).join(" ")},d,n.extraDataAttrs,n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),(0,i.na4)("div",{className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",ref:n.innerElRef},n.showWeekNumber&&(0,i.na4)(i.SUi,{date:a,defaultFormat:v},function(t,e,n,r){return(0,i.na4)("a",(0,o.Cl)({ref:t,className:["fc-daygrid-week-number"].concat(e).join(" ")},u),r)}),!h&&(0,i.na4)(c,{date:a,dateProfile:l,showDayNumber:n.showDayNumber,dayNumberId:r.dayNumberId,forceDayTop:n.forceDayTop,todayRange:n.todayRange,extraHookProps:n.extraHookProps}),(0,i.na4)("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,(0,i.na4)("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},(0,i.na4)(m,{allDayDate:a,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:s,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),(0,i.na4)("div",{className:"fc-daygrid-day-bg"},n.bgContent)))})},e}(i.gzh);function _(t,e,n,i,o,r,s){var a=new x;a.allowReslicing=!0,a.strictOrder=i,!0===e||!0===n?(a.maxCoord=r,a.hiddenConsumes=!0):"number"===typeof e?a.maxStackCnt=e:"number"===typeof n&&(a.maxStackCnt=n,a.hiddenConsumes=!0);for(var l=[],c=[],u=0;u<t.length;u+=1){var d=t[u],h=d.eventRange.instance.instanceId,f=o[h];null!=f?l.push({index:u,thickness:f,span:{start:d.firstCol,end:d.lastCol+1}}):c.push(d)}for(var p=a.addSegs(l),g=a.toRects(),m=y(g,t,s),b=m.singleColPlacements,v=m.multiColPlacements,w=m.leftoverMargins,_=[],k=[],E=0,S=c;E<S.length;E++){d=S[E];v[d.firstCol].push({seg:d,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var T=d.firstCol;T<=d.lastCol;T+=1)b[T].push({seg:C(d,T,T+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(T=0;T<s.length;T+=1)_.push(0);for(var A=0,P=p;A<P.length;A++){var I=P[A],R=(d=t[I.index],I.span);v[R.start].push({seg:C(d,R.start,R.end,s),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(T=R.start;T<R.end;T+=1)_[T]+=1,b[T].push({seg:C(d,T,T+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(T=0;T<s.length;T+=1)k.push(w[T]);return{singleColPlacements:b,multiColPlacements:v,moreCnts:_,moreMarginTops:k}}function y(t,e,n){for(var i=k(t,n.length),o=[],r=[],s=[],a=0;a<n.length;a+=1){for(var l=i[a],c=[],u=0,d=0,h=0,f=l;h<f.length;h++){var p=f[h],g=e[p.index];c.push({seg:C(g,a,a+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:p.levelCoord-u}),u=p.levelCoord+p.thickness}var m=[];u=0,d=0;for(var b=0,v=l;b<v.length;b++){p=v[b],g=e[p.index];var w=p.span.end-p.span.start>1,_=p.span.start===a;d+=p.levelCoord-u,u=p.levelCoord+p.thickness,w?(d+=p.thickness,_&&m.push({seg:C(g,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:p.levelCoord,marginTop:0})):_&&(m.push({seg:C(g,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:d}),d=0)}o.push(c),r.push(m),s.push(d)}return{singleColPlacements:o,multiColPlacements:r,leftoverMargins:s}}function k(t,e){for(var n=[],i=0;i<e;i+=1)n.push([]);for(var o=0,r=t;o<r.length;o++){var s=r[o];for(i=s.span.start;i<s.span.end;i+=1)n[i].push(s)}return n}function C(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;var s=t.eventRange,a=s.range,l=(0,i.imr)(a,{start:r[e].date,end:(0,i.fij)(r[n-1].date,1)});return(0,o.Cl)((0,o.Cl)({},t),{firstCol:e,lastCol:n-1,eventRange:{def:s.def,ui:(0,o.Cl)((0,o.Cl)({},s.ui),{durationEditable:!1}),instance:s.instance,range:l},isStart:t.isStart&&l.start.valueOf()===a.start.valueOf(),isEnd:t.isEnd&&l.end.valueOf()===a.end.valueOf()})}var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hiddenConsumes=!1,e.forceHidden={},e}return(0,o.C6)(e,t),e.prototype.addSegs=function(e){for(var n=this,o=t.prototype.addSegs.call(this,e),r=this.entriesByLevel,s=function(t){return!n.forceHidden[(0,i.qAn)(t)]},a=0;a<r.length;a+=1)r[a]=r[a].filter(s);return o},e.prototype.handleInvalidInsertion=function(e,n,r){var s=this,a=s.entriesByLevel,l=s.forceHidden,c=e.touchingEntry,u=e.touchingLevel,d=e.touchingLateral;if(this.hiddenConsumes&&c){var h=(0,i.qAn)(c);if(!l[h])if(this.allowReslicing){var f=(0,o.Cl)((0,o.Cl)({},c),{span:(0,i.RNt)(c.span,n.span)}),p=(0,i.qAn)(f);l[p]=!0,a[u][d]=f,this.splitEntry(c,n,r)}else l[h]=!0,r.push(c)}return t.prototype.handleInvalidInsertion.call(this,e,n,r)},e}(i.XpW),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellElRefs=new i.kFN,e.frameElRefs=new i.kFN,e.fgElRefs=new i.kFN,e.segHarnessRefs=new i.kFN,e.rootElRef=(0,i._3b)(),e.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this,n=e.props,o=e.state,r=e.context,s=r.options,l=n.cells.length,c=a(n.businessHourSegs,l),u=a(n.bgEventSegs,l),d=a(this.getHighlightSegs(),l),h=a(this.getMirrorSegs(),l),f=_((0,i.B4w)(n.fgEventSegs,s.eventOrder),n.dayMaxEvents,n.dayMaxEventRows,s.eventOrderStrict,o.eventInstanceHeights,o.maxContentHeight,n.cells),p=f.singleColPlacements,g=f.multiColPlacements,m=f.moreCnts,b=f.moreMarginTops,v=n.eventDrag&&n.eventDrag.affectedInstances||n.eventResize&&n.eventResize.affectedInstances||{};return(0,i.na4)("tr",{ref:this.rootElRef,role:"row"},n.renderIntro&&n.renderIntro(),n.cells.map(function(e,o){var r=t.renderFgSegs(o,n.forPrint?p[o]:g[o],n.todayRange,v),s=t.renderFgSegs(o,S(h[o],g),n.todayRange,{},Boolean(n.eventDrag),Boolean(n.eventResize),!1);return(0,i.na4)(w,{key:e.key,elRef:t.cellElRefs.createRef(e.key),innerElRef:t.frameElRefs.createRef(e.key),dateProfile:n.dateProfile,date:e.date,showDayNumber:n.showDayNumbers,showWeekNumber:n.showWeekNumbers&&0===o,forceDayTop:n.showWeekNumbers,todayRange:n.todayRange,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,extraHookProps:e.extraHookProps,extraDataAttrs:e.extraDataAttrs,extraClassNames:e.extraClassNames,extraDateSpan:e.extraDateSpan,moreCnt:m[o],moreMarginTop:b[o],singlePlacements:p[o],fgContentElRef:t.fgElRefs.createRef(e.key),fgContent:(0,i.na4)(i.FK,null,(0,i.na4)(i.FK,null,r),(0,i.na4)(i.FK,null,s)),bgContent:(0,i.na4)(i.FK,null,t.renderFillSegs(d[o],"highlight"),t.renderFillSegs(c[o],"non-business"),t.renderFillSegs(u[o],"bg-event"))})}))},e.prototype.componentDidMount=function(){this.updateSizing(!0)},e.prototype.componentDidUpdate=function(t,e){var n=this.props;this.updateSizing(!(0,i.vA0)(t,n))},e.prototype.getHighlightSegs=function(){var t=this.props;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs},e.prototype.getMirrorSegs=function(){var t=this.props;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]},e.prototype.renderFgSegs=function(t,e,n,r,s,a,l){var c=this.context,u=this.props.eventSelection,d=this.state.framePositions,g=1===this.props.cells.length,m=s||a||l,b=[];if(d)for(var v=0,w=e;v<w.length;v++){var _=w[v],y=_.seg,k=y.eventRange.instance.instanceId,C=k+":"+t,x=_.isVisible&&!r[k],E=_.isAbsolute,S="",T="";E&&(c.isRtl?(T=0,S=d.lefts[y.lastCol]-d.lefts[y.firstCol]):(S=0,T=d.rights[y.firstCol]-d.rights[y.lastCol])),b.push((0,i.na4)("div",{className:"fc-daygrid-event-harness"+(E?" fc-daygrid-event-harness-abs":""),key:C,ref:m?null:this.segHarnessRefs.createRef(C),style:{visibility:x?"":"hidden",marginTop:E?"":_.marginTop,top:E?_.absoluteTop:"",left:S,right:T}},h(y)?(0,i.na4)(p,(0,o.Cl)({seg:y,isDragging:s,isSelected:k===u,defaultDisplayEventEnd:g},(0,i.F29)(y,n))):(0,i.na4)(f,(0,o.Cl)({seg:y,isDragging:s,isResizing:a,isDateSelecting:l,isSelected:k===u,defaultDisplayEventEnd:g},(0,i.F29)(y,n)))))}return b},e.prototype.renderFillSegs=function(t,e){var n=this.context.isRtl,r=this.props.todayRange,s=this.state.framePositions,a=[];if(s)for(var l=0,c=t;l<c.length;l++){var u=c[l],d=n?{right:0,left:s.lefts[u.lastCol]-s.lefts[u.firstCol]}:{left:0,right:s.rights[u.firstCol]-s.rights[u.lastCol]};a.push((0,i.na4)("div",{key:(0,i.N8)(u.eventRange),className:"fc-daygrid-bg-harness",style:d},"bg-event"===e?(0,i.na4)(i.s_G,(0,o.Cl)({seg:u},(0,i.F29)(u,r))):(0,i.aOA)(e)))}return i.na4.apply(void 0,(0,o.fX)([i.FK,{}],a))},e.prototype.updateSizing=function(t){var e=this,n=e.props,r=e.frameElRefs;if(!n.forPrint&&null!==n.clientWidth){if(t){var s=n.cells.map(function(t){return r.currentMap[t.key]});if(s.length){var a=this.rootElRef.current;this.setState({framePositions:new i.Qnh(a,s,!0,!1)})}}var l=this.state.eventInstanceHeights,c=this.queryEventInstanceHeights(),u=!0===n.dayMaxEvents||!0===n.dayMaxEventRows;this.safeSetState({eventInstanceHeights:(0,o.Cl)((0,o.Cl)({},l),c),maxContentHeight:u?this.computeMaxContentHeight():null})}},e.prototype.queryEventInstanceHeights=function(){var t=this.segHarnessRefs.currentMap,e={};for(var n in t){var i=Math.round(t[n].getBoundingClientRect().height),o=n.split(":")[0];e[o]=Math.max(e[o]||0,i)}return e},e.prototype.computeMaxContentHeight=function(){var t=this.props.cells[0].key,e=this.cellElRefs.currentMap[t],n=this.fgElRefs.currentMap[t];return e.getBoundingClientRect().bottom-n.getBoundingClientRect().top},e.prototype.getCellEls=function(){var t=this.cellElRefs.currentMap;return this.props.cells.map(function(e){return t[e.key]})},e}(i.gzh);function S(t,e){if(!t.length)return[];var n=T(e);return t.map(function(t){return{seg:t,isVisible:!0,isAbsolute:!0,absoluteTop:n[t.eventRange.instance.instanceId],marginTop:0}})}function T(t){for(var e={},n=0,i=t;n<i.length;n++)for(var o=i[n],r=0,s=o;r<s.length;r++){var a=s[r];e[a.seg.eventRange.instance.instanceId]=a.absoluteTop}return e}E.addStateEquality({eventInstanceHeights:i.vA0});var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.splitBusinessHourSegs=(0,i.BjF)(s),e.splitBgEventSegs=(0,i.BjF)(s),e.splitFgEventSegs=(0,i.BjF)(s),e.splitDateSelectionSegs=(0,i.BjF)(s),e.splitEventDrag=(0,i.BjF)(l),e.splitEventResize=(0,i.BjF)(l),e.rowRefs=new i.kFN,e.handleRootEl=function(t){e.rootEl=t,t?e.context.registerInteractiveComponent(e,{el:t,isHitComboAllowed:e.props.isHitComboAllowed}):e.context.unregisterInteractiveComponent(e)},e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.dateProfile,o=e.dayMaxEventRows,r=e.dayMaxEvents,s=e.expandRows,a=e.cells.length,l=this.splitBusinessHourSegs(e.businessHourSegs,a),c=this.splitBgEventSegs(e.bgEventSegs,a),u=this.splitFgEventSegs(e.fgEventSegs,a),d=this.splitDateSelectionSegs(e.dateSelectionSegs,a),h=this.splitEventDrag(e.eventDrag,a),f=this.splitEventResize(e.eventResize,a),p=!0===r||!0===o;p&&!s&&(p=!1,o=null,r=null);var g=["fc-daygrid-body",p?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return(0,i.na4)("div",{className:g.join(" "),ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},(0,i.na4)(i.O6g,{unit:"day"},function(p,g){return(0,i.na4)(i.FK,null,(0,i.na4)("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,(0,i.na4)("tbody",{role:"presentation"},e.cells.map(function(s,p){return(0,i.na4)(E,{ref:t.rowRefs.createRef(p),key:s.length?s[0].date.toISOString():p,showDayNumbers:a>1,showWeekNumbers:e.showWeekNumbers,todayRange:g,dateProfile:n,cells:s,renderIntro:e.renderRowIntro,businessHourSegs:l[p],eventSelection:e.eventSelection,bgEventSegs:c[p].filter(P),fgEventSegs:u[p],dateSelectionSegs:d[p],eventDrag:h[p],eventResize:f[p],dayMaxEvents:r,dayMaxEventRows:o,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint})}))))}))},e.prototype.prepareHits=function(){this.rowPositions=new i.Qnh(this.rootEl,this.rowRefs.collect().map(function(t){return t.getCellEls()[0]}),!1,!0),this.colPositions=new i.Qnh(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)},e.prototype.queryHit=function(t,e){var n=this,i=n.colPositions,r=n.rowPositions,s=i.leftToIndex(t),a=r.topToIndex(e);if(null!=a&&null!=s){var l=this.props.cells[a][s];return{dateProfile:this.props.dateProfile,dateSpan:(0,o.Cl)({range:this.getCellRange(a,s),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(a,s),rect:{left:i.lefts[s],right:i.rights[s],top:r.tops[a],bottom:r.bottoms[a]},layer:0}}return null},e.prototype.getCellEl=function(t,e){return this.rowRefs.currentMap[t].getCellEls()[e]},e.prototype.getCellRange=function(t,e){var n=this.props.cells[t][e].date,o=(0,i.fij)(n,1);return{start:n,end:o}},e}(i.gzh);function P(t){return t.eventRange.def.allDay}var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.forceDayIfListItem=!0,e}return(0,o.C6)(e,t),e.prototype.sliceRange=function(t,e){return e.sliceRange(t)},e}(i.$He),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slicer=new I,e.tableRef=(0,i._3b)(),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context;return(0,i.na4)(A,(0,o.Cl)({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))},e}(i.gzh),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildDayTableModel=(0,i.BjF)(M),e.headerRef=(0,i._3b)(),e.tableRef=(0,i._3b)(),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this.context,n=e.options,o=e.dateProfileGenerator,r=this.props,s=this.buildDayTableModel(r.dateProfile,o),a=n.dayHeaders&&(0,i.na4)(i.A1b,{ref:this.headerRef,dateProfile:r.dateProfile,dates:s.headerDates,datesRepDistinctDays:1===s.rowCnt}),l=function(e){return(0,i.na4)(R,{ref:t.tableRef,dateProfile:r.dateProfile,dayTableModel:s,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:n.nextDayThreshold,colGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,dayMaxEvents:n.dayMaxEvents,dayMaxEventRows:n.dayMaxEventRows,showWeekNumbers:n.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:t.headerElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:r.forPrint})};return n.dayMinWidth?this.renderHScrollLayout(a,l,s.colCnt,n.dayMinWidth):this.renderSimpleLayout(a,l)},e}(r);function M(t,e){var n=new i.NC_(t.renderRange,e);return new i.mql(n,/year|month|week/.test(t.currentRangeUnit))}var D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.buildRenderRange=function(e,n,o){var r,s=this.props.dateEnv,a=t.prototype.buildRenderRange.call(this,e,n,o),l=a.start,c=a.end;if(/^(year|month)$/.test(n)&&(l=s.startOfWeek(l),r=s.startOfWeek(c),r.valueOf()!==c.valueOf()&&(c=(0,i.J4u)(r,1))),this.props.monthMode&&this.props.fixedWeekCount){var u=Math.ceil((0,i.Z3F)(l,c));c=(0,i.J4u)(c,6-u)}return{start:l,end:c}},e}(i.rou),V=(0,i.i1g)({initialView:"dayGridMonth",views:{dayGrid:{component:O,dateProfileGeneratorClass:D},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}});e.Ay=V},1898:function(t,e,n){"use strict";var i=n(3062),o=n(6457),r=n(8406),s=n(2228),a=n(1602),l=a("iterator");t.exports=function(t){if(!r(t))return o(t,l)||o(t,"@@iterator")||s[i(t)]}},2071:function(t,e,n){"use strict";var i=n(5077),o=n(6490),r=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=o(r,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(r,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},2072:function(t,e,n){"use strict";var i=n(6845),o=n(2074),r=n(200),s=r.String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41})},2074:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},2228:function(t){"use strict";t.exports={}},2328:function(t,e,n){"use strict";var i=n(6492),o=n(8420),r=n(7658),s=n(5225),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return o(e)&&r(e.prototype,a(t))}},2368:function(t,e,n){"use strict";var i=n(8823),o=Function.prototype.call;t.exports=i?o.bind(o):function(){return o.apply(o,arguments)}},2598:function(t,e,n){"use strict";var i=n(1605),o=n(2929),r=n(4601),s=n(3938),a=n(938);i({target:"Iterator",proto:!0,real:!0},{find:function(t){s(this),r(t);var e=a(this),n=0;return o(e,function(e,i){if(t(e,n++))return i(e)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},2612:function(t,e,n){"use strict";var i=n(1229),o=Object;t.exports=function(t){return o(i(t))}},2644:function(t,e,n){"use strict";function i(t,e){const n=Object.create(null),i=t.split(",");for(let o=0;o<i.length;o++)n[i[o]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{$3:function(){return p},$H:function(){return D},C4:function(){return K},CP:function(){return u},DY:function(){return V},Ft:function(){return W},Gv:function(){return y},Kg:function(){return _},MZ:function(){return o},Mp:function(){return c},NO:function(){return a},Oj:function(){return r},PT:function(){return P},Qd:function(){return E},Ro:function(){return B},SU:function(){return S},TF:function(){return h},Tg:function(){return R},Tn:function(){return w},Tr:function(){return j},We:function(){return z},X$:function(){return d},ZH:function(){return O},bB:function(){return L},cy:function(){return g},gd:function(){return v},jh:function(){return m},rU:function(){return M},tE:function(){return s},vM:function(){return b},v_:function(){return Y},yL:function(){return k},yQ:function(){return N}});const o={},r=[],s=()=>{},a=()=>!1,l=/^on[^a-z]/,c=t=>l.test(t),u=t=>t.startsWith("onUpdate:"),d=Object.assign,h=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(t,e)=>f.call(t,e),g=Array.isArray,m=t=>"[object Map]"===x(t),b=t=>"[object Set]"===x(t),v=t=>"[object RegExp]"===x(t),w=t=>"function"===typeof t,_=t=>"string"===typeof t,y=t=>null!==t&&"object"===typeof t,k=t=>y(t)&&w(t.then)&&w(t.catch),C=Object.prototype.toString,x=t=>C.call(t),E=t=>"[object Object]"===x(t),S=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),T=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},A=/-(\w)/g,P=T(t=>t.replace(A,(t,e)=>e?e.toUpperCase():"")),I=/\B([A-Z])/g,R=T(t=>t.replace(I,"-$1").toLowerCase()),O=T(t=>t.charAt(0).toUpperCase()+t.slice(1)),M=T(t=>t?`on${O(t)}`:""),D=(t,e)=>!Object.is(t,e),V=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},N=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},L=t=>{const e=parseFloat(t);return isNaN(e)?t:e},B=t=>{const e=_(t)?Number(t):NaN;return isNaN(e)?t:e};let F;const z=()=>F||(F="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const H="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",W=i(H);function j(t){if(g(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=_(i)?G(i):j(i);if(o)for(const t in o)e[t]=o[t]}return e}return _(t)||y(t)?t:void 0}const $=/;(?![^(]*\))/g,U=/:([^]+)/,q=/\/\*[^]*?\*\//g;function G(t){const e={};return t.replace(q,"").split($).forEach(t=>{if(t){const n=t.split(U);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function K(t){let e="";if(_(t))e=t;else if(g(t))for(let n=0;n<t.length;n++){const i=K(t[n]);i&&(e+=i+" ")}else if(y(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Y=t=>_(t)?t:null==t?"":g(t)||y(t)&&(t.toString===C||!w(t.toString))?JSON.stringify(t,X,2):String(t),X=(t,e)=>e&&e.__v_isRef?X(t,e.value):m(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[e,n])=>(t[`${e} =>`]=n,t),{})}:b(e)?{[`Set(${e.size})`]:[...e.values()]}:!y(e)||g(e)||E(e)?e:String(e)},2754:function(t,e,n){
/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,i){t.exports=i(n(1216))})(0,function(t){"use strict";function e(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t)for(const n in t)if("default"!==n){const i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>t[n]})}return e.default=t,Object.freeze(e)}const n=e(t),i=new Map,o={set(t,e,n){i.has(t)||i.set(t,new Map);const o=i.get(t);o.has(e)||0===o.size?o.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`)},get(t,e){return i.has(t)&&i.get(t).get(e)||null},remove(t,e){if(!i.has(t))return;const n=i.get(t);n.delete(e),0===n.size&&i.delete(t)}},r=1e6,s=1e3,a="transitionend",l=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),t),c=t=>null===t||void 0===t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),u=t=>{do{t+=Math.floor(Math.random()*r)}while(document.getElementById(t));return t},d=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),o=Number.parseFloat(n);return i||o?(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*s):0},h=t=>{t.dispatchEvent(new Event(a))},f=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),p=t=>f(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(l(t)):null,g=t=>{if(!f(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},m=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),b=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?b(t.parentNode):null},v=()=>{},w=t=>{t.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y=[],k=t=>{"loading"===document.readyState?(y.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of y)t()}),y.push(t)):t()},C=()=>"rtl"===document.documentElement.dir,x=t=>{k(()=>{const e=_();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},E=(t,e=[],n=t)=>"function"===typeof t?t(...e):n,S=(t,e,n=!0)=>{if(!n)return void E(t);const i=5,o=d(e)+i;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(a,s),E(t))};e.addEventListener(a,s),setTimeout(()=>{r||h(e)},o)},T=(t,e,n,i)=>{const o=t.length;let r=t.indexOf(e);return-1===r?!n&&i?t[o-1]:t[0]:(r+=n?1:-1,i&&(r=(r+o)%o),t[Math.max(0,Math.min(r,o-1))])},A=/[^.]*(?=\..*)\.|.*/,P=/\..*/,I=/::\d+$/,R={};let O=1;const M={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function V(t,e){return e&&`${e}::${O++}`||t.uidEvent||O++}function N(t){const e=V(t);return t.uidEvent=e,R[e]=R[e]||{},R[e]}function L(t,e){return function n(i){return q(i,{delegateTarget:t}),n.oneOff&&U.off(t,i.type,e),e.apply(t,[i])}}function B(t,e,n){return function i(o){const r=t.querySelectorAll(e);for(let{target:s}=o;s&&s!==this;s=s.parentNode)for(const a of r)if(a===s)return q(o,{delegateTarget:s}),i.oneOff&&U.off(t,o.type,e,n),n.apply(s,[o])}}function F(t,e,n=null){return Object.values(t).find(t=>t.callable===e&&t.delegationSelector===n)}function z(t,e,n){const i="string"===typeof e,o=i?n:e||n;let r=$(t);return D.has(r)||(r=t),[i,o,r]}function H(t,e,n,i,o){if("string"!==typeof e||!t)return;let[r,s,a]=z(e,n,i);if(e in M){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=N(t),c=l[a]||(l[a]={}),u=F(c,s,r?n:null);if(u)return void(u.oneOff=u.oneOff&&o);const d=V(s,e.replace(A,"")),h=r?B(t,n,s):L(t,s);h.delegationSelector=r?n:null,h.callable=s,h.oneOff=o,h.uidEvent=d,c[d]=h,t.addEventListener(a,h,r)}function W(t,e,n,i,o){const r=F(e[n],i,o);r&&(t.removeEventListener(n,r,Boolean(o)),delete e[n][r.uidEvent])}function j(t,e,n,i){const o=e[n]||{};for(const[r,s]of Object.entries(o))r.includes(i)&&W(t,e,n,s.callable,s.delegationSelector)}function $(t){return t=t.replace(P,""),M[t]||t}const U={on(t,e,n,i){H(t,e,n,i,!1)},one(t,e,n,i){H(t,e,n,i,!0)},off(t,e,n,i){if("string"!==typeof e||!t)return;const[o,r,s]=z(e,n,i),a=s!==e,l=N(t),c=l[s]||{},u=e.startsWith(".");if("undefined"===typeof r){if(u)for(const n of Object.keys(l))j(t,l,n,e.slice(1));for(const[n,i]of Object.entries(c)){const o=n.replace(I,"");a&&!e.includes(o)||W(t,l,s,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;W(t,l,s,r,o?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const i=_(),o=$(e),r=e!==o;let s=null,a=!0,l=!0,c=!1;r&&i&&(s=i.Event(e,n),i(t).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),c=s.isDefaultPrevented());const u=q(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&s&&s.preventDefault(),u}};function q(t,e={}){for(const[i,o]of Object.entries(e))try{t[i]=o}catch(n){Object.defineProperty(t,i,{configurable:!0,get(){return o}})}return t}function G(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function K(t){return t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Y={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${K(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${K(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(t=>t.startsWith("bs")&&!t.startsWith("bsConfig"));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=G(t.dataset[i])}return e},getDataAttribute(t,e){return G(t.getAttribute(`data-bs-${K(e)}`))}};class X{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=f(e)?Y.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...f(e)?Y.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,i]of Object.entries(e)){const e=t[n],o=f(e)?"element":c(e);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${i}".`)}}}const J="5.3.2";class Z extends X{constructor(t,e){super(),t=p(t),t&&(this._element=t,this._config=this._getConfig(e),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){S(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return o.get(p(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return J}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Q=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?l(n.trim()):null}return e},tt={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(t=>t.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);while(i)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;while(n){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;while(n){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(t=>!m(t)&&g(t))},getSelectorFromElement(t){const e=Q(t);return e&&tt.findOne(e)?e:null},getElementFromSelector(t){const e=Q(t);return e?tt.findOne(e):null},getMultipleElementsFromSelector(t){const e=Q(t);return e?tt.find(e):[]}},et=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;U.on(document,n,`[data-bs-dismiss="${i}"]`,function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),m(this))return;const o=tt.getElementFromSelector(this)||this.closest(`.${i}`),r=t.getOrCreateInstance(o);r[e]()})},nt="alert",it="bs.alert",ot=`.${it}`,rt=`close${ot}`,st=`closed${ot}`,at="fade",lt="show";class ct extends Z{static get NAME(){return nt}close(){const t=U.trigger(this._element,rt);if(t.defaultPrevented)return;this._element.classList.remove(lt);const e=this._element.classList.contains(at);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),U.trigger(this._element,st),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=ct.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}et(ct,"close"),x(ct);const ut="button",dt="bs.button",ht=`.${dt}`,ft=".data-api",pt="active",gt='[data-bs-toggle="button"]',mt=`click${ht}${ft}`;class bt extends Z{static get NAME(){return ut}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(pt))}static jQueryInterface(t){return this.each(function(){const e=bt.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}U.on(document,mt,gt,t=>{t.preventDefault();const e=t.target.closest(gt),n=bt.getOrCreateInstance(e);n.toggle()}),x(bt);const vt="swipe",wt=".bs.swipe",_t=`touchstart${wt}`,yt=`touchmove${wt}`,kt=`touchend${wt}`,Ct=`pointerdown${wt}`,xt=`pointerup${wt}`,Et="touch",St="pen",Tt="pointer-event",At=40,Pt={endCallback:null,leftCallback:null,rightCallback:null},It={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Rt extends X{constructor(t,e){super(),this._element=t,t&&Rt.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Pt}static get DefaultType(){return It}static get NAME(){return vt}dispose(){U.off(this._element,wt)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),E(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=At)return;const e=t/this._deltaX;this._deltaX=0,e&&E(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,Ct,t=>this._start(t)),U.on(this._element,xt,t=>this._end(t)),this._element.classList.add(Tt)):(U.on(this._element,_t,t=>this._start(t)),U.on(this._element,yt,t=>this._move(t)),U.on(this._element,kt,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===St||t.pointerType===Et)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ot="carousel",Mt="bs.carousel",Dt=`.${Mt}`,Vt=".data-api",Nt="ArrowLeft",Lt="ArrowRight",Bt=500,Ft="next",zt="prev",Ht="left",Wt="right",jt=`slide${Dt}`,$t=`slid${Dt}`,Ut=`keydown${Dt}`,qt=`mouseenter${Dt}`,Gt=`mouseleave${Dt}`,Kt=`dragstart${Dt}`,Yt=`load${Dt}${Vt}`,Xt=`click${Dt}${Vt}`,Jt="carousel",Zt="active",Qt="slide",te="carousel-item-end",ee="carousel-item-start",ne="carousel-item-next",ie="carousel-item-prev",oe=".active",re=".carousel-item",se=oe+re,ae=".carousel-item img",le=".carousel-indicators",ce="[data-bs-slide], [data-bs-slide-to]",ue='[data-bs-ride="carousel"]',de={[Nt]:Wt,[Lt]:Ht},he={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},fe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class pe extends Z{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=tt.findOne(le,this._element),this._addEventListeners(),this._config.ride===Jt&&this.cycle()}static get Default(){return he}static get DefaultType(){return fe}static get NAME(){return Ot}next(){this._slide(Ft)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide(zt)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?U.one(this._element,$t,()=>this.cycle()):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void U.one(this._element,$t,()=>this.to(t));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?Ft:zt;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&U.on(this._element,Ut,t=>this._keydown(t)),"hover"===this._config.pause&&(U.on(this._element,qt,()=>this.pause()),U.on(this._element,Gt,()=>this._maybeEnableCycle())),this._config.touch&&Rt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of tt.find(ae,this._element))U.on(n,Kt,t=>t.preventDefault());const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Bt+this._config.interval))},e={leftCallback:()=>this._slide(this._directionToOrder(Ht)),rightCallback:()=>this._slide(this._directionToOrder(Wt)),endCallback:t};this._swipeHelper=new Rt(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=de[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=tt.findOne(oe,this._indicatorsElement);e.classList.remove(Zt),e.removeAttribute("aria-current");const n=tt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Zt),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===Ft,o=e||T(this._getItems(),n,i,this._config.wrap);if(o===n)return;const r=this._getItemIndex(o),s=e=>U.trigger(this._element,e,{relatedTarget:o,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:r}),a=s(jt);if(a.defaultPrevented)return;if(!n||!o)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=o;const c=i?ee:te,u=i?ne:ie;o.classList.add(u),w(o),n.classList.add(c),o.classList.add(c);const d=()=>{o.classList.remove(c,u),o.classList.add(Zt),n.classList.remove(Zt,u,c),this._isSliding=!1,s($t)};this._queueCallback(d,n,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(Qt)}_getActive(){return tt.findOne(se,this._element)}_getItems(){return tt.find(re,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return C()?t===Ht?zt:Ft:t===Ht?Ft:zt}_orderToDirection(t){return C()?t===zt?Ht:Wt:t===zt?Wt:Ht}static jQueryInterface(t){return this.each(function(){const e=pe.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)})}}U.on(document,Xt,ce,function(t){const e=tt.getElementFromSelector(this);if(!e||!e.classList.contains(Jt))return;t.preventDefault();const n=pe.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===Y.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())}),U.on(window,Yt,()=>{const t=tt.find(ue);for(const e of t)pe.getOrCreateInstance(e)}),x(pe);const ge="collapse",me="bs.collapse",be=`.${me}`,ve=".data-api",we=`show${be}`,_e=`shown${be}`,ye=`hide${be}`,ke=`hidden${be}`,Ce=`click${be}${ve}`,xe="show",Ee="collapse",Se="collapsing",Te="collapsed",Ae=`:scope .${Ee} .${Ee}`,Pe="collapse-horizontal",Ie="width",Re="height",Oe=".collapse.show, .collapse.collapsing",Me='[data-bs-toggle="collapse"]',De={parent:null,toggle:!0},Ve={parent:"(null|element)",toggle:"boolean"};class Ne extends Z{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=tt.find(Me);for(const i of n){const t=tt.getSelectorFromElement(i),e=tt.find(t).filter(t=>t===this._element);null!==t&&e.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return De}static get DefaultType(){return Ve}static get NAME(){return ge}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Oe).filter(t=>t!==this._element).map(t=>Ne.getOrCreateInstance(t,{toggle:!1}))),t.length&&t[0]._isTransitioning)return;const e=U.trigger(this._element,we);if(e.defaultPrevented)return;for(const s of t)s.hide();const n=this._getDimension();this._element.classList.remove(Ee),this._element.classList.add(Se),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Se),this._element.classList.add(Ee,xe),this._element.style[n]="",U.trigger(this._element,_e)},o=n[0].toUpperCase()+n.slice(1),r=`scroll${o}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=U.trigger(this._element,ye);if(t.defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,w(this._element),this._element.classList.add(Se),this._element.classList.remove(Ee,xe);for(const i of this._triggerArray){const t=tt.getElementFromSelector(i);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Se),this._element.classList.add(Ee),U.trigger(this._element,ke)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(xe)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=p(t.parent),t}_getDimension(){return this._element.classList.contains(Pe)?Ie:Re}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Me);for(const e of t){const t=tt.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=tt.find(Ae,this._config.parent);return tt.find(t,this._config.parent).filter(t=>!e.includes(t))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(Te,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const n=Ne.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}})}}U.on(document,Ce,Me,function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of tt.getMultipleElementsFromSelector(this))Ne.getOrCreateInstance(e,{toggle:!1}).toggle()}),x(Ne);const Le="dropdown",Be="bs.dropdown",Fe=`.${Be}`,ze=".data-api",He="Escape",We="Tab",je="ArrowUp",$e="ArrowDown",Ue=2,qe=`hide${Fe}`,Ge=`hidden${Fe}`,Ke=`show${Fe}`,Ye=`shown${Fe}`,Xe=`click${Fe}${ze}`,Je=`keydown${Fe}${ze}`,Ze=`keyup${Fe}${ze}`,Qe="show",tn="dropup",en="dropend",nn="dropstart",on="dropup-center",rn="dropdown-center",sn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',an=`${sn}.${Qe}`,ln=".dropdown-menu",cn=".navbar",un=".navbar-nav",dn=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",hn=C()?"top-end":"top-start",fn=C()?"top-start":"top-end",pn=C()?"bottom-end":"bottom-start",gn=C()?"bottom-start":"bottom-end",mn=C()?"left-start":"right-start",bn=C()?"right-start":"left-start",vn="top",wn="bottom",_n={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class kn extends Z{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=tt.next(this._element,ln)[0]||tt.prev(this._element,ln)[0]||tt.findOne(ln,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return _n}static get DefaultType(){return yn}static get NAME(){return Le}toggle(){return this._isShown()?this.hide():this.show()}show(){if(m(this._element)||this._isShown())return;const t={relatedTarget:this._element},e=U.trigger(this._element,Ke,t);if(!e.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(un))for(const t of[].concat(...document.body.children))U.on(t,"mouseover",v);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Qe),this._element.classList.add(Qe),U.trigger(this._element,Ye,t)}}hide(){if(m(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const e=U.trigger(this._element,qe,t);if(!e.defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))U.off(t,"mouseover",v);this._popper&&this._popper.destroy(),this._menu.classList.remove(Qe),this._element.classList.remove(Qe),this._element.setAttribute("aria-expanded","false"),Y.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,Ge,t)}}_getConfig(t){if(t=super._getConfig(t),"object"===typeof t.reference&&!f(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${Le.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if("undefined"===typeof n)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:f(this._config.reference)?t=p(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=n.createPopper(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Qe)}_getPlacement(){const t=this._parent;if(t.classList.contains(en))return mn;if(t.classList.contains(nn))return bn;if(t.classList.contains(on))return vn;if(t.classList.contains(rn))return wn;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains(tn)?e?fn:hn:e?gn:pn}_detectNavbar(){return null!==this._element.closest(cn)}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map(t=>Number.parseInt(t,10)):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Y.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...E(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=tt.find(dn,this._menu).filter(t=>g(t));n.length&&T(n,e,t===$e,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=kn.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===Ue||"keyup"===t.type&&t.key!==We)return;const e=tt.find(an);for(const n of e){const e=kn.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),o=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!o||"outside"===e._config.autoClose&&o)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&t.key===We||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const r={relatedTarget:e._element};"click"===t.type&&(r.clickEvent=t),e._completeHide(r)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===He,i=[je,$e].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const o=this.matches(sn)?this:tt.prev(this,sn)[0]||tt.next(this,sn)[0]||tt.findOne(sn,t.delegateTarget.parentNode),r=kn.getOrCreateInstance(o);if(i)return t.stopPropagation(),r.show(),void r._selectMenuItem(t);r._isShown()&&(t.stopPropagation(),r.hide(),o.focus())}}U.on(document,Je,sn,kn.dataApiKeydownHandler),U.on(document,Je,ln,kn.dataApiKeydownHandler),U.on(document,Xe,kn.clearMenus),U.on(document,Ze,kn.clearMenus),U.on(document,Xe,sn,function(t){t.preventDefault(),kn.getOrCreateInstance(this).toggle()}),x(kn);const Cn="backdrop",xn="fade",En="show",Sn=`mousedown.bs.${Cn}`,Tn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},An={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Pn extends X{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Tn}static get DefaultType(){return An}static get NAME(){return Cn}show(t){if(!this._config.isVisible)return void E(t);this._append();const e=this._getElement();this._config.isAnimated&&w(e),e.classList.add(En),this._emulateAnimation(()=>{E(t)})}hide(t){this._config.isVisible?(this._getElement().classList.remove(En),this._emulateAnimation(()=>{this.dispose(),E(t)})):E(t)}dispose(){this._isAppended&&(U.off(this._element,Sn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(xn),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=p(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),U.on(t,Sn,()=>{E(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){S(t,this._getElement(),this._config.isAnimated)}}const In="focustrap",Rn="bs.focustrap",On=`.${Rn}`,Mn=`focusin${On}`,Dn=`keydown.tab${On}`,Vn="Tab",Nn="forward",Ln="backward",Bn={autofocus:!0,trapElement:null},Fn={autofocus:"boolean",trapElement:"element"};class zn extends X{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Bn}static get DefaultType(){return Fn}static get NAME(){return In}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,On),U.on(document,Mn,t=>this._handleFocusin(t)),U.on(document,Dn,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,On))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=tt.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Ln?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===Vn&&(this._lastTabNavDirection=t.shiftKey?Ln:Nn)}}const Hn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Wn=".sticky-top",jn="padding-right",$n="margin-right";class Un{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,jn,e=>e+t),this._setElementAttributes(Hn,jn,e=>e+t),this._setElementAttributes(Wn,$n,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,jn),this._resetElementAttributes(Hn,jn),this._resetElementAttributes(Wn,$n)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth(),o=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const o=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(o))}px`)};this._applyManipulationCallback(t,o)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Y.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=t=>{const n=Y.getDataAttribute(t,e);null!==n?(Y.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(f(t))e(t);else for(const n of tt.find(t,this._element))e(n)}}const qn="modal",Gn="bs.modal",Kn=`.${Gn}`,Yn=".data-api",Xn="Escape",Jn=`hide${Kn}`,Zn=`hidePrevented${Kn}`,Qn=`hidden${Kn}`,ti=`show${Kn}`,ei=`shown${Kn}`,ni=`resize${Kn}`,ii=`click.dismiss${Kn}`,oi=`mousedown.dismiss${Kn}`,ri=`keydown.dismiss${Kn}`,si=`click${Kn}${Yn}`,ai="modal-open",li="fade",ci="show",ui="modal-static",di=".modal.show",hi=".modal-dialog",fi=".modal-body",pi='[data-bs-toggle="modal"]',gi={backdrop:!0,focus:!0,keyboard:!0},mi={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class bi extends Z{constructor(t,e){super(t,e),this._dialog=tt.findOne(hi,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Un,this._addEventListeners()}static get Default(){return gi}static get DefaultType(){return mi}static get NAME(){return qn}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=U.trigger(this._element,ti,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ai),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){if(!this._isShown||this._isTransitioning)return;const t=U.trigger(this._element,Jn);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ci),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){U.off(window,Kn),U.off(this._dialog,Kn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Pn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new zn({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=tt.findOne(fi,this._dialog);e&&(e.scrollTop=0),w(this._element),this._element.classList.add(ci);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,ei,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,ri,t=>{t.key===Xn&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),U.on(window,ni,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),U.on(this._element,oi,t=>{U.one(this._element,ii,e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ai),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,Qn)})}_isAnimated(){return this._element.classList.contains(li)}_triggerBackdropTransition(){const t=U.trigger(this._element,Zn);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(ui)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(ui),this._queueCallback(()=>{this._element.classList.remove(ui),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=C()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=C()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const n=bi.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}})}}U.on(document,si,pi,function(t){const e=tt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),U.one(e,ti,t=>{t.defaultPrevented||U.one(e,Qn,()=>{g(this)&&this.focus()})});const n=tt.findOne(di);n&&bi.getInstance(n).hide();const i=bi.getOrCreateInstance(e);i.toggle(this)}),et(bi),x(bi);const vi="offcanvas",wi="bs.offcanvas",_i=`.${wi}`,yi=".data-api",ki=`load${_i}${yi}`,Ci="Escape",xi="show",Ei="showing",Si="hiding",Ti="offcanvas-backdrop",Ai=".offcanvas.show",Pi=`show${_i}`,Ii=`shown${_i}`,Ri=`hide${_i}`,Oi=`hidePrevented${_i}`,Mi=`hidden${_i}`,Di=`resize${_i}`,Vi=`click${_i}${yi}`,Ni=`keydown.dismiss${_i}`,Li='[data-bs-toggle="offcanvas"]',Bi={backdrop:!0,keyboard:!0,scroll:!1},Fi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class zi extends Z{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Bi}static get DefaultType(){return Fi}static get NAME(){return vi}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;const e=U.trigger(this._element,Pi,{relatedTarget:t});if(e.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Un).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ei);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(xi),this._element.classList.remove(Ei),U.trigger(this._element,Ii,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const t=U.trigger(this._element,Ri);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Si),this._backdrop.hide();const e=()=>{this._element.classList.remove(xi,Si),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Un).reset(),U.trigger(this._element,Mi)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{"static"!==this._config.backdrop?this.hide():U.trigger(this._element,Oi)},e=Boolean(this._config.backdrop);return new Pn({className:Ti,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new zn({trapElement:this._element})}_addEventListeners(){U.on(this._element,Ni,t=>{t.key===Ci&&(this._config.keyboard?this.hide():U.trigger(this._element,Oi))})}static jQueryInterface(t){return this.each(function(){const e=zi.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}U.on(document,Vi,Li,function(t){const e=tt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),m(this))return;U.one(e,Mi,()=>{g(this)&&this.focus()});const n=tt.findOne(Ai);n&&n!==e&&zi.getInstance(n).hide();const i=zi.getOrCreateInstance(e);i.toggle(this)}),U.on(window,ki,()=>{for(const t of tt.find(Ai))zi.getOrCreateInstance(t).show()}),U.on(window,Di,()=>{for(const t of tt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&zi.getOrCreateInstance(t).hide()}),et(zi),x(zi);const Hi=/^aria-[\w-]*$/i,Wi={"*":["class","dir","id","lang","role",Hi],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ji=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),$i=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ui=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!ji.has(n)||Boolean($i.test(t.nodeValue)):e.filter(t=>t instanceof RegExp).some(t=>t.test(n))};function qi(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const i=new window.DOMParser,o=i.parseFromString(t,"text/html"),r=[].concat(...o.body.querySelectorAll("*"));for(const s of r){const t=s.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){s.remove();continue}const n=[].concat(...s.attributes),i=[].concat(e["*"]||[],e[t]||[]);for(const e of n)Ui(e,i)||s.removeAttribute(e.nodeName)}return o.body.innerHTML}const Gi="TemplateFactory",Ki={allowList:Wi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Yi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xi={entry:"(string|element|function|null)",selector:"(string|element)"};class Ji extends X{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Ki}static get DefaultType(){return Yi}static get NAME(){return Gi}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,o]of Object.entries(this._config.content))this._setContent(t,o,i);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},Xi)}_setContent(t,e,n){const i=tt.findOne(n,t);i&&(e=this._resolvePossibleFunction(e),e?f(e)?this._putElementInTemplate(p(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?qi(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return E(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Zi="tooltip",Qi=new Set(["sanitize","allowList","sanitizeFn"]),to="fade",eo="modal",no="show",io=".tooltip-inner",oo=`.${eo}`,ro="hide.bs.modal",so="hover",ao="focus",lo="click",co="manual",uo="hide",ho="hidden",fo="show",po="shown",go="inserted",mo="click",bo="focusin",vo="focusout",wo="mouseenter",_o="mouseleave",yo={AUTO:"auto",TOP:"top",RIGHT:C()?"left":"right",BOTTOM:"bottom",LEFT:C()?"right":"left"},ko={allowList:Wi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Co={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class xo extends Z{constructor(t,e){if("undefined"===typeof n)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ko}static get DefaultType(){return Co}static get NAME(){return Zi}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(oo),ro,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=U.trigger(this._element,this.constructor.eventName(fo)),e=b(this._element),n=(e||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(i),U.trigger(this._element,this.constructor.eventName(go))),this._popper=this._createPopper(i),i.classList.add(no),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))U.on(s,"mouseover",v);const r=()=>{U.trigger(this._element,this.constructor.eventName(po)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(r,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=U.trigger(this._element,this.constructor.eventName(uo));if(t.defaultPrevented)return;const e=this._getTipElement();if(e.classList.remove(no),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))U.off(i,"mouseover",v);this._activeTrigger[lo]=!1,this._activeTrigger[ao]=!1,this._activeTrigger[so]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName(ho)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(to,no),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=u(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(to),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ji({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[io]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(to)}_isShown(){return this.tip&&this.tip.classList.contains(no)}_createPopper(t){const e=E(this._config.placement,[this,t,this._element]),i=yo[e.toUpperCase()];return n.createPopper(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map(t=>Number.parseInt(t,10)):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return E(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...E(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)U.on(this._element,this.constructor.eventName(mo),this._config.selector,t=>{const e=this._initializeOnDelegatedTarget(t);e.toggle()});else if(e!==co){const t=e===so?this.constructor.eventName(wo):this.constructor.eventName(bo),n=e===so?this.constructor.eventName(_o):this.constructor.eventName(vo);U.on(this._element,t,this._config.selector,t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?ao:so]=!0,e._enter()}),U.on(this._element,n,this._config.selector,t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?ao:so]=e._element.contains(t.relatedTarget),e._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(oo),ro,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Y.getDataAttributes(this._element);for(const n of Object.keys(e))Qi.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:p(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=xo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}x(xo);const Eo="popover",So=".popover-header",To=".popover-body",Ao={...xo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Po={...xo.DefaultType,content:"(null|string|element|function)"};class Io extends xo{static get Default(){return Ao}static get DefaultType(){return Po}static get NAME(){return Eo}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[So]:this._getTitle(),[To]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=Io.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}x(Io);const Ro="scrollspy",Oo="bs.scrollspy",Mo=`.${Oo}`,Do=".data-api",Vo=`activate${Mo}`,No=`click${Mo}`,Lo=`load${Mo}${Do}`,Bo="dropdown-item",Fo="active",zo='[data-bs-spy="scroll"]',Ho="[href]",Wo=".nav, .list-group",jo=".nav-link",$o=".nav-item",Uo=".list-group-item",qo=`${jo}, ${$o} > ${jo}, ${Uo}`,Go=".dropdown",Ko=".dropdown-toggle",Yo={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Xo={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Jo extends Z{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Yo}static get DefaultType(){return Xo}static get NAME(){return Ro}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=p(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map(t=>Number.parseFloat(t))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,No),U.on(this._config.target,No,Ho,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,o=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const r of t){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(r));continue}const t=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&t){if(n(r),!i)return}else o||t||n(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=tt.find(Ho,this._config.target);for(const e of t){if(!e.hash||m(e))continue;const t=tt.findOne(decodeURI(e.hash),this._element);g(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Fo),this._activateParents(t),U.trigger(this._element,Vo,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Bo))tt.findOne(Ko,t.closest(Go)).classList.add(Fo);else for(const e of tt.parents(t,Wo))for(const t of tt.prev(e,qo))t.classList.add(Fo)}_clearActiveClass(t){t.classList.remove(Fo);const e=tt.find(`${Ho}.${Fo}`,t);for(const n of e)n.classList.remove(Fo)}static jQueryInterface(t){return this.each(function(){const e=Jo.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}})}}U.on(window,Lo,()=>{for(const t of tt.find(zo))Jo.getOrCreateInstance(t)}),x(Jo);const Zo="tab",Qo="bs.tab",tr=`.${Qo}`,er=`hide${tr}`,nr=`hidden${tr}`,ir=`show${tr}`,or=`shown${tr}`,rr=`click${tr}`,sr=`keydown${tr}`,ar=`load${tr}`,lr="ArrowLeft",cr="ArrowRight",ur="ArrowUp",dr="ArrowDown",hr="Home",fr="End",pr="active",gr="fade",mr="show",br="dropdown",vr=".dropdown-toggle",wr=".dropdown-menu",_r=`:not(${vr})`,yr='.list-group, .nav, [role="tablist"]',kr=".nav-item, .list-group-item",Cr=`.nav-link${_r}, .list-group-item${_r}, [role="tab"]${_r}`,xr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Er=`${Cr}, ${xr}`,Sr=`.${pr}[data-bs-toggle="tab"], .${pr}[data-bs-toggle="pill"], .${pr}[data-bs-toggle="list"]`;class Tr extends Z{constructor(t){super(t),this._parent=this._element.closest(yr),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,sr,t=>this._keydown(t)))}static get NAME(){return Zo}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?U.trigger(e,er,{relatedTarget:t}):null,i=U.trigger(t,ir,{relatedTarget:e});i.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(pr),this._activate(tt.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),U.trigger(t,or,{relatedTarget:e})):t.classList.add(mr)};this._queueCallback(n,t,t.classList.contains(gr))}_deactivate(t,e){if(!t)return;t.classList.remove(pr),t.blur(),this._deactivate(tt.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),U.trigger(t,nr,{relatedTarget:e})):t.classList.remove(mr)};this._queueCallback(n,t,t.classList.contains(gr))}_keydown(t){if(![lr,cr,ur,dr,hr,fr].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(t=>!m(t));let n;if([hr,fr].includes(t.key))n=e[t.key===hr?0:e.length-1];else{const i=[cr,dr].includes(t.key);n=T(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),Tr.getOrCreateInstance(n).show())}_getChildren(){return tt.find(Er,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=tt.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(br))return;const i=(t,i)=>{const o=tt.findOne(t,n);o&&o.classList.toggle(i,e)};i(vr,pr),i(wr,mr),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(pr)}_getInnerElement(t){return t.matches(Er)?t:tt.findOne(Er,t)}_getOuterElement(t){return t.closest(kr)||t}static jQueryInterface(t){return this.each(function(){const e=Tr.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}})}}U.on(document,rr,xr,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),m(this)||Tr.getOrCreateInstance(this).show()}),U.on(window,ar,()=>{for(const t of tt.find(Sr))Tr.getOrCreateInstance(t)}),x(Tr);const Ar="toast",Pr="bs.toast",Ir=`.${Pr}`,Rr=`mouseover${Ir}`,Or=`mouseout${Ir}`,Mr=`focusin${Ir}`,Dr=`focusout${Ir}`,Vr=`hide${Ir}`,Nr=`hidden${Ir}`,Lr=`show${Ir}`,Br=`shown${Ir}`,Fr="fade",zr="hide",Hr="show",Wr="showing",jr={animation:"boolean",autohide:"boolean",delay:"number"},$r={animation:!0,autohide:!0,delay:5e3};class Ur extends Z{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return $r}static get DefaultType(){return jr}static get NAME(){return Ar}show(){const t=U.trigger(this._element,Lr);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Fr);const e=()=>{this._element.classList.remove(Wr),U.trigger(this._element,Br),this._maybeScheduleHide()};this._element.classList.remove(zr),w(this._element),this._element.classList.add(Hr,Wr),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=U.trigger(this._element,Vr);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(zr),this._element.classList.remove(Wr,Hr),U.trigger(this._element,Nr)};this._element.classList.add(Wr),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Hr),super.dispose()}isShown(){return this._element.classList.contains(Hr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,Rr,t=>this._onInteraction(t,!0)),U.on(this._element,Or,t=>this._onInteraction(t,!1)),U.on(this._element,Mr,t=>this._onInteraction(t,!0)),U.on(this._element,Dr,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Ur.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}})}}et(Ur),x(Ur);const qr={Alert:ct,Button:bt,Carousel:pe,Collapse:Ne,Dropdown:kn,Modal:bi,Offcanvas:zi,Popover:Io,ScrollSpy:Jo,Tab:Tr,Toast:Ur,Tooltip:xo};return qr})},2760:function(t,e,n){"use strict";var i=n(7485);t.exports=function(t,e,n){for(var o in e)i(t,o,e[o],n);return t}},2838:function(t,e,n){"use strict";var i=n(5077),o=n(281),r=n(6477),s=URLSearchParams.prototype,a=o(s.forEach);i&&!("size"in s)&&r(s,"size",{get:function(){var t=0;return a(this,function(){t++}),t},configurable:!0,enumerable:!0})},2929:function(t,e,n){"use strict";var i=n(6885),o=n(2368),r=n(3938),s=n(3838),a=n(9034),l=n(3493),c=n(7658),u=n(9526),d=n(1898),h=n(9868),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},g=p.prototype;t.exports=function(t,e,n){var m,b,v,w,_,y,k,C=n&&n.that,x=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_RECORD),S=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),A=i(e,C),P=function(t){return m&&h(m,"normal",t),new p(!0,t)},I=function(t){return x?(r(t),T?A(t[0],t[1],P):A(t[0],t[1])):T?A(t,P):A(t)};if(E)m=t.iterator;else if(S)m=t;else{if(b=d(t),!b)throw new f(s(t)+" is not iterable");if(a(b)){for(v=0,w=l(t);w>v;v++)if(_=I(t[v]),_&&c(g,_))return _;return new p(!1)}m=u(t,b)}y=E?t.next:m.next;while(!(k=o(y,m)).done){try{_=I(k.value)}catch(R){h(m,"throw",R)}if("object"==typeof _&&_&&c(g,_))return _}return new p(!1)}},3062:function(t,e,n){"use strict";var i=n(3129),o=n(8420),r=n(8569),s=n(1602),a=s("toStringTag"),l=Object,c="Arguments"===r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=i?r:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=l(t),a))?n:c?r(e):"Object"===(i=r(e))&&o(e.callee)?"Arguments":i}},3091:function(t,e,n){"use strict";var i=n(8569),o=n(281);t.exports=function(t){if("Function"===i(t))return o(t)}},3105:function(t,e,n){"use strict";var i,o=n(3938),r=n(5318),s=n(290),a=n(7708),l=n(8890),c=n(3262),u=n(5904),d=">",h="<",f="prototype",p="script",g=u("IE_PROTO"),m=function(){},b=function(t){return h+p+d+t+h+"/"+p+d},v=function(t){t.write(b("")),t.close();var e=t.parentWindow.Object;return t=null,e},w=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(b("document.F=Object")),t.close(),t.F},_=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}_="undefined"!=typeof document?document.domain&&i?v(i):w():v(i);var t=s.length;while(t--)delete _[f][s[t]];return _()};a[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[f]=o(t),n=new m,m[f]=null,n[g]=t):n=_(),void 0===e?n:r.f(n,e)}},3129:function(t,e,n){"use strict";var i=n(1602),o=i("toStringTag"),r={};r[o]="z",t.exports="[object z]"===String(r)},3262:function(t,e,n){"use strict";var i=n(200),o=n(5335),r=i.document,s=o(r)&&o(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},3493:function(t,e,n){"use strict";var i=n(3747);t.exports=function(t){return i(t.length)}},3610:function(t,e,n){"use strict";var i=n(5077),o=n(7694),r=n(4491),s=n(3938),a=n(6032),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";e.f=i?r?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=u(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:d in n?n[d]:i[d],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),o)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},3725:function(t,e,n){"use strict";var i=n(1605),o=n(200),r=n(5190),s=n(8420),a=n(7970),l=n(7712),c=n(2074),u=n(6490),d=n(1602),h=n(9306).IteratorPrototype,f=n(6926),p=d("toStringTag"),g=TypeError,m=o.Iterator,b=f||!s(m)||m.prototype!==h||!c(function(){m({})}),v=function(){if(r(this,h),a(this)===h)throw new g("Abstract class Iterator not directly constructable")};u(h,p)||l(h,p,"Iterator"),!b&&u(h,"constructor")&&h.constructor!==Object||l(h,"constructor",v),v.prototype=h,i({global:!0,constructor:!0,forced:b},{Iterator:v})},3747:function(t,e,n){"use strict";var i=n(9328),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},3838:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},3938:function(t,e,n){"use strict";var i=n(5335),o=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(o(t)+" is not an object")}},4274:function(t,e,n){"use strict";function i(t){return null!==t&&("object"===typeof t||"function"===typeof t)}function o(t){return"string"===typeof t||t instanceof String}function r(t){if("object"!==typeof t)return!1;if(null==t)return!1;if(null===Object.getPrototypeOf(t))return!0;if("[object Object]"!==Object.prototype.toString.call(t)){const e=t[Symbol.toStringTag];if(null==e)return!1;const n=!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable;return!n&&t.toString()===`[object ${e}]`}let e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function s(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function a(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.d(e,{yN4:function(){return A_},aRV:function(){return tC},uwK:function(){return bC},DZT:function(){return NC},f4q:function(){return jC},Dqk:function(){return Cx},qIF:function(){return Ix},H_q:function(){return Ex},H09:function(){return rE},YkW:function(){return oE},uXn:function(){return xE},bsd:function(){return UE},ywH:function(){return cx},FUH:function(){return qE},BRX:function(){return eE},J20:function(){return M_},N_E:function(){return $S},eHb:function(){return JS},B8B:function(){return bA},y4:function(){return $A},fzL:function(){return PC},mYY:function(){return uI},kNn:function(){return lC},GkN:function(){return B_},XIK:function(){return OO},r6L:function(){return mD},Cdo:function(){return OM},TLK:function(){return FM},e1w:function(){return sD},e1U:function(){return LO},t0N:function(){return rP},z2z:function(){return j_},VnB:function(){return mC}});const l="[object RegExp]",c="[object String]",u="[object Number]",d="[object Boolean]",h="[object Arguments]",f="[object Symbol]",p="[object Date]",g="[object Map]",m="[object Set]",b="[object Array]",v="[object Function]",w="[object ArrayBuffer]",_="[object Object]",y="[object Error]",k="[object DataView]",C="[object Uint8Array]",x="[object Uint8ClampedArray]",E="[object Uint16Array]",S="[object Uint32Array]",T="[object BigUint64Array]",A="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",R="[object BigInt64Array]",O="[object Float32Array]",M="[object Float64Array]";function D(t){return null==t||"object"!==typeof t&&"function"!==typeof t}function V(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function N(t,e){return L(t,void 0,t,new Map,e)}function L(t,e,n,i=new Map,o=void 0){const r=o?.(t,e,n,i);if(null!=r)return r;if(D(t))return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){const e=new Array(t.length);i.set(t,e);for(let r=0;r<t.length;r++)e[r]=L(t[r],r,n,i,o);return Object.hasOwn(t,"index")&&(e.index=t.index),Object.hasOwn(t,"input")&&(e.input=t.input),e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}if(t instanceof Map){const e=new Map;i.set(t,e);for(const[r,s]of t)e.set(r,L(s,r,n,i,o));return e}if(t instanceof Set){const e=new Set;i.set(t,e);for(const r of t)e.add(L(r,void 0,n,i,o));return e}if("undefined"!==typeof Buffer&&Buffer.isBuffer(t))return t.subarray();if(V(t)){const e=new(Object.getPrototypeOf(t).constructor)(t.length);i.set(t,e);for(let r=0;r<t.length;r++)e[r]=L(t[r],r,n,i,o);return e}if(t instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const e=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return i.set(t,e),B(e,t,n,i,o),e}if("undefined"!==typeof File&&t instanceof File){const e=new File([t],t.name,{type:t.type});return i.set(t,e),B(e,t,n,i,o),e}if(t instanceof Blob){const e=new Blob([t],{type:t.type});return i.set(t,e),B(e,t,n,i,o),e}if(t instanceof Error){const e=new t.constructor;return i.set(t,e),e.message=t.message,e.name=t.name,e.stack=t.stack,e.cause=t.cause,B(e,t,n,i,o),e}if("object"===typeof t&&F(t)){const e=Object.create(Object.getPrototypeOf(t));return i.set(t,e),B(e,t,n,i,o),e}return t}function B(t,e,n=t,i,o){const r=[...Object.keys(e),...s(e)];for(let s=0;s<r.length;s++){const a=r[s],l=Object.getOwnPropertyDescriptor(t,a);(null==l||l.writable)&&(t[a]=L(e[a],a,n,i,o))}}function F(t){switch(a(t)){case h:case b:case w:case k:case d:case p:case O:case M:case A:case P:case I:case g:case u:case _:case l:case m:case c:case f:case C:case x:case E:case S:return!0;default:return!1}}function z(t,e){return N(t,(n,i,o,r)=>{const s=e?.(n,i,o,r);if(null!=s)return s;if("object"===typeof t)switch(Object.prototype.toString.call(t)){case u:case c:case d:{const e=new t.constructor(t?.valueOf());return B(e,t),e}case h:{const e={};return B(e,t),e.length=t.length,e[Symbol.iterator]=t[Symbol.iterator],e}default:return}})}function H(t){return"object"===typeof t&&null!==t}function W(t){return H(t)&&1===t.nodeType&&!r(t)}function j(t){return"function"===typeof t}function $(t){return z(t)}function U(t){return"__proto__"===t}function q(t){if(D(t))return t;if(Array.isArray(t)||V(t)||t instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const e=new n(t);return e.lastIndex=t.lastIndex,e}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const e=new n(t.message);return e.stack=t.stack,e.name=t.name,e.cause=t.cause,e}if("undefined"!==typeof File&&t instanceof File){const e=new n([t],t.name,{type:t.type,lastModified:t.lastModified});return e}if("object"===typeof t){const n=Object.create(e);return Object.assign(n,t)}return t}function G(t){return null!==t&&"object"===typeof t&&"[object Arguments]"===a(t)}function K(t){return V(t)}function Y(t,...e){const n=e.slice(0,-1),i=e[e.length-1];let o=t;for(let r=0;r<n.length;r++){const t=n[r];o=X(o,t,i,new Map)}return o}function X(t,e,n,i){if(D(t)&&(t=Object(t)),null==e||"object"!==typeof e)return t;if(i.has(e))return q(i.get(e));if(i.set(e,t),Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]=e[t]??void 0}const o=[...Object.keys(e),...s(e)];for(let s=0;s<o.length;s++){const a=o[s];if(U(a))continue;let l=e[a],c=t[a];if(G(l)&&(l={...l}),G(c)&&(c={...c}),"undefined"!==typeof Buffer&&Buffer.isBuffer(l)&&(l=$(l)),Array.isArray(l))if("object"===typeof c&&null!=c){const t=[],e=Reflect.ownKeys(c);for(let n=0;n<e.length;n++){const i=e[n];t[i]=c[i]}c=t}else c=[];const u=n(c,l,a,t,e,i);null!=u?t[a]=u:Array.isArray(l)||H(c)&&H(l)?t[a]=X(c,l,n,i):null==c&&r(l)?t[a]=X({},l,n,i):null==c&&K(l)?t[a]=$(l):void 0!==c&&void 0===l||(t[a]=l)}return t}function J(){}function Z(t,...e){return Y(t,...e,J)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
let Q;try{Q={window:window,document:document}}catch{
/* istanbul ignore next -- @preserve */
Q={window:{},document:{}}}function tt(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const et=tt(),nt={isMac:it(et),isWindows:ot(et),isGecko:rt(et),isSafari:st(et),isiOS:at(et),isAndroid:lt(et),isBlink:ct(et),get isMediaForcedColors(){return dt()},get isMotionReduced(){return ht()},features:{isRegExpUnicodePropertySupported:ut()}};function it(t){return t.indexOf("macintosh")>-1}function ot(t){return t.indexOf("windows")>-1}function rt(t){return!!t.match(/gecko\/\d+/)}function st(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}function at(t){return!!t.match(/iphone|ipad/i)||it(t)&&navigator.maxTouchPoints>0}function lt(t){return t.indexOf("android")>-1}function ct(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}function ut(){let t=!1;try{t=0==="Ä".search(new RegExp("[\\p{L}]","u"))}catch{}return t}function dt(){return!!Q.window.matchMedia&&Q.window.matchMedia("(forced-colors: active)").matches}function ht(){return!!Q.window.matchMedia&&Q.window.matchMedia("(prefers-reduced-motion)").matches}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ft(t,e,n,i){n=n||function(t,e){return t===e};const o=Array.isArray(t)?t:Array.prototype.slice.call(t),r=Array.isArray(e)?e:Array.prototype.slice.call(e),s=pt(o,r,n),a=i?vt(s,r.length):bt(r,s);return a}function pt(t,e,n){const i=gt(t,e,n);if(-1===i)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const o=mt(t,i),r=mt(e,i),s=gt(o,r,n),a=t.length-s,l=e.length-s;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function gt(t,e,n){for(let i=0;i<Math.max(t.length,e.length);i++)if(void 0===t[i]||void 0===e[i]||!n(t[i],e[i]))return i;return-1}function mt(t,e){return t.slice(e).reverse()}function bt(t,e){const n=[],{firstIndex:i,lastIndexOld:o,lastIndexNew:r}=e;return r-i>0&&n.push({index:i,type:"insert",values:t.slice(i,r)}),o-i>0&&n.push({index:i+(r-i),type:"delete",howMany:o-i}),n}function vt(t,e){const{firstIndex:n,lastIndexOld:i,lastIndexNew:o}=t;if(-1===n)return Array(e).fill("equal");let r=[];return n>0&&(r=r.concat(Array(n).fill("equal"))),o-n>0&&(r=r.concat(Array(o-n).fill("insert"))),i-n>0&&(r=r.concat(Array(i-n).fill("delete"))),o<e&&(r=r.concat(Array(e-o).fill("equal"))),r}function wt(t,e,n){n=n||function(t,e){return t===e};const i=t.length,o=e.length;if(i>200||o>200||i+o>300)return wt.fastDiff(t,e,n,!0);let r,s;if(o<i){const n=t;t=e,e=n,r="delete",s="insert"}else r="insert",s="delete";const a=t.length,l=e.length,c=l-a,u={},d={};function h(i){const o=(void 0!==d[i-1]?d[i-1]:-1)+1,c=void 0!==d[i+1]?d[i+1]:-1,h=o>c?-1:1;u[i+h]&&(u[i]=u[i+h].slice(0)),u[i]||(u[i]=[]),u[i].push(o>c?r:s);let f=Math.max(o,c),p=f-i;while(p<a&&f<l&&n(t[p],e[f]))p++,f++,u[i].push("equal");return f}let f,p=0;do{for(f=-p;f<c;f++)d[f]=h(f);for(f=c+p;f>c;f--)d[f]=h(f);d[c]=h(c),p++}while(d[c]!==l);return u[c].slice(1)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function _t(){return function t(){t.called=!0}}wt.fastDiff=ft;class yt{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=_t(),this.off=_t()}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const kt=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function Ct(){const[t,e,n,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+kt[255&t]+kt[t>>8&255]+kt[t>>16&255]+kt[t>>24&255]+kt[255&e]+kt[e>>8&255]+kt[e>>16&255]+kt[e>>24&255]+kt[255&n]+kt[n>>8&255]+kt[n>>16&255]+kt[n>>24&255]+kt[255&i]+kt[i>>8&255]+kt[i>>16&255]+kt[i>>24&255]}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const xt={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Et(t,e){const n=xt.get(e.priority);let i=0,o=t.length;while(i<o){const e=i+o>>1,r=xt.get(t[e].priority);r<n?o=e:i=e+1}t.splice(i,0,e)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const St="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class Tt extends Error{context;data;constructor(t,e,n,i){super(Rt(t,n,i)),this.name="CKEditorError",this.context=e,this.data=n,i&&(this.stack=i.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new Tt("unexpected-error",e,void 0,t)}}function At(t,e){console.warn(...Ot(t,e))}function Pt(t,e){console.error(...Ot(t,e))}function It(t){return`\nRead more: ${St}#error-${t}`}function Rt(t,e,n){const i=new WeakSet,o=(t,e)=>{if("object"===typeof e&&null!==e){if(i.has(e))return`[object ${e.constructor.name}]`;i.add(e)}return e},r=e?` ${JSON.stringify(e,o)}`:"",s=It(t),a=n?`\nOriginal error: ${n.name}: ${n.message}`:"";return t+r+s+a}function Ot(t,e){const n=It(t);return e?[t,e,n]:[t,n]}const Mt="47.2.0",Dt=new Date(2025,10,5);
/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new Tt("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Mt;const Vt=Symbol("listeningTo"),Nt=Symbol("emitterId"),Lt=Symbol("delegations"),Bt=Ft(Object);function Ft(t){if(!t)return Bt;class e extends t{on(t,e,n){this.listenTo(this,t,e,n)}once(t,e,n){let i=!1;const o=(t,...n)=>{i||(i=!0,t.off(),e.call(this,t,...n))};this.listenTo(this,t,o,n)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,n,i={}){let o,r;this[Vt]||(this[Vt]={});const s=this[Vt];Wt(t)||Ht(t);const a=Wt(t);(o=s[a])||(o=s[a]={emitter:t,callbacks:{}}),(r=o.callbacks[e])||(r=o.callbacks[e]=[]),r.push(n),Yt(this,t,e,n,i)}stopListening(t,e,n){const i=this[Vt];let o=t&&Wt(t);const r=i&&o?i[o]:void 0,s=r&&e?r.callbacks[e]:void 0;if(!(!i||t&&!r||e&&!s))if(n){Xt(this,t,e,n);const i=s.indexOf(n);-1!==i&&(1===s.length?delete r.callbacks[e]:Xt(this,t,e,n))}else if(s){while(n=s.pop())Xt(this,t,e,n);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete i[o]}else{for(o in i)this.stopListening(i[o].emitter);delete this[Vt]}}fire(t,...e){try{const n=t instanceof yt?t:new yt(this,t),i=n.name;let o=Gt(this,i);if(n.path.push(this),o){o=o.slice();for(let t=0;t<o.length;t++){const r=o[t].callback;if(r.call(this,n,...e),n.off.called&&(delete n.off.called,this._removeEventListener(i,r)),n.stop.called)break}}const r=this[Lt];if(r){const t=r.get(i),o=r.get("*");t&&Kt(t,n,e),o&&Kt(o,n,e)}return n.return}catch(n){
/* istanbul ignore next -- @preserve */Tt.rethrowUnexpectedError(n,this)}}delegate(...t){return{to:(e,n)=>{this[Lt]||(this[Lt]=new Map),t.forEach(t=>{const i=this[Lt].get(t);i?i.set(e,n):this[Lt].set(t,new Map([[e,n]]))})}}}stopDelegating(t,e){if(this[Lt])if(t)if(e){const n=this[Lt].get(t);n&&n.delete(e)}else this[Lt].delete(t);else this[Lt].clear()}_addEventListener(t,e,n){Ut(this,t);const i=qt(this,t),o=xt.get(n.priority),r={callback:e,priority:o};for(const s of i)Et(s,r)}_removeEventListener(t,e){const n=qt(this,t);for(const i of n)for(let t=0;t<i.length;t++)i[t].callback==e&&(i.splice(t,1),t--)}}return e}function zt(t,e){const n=t[Vt];return n&&n[e]?n[e].emitter:null}function Ht(t,e){t[Nt]||(t[Nt]=e||Ct())}function Wt(t){return t[Nt]}function jt(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function $t(){return{callbacks:[],childEvents:[]}}function Ut(t,e){const n=jt(t);if(n[e])return;let i=e,o=null;const r=[];while(""!==i){if(n[i])break;n[i]=$t(),r.push(n[i]),o&&n[i].childEvents.push(o),o=i,i=i.substr(0,i.lastIndexOf(":"))}if(""!==i){for(const t of r)t.callbacks=n[i].callbacks.slice();n[i].childEvents.push(o)}}function qt(t,e){const n=jt(t)[e];if(!n)return[];let i=[n.callbacks];for(let o=0;o<n.childEvents.length;o++){const e=qt(t,n.childEvents[o]);i=i.concat(e)}return i}function Gt(t,e){if(!t._events)return null;let n=e;do{const e=t._events[n];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const i=n.lastIndexOf(":");n=i>-1?n.substring(0,i):""}while(n);return null}function Kt(t,e,n){for(let[i,o]of t){o?"function"==typeof o&&(o=o(e.name)):o=e.name;const t=new yt(e.source,o);t.path=[...e.path],i.fire(t,...n)}}function Yt(t,e,n,i,o){e._addEventListener?e._addEventListener(n,i,o):t._addEventListener.call(e,n,i,o)}function Xt(t,e,n,i){e._removeEventListener?e._removeEventListener(n,i):t._removeEventListener.call(e,n,i)}const Jt=Symbol("observableProperties"),Zt=Symbol("boundObservables"),Qt=Symbol("boundProperties"),te=Symbol("decoratedMethods"),ee=Symbol("decoratedOriginal"),ne=ie(Ft());function ie(t){if(!t)return ne;class e extends t{set(t,e){if(i(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);oe(this);const n=this[Jt];if(t in this&&!n.has(t))throw new Tt("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get(){return n.get(t)},set(e){const i=n.get(t);let o=this.fire(`set:${t}`,t,e,i);void 0===o&&(o=e),i===o&&n.has(t)||(n.set(t,o),this.fire(`change:${t}`,t,o,i))}}),this[t]=e}bind(...t){if(!t.length||!le(t))throw new Tt("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new Tt("observable-bind-duplicate-properties",this);oe(this);const e=this[Qt];t.forEach(t=>{if(e.has(t))throw new Tt("observable-bind-rebind",this)});const n=new Map;return t.forEach(t=>{const i={property:t,to:[]};e.set(t,i),n.set(t,i)}),{to:re,toMany:se,_observable:this,_bindProperties:t,_to:[],_bindings:n}}unbind(...t){if(!this[Jt])return;const e=this[Qt],n=this[Zt];if(t.length){if(!le(t))throw new Tt("observable-unbind-wrong-properties",this);t.forEach(t=>{const i=e.get(t);i&&(i.to.forEach(([t,e])=>{const o=n.get(t),r=o[e];r.delete(i),r.size||delete o[e],Object.keys(o).length||(n.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else n.forEach((t,e)=>{this.stopListening(e,"change")}),n.clear(),e.clear()}decorate(t){oe(this);const e=this[t];if(!e)throw new Tt("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,n)=>{t.return=e.apply(this,n)}),this[t]=function(...e){return this.fire(t,e)},this[t][ee]=e,this[te]||(this[te]=[]),this[te].push(t)}stopListening(t,e,n){if(!t&&this[te]){for(const t of this[te])this[t]=this[t][ee];delete this[te]}super.stopListening(t,e,n)}[Jt];[te];[Qt];[Zt]}return e}function oe(t){t[Jt]||(Object.defineProperty(t,Jt,{value:new Map}),Object.defineProperty(t,Zt,{value:new Map}),Object.defineProperty(t,Qt,{value:new Map}))}function re(...t){const e=ce(...t),n=Array.from(this._bindings.keys()),i=n.length;if(!e.callback&&e.to.length>1)throw new Tt("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new Tt("observable-bind-to-extra-callback",this);e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==i)throw new Tt("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),fe(this._observable,this._to),de(this),this._bindProperties.forEach(t=>{he(this._observable,t)})}function se(t,e,n){if(this._bindings.size>1)throw new Tt("observable-bind-to-many-not-one-binding",this);this.to(...ae(t,e),n)}function ae(t,e){const n=t.map(t=>[t,e]);return Array.prototype.concat.apply([],n)}function le(t){return t.every(t=>"string"==typeof t)}function ce(...t){if(!t.length)throw new Tt("observable-bind-to-parse-error",null);const e={to:[]};let n;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)n.properties.push(t);else{if("object"!=typeof t)throw new Tt("observable-bind-to-parse-error",null);n={observable:t,properties:[]},e.to.push(n)}}),e}function ue(t,e,n,i){const o=t[Zt],r=o.get(n),s=r||{};s[i]||(s[i]=new Set),s[i].add(e),r||o.set(n,s)}function de(t){let e;t._bindings.forEach((n,i)=>{t._to.forEach(o=>{e=o.properties[n.callback?0:t._bindProperties.indexOf(i)],n.to.push([o.observable,e]),ue(t._observable,n,o.observable,e)})})}function he(t,e){const n=t[Qt],i=n.get(e);let o;i.callback?o=i.callback.apply(t,i.to.map(t=>t[0][t[1]])):(o=i.to[0],o=o[0][o[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=o:t.set(e,o)}function fe(t,e){e.forEach(e=>{const n=t[Zt];let i;n.get(e.observable)||t.listenTo(e.observable,"change",(o,r)=>{i=n.get(e.observable)[r],i&&i.forEach(e=>{he(t,e.property)})})})}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class pe{_replacedElements;constructor(){this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function ge(t){let e=0;for(const n of t)e++;return e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function me(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)if(t[i]!=e[i])return i;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function be(t){return!(!t||!t[Symbol.iterator])}function ve(t,e,n={},i=[]){const r=n&&n.xmlns,s=r?t.createElementNS(r,e):t.createElement(e);for(const o in n)s.setAttribute(o,n[o]);!o(i)&&be(i)||(i=[i]);for(let a of i)o(a)&&(a=t.createTextNode(a)),s.appendChild(a);return s}class we{_config;constructor(t,e){this._config=Object.create(null),e&&this.define(_e(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){const n=!0;this._setToTarget(this._config,t,e,n)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,i=!1){if(r(e))return void this._setObjectToTarget(t,e,i);const o=e.split(".");e=o.pop();for(const s of o)r(t[s])||(t[s]=Object.create(null)),t=t[s];if(r(n))return r(t[e])||(t[e]=Object.create(null)),t=t[e],void this._setObjectToTarget(t,n,i);i&&"undefined"!=typeof t[e]||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const i of n){if(!r(t[i])){t=null;break}t=t[i]}return t?_e(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(i=>{this._setToTarget(t,i,e[i],n)})}}function _e(t){return z(t,ye)}function ye(t){return W(t)||"function"===typeof t?t:void 0}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ke(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ce(t){const e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}const xe=Ee(Ft());function Ee(t){if(!t)return xe;class e extends t{listenTo(t,e,n,i={}){if(ke(t)||Ce(t)||t instanceof Q.window.EventTarget){const o={capture:!!i.useCapture,passive:!!i.usePassive},r=this._getProxyEmitter(t,o)||new Se(t,o);this.listenTo(r,e,n,i)}else super.listenTo(t,e,n,i)}stopListening(t,e,n){if(ke(t)||Ce(t)||t instanceof Q.window.EventTarget){const i=this._getAllProxyEmitters(t);for(const t of i)this.stopListening(t,e,n)}else super.stopListening(t,e,n)}_getProxyEmitter(t,e){return zt(this,Ae(t,e))}_getAllProxyEmitters(t){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(e=>this._getProxyEmitter(t,e)).filter(t=>!!t)}}return e}class Se extends(Ft()){_domNode;_options;constructor(t,e){super(),Ht(this,Ae(t,e)),this._domNode=t,this._options=e}_domListeners;attach(t){if(this._domListeners&&this._domListeners[t])return;const e=this._createDomListener(t);this._domNode.addEventListener(t,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=e}detach(t){let e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()}_addEventListener(t,e,n){this.attach(t),Ft().prototype._addEventListener.call(this,t,e,n)}_removeEventListener(t,e){Ft().prototype._removeEventListener.call(this,t,e),this.detach(t)}_createDomListener(t){const e=e=>{this.fire(t,e)};return e.removeListener=()=>{this._domNode.removeEventListener(t,e,this._options),delete this._domListeners[t]},e}}function Te(t){return t["data-ck-expando"]||(t["data-ck-expando"]=Ct())}function Ae(t,e){let n=Te(t);for(const i of Object.keys(e).sort())e[i]&&(n+="-"+i);return n}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function Pe(t){const e=[];let n=t;while(n&&n.nodeType!=Node.DOCUMENT_NODE)e.unshift(n),n=n.parentNode;return e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ie(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Re(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Oe(t){if(!t.target)return null;const e=t.target.ownerDocument,n=t.clientX,i=t.clientY;let o=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(n,i)?o=e.caretRangeFromPoint(n,i):t.rangeParent&&(o=e.createRange(),o.setStart(t.rangeParent,t.rangeOffset),o.collapse(!0)),o}function Me(t){return t&&t.parentNode?t.offsetParent===Q.document.body?null:t.offsetParent:null}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function De(t){return"[object Text]"==Object.prototype.toString.call(t)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ve(t){return"[object Range]"==Object.prototype.toString.apply(t)}const Ne=["top","right","bottom","left","width","height"];class Le{top;right;bottom;left;width;height;_source;constructor(t){const e=Ve(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),ze(t)||e)if(e){const e=Le.getDomRangeRects(t);Be(this,Le.getBoundingRect(e))}else Be(this,t.getBoundingClientRect());else if(Ce(t)){const{innerWidth:e,innerHeight:n}=t;Be(this,{top:0,right:e,bottom:n,left:0,width:e,height:n})}else Be(this,t)}clone(){return new Le(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const t=new Le(e);return t._source=this._source,t}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(Fe(t))return e;let n,i=t,o=t.parentNode||t.commonAncestorContainer;while(o&&!Fe(o)){const t="visible"===We(o);i instanceof HTMLElement&&"absolute"===He(i)&&(n=i);const r=He(o);if(t||n&&("relative"===r&&t||"relative"!==r)){i=o,o=o.parentNode;continue}const s=new Le(o),a=e.getIntersection(s);if(!a)return null;a.getArea()<e.getArea()&&(e=a),i=o,o=o.parentNode}return e}isEqual(t){for(const e of Ne)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!(!e||!e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=Q.window,n=this.clone().moveBy(t,e);if(ze(n._source)){const t=Me(n._source);t&&je(n,t)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,i;if(Ce(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,i=t.getComputedStyle(t.document.documentElement).direction;else{const o=Re(t);e=t.offsetWidth-t.clientWidth-o.left-o.right,n=t.offsetHeight-t.clientHeight-o.top-o.bottom,i=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===i?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const i of n)e.push(new Le(i));else{let n=t.startContainer;De(n)&&(n=n.parentNode);const i=new Le(n.getBoundingClientRect());i.right=i.left,i.width=0,e.push(i)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const i of t)n++,e.left=Math.min(e.left,i.left),e.top=Math.min(e.top,i.top),e.right=Math.max(e.right,i.right),e.bottom=Math.max(e.bottom,i.bottom);return 0==n?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Le(e))}}function Be(t,e){for(const n of Ne)t[n]=e[n]}function Fe(t){return!!ze(t)&&t===t.ownerDocument.body}function ze(t){return null!==t&&"object"===typeof t&&1===t.nodeType&&"function"===typeof t.getBoundingClientRect}function He(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).position:"static"}function We(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).overflow:"visible"}function je(t,e){const n=new Le(e),i=Re(e);let o=0,r=0;o-=n.left,r-=n.top,o+=e.scrollLeft,r+=e.scrollTop,o-=i.left,r-=i.top,t.moveBy(o,r)}class $e{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(t,e){$e._observerInstance||$e._createObserver(),this._element=t,this._callback=e,$e._addElementCallback(t,e),$e._observerInstance.observe(t)}get element(){return this._element}destroy(){$e._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){$e._elementCallbacks||($e._elementCallbacks=new Map);let n=$e._elementCallbacks.get(t);n||(n=new Set,$e._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=$e._getElementCallbacks(t);n&&(n.delete(e),n.size||($e._elementCallbacks.delete(t),$e._observerInstance.unobserve(t))),$e._elementCallbacks&&!$e._elementCallbacks.size&&($e._observerInstance=null,$e._elementCallbacks=null)}static _getElementCallbacks(t){return $e._elementCallbacks?$e._elementCallbacks.get(t):null}static _createObserver(){$e._observerInstance=new Q.window.ResizeObserver(t=>{for(const e of t){const t=$e._getElementCallbacks(e.target);if(t)for(const n of t)n(e)}})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ue(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function qe(t){return e=>e+t}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ge(t){let e=0;while(t.previousSibling)t=t.previousSibling,e++;return e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ke(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ye(t){return t&&t.nodeType===Node.COMMENT_NODE}function Xe(t){try{Q.document.createAttribute(t)}catch{return!1}return!0}function Je(t){return!!t&&(De(t)?Je(t.parentElement):!!t.getClientRects&&!!t.getClientRects().length)}function Ze({element:t,target:e,positions:n,limiter:i,fitInViewport:o,viewportOffsetConfig:r}){j(e)&&(e=e()),j(i)&&(i=i());const s=Me(t),a=tn(r),l=new Le(t),c=Qe(e,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:s,viewportRect:a};if(i||o){if(i){const t=Qe(i,a);t&&(d.limiterRect=t)}u=en(n,d)}else u=new nn(n[0],d);return u}function Qe(t,e){const n=new Le(t).getVisible();return n?n.getIntersection(e):null}function tn(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const e=new Le(Q.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e.left+=t.left,e.right-=t.right,e.width-=t.left+t.right,e}function en(t,e){const{elementRect:n}=e,i=n.getArea(),o=t.map(t=>new nn(t,e)).filter(t=>!!t.name);let r=0,s=null;for(const a of o){const{limiterIntersectionArea:t,viewportIntersectionArea:e}=a;if(t===i)return a;const n=e**2+t**2;n>r&&(r=n,s=a)}return s}class nn{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(t,e){const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:i,top:o,name:r,config:s}=n;this.name=r,this.config=s,this._positioningFunctionCoordinates={left:i,top:o},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){const t=this._options.viewportRect;return t.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=this._rect.toAbsoluteRect()),this._cachedAbsoluteRect}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function on(t){const e=t.parentNode;e&&e.removeChild(t)}function rn(){const t=Q.window.visualViewport;if(!t||!nt.isiOS&&!nt.isSafari)return{left:0,top:0};const e=Math.max(Math.round(t.offsetLeft),0),n=Math.max(Math.round(t.offsetTop),0);return{left:e,top:n}}function sn({target:t,viewportOffset:e=0,ancestorOffset:n=0,alignToTop:i,forceScroll:o}){const r=fn(t);let s=r,a=null;e=mn(e);while(s){let l;l=pn(s==r?t:a),ln({parent:l,getRect:()=>gn(t,s),alignToTop:i,ancestorOffset:n,forceScroll:o});let c=gn(t,s);const u=gn(l,s);if(c.height>u.height){const t=c.getIntersection(u);t&&(c=t)}if(an({window:s,rect:c,viewportOffset:e,alignToTop:i,forceScroll:o}),s.parent!=s){if(a=s.frameElement,s=s.parent,!a)return}else s=null}}function an({window:t,rect:e,alignToTop:n,forceScroll:i,viewportOffset:o}){const r=e.clone().moveBy(0,o.bottom),s=e.clone().moveBy(0,-o.top),a=new Le(t).excludeScrollbarsAndBorders(),l=[s,r],c=n&&i,u=l.every(t=>a.contains(t));let{scrollX:d,scrollY:h}=t;const f=d,p=h;c?h-=a.top-e.top+o.top:u||(un(s,a)?h-=a.top-e.top+o.top:cn(r,a)&&(h+=n?e.top-a.top-o.top:e.bottom-a.bottom+o.bottom)),u||(dn(e,a)?d-=a.left-e.left+o.left:hn(e,a)&&(d+=e.right-a.right+o.right)),d==f&&h===p||t.scrollTo(d,h)}function ln({parent:t,getRect:e,alignToTop:n,forceScroll:i,ancestorOffset:o=0,limiterElement:r}){const s=fn(t),a=n&&i;let l,c,u;const d=r||s.document.body;while(t!=d)c=e(),l=new Le(t).excludeScrollbarsAndBorders(),u=l.contains(c),a?t.scrollTop-=l.top-c.top+o:u||(un(c,l)?t.scrollTop-=l.top-c.top+o:cn(c,l)&&(t.scrollTop+=n?c.top-l.top-o:c.bottom-l.bottom+o)),u||(dn(c,l)?t.scrollLeft-=l.left-c.left+o:hn(c,l)&&(t.scrollLeft+=c.right-l.right+o)),t=t.parentNode}function cn(t,e){return t.bottom>e.bottom}function un(t,e){return t.top<e.top}function dn(t,e){return t.left<e.left}function hn(t,e){return t.right>e.right}function fn(t){return Ve(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function pn(t){if(Ve(t)){let e=t.commonAncestorContainer;return De(e)&&(e=e.parentNode),e}return t.parentNode}function gn(t,e){const n=fn(t),i=new Le(t);if(n===e)return i;{let t=n;while(t!=e){const e=t.frameElement,n=new Le(e).excludeScrollbarsAndBorders();i.moveBy(n.left,n.top),t=t.parent}}return i}function mn(t){return"number"===typeof t?{top:t,bottom:t,left:t,right:t}:t}const bn={ctrl:"â",cmd:"â",alt:"â¥",shift:"â§"},vn={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},wn={37:"â",38:"â",39:"â",40:"â",9:"â¥",33:"Page Up",34:"Page Down"},_n=Pn(),yn=Object.fromEntries(Object.entries(_n).map(([t,e])=>{let n;return n=e in wn?wn[e]:t.charAt(0).toUpperCase()+t.slice(1),[e,n]}));function kn(t){let e;if("string"==typeof t){if(e=_n[t.toLowerCase()],!e)throw new Tt("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?_n.alt:0)+(t.ctrlKey?_n.ctrl:0)+(t.shiftKey?_n.shift:0)+(t.metaKey?_n.cmd:0);return e}function Cn(t){return"string"==typeof t&&(t=In(t)),t.map(t=>"string"==typeof t?Tn(t):t).reduce((t,e)=>e+t,0)}function xn(t,e){let n=Cn(t);const i=e?"Mac"===e:nt.isMac||nt.isiOS,o=Object.entries(i?bn:vn),r=o.reduce((t,[e,i])=>(0!=(n&_n[e])&&(n&=~_n[e],t+=i),t),"");return r+(n?yn[n]:"")}function En(t){return t==_n.arrowright||t==_n.arrowleft||t==_n.arrowup||t==_n.arrowdown}function Sn(t,e){const n="ltr"===e;switch(t){case _n.arrowleft:return n?"left":"right";case _n.arrowright:return n?"right":"left";case _n.arrowup:return"up";case _n.arrowdown:return"down"}}function Tn(t){if(t.endsWith("!"))return kn(t.slice(0,-1));const e=kn(t);return(nt.isMac||nt.isiOS)&&e==_n.ctrl?_n.cmd:e}function An(t,e){const n=Sn(t,e);return"down"===n||"right"===n}function Pn(){const t={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const n=String.fromCharCode(e);t[n.toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}function In(t){return t.split("+").map(t=>t.trim())}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Rn=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function On(t){return Rn.includes(t)?"rtl":"ltr"}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Mn(t){return Array.isArray(t)?t:[t]}
/* istanbul ignore else -- @preserve */function Dn(t,e,n=1,i){if("number"!==typeof n)throw new Tt("translation-service-quantity-not-a-number",null,{quantity:n});const o=i||Q.window.CKEDITOR_TRANSLATIONS,r=Ln(o);1===r&&(t=Object.keys(o)[0]);const s=e.id||e.string;if(0===r||!Nn(t,s,o))return 1!==n?e.plural:e.string;const a=o[t].dictionary,l=o[t].getPluralForm||(t=>1===t?0:1),c=a[s];if("string"===typeof c)return c;const u=Number(l(n));return c[u]}function Vn(t){return Array.isArray(t)?t.reduce((t,e)=>Z(t,e)):t}function Nn(t,e,n){return!!n[t]&&!!n[t].dictionary[e]}function Ln(t){return Object.keys(t).length}Q.window.CKEDITOR_TRANSLATIONS||(Q.window.CKEDITOR_TRANSLATIONS={});class Bn{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:t="en",contentLanguage:e,translations:n}={}){this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=On(this.uiLanguage),this.contentLanguageDirection=On(this.contentLanguage),this.translations=Vn(n),this.t=(t,e)=>this._t(t,e)}_t(t,e=[]){e=Mn(e),"string"===typeof t&&(t={string:t});const n=!!t.plural,i=n?e[0]:1,o=Dn(this.uiLanguage,t,i,this.translations);return Fn(o,e)}}function Fn(t,e){return t.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}class zn extends(Ft()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const n=be(t);if(n||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const i of t)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new Tt("collection-add-item-invalid-index",this);let n=0;for(const i of t){const t=this._getItemIdBeforeAdding(i),o=e+n;this._items.splice(o,0,i),this._itemMap.set(t,i),this.fire("add",i,o),n++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new Tt("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=this._idProperty,n=t[e];return n&&this._itemMap.has(n)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,n]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:n}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);while(this.length)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new Tt("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,i,o)=>{const r=e._bindToCollection==this,s=e._bindToInternalToExternalMap.get(i);if(r&&s)this._bindToExternalToInternalMap.set(i,s),this._bindToInternalToExternalMap.set(s,i);else{const n=t(i);if(!n)return void this._skippedIndexesFromExternal.push(o);let r=o;for(const t of this._skippedIndexesFromExternal)o>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(i,n),this._bindToInternalToExternalMap.set(n,i),this.add(n,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const i of e)n(null,i,e.getIndex(i));this.listenTo(e,"add",n),this.listenTo(e,"remove",(t,e,n)=>{const i=this._bindToExternalToInternalMap.get(e);i&&this.remove(i),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(n<e&&t.push(e-1),n>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let n;if(e in t){if(n=t[e],"string"!=typeof n)throw new Tt("collection-add-invalid-id",this);if(this.get(n))throw new Tt("collection-add-item-already-exists",this)}else t[e]=n=Ct();return n}_remove(t){let e,n,i,o=!1;const r=this._idProperty;if("string"==typeof t?(n=t,i=this._itemMap.get(n),o=!i,i&&(e=this._items.indexOf(i))):"number"==typeof t?(e=t,i=this._items[e],o=!i,i&&(n=i[r])):(i=t,n=i[r],e=this._items.indexOf(i),o=-1==e||!this._itemMap.get(n)),o)throw new Tt("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(n);const s=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(s),this.fire("remove",i,e),[i,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Hn(t){const e=t.next();return e.done?null:e.value}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Wn extends(Ee(ie())){_elements=new Set;_externalViews=new Set;_blurTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if($n(t))this._addElement(t);else if(jn(t))this._addView(t);else{if(!t.element)throw new Tt("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){$n(t)?this._removeElement(t):jn(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new Tt("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const e=this.externalViews.find(e=>Un(t,e));e?this._focus(e.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){const t=this.elements.find(t=>t.contains(document.activeElement));if(t)return;const e=this.externalViews.find(t=>t.focusTracker.isFocused&&!t.focusTracker._blurTimeout);e||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function jn(t){return"focusTracker"in t&&t.focusTracker instanceof Wn}function $n(t){return W(t)}function Un(t,e){return!!qn(t,e)||!!e.focusTracker.externalViews.find(e=>qn(t,e))}function qn(t,e){return!!e.element&&e.element.contains(document.activeElement)&&t.contains(e.element)}class Gn{_listener;constructor(){this._listener=new(Ee())}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this._listener.fire("_keydown:"+kn(e),e)})}set(t,e,n={}){const i=Cn(t),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+i,(t,i)=>{n.filter&&!n.filter(i)||(e(i,()=>{i.preventDefault(),i.stopPropagation(),t.stop()}),t.return=!0)},{priority:o})}press(t){return!!this._listener.fire("_keydown:"+kn(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Kn(t){const e=new Map;for(const n in t)e.set(n,t[n]);return e}function Yn(t){return be(t)?new Map(t):Kn(t)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function Xn(t,e,n){const i=t.length,o=e.length;for(let r=i-1;r>=n;r--)t[r+o]=t[r];for(let r=0;r<o;r++)t[n+r]=e[r]}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Jn(t,e){let n;function i(...o){i.cancel(),n=setTimeout(()=>t(...o),e)}return i.cancel=()=>{clearTimeout(n)},i}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Zn(t){try{if(!t.startsWith("ey"))return null;const e=atob(t.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(e)}catch{return null}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qn(){const t=[];for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}function ti(t){const e=Array.isArray(t)?t:[t],n=Qn();let i=~0;const o=e.map(t=>Array.isArray(t)?t.join(""):String(t)).join("");for(let r=0;r<o.length;r++){const t=o.charCodeAt(r);i=i>>>8^n[255&(i^t)]}return i=(-1^i)>>>0,i.toString(16).padStart(8,"0")}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function ei(t){return!!t&&1==t.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}function ni(t){return!!t&&1==t.length&&/[\ud800-\udbff]/.test(t)}function ii(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}function oi(t,e){return ni(t.charAt(e-1))&&ii(t.charAt(e))}function ri(t,e){return ei(t.charAt(e))}const si=li();function ai(t,e){const n=String(t).matchAll(si);return Array.from(n).some(t=>t.index<e&&e<t.index+t[0].length)}function li(){const t=[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u],e=/\p{Regional_Indicator}{2}/u.source,n="(?:"+t.map(t=>t.source).join("|")+")",i=`${e}|${n}(?:â${n})*`;return new RegExp(i,"ug")}function ci(t){if(!t)return null;const e=ui(t);return e?Zn(e):null}function ui(t){const e=t.split(".");return 3!=e.length?null:e[1]}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function di(t,e){const n=t.removeFeatures||[];return n.includes(e)}function hi(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}function fi(t){return"string"===typeof t||"symbol"===typeof t?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}function pi(t){const e=[],n=t.length;if(0===n)return e;let i=0,o="",r="",s=!1;46===t.charCodeAt(0)&&(e.push(""),i++);while(i<n){const a=t[i];r?"\\"===a&&i+1<n?(i++,o+=t[i]):a===r?r="":o+=a:s?'"'===a||"'"===a?r=a:"]"===a?(s=!1,e.push(o),o=""):o+=a:"["===a?(s=!0,o&&(e.push(o),o="")):"."===a?o&&(e.push(o),o=""):o+=a,i++}return o&&e.push(o),e}function gi(t,e,n){if(null==t)return n;switch(typeof e){case"string":{if(U(e))return n;const i=t[e];return void 0===i?hi(e)?gi(t,pi(e),n):n:i}case"number":case"symbol":{"number"===typeof e&&(e=fi(e));const i=t[e];return void 0===i?n:i}default:{if(Array.isArray(e))return mi(t,e,n);if(e=Object.is(e?.valueOf(),-0)?"-0":String(e),U(e))return n;const i=t[e];return void 0===i?n:i}}}function mi(t,e,n){if(0===e.length)return n;let i=t;for(let o=0;o<e.length;o++){if(null==i)return n;if(U(e[o]))return n;i=i[e[o]]}return void 0===i?n:i}function bi(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}const vi=(t,e,n)=>{const i=t[e];Object.hasOwn(t,e)&&bi(i,n)&&(void 0!==n||e in t)||(t[e]=n)},wi=/^(?:0|[1-9]\d*)$/;function _i(t,e=Number.MAX_SAFE_INTEGER){switch(typeof t){case"number":return Number.isInteger(t)&&t>=0&&t<e;case"symbol":return!1;case"string":return wi.test(t)}}function yi(t){return"symbol"===typeof t||t instanceof Symbol}const ki=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ci=/^\w*$/;function xi(t,e){return!Array.isArray(t)&&(!("number"!==typeof t&&"boolean"!==typeof t&&null!=t&&!yi(t))||("string"===typeof t&&(Ci.test(t)||!ki.test(t))||null!=e&&Object.hasOwn(e,t)))}function Ei(t,e,n,o){if(null==t&&!i(t))return t;const r=xi(e,t)?[e]:Array.isArray(e)?e:"string"===typeof e?pi(e):[e];let s=t;for(let a=0;a<r.length&&null!=s;a++){const e=fi(r[a]);if(U(e))continue;let l;if(a===r.length-1)l=n(s[e]);else{const n=s[e],c=o?.(n,e,t);l=void 0!==c?c:i(n)?n:_i(r[a+1])?[]:{}}vi(s,e,l),s=s[e]}return t}function Si(t,e,n){return Ei(t,e,()=>n,()=>{})}function Ti(t){return"undefined"!==typeof Buffer&&Buffer.isBuffer(t)}function Ai(t){const e=t?.constructor,n="function"===typeof e?e.prototype:Object.prototype;return t===n}function Pi(t){return Number.isSafeInteger(t)&&t>=0}function Ii(t){return null!=t&&"function"!==typeof t&&Pi(t.length)}function Ri(t){return yi(t)?NaN:Number(t)}function Oi(t){if(!t)return 0===t?t:0;if(t=Ri(t),t===1/0||t===-1/0){const e=t<0?-1:1;return e*Number.MAX_VALUE}return t===t?t:0}function Mi(t){const e=Oi(t),n=e%1;return n?e-n:e}function Di(t,e){if(t=Mi(t),t<1||!Number.isSafeInteger(t))return[];const n=new Array(t);for(let i=0;i<t;i++)n[i]="function"===typeof e?e(i):i;return n}function Vi(t){if(null==t)return[];switch(typeof t){case"object":case"function":return Ii(t)?Bi(t):Ai(t)?Li(t):Ni(t);default:return Ni(Object(t))}}function Ni(t){const e=[];for(const n in t)e.push(n);return e}function Li(t){const e=Ni(t);return e.filter(t=>"constructor"!==t)}function Bi(t){const e=Di(t.length,t=>`${t}`),n=new Set(e);return Ti(t)&&(n.add("offset"),n.add("parent")),K(t)&&(n.add("buffer"),n.add("byteLength"),n.add("byteOffset")),[...e,...Ni(t).filter(t=>!n.has(t))]}function Fi(t,...e){for(let n=0;n<e.length;n++)zi(t,e[n]);return t}function zi(t,e){const n=Vi(e);for(let i=0;i<n.length;i++){const o=n[i];o in t&&bi(t[o],e[o])||(t[o]=e[o])}}function Hi(t,e,{signal:n,edges:i}={}){let o,r=null;const s=null!=i&&i.includes("leading"),a=null==i||i.includes("trailing"),l=()=>{null!==r&&(t.apply(o,r),o=void 0,r=null)},c=()=>{a&&l(),f()};let u=null;const d=()=>{null!=u&&clearTimeout(u),u=setTimeout(()=>{u=null,c()},e)},h=()=>{null!==u&&(clearTimeout(u),u=null)},f=()=>{h(),o=void 0,r=null},p=()=>{h(),l()},g=function(...t){if(n?.aborted)return;o=this,r=t;const e=null==u;d(),s&&e&&l()};return g.schedule=d,g.cancel=f,g.flush=p,n?.addEventListener("abort",f,{once:!0}),g}function Wi(t,e=0,n={}){"object"!==typeof n&&(n={});const{leading:i=!1,trailing:o=!0,maxWait:r}=n,s=Array(2);let a;i&&(s[0]="leading"),o&&(s[1]="trailing");let l=null;const c=Hi(function(...e){a=t.apply(this,e),l=null},e,{edges:s}),u=function(...e){return null!=r&&(null===l&&(l=Date.now()),Date.now()-l>=r)?(a=t.apply(this,e),l=Date.now(),c.cancel(),c.schedule(),a):(c.apply(this,e),a)},d=()=>(c.flush(),a);return u.cancel=c.cancel,u.flush=d,u}function ji(t,e){if(!Number.isInteger(t)||t<0)throw new Error("n must be a non-negative integer.");let n=0;return(...i)=>{if(++n>=t)return e(...i)}}function $i(t){if(!t||"object"!==typeof t)return!1;const e=Object.getPrototypeOf(t),n=null===e||e===Object.prototype||null===Object.getPrototypeOf(e);return!!n&&"[object Object]"===Object.prototype.toString.call(t)}function Ui(t,e,n){return qi(t,e,void 0,void 0,void 0,void 0,n)}function qi(t,e,n,i,o,r,s){const a=s(t,e,n,i,o,r);if(void 0!==a)return a;if(typeof t===typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Gi(t,e,r,s)}return Gi(t,e,r,s)}function Gi(t,e,n,i){if(Object.is(t,e))return!0;let o=a(t),r=a(e);if(o===h&&(o=_),r===h&&(r=_),o!==r)return!1;switch(o){case c:return t.toString()===e.toString();case u:{const n=t.valueOf(),i=e.valueOf();return bi(n,i)}case d:case p:case f:return Object.is(t.valueOf(),e.valueOf());case l:return t.source===e.source&&t.flags===e.flags;case v:return t===e}n=n??new Map;const D=n.get(t),V=n.get(e);if(null!=D&&null!=V)return D===e;n.set(t,e),n.set(e,t);try{switch(o){case g:if(t.size!==e.size)return!1;for(const[o,r]of t.entries())if(!e.has(o)||!qi(r,e.get(o),o,t,e,n,i))return!1;return!0;case m:{if(t.size!==e.size)return!1;const o=Array.from(t.values()),r=Array.from(e.values());for(let s=0;s<o.length;s++){const a=o[s],l=r.findIndex(o=>qi(a,o,void 0,t,e,n,i));if(-1===l)return!1;r.splice(l,1)}return!0}case b:case C:case x:case E:case S:case T:case A:case P:case I:case R:case O:case M:if("undefined"!==typeof Buffer&&Buffer.isBuffer(t)!==Buffer.isBuffer(e))return!1;if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!qi(t[o],e[o],o,t,e,n,i))return!1;return!0;case w:return t.byteLength===e.byteLength&&Gi(new Uint8Array(t),new Uint8Array(e),n,i);case k:return t.byteLength===e.byteLength&&t.byteOffset===e.byteOffset&&Gi(new Uint8Array(t),new Uint8Array(e),n,i);case y:return t.name===e.name&&t.message===e.message;case _:{const o=Gi(t.constructor,e.constructor,n,i)||$i(t)&&$i(e);if(!o)return!1;const r=[...Object.keys(t),...s(t)],a=[...Object.keys(e),...s(e)];if(r.length!==a.length)return!1;for(let s=0;s<r.length;s++){const o=r[s],a=t[o];if(!Object.hasOwn(e,o))return!1;const l=e[o];if(!qi(a,l,o,t,e,n,i))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Ki(t,e,n){return"function"!==typeof n&&(n=()=>{}),Ui(t,e,(...i)=>{const o=n(...i);return void 0!==o?Boolean(o):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?Ki(Array.from(t),Array.from(e),ji(2,n)):void 0})}function Yi(t,e){return Ui(t,e,J)}function Xi(t){return Array.isArray(t)}function Ji(t){if(D(t))return t;const e=a(t);if(!Zi(t))return{};if(Xi(t)){const e=Array.from(t);return t.length>0&&"string"===typeof t[0]&&Object.hasOwn(t,"index")&&(e.index=t.index,e.input=t.input),e}if(K(t)){const e=t,n=e.constructor;return new n(e.buffer,e.byteOffset,e.length)}if(e===w)return new ArrayBuffer(t.byteLength);if(e===k){const e=t,n=e.buffer,i=e.byteOffset,o=e.byteLength,r=new ArrayBuffer(o),s=new Uint8Array(n,i,o),a=new Uint8Array(r);return a.set(s),new DataView(r)}if(e===d||e===u||e===c){const n=t.constructor,i=new n(t.valueOf());return e===c?eo(i,t):Qi(i,t),i}if(e===p)return new Date(Number(t));if(e===l){const e=t,n=new RegExp(e.source,e.flags);return n.lastIndex=e.lastIndex,n}if(e===f)return Object(Symbol.prototype.valueOf.call(t));if(e===g){const e=t,n=new Map;return e.forEach((t,e)=>{n.set(e,t)}),n}if(e===m){const e=t,n=new Set;return e.forEach(t=>{n.add(t)}),n}if(e===h){const e=t,n={};return Qi(n,e),n.length=e.length,n[Symbol.iterator]=e[Symbol.iterator],n}const n={};return no(n,t),Qi(n,t),to(n,t),n}function Zi(t){switch(a(t)){case h:case b:case w:case k:case d:case p:case O:case M:case A:case P:case I:case g:case u:case _:case l:case m:case c:case f:case C:case x:case E:case S:return!0;default:return!1}}function Qi(t,e){for(const n in e)Object.hasOwn(e,n)&&(t[n]=e[n])}function to(t,e){const n=Object.getOwnPropertySymbols(e);for(let i=0;i<n.length;i++){const o=n[i];Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}}function eo(t,e){const n=e.valueOf().length;for(const i in e)Object.hasOwn(e,i)&&(Number.isNaN(Number(i))||Number(i)>=n)&&(t[i]=e[i])}function no(t,e){const n=Object.getPrototypeOf(e);if(null!==n){const i=e.constructor;"function"===typeof i&&Object.setPrototypeOf(t,n)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
const io=new WeakMap;let oo=!1;function ro({view:t,element:e,text:n,isDirectHost:i=!0,keepOnFocus:o=!1}){const r=t.document;function s(n){const s={text:n,isDirectHost:i,keepOnFocus:o,hostElement:i?e:null};io.get(r).set(e,s),t.change(t=>uo([[e,s]],t))}io.has(r)||(io.set(r,new Map),r.registerPostFixer(t=>uo(io.get(r),t)),r.on("change:isComposing",()=>{t.change(t=>uo(io.get(r),t))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(t,e,n)=>s(n)),e.placeholder?s(e.placeholder):n&&s(n),n&&po()}function so(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0)}function ao(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0)}function lo(t,e){if(!t.isAttached())return!1;if(co(t))return!1;const n=t.document,i=n.selection,o=i.anchor;return(!n.isComposing||!o||o.parent!==t)&&(!!e||(!n.isFocused||!!o&&o.parent!==t))}function co(t){for(const e of t.getChildren())if(!e.is("uiElement"))return!0;return!1}function uo(t,e){const n=[];let i=!1;for(const[o,r]of t)r.isDirectHost&&(n.push(o),ho(e,o,r)&&(i=!0));for(const[o,r]of t){if(r.isDirectHost)continue;const t=fo(o);t!==r.hostElement&&r.hostElement&&(e.removeAttribute("data-placeholder",r.hostElement),ao(e,r.hostElement),r.hostElement=null,i=!0),t&&(n.includes(t)||(r.hostElement=t,ho(e,o,r)&&(i=!0)))}return i}function ho(t,e,n){const{text:i,isDirectHost:o,hostElement:r}=n;let s=!1;r.getAttribute("data-placeholder")!==i&&(t.setAttribute("data-placeholder",i,r),s=!0);const a=o||1==e.childCount;return a&&lo(r,n.keepOnFocus)?so(t,r)&&(s=!0):ao(t,r)&&(s=!0),s}function fo(t){if(t.childCount){const e=t.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function po(){oo||At("enableViewPlaceholder-deprecated-text-option"),oo=!0}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class go{
/* istanbul ignore next -- @preserve */is(){throw new Error("is() method is abstract")}}class mo extends(Ft(go)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new Tt("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;while(t.parent)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;while(e.parent)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;while(n)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),i=t.getAncestors(e);let o=0;while(n[o]==i[o]&&n[o])o++;return 0===o?null:n[o-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),i=me(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}isAfter(t){return this!=t&&(this.root===t.root&&!this.isBefore(t))}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,n){this.fire(`change:${t}`,e,n),this.parent&&this.parent._fireChange(t,e,n)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}mo.prototype.is=function(t){return"node"===t||"view:node"===t};class bo extends mo{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof bo&&(this===t||this.data===t.data)}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new bo(this.document,this.data)}}bo.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class vo extends go{textNode;data;offsetInText;constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.data.length)throw new Tt("view-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.data.length)throw new Tt("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let n=t.includeSelf?this.textNode:this.parent;while(null!==n)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}}vo.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class wo{_consumables=new Map;add(t,e){let n;t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new _o(t),this._consumables.set(t,n)),n.add(e?yo(e):t._getConsumables()))}test(t,e){const n=this._consumables.get(t);return void 0===n?null:t.is("$text")||t.is("documentFragment")?n:n.test(yo(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return!!this.test(t,e)&&(this._consumables.set(t,!1),!0);const n=this._consumables.get(t);return void 0!==n&&n.consume(yo(e))}revert(t,e){const n=this._consumables.get(t);void 0!==n&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(yo(e)))}static createFrom(t,e){if(e||(e=new wo),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const n of t.getChildren())wo.createFrom(n,e)}return e}}class _o{element;_canConsumeName=null;_attributes=new Map;constructor(t){this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes)if(n){let t=this._attributes.get(e);t&&"boolean"!=typeof t||(t=new Map,this._attributes.set(e,t)),t.set(n,!0)}else{if("style"==e||"class"==e)throw new Tt("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,n]of t.attributes){const t=this._attributes.get(e);if(void 0===t)return null;if(!1===t)return!1;if(!0!==t)if(n){const e=t.get(n);if(void 0===e)return null;if(!e)return!1}else for(const e of t.values())if(!e)return!1}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,n]of t.attributes){const t=this._attributes.get(e);if("boolean"==typeof t)for(const[i]of this.element._getConsumables(e,n).attributes)this._attributes.set(i,!1);else if(n)for(const[,i]of this.element._getConsumables(e,n).attributes)t.set(i,!1);else for(const e of t.keys())t.set(e,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes){const t=this._attributes.get(e);if(!1!==t){if(void 0!==t&&!0!==t)if(n){const e=t.get(n);!1===e&&t.set(n,!0)}else for(const e of t.keys())t.set(e,!0)}else this._attributes.set(e,!0)}}}function yo(t){const e=[];return"attributes"in t&&t.attributes&&ko(e,t.attributes),"classes"in t&&t.classes&&ko(e,t.classes,"class"),"styles"in t&&t.styles&&ko(e,t.styles,"style"),{name:t.name||!1,attributes:e}}function ko(t,e,n){if("string"!=typeof e)for(const i of e)Array.isArray(i)?t.push(i):t.push(n?[n,i]:[i]);else t.push(n?[n,e]:[e])}class Co{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const n=this._isElementMatching(e,t);if(n)return{element:e,pattern:t,match:n}}return null}matchAll(...t){const e=[];for(const n of t)for(const t of this._patterns){const i=this._isElementMatching(n,t);i&&e.push({element:n,pattern:t,match:i})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const n=e(t);return n&&"object"==typeof n?yo(n):n}const n={};if(e.name&&(n.name=Eo(e.name,t.name),!n.name))return null;const i=[];return e.attributes&&!To(e.attributes,t,i)||e.classes&&!Ao(e.classes,t,i)||e.styles&&!Po(e.styles,t,i)?null:(i.length&&(n.attributes=i),n)}}function xo(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function Eo(t,e){return t instanceof RegExp?!!e.match(t):t===e}function So(t,e){if(Array.isArray(t))return t.map(t=>"object"!==typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||At("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!==typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const n=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e?[e,i,t[i]]:[i,t[i]]);return n}function To(t,e,n){let i;return"object"!==typeof t||t instanceof RegExp||Array.isArray(t)?i=["class","style"]:(void 0!==t.style&&At("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&At("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(So(t),n,i)}function Ao(t,e,n){return e._collectAttributesMatch(So(t,"class"),n)}function Po(t,e,n){return e._collectAttributesMatch(So(t,"style"),n)}class Io{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){const t=Object.entries(this._styles);return!t.length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=Oo(t);for(const[n,i]of e)this._styleProcessor.toNormalizedForm(n,i,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles),n=e.find(([e])=>e===t);return Array.isArray(n)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,i(t))for(const[n,i]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,i,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const n of Mn(t)){const t=Mo(n),i=gi(this._styles,t);if(i)Do(e,t,i);else{const t=this.getAsString(n);void 0!==t&&this._styleProcessor.toNormalizedForm(n,t,e)}}Object.keys(e).length&&(Vo(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!i(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles),n=e.find(([e])=>e===t);return Array.isArray(n)?n[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const n=[];for(const i of this.getStyleNames(!0))if(xo(t,i)){if(!0===e){n.push(i);continue}const t=this.getAsString(i);xo(e,t)&&n.push(i)}return n.length?n:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n)}else for(const n of this.getStyleNames()){for(const t of this._styleProcessor.getRelatedStyles(n))e.push(t);e.push(n)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}class Ro{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(i(e))Do(n,Mo(t),e);else if(this._normalizers.has(t)){const i=this._normalizers.get(t),{path:o,value:r}=i(e);Do(n,o,r)}else Do(n,t,e)}getNormalized(t,e){if(!t)return Z({},e);if(void 0!==e[t])return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if("string"===typeof n)return gi(e,n);const i=n(t,e);if(i)return i}return gi(e,Mo(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);if(void 0===n)return[];if(this._reducers.has(t)){const e=this._reducers.get(t);return e(n)}return[[t,n]]}getStyleNames(t){const e=new Set;for(const n of this._consumables.keys()){const i=this.getNormalized(n,t);i&&("object"!=typeof i||Object.keys(i).length)&&e.add(n)}for(const n of Object.keys(t))e.add(n);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function Oo(t){let e=null,n=0,i=0,o=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let s=0;s<t.length;s++){const a=t.charAt(s);if(null===e)switch(a){case":":o||(o=t.substr(n,s-n),i=s+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(i,s-i);o&&r.set(o.trim(),e.trim()),o=null,n=s+1;break}}else a===e&&(e=null)}return r}function Mo(t){return t.replace("-",".")}function Do(t,e,n){let o=n;i(n)&&(o=Z({},gi(t,e),n)),Si(t,e,o)}function Vo(t,e){for(const n of Object.keys(e))null===t[n]||Array.isArray(t[n])||"object"!=typeof t[n]||"object"!=typeof e[n]?delete t[n]:(Vo(t[n],e[n]),Object.keys(t[n]).length||delete t[n])}class No{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Mn(t))e&&this._set.add(e)}remove(t){for(const e of Mn(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const n of t.split(/\s+/)){if(!this._set.has(n))return;e.push(n)}return e}for(const n of this._set.keys())n.match(t)&&e.push(n);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class Lo extends mo{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,n,i){super(t),this.name=e,this._attrs=this._parseAttributes(n),this._children=[],i&&this._insertChild(0,i)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(zo(this.name,t)||Fo(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof Lo))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,n]of this._attrs){const i=t._attrs.get(e);if(void 0===i)return!1;if("string"==typeof n||"string"==typeof i){if(i!==n)return!1}else if(!n.isSimilar(i))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new Co(...t);let n=this.parent;while(n&&!n.is("documentFragment")){if(e.match(n))return n;n=n.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),n=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==n?"":` ${n}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=[];if(t)for(const i of this.getChildren())e.push(i._clone(t));const n=new this.constructor(this.document,this.name,this._attrs,e);return n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let n=0;const i=Bo(this.document,e);for(const o of i)null!==o.parent&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(t,0,o),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,n=!0){if(this._fireChange("attributes",this),zo(this.name,t)||Fo(this.name,t)){let i=this._attrs.get(t);i||(i=zo(this.name,t)?new Io(this.document.stylesProcessor):new No,this._attrs.set(t,i)),n?i.setTo(String(e)):zo(this.name,t)?Array.isArray(e)?i.set(e[0],e[1]):i.set(e):i.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(zo(this.name,t)||Fo(this.name,t))){const n=this._attrs.get(t);return!!n&&(Fo(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),n.remove(e),!!n.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,n){for(const[i,o,r]of t){let t=!1,s=!1;for(const[a,l]of this._attrs)if(!(n&&n.includes(a)||!xo(i,a)))if(t=!0,"string"==typeof l){if(xo(o,l))e.push([a]),s=!0;else if(!(i instanceof RegExp))return!1}else{const t=l._getTokensMatch(o,r||!0);if(t){s=!0;for(const n of t)e.push([a,n])}else if(!(i instanceof RegExp))return!1}if(!t||!s)return!1}return!0}_getConsumables(t,e){const n=[];if(t){const i=this._attrs.get(t);if(void 0!==i)if("string"==typeof i)n.push([t]);else for(const o of i._getConsumables(e))n.push([t,o])}else for(const[i,o]of this._attrs)if("string"==typeof o)n.push([i]);else for(const t of o._getConsumables())n.push([i,t]);return{name:!t,attributes:n}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,n]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof n){if(t!==n)return!1}else if(!t._canMergeFrom(n))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,n]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof n?this._setAttribute(e,n):t._mergeFrom(n)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,n]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof n){if(t!==n)return!1}else if(!t._isMatching(n))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,n]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof n?this._attrs.delete(e):(t.remove(n.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=Yn(t);for(const[n,i]of e)if(null===i)e.delete(n);else if(zo(this.name,n)){const t=i instanceof Io?i._clone():new Io(this.document.stylesProcessor).setTo(String(i));e.set(n,t)}else if(Fo(this.name,n)){const t=i instanceof No?i._clone():(new No).setTo(String(i));e.set(n,t)}else"string"!=typeof i&&e.set(n,String(i));return e}}function Bo(t,e){if("string"==typeof e)return[new bo(t,e)];be(e)||(e=[e]);const n=[];for(const i of e)"string"==typeof i?n.push(new bo(t,i)):i instanceof vo?n.push(new bo(t,i.data)):n.push(i);return n}function Fo(t,e){return"class"==e||"a"==t&&"rel"==e}function zo(t,e){return"style"==e}Lo.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Ho extends Lo{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Wo}toJSON(){const t=super.toJSON();return t.type="ContainerElement",t}}function Wo(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const n of t)if(!n.is("uiElement"))return null;return this.childCount}Ho.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class jo extends(ie(Ho)){constructor(t,e,n,i){super(t,e,n,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const t=super.toJSON();return t.type="EditableElement",t.isReadOnly=this.isReadOnly,t.isFocused=this.isFocused,t}}jo.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const $o=Symbol("rootName");class Uo extends jo{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty($o)}set rootName(t){this._setCustomProperty($o,t)}toJSON(){return this.rootName}set _name(t){this.name=t}}Uo.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class qo{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new Tt("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new Tt("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=Go._createAt(t.startPosition):this._position=Go._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do{n=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=n)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(n&&n.is("view:$text")){if(t.isAtEnd)return this._position=Go._createAfter(n),this._next();i=n.data[t.offset]}else i=n.getChild(t.offset);if("string"==typeof i){let i;if(this.singleCharacters)i=1;else{const e=n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length;i=e-t.offset}const o=new vo(n,t.offset,i);return t.offset+=i,this._position=t,this._formatReturnValue("text",o,e,t,i)}if(i&&i.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new Go(i,0);return this._position=t,this._formatReturnValue("elementStart",i,e,t,1)}if(i&&i.is("view:$text")){if(this.singleCharacters)return t=new Go(i,0),this._position=t,this._next();let n,o=i.data.length;return i==this._boundaryEndParent?(o=this.boundaries.end.offset,n=new vo(i,0,o),t=Go._createAfter(n)):(n=new vo(i,0,i.data.length),t.offset++),this._position=t,this._formatReturnValue("text",n,e,t,o)}return t=Go._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(n.is("view:$text")){if(t.isAtStart)return this._position=Go._createBefore(n),this._previous();i=n.data[t.offset-1]}else i=n.getChild(t.offset-1);if("string"==typeof i){let i;if(this.singleCharacters)i=1;else{const e=n===this._boundaryStartParent?this.boundaries.start.offset:0;i=t.offset-e}t.offset-=i;const o=new vo(n,t.offset,i);return this._position=t,this._formatReturnValue("text",o,e,t,i)}if(i&&i.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",i,e,t,1)):(t=new Go(i,i.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,t));if(i&&i.is("view:$text")){if(this.singleCharacters)return t=new Go(i,i.data.length),this._position=t,this._previous();let n,o=i.data.length;if(i==this._boundaryStartParent){const e=this.boundaries.start.offset;n=new vo(i,e,i.data.length-e),o=n.data.length,t=Go._createBefore(n)}else n=new vo(i,0,i.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",n,e,t,o)}return t=Go._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,i,o){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=Go._createAfter(e.textNode):(i=Go._createAfter(e.textNode),this._position=i)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=Go._createBefore(e.textNode):(i=Go._createBefore(e.textNode),this._position=i))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:o}}}}class Go extends go{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;while(!(t instanceof jo)){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=Go._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new qo(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let i=0;while(e[i]==n[i]&&e[i])i++;return 0===i?null:e[i-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);const i=me(e,n);switch(i){case"prefix":return"before";case"extension":return"after";default:return e[i]<n[i]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new qo(t)}clone(){return new Go(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,e){if(t instanceof Go)return new this(t.parent,t.offset);{const n=t;if("end"==e)e=n.is("$text")?n.data.length:n.childCount;else{if("before"==e)return this._createBefore(n);if("after"==e)return this._createAfter(n);if(0!==e&&!e)throw new Tt("view-createpositionat-offset-required",n)}return new Go(n,e)}}static _createAfter(t){if(t.is("$textProxy"))return new Go(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new Tt("view-position-after-root",t,{root:t});return new Go(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new Go(t.textNode,t.offsetInText);if(!t.parent)throw new Tt("view-position-before-root",t,{root:t});return new Go(t.parent,t.index)}}Go.prototype.is=function(t){return"position"===t||"view:position"===t};class Ko extends go{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new qo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(Yo,{direction:"backward"}),e=this.end.getLastMatchingPosition(Yo);return t.parent.is("$text")&&t.isAtStart&&(t=Go._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=Go._createAfter(e.parent)),new Ko(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(Yo);if(t.isAfter(this.end)||t.isEqual(this.end))return new Ko(t,t);let e=this.end.getLastMatchingPosition(Yo,{direction:"backward"});const n=t.nodeAfter,i=e.nodeBefore;return n&&n.is("$text")&&(t=new Go(n,0)),i&&i.is("$text")&&(e=new Go(i,i.data.length)),new Ko(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ko(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ko(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new Ko(e,n)}return null}getWalker(t={}){return t.boundaries=this,new qo(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Ko(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new qo(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new qo(t);yield e.position;for(const n of e)yield n.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,e,n,i){return new this(new Go(t,e),new Go(n,i))}static _createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Go._createBefore(t),e)}}function Yo(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}Ko.prototype.is=function(t){return"range"===t||"view:range"===t};class Xo extends(Ft(go)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1],e=this._lastRangeBackward?t.end:t.start;return e.clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1],e=this._lastRangeBackward?t.start:t.end;return e.clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=ge(this.getRanges()),n=ge(t.getRanges());if(e!=n)return!1;if(0==e)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let e=!1;for(let n of t.getRanges())if(n=n.getTrimmed(),i.start.isEqual(n.start)&&i.end.isEqual(n.end)){e=!0;break}if(!e)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,n,i]=t;if("object"==typeof n&&(i=n,n=void 0),null===e)this._setRanges([]),this._setFakeOptions(i);else if(e instanceof Xo||e instanceof Jo)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Ko)this._setRanges([e],i&&i.backward),this._setFakeOptions(i);else if(e instanceof Go)this._setRanges([new Ko(e)]),this._setFakeOptions(i);else if(e instanceof mo){const t=!!i&&!!i.backward;let o;if(void 0===n)throw new Tt("view-selection-setto-required-second-parameter",this);o="in"==n?Ko._createIn(e):"on"==n?Ko._createOn(e):new Ko(Go._createAt(e,n)),this._setRanges([o],t),this._setFakeOptions(i)}else{if(!be(e))throw new Tt("view-selection-setto-not-selectable",this);this._setRanges(e,i&&i.backward),this._setFakeOptions(i)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new Tt("view-selection-setfocus-no-ranges",this);const n=Go._createAt(t,e);if("same"==n.compareWith(this.focus))return;const i=this.anchor;this._ranges.pop(),"before"==n.compareWith(i)?this._addRange(new Ko(n,i),!0):this._addRange(new Ko(i,n)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const n of t)this._addRange(n);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof Ko))throw new Tt("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new Tt("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new Ko(t.start,t.end))}}Xo.prototype.is=function(t){return"selection"===t||"view:selection"===t};class Jo extends(Ft(go)){_selection;constructor(...t){super(),this._selection=new Xo,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}Jo.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t};class Zo extends yt{startRange;_eventPhase;_currentTarget;constructor(t,e,n){super(t,e),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Qo=Symbol("bubblingEmitter"),tr=Symbol("bubblingCallbacks"),er=Symbol("bubblingContexts");function nr(t){class e extends t{fire(t,...e){try{const n=t instanceof yt?t:new yt(this,t),i=sr(this),o=lr(this);if(ir(n,"capturing",this),or(i,"$capture",n,...e))return n.return;const r=n.startRange||this.selection.getFirstRange(),s=r?r.getContainedElement():null,a=!!s&&cr(o,s);let l=s||ur(r);if(ir(n,"atTarget",l),!a){if(or(i,"$text",n,...e))return n.return;ir(n,"bubbling",l)}while(l){if(l.is("element")&&or(i,l,n,...e))return n.return;l=l.parent,ir(n,"bubbling",l)}return ir(n,"bubbling",this),or(i,"$document",n,...e),n.return}catch(n){
/* istanbul ignore next -- @preserve */Tt.rethrowUnexpectedError(n,this)}}_addEventListener(t,e,n){const i=Mn(n.context||"$document"),o=sr(this),r=ar(this);for(const a of i)"function"==typeof a&&lr(this).add(a);const s=rr(this,i,e);r.set(e,s),this.listenTo(o,t,s,n)}_removeEventListener(t,e){const n=sr(this),i=ar(this),o=i.get(e);o&&(i.delete(e),this.stopListening(n,t,o))}}return e}function ir(t,e,n){t instanceof Zo&&(t._eventPhase=e,t._currentTarget=n)}function or(t,e,n,...i){return t.fire(n,{currentTarget:e,eventArgs:i}),!!n.stop.called}function rr(t,e,n){return function(i,o){const{currentTarget:r,eventArgs:s}=o;if("string"!=typeof r){if(r.is("rootElement")&&e.includes("$root"))n.call(t,i,...s);else if(e.includes(r.name))n.call(t,i,...s);else for(const a of e)if("function"==typeof a&&a(r))return void n.call(t,i,...s)}else e.includes(r)&&n.call(t,i,...s)}}function sr(t){return t[Qo]||(t[Qo]=new(Ft())),t[Qo]}function ar(t){return t[tr]||(t[tr]=new Map),t[tr]}function lr(t){return t[er]||(t[er]=new Set),t[er]}function cr(t,e){for(const n of t)if(n(e))return!0;return!1}function ur(t){if(!t)return null;const e=t.start.parent,n=t.end.parent,i=e.getPath(),o=n.getPath();return i.length>o.length?e:n}class dr extends(nr(ie())){selection;roots;stylesProcessor;_postFixers=new Set;constructor(t){super(),this.selection=new Jo,this.roots=new zn({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(e=n(t),e)break}while(e)}}const hr=10;class fr extends Lo{static DEFAULT_PRIORITY=hr;_priority=hr;_id=null;_clonesGroup=null;constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=pr}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new Tt("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}function pr(){if(gr(this))return null;let t=this.parent;while(t&&t.is("attributeElement")){if(gr(t)>1)return null;t=t.parent}return!t||gr(t)>1?null:this.childCount}function gr(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}fr.prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class mr extends Lo{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=br}toJSON(){const t=super.toJSON();return t.type="EmptyElement",t}_insertChild(t,e){if(e&&(e instanceof mo||Array.from(e).length>0))throw new Tt("view-emptyelement-cannot-add",[this,e]);return 0}}function br(){return null}mr.prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class vr extends Lo{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=_r}_insertChild(t,e){if(e&&(e instanceof mo||Array.from(e).length>0))throw new Tt("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}toJSON(){const t=super.toJSON();return t.type="UIElement",t}}function wr(t){t.document.on("arrowKey",(e,n)=>yr(e,n,t.domConverter),{priority:"low"})}function _r(){return null}function yr(t,e,n){if(e.keyCode==_n.arrowright){const t=e.domTarget.ownerDocument.defaultView.getSelection(),i=1==t.rangeCount&&t.getRangeAt(0).collapsed;if(i||e.shiftKey){const e=t.focusNode,o=t.focusOffset,r=n.domPositionToView(e,o);if(null===r)return;let s=!1;const a=r.getLastMatchingPosition(t=>(t.item.is("uiElement")&&(s=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"))));if(s){const e=n.viewPositionToDom(a);i?t.collapse(e.parent,e.offset):t.extend(e.parent,e.offset)}}}}vr.prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class kr extends Lo{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Cr}toJSON(){const t=super.toJSON();return t.type="RawElement",t}_insertChild(t,e){if(e&&(e instanceof mo||Array.from(e).length>0))throw new Tt("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}function Cr(){return null}kr.prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class xr extends(Ft(go)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let n=0;const i=Er(this.document,e);for(const o of i)null!==o.parent&&o._remove(),o.parent=this,this._children.splice(t,0,o),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e,n){this.fire(`change:${t}`,e,n)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}function Er(t,e){return"string"==typeof e?[new bo(t,e)]:(be(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new bo(t,e):e instanceof vo?new bo(t,e.data):e))}xr.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};class Sr{document;_cloneGroups=new Map;_slotFactory=null;constructor(t){this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new xr(this.document,t)}createText(t){return new bo(this.document,t)}createAttributeElement(t,e,n={}){const i=new fr(this.document,t,e);return"number"===typeof n.priority&&(i._priority=n.priority),n.id&&(i._id=n.id),n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createContainerElement(t,e,n={},i={}){let o;Lr(n)?i=n:o=n;const r=new Ho(this.document,t,e,o);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createEditableElement(t,e,n={}){const i=new jo(this.document,t,e);return n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createEmptyElement(t,e,n={}){const i=new mr(this.document,t,e);return n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createUIElement(t,e,n){const i=new vr(this.document,t,e);return n&&(i.render=n),i}createRawElement(t,e,n,i={}){const o=new kr(this.document,t,e);return n&&(o.render=n),i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}setAttribute(t,e,n,i){void 0!==i?i._setAttribute(t,e,n):n._setAttribute(t,e)}removeAttribute(t,e,n){void 0!==n?n._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){r(t)&&void 0===n?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof Go?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new Tt("view-writer-break-non-container-element",this.document);if(!e.parent)throw new Tt("view-writer-break-root",this.document);if(t.isAtStart)return Go._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(Go._createAfter(e),n);const i=new Ko(t,Go._createAt(e,"end")),o=new Go(n,0);this.move(i,o)}return Go._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&0===n.childCount){const t=n.parent,e=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Go(t,e))}const i=n.getChild(e-1),o=n.getChild(e);if(!i||!o)return t;if(i.is("$text")&&o.is("$text"))return Or(i,o);if(i.is("attributeElement")&&o.is("attributeElement")&&i.isSimilar(o)){const t=i.childCount;return i._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new Go(i,t))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!e||!n||!e.is("containerElement")||!n.is("containerElement"))throw new Tt("view-writer-merge-containers-invalid-position",this.document);const i=e.getChild(e.childCount-1),o=i instanceof bo?Go._createAt(i,"end"):Go._createAt(e,"end");return this.move(Ko._createIn(n),Go._createAt(e,"end")),this.remove(Ko._createOn(n)),o}insert(t,e){e=be(e)?[...e]:[e],Dr(e,this.document);const n=e.reduce((t,e)=>{const n=t[t.length-1],i=!e.is("uiElement");return n&&n.breakAttributes==i?n.nodes.push(e):t.push({breakAttributes:i,nodes:[e]}),t},[]);let i=null,o=t;for(const{nodes:r,breakAttributes:s}of n){const t=this._insertNodes(o,r,s);i||(i=t.start),o=t.end}return i?new Ko(i,o):new Ko(t)}remove(t){const e=t instanceof Ko?t:Ko._createOn(t);if(Nr(e,this.document),e.isCollapsed)return new xr(this.document);const{start:n,end:i}=this._breakAttributesRange(e,!0),o=n.parent,r=i.offset-n.offset,s=o._removeChildren(n.offset,r);for(const l of s)this._removeFromClonedElementsGroup(l);const a=this.mergeAttributes(n);return e.start=a,e.end=a.clone(),new xr(this.document,s)}clear(t,e){Nr(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of n){const n=i.item;let o;if(n.is("element")&&e.isSimilar(n))o=Ko._createOn(n);else if(!i.nextPosition.isAfter(t.start)&&n.is("$textProxy")){const t=n.getAncestors().find(t=>t.is("element")&&e.isSimilar(t));t&&(o=Ko._createIn(t))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let n;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const i=e.parent,o=i.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=i.childCount-o}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof fr))throw new Tt("view-writer-wrap-invalid-attribute",this.document);if(Nr(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!Tr(n.parent)&&(n=n.getLastMatchingPosition(t=>t.item.is("uiElement"))),n=this._wrapPosition(n,e);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new Ko(n)}return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof fr))throw new Tt("view-writer-unwrap-invalid-attribute",this.document);if(Nr(t,this.document),t.isCollapsed)return t;const{start:n,end:i}=this._breakAttributesRange(t,!0),o=n.parent,r=this._unwrapChildren(o,n.offset,i.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;const a=this.mergeAttributes(r.end);return new Ko(s,a)}rename(t,e){const n=new Ho(this.document,t,e.getAttributes());return this.insert(Go._createAfter(e),n),this.move(Ko._createIn(e),Go._createAt(n,0)),this.remove(Ko._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return Go._createAt(t,e)}createPositionAfter(t){return Go._createAfter(t)}createPositionBefore(t){return Go._createBefore(t)}createRange(t,e){return new Ko(t,e)}createRangeOn(t){return Ko._createOn(t)}createRangeIn(t){return Ko._createIn(t)}createSelection(...t){return new Xo(...t)}createSlot(t="children"){if(!this._slotFactory)throw new Tt("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let i,o;if(i=n?Ar(t):t.parent.is("$text")?t.parent.parent:t.parent,!i)throw new Tt("view-writer-invalid-position-container",this.document);o=n?this._breakAttributes(t,!0):t.parent.is("$text")?Rr(t):t;const r=i._insertChild(o.offset,e);for(const c of e)this._addToClonedElementsGroup(c);const s=o.getShiftedBy(r),a=this.mergeAttributes(o);a.isEqual(o)||s.offset--;const l=this.mergeAttributes(s);return new Ko(a,l)}_wrapChildren(t,e,n,i){let o=e;const r=[];while(o<n){const e=t.getChild(o),n=e.is("$text"),s=e.is("attributeElement");if(s&&e._canMergeAttributesFrom(i))e._mergeAttributesFrom(i),r.push(new Go(t,o));else if(n||!s||Pr(i,e)){const n=i._clone();e._remove(),n._appendChild(e),t._insertChild(o,n),this._addToClonedElementsGroup(n),r.push(new Go(t,o))}else this._wrapChildren(e,0,e.childCount,i);o++}let s=0;for(const a of r){if(a.offset-=s,a.offset==e)continue;const t=this.mergeAttributes(a);t.isEqual(a)||(s++,n--)}return Ko._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,i){let o=e;const r=[];while(o<n){const e=t.getChild(o);if(e.is("attributeElement")){if(e.isSimilar(i)){const i=e.getChildren(),s=e.childCount;e._remove(),t._insertChild(o,i),this._removeFromClonedElementsGroup(e),r.push(new Go(t,o),new Go(t,o+s)),o+=s,n+=s-1;continue}e._canSubtractAttributesOf(i)?(e._subtractAttributesOf(i),r.push(new Go(t,o),new Go(t,o+1)),o++):(this._unwrapChildren(e,0,e.childCount,i),o++)}else o++}let s=0;for(const a of r){if(a.offset-=s,a.offset==e||a.offset==n)continue;const t=this.mergeAttributes(a);t.isEqual(a)||(s++,n--)}return Ko._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:i}=this._breakAttributesRange(t,!0),o=n.parent,r=this._wrapChildren(o,n.offset,i.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;const a=this.mergeAttributes(r.end);return new Ko(s,a)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return Ir(t.clone());t.parent.is("$text")&&(t=Rr(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const i=new Ko(t,t.getShiftedBy(1));this.wrap(i,e);const o=new Go(n.parent,n.index);n._remove();const r=o.nodeBefore,s=o.nodeAfter;return r&&r.is("view:$text")&&s&&s.is("view:$text")?Or(r,s):Ir(o)}_breakAttributesRange(t,e=!1){const n=t.start,i=t.end;if(Nr(t,this.document),t.isCollapsed){const n=this._breakAttributes(t.start,e);return new Ko(n,n)}const o=this._breakAttributes(i,e),r=o.parent.childCount,s=this._breakAttributes(n,e);return o.offset+=o.parent.childCount-r,new Ko(s,o)}_breakAttributes(t,e=!1){const n=t.offset,i=t.parent;if(t.parent.is("emptyElement"))throw new Tt("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new Tt("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new Tt("view-writer-cannot-break-raw-element",this.document);if(!e&&i.is("$text")&&Vr(i.parent))return t.clone();if(Vr(i))return t.clone();if(i.is("$text"))return this._breakAttributes(Rr(t),e);const o=i.childCount;if(n==o){const t=new Go(i.parent,i.index+1);return this._breakAttributes(t,e)}if(0===n){const t=new Go(i.parent,i.index);return this._breakAttributes(t,e)}{const t=i.index+1,o=i._clone();i.parent._insertChild(t,o),this._addToClonedElementsGroup(o);const r=i.childCount-n,s=i._removeChildren(n,r);o._appendChild(s);const a=new Go(i.parent,t);return this._breakAttributes(a,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const i of t.getChildren())this._addToClonedElementsGroup(i);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const i of t.getChildren())this._removeFromClonedElementsGroup(i);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Tr(t){return Array.from(t.getChildren()).some(t=>!t.is("uiElement"))}function Ar(t){let e=t.parent;while(!Vr(e)){if(!e)return;e=e.parent}return e}function Pr(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity()}function Ir(t){const e=t.nodeBefore;if(e&&e.is("$text"))return new Go(e,e.data.length);const n=t.nodeAfter;return n&&n.is("$text")?new Go(n,0):t}function Rr(t){if(t.offset==t.parent.data.length)return new Go(t.parent.parent,t.parent.index+1);if(0===t.offset)return new Go(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new bo(t.root.document,e)),new Go(t.parent.parent,t.parent.index+1)}function Or(t,e){const n=t.data.length;return t._data+=e.data,e._remove(),new Go(t,n)}const Mr=[bo,fr,Ho,mr,kr,vr];function Dr(t,e){for(const n of t){if(!Mr.some(t=>n instanceof t))throw new Tt("view-writer-insert-invalid-node-type",e);n.is("$text")||Dr(n.getChildren(),e)}}function Vr(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function Nr(t,e){const n=Ar(t.start),i=Ar(t.end);if(!n||!i||n!==i)throw new Tt("view-writer-invalid-range-container",e)}function Lr(t){return r(t)}const Br=t=>t.createTextNode("Â "),Fr=t=>{const e=t.createElement("span");return e.dataset.ckeFiller="true",e.innerText="Â ",e},zr=t=>{const e=t.createElement("br");return e.dataset.ckeFiller="true",e},Hr=7,Wr="â ".repeat(Hr);function jr(t){return"string"==typeof t?t.substr(0,Hr)===Wr:De(t)&&t.data.substr(0,Hr)===Wr}function $r(t){return t.data.length==Hr&&jr(t)}function Ur(t){const e="string"==typeof t?t:t.data;return jr(t)?e.slice(Hr):e}function qr(t){t.document.on("arrowKey",Gr,{priority:"low"})}function Gr(t,e){if(e.keyCode==_n.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(1==t.rangeCount&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer,n=t.getRangeAt(0).startOffset;jr(e)&&n<=Hr&&t.collapse(e,0)}}}class Kr extends(ie()){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(t,e){super(),this.domConverter=t,this.selection=e,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),nt.isBlink&&!nt.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new Tt("view-renderer-unknown-type",this);this.markedChildren.add(e)}}}render(){if(this.isComposing&&!nt.isAndroid)return;let t=null;const e=!(nt.isBlink&&!nt.isAndroid)||!this.isSelecting;for(const n of this.markedChildren)this._updateChildrenMappings(n);e?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=Go._createBefore(t.parent)));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:t});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:t});if(e)if(t){const e=this.domConverter.viewPositionToDom(t),n=e.parent.ownerDocument;jr(e.parent)?this._inlineFiller=e.parent:this._inlineFiller=Xr(n,e.parent,e.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=Array.from(e.childNodes),i=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),o=this._diffNodeLists(n,i),r=this._findUpdateActions(o,n,i,Jr);if(-1!==r.indexOf("update")){const e={equal:0,insert:0,delete:0};for(const o of r)if("update"===o){const o=e.equal+e.insert,r=e.equal+e.delete,s=t.getChild(o);!s||s.is("uiElement")||s.is("rawElement")||this._updateElementMappings(s,n[r]),on(i[o]),e.equal++}else e[o]++}}_updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?Go._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&De(e.parent)&&jr(e.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!jr(t))throw new Tt("view-renderer-filler-was-lost",this);$r(t)?t.remove():t.data=t.data.substr(Hr),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is("element"))return!1;if(!Yr(e))return!1;const i=t.nodeBefore,o=t.nodeAfter;return!(i instanceof bo||o instanceof bo)&&(!!(n!==e.getFillerOffset()||i&&i.is("element","br"))&&(!nt.isAndroid||!i&&!o))}_updateText(t,e){const n=this.domConverter.findCorrespondingDomText(t),i=this.domConverter.viewToDom(t);let o=i.data;const r=e.inlineFillerPosition;r&&r.parent==t.parent&&r.offset==t.index&&(o=Wr+o),this._updateTextNode(n,o)}_updateAttrs(t){const e=this.domConverter.mapViewToDom(t);if(e){for(const n of Array.from(e.attributes)){const i=n.name;t.hasAttribute(i)||this.domConverter.removeDomElementAttribute(e,i)}for(const n of t.getAttributeKeys())this.domConverter.setDomElementAttribute(e,n,t.getAttribute(n),t)}}_updateChildren(t,e){const n=this.domConverter.mapViewToDom(t);if(!n)return;if(nt.isAndroid){let t=null;for(const e of Array.from(n.childNodes)){if(t&&De(t)&&De(e)){n.normalize();break}t=e}}const i=e.inlineFillerPosition,o=n.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));i&&i.parent===t&&Xr(n.ownerDocument,r,i.offset);const s=this._diffNodeLists(o,r),a=this._findUpdateActions(s,o,r,Zr);let l=0;const c=new Set;for(const u of a)"delete"===u?(c.add(o[l]),on(o[l])):"equal"!==u&&"update"!==u||l++;l=0;for(const u of a)"insert"===u?(Ke(n,l,r[l]),l++):"update"===u?(this._updateTextNode(o[l],r[l].data),l++):"equal"===u&&(this._markDescendantTextToSync(this.domConverter.domToView(r[l])),l++);for(const u of c)u.parentNode||this.domConverter.unbindDomElement(u)}_diffNodeLists(t,e){return t=es(t,this._fakeSelectionContainer),wt(t,e,Qr.bind(null,this.domConverter))}_findUpdateActions(t,e,n,i){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;let o=[],r=[],s=[];const a={equal:0,insert:0,delete:0};for(const l of t)"insert"===l?s.push(n[a.equal+a.insert]):"delete"===l?r.push(e[a.equal+a.delete]):(o=o.concat(wt(r,s,i).map(t=>"equal"===t?"update":t)),o.push("equal"),r=[],s=[]),a[l]++;return o.concat(wt(r,s,i).map(t=>"equal"===t?"update":t))}_updateTextNode(t,e){const n=t.data;n!=e&&(nt.isAndroid&&this.isComposing&&n.replace(/\u00A0/g," ")==e.replace(/\u00A0/g," ")||this._updateTextNodeInternal(t,e))}_updateTextNodeInternal(t,e){const n=ft(t.data,e);for(const i of n)"insert"===i.type?t.insertData(i.index,i.values.join("")):t.deleteData(i.index,i.howMany)}_markDescendantTextToSync(t){if(t)if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const e of t.getChildren())this._markDescendantTextToSync(e)}_updateSelection(){if(nt.isBlink&&!nt.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t?this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&nt.isAndroid||this._updateDomSelection(t):!this.selection.isFake&&this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected&&this._removeFakeSelection()}_updateFakeSelection(t){const e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=ns(e));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(t))return;n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"Â ";const i=e.getSelection(),o=e.createRange();i.removeAllRanges(),o.selectNodeContents(n),i.addRange(o)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);e.setBaseAndExtent(n.parent,n.offset,i.parent,i.offset),nt.isGecko&&ts(i,e)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const e=t&&this.domConverter.domSelectionToView(t);return(!e||!this.selection.isEqual(e))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(t){const e=this._fakeSelectionContainer,n=t.ownerDocument.getSelection();return!e||e.parentElement!==t||(n.anchorNode!==e&&!e.contains(n.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel)}_removeDomSelection(){for(const t of this.domDocuments){const e=t.getSelection();if(e.rangeCount){const n=t.activeElement,i=this.domConverter.mapDomToView(n);n&&i&&e.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function Yr(t){if("false"==t.getAttribute("contenteditable"))return!1;const e=t.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||"true"==e.getAttribute("contenteditable")}function Xr(t,e,n){const i=e instanceof Array?e:e.childNodes,o=i[n];if(De(o))return o.data=Wr+o.data,o;{const o=t.createTextNode(Wr);return Array.isArray(e)?i.splice(n,0,o):Ke(e,n,o),o}}function Jr(t,e){return ke(t)&&ke(e)&&!De(t)&&!De(e)&&!Ye(t)&&!Ye(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function Zr(t,e){return ke(t)&&ke(e)&&De(t)&&De(e)}function Qr(t,e,n){return e===n||(De(e)&&De(n)?e.data===n.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(n)))}function ts(t,e){let n=t.parent,i=t.offset;if(De(n)&&$r(n)&&(i=Ge(n)+1,n=n.parentNode),n.nodeType!=Node.ELEMENT_NODE||i!=n.childNodes.length-1)return;const o=n.childNodes[i];o&&"BR"==o.tagName&&e.addRange(e.getRangeAt(0))}function es(t,e){const n=Array.from(t);if(0==n.length||!e)return n;const i=n[n.length-1];return i==e&&n.pop(),n}function ns(t){const e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="Â ",e}const is=zr(Q.document),os=Br(Q.document),rs=Fr(Q.document),ss="data-ck-unsafe-attribute-",as="data-ck-unsafe-element";class ls{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new Co;_inlineObjectElementMatcher=new Co;_elementsWithTemporaryCustomProperties=new Set;constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){this.document=t,this.renderingMode=n,this.blockFillerMode=e||("editing"===n?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument="editing"===this.renderingMode?Q.document:Q.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Xo(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const e of t.children)this.unbindDomElement(e)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return"data"===this.renderingMode||(t=t.toLowerCase(),!t.startsWith("on")&&(("srcdoc"!==t||!e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&("img"===n&&("src"===t||"srcset"===t)||("source"===n&&"srcset"===t||!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i)))))}setContentOf(t,e){if("data"===this.renderingMode)return void(t.innerHTML=e);const n=(new DOMParser).parseFromString(e,"text/html"),i=n.createDocumentFragment(),o=n.body.childNodes;while(o.length>0)i.appendChild(o[0]);const r=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),s=[];let a;while(a=r.nextNode())s.push(a);for(const l of s){for(const e of l.getAttributeNames())this.setDomElementAttribute(l,e,l.getAttribute(e));const t=l.tagName.toLowerCase();this._shouldRenameElement(t)&&(bs(t),l.replaceWith(this._createReplacementDomElement(t,l)))}while(t.firstChild)t.firstChild.remove();t.append(i)}viewToDom(t,e={}){if(t.is("$text")){const e=this._processDataFromViewText(t);return this._domDocument.createTextNode(e)}{const n=t;if(this.mapViewToDom(n)){if(!n.getCustomProperty("editingPipeline:doNotReuseOnce"))return this.mapViewToDom(n);this._elementsWithTemporaryCustomProperties.add(n)}let i;if(n.is("documentFragment"))i=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(i,n);else{if(n.is("uiElement"))return i="$comment"===n.name?this._domDocument.createComment(n.getCustomProperty("$rawContent")):n.render(this._domDocument,this),e.bind&&this.bindElements(i,n),i;this._shouldRenameElement(n.name)?(bs(n.name),i=this._createReplacementDomElement(n.name)):i=n.hasAttribute("xmlns")?this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(i,this),e.bind&&this.bindElements(i,n);for(const t of n.getAttributeKeys())this.setDomElementAttribute(i,t,n.getAttribute(t),n)}if(!1!==e.withChildren)for(const t of this.viewChildrenToDom(n,e))i instanceof HTMLTemplateElement?i.content.appendChild(t):i.appendChild(t);return i}}setDomElementAttribute(t,e,n,i){const o=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||i&&i.shouldRenderUnsafeAttribute(e);o||At("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),Xe(e)?(t.hasAttribute(e)&&!o?t.removeAttribute(e):t.hasAttribute(ss+e)&&o&&t.removeAttribute(ss+e),t.setAttribute(o?e:ss+e,n)):At("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n})}removeDomElementAttribute(t,e){e!=as&&(t.removeAttribute(e),t.removeAttribute(ss+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let i=0;for(const o of t.getChildren()){n===i&&(yield this._getBlockFiller());const t=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!Hn(o.getAttributes());if(t&&"data"==this.renderingMode)if(o.is("rawElement")){const t=this._domDocument.createElement(o.name);o.render(t,this),yield*[...t.childNodes]}else yield*this.viewChildrenToDom(o,e);else t&&At("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,e);i++}n===i&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),i=this._domDocument.createRange();return i.setStart(e.parent,e.offset),i.setEnd(n.parent,n.offset),i}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let i=t.offset;return jr(n)&&(i+=Hr),n.data&&i>n.data.length&&(i=n.data.length),{parent:n,offset:i}}{let n,i,o;if(0===t.offset){if(n=this.mapViewToDom(e),!n)return null;o=n.childNodes[0]}else{const e=t.nodeBefore;if(i=e.is("$text")?this.findCorrespondingDomText(e):this.mapViewToDom(e),!i)return null;n=i.parentNode,o=i.nextSibling}if(De(o)&&jr(o))return{parent:o,offset:Hr};const r=i?Ge(i)+1:0;return{parent:n,offset:r}}}domToView(t,e={}){const n=[],i=this._domToView(t,e,n),o=i.next().value;return o?(i.next(),this._processDomInlineNodes(null,n,e),"br"==this.blockFillerMode&&gs(o)||o.is("$text")&&0==o.data.length?null:o):null}*domChildrenToView(t,e={},n=[]){let i=[];i=t instanceof HTMLTemplateElement?[...t.content.childNodes]:[...t.childNodes];for(let o=0;o<i.length;o++){const r=i[o],s=this._domToView(r,e,n),a=s.next().value;null!==a&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(t,n,e),"br"==this.blockFillerMode&&gs(a)||(yield a),s.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(vs(t))return new Xo([]);if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;De(e)&&(e=e.parentNode);const n=this.fakeSelectionToView(e);if(n)return n}const e=this.isDomSelectionBackward(t),n=[];for(let i=0;i<t.rangeCount;i++){const e=t.getRangeAt(i),o=this.domRangeToView(e);o&&n.push(o)}return new Xo(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new Ko(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,Ge(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return Go._createBefore(n);if(De(t)){if($r(t))return this.domPositionToView(t.parentNode,Ge(t));const n=this.findCorrespondingViewText(t);let i=e;return n?(jr(t)&&(i-=Hr,i=i<0?0:i),new Go(n,i)):null}if(0===e){const e=this.mapDomToView(t);if(e)return new Go(e,0)}else{const n=t.childNodes[e-1];if(De(n)&&$r(n)||n&&this.isBlockFiller(n))return this.domPositionToView(n.parentNode,Ge(n));const i=De(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(i&&i.parent)return new Go(i.parent,i.index+1)}return null}mapDomToView(t){const e=this.getHostViewElement(t);return e||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if($r(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const t=this.mapDomToView(n);if(t){const e=t.nextSibling;return e instanceof bo?e:null}}else{const e=this.mapDomToView(t.parentNode);if(e){const t=e.getChild(0);return t instanceof bo?t:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(!e||e.ownerDocument.activeElement===e)return;const{scrollX:n,scrollY:i}=Q.window,o=[];us(e,t=>{const{scrollLeft:e,scrollTop:n}=t;o.push([e,n])}),e.focus({preventScroll:!0}),us(e,t=>{const[e,n]=o.shift();t.scrollLeft=e,t.scrollTop=n}),Q.window.scrollTo(n,i)}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e),i=n&&n.rangeCount>0;i&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return"br"==this.blockFillerMode?t.isEqualNode(is):!!ms(t,this.blockElements)||(t.isEqualNode(rs)||ds(t,this.blockElements))}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=Pe(t);e.pop();while(e.length){const t=e.pop(),n=this._domToViewMapping.get(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Br(this._domDocument);case"markedNbsp":return Fr(this._domDocument);case"br":return zr(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(De(t)&&jr(t)&&e<Hr)return!1;if(this.isElement(t)&&jr(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!n||!n.is("uiElement")&&!n.is("rawElement")}*_domToView(t,e,n){if("br"!=this.blockFillerMode&&ms(t,this.blockElements))return null;const i=this.getHostViewElement(t);if(i)return i;if(Ye(t)&&e.skipComments)return null;if(De(t)){if($r(t))return null;{const e=t.data;if(""===e)return null;const i=new bo(this.document,e);return n.push(i),i}}{let i=this.mapDomToView(t);if(i)return this._isInlineObjectElement(i)&&n.push(i),i;if(this.isDocumentFragment(t))i=new xr(this.document),e.bind&&this.bindDocumentFragments(t,i);else{i=this._createViewElement(t,e),e.bind&&this.bindElements(t,i);const o=t.attributes;if(o)for(let t=o.length,e=0;e<t;e++)i._setAttribute(o[e].name,o[e].value);if(this._isViewElementWithRawContent(i,e))return i._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(i)||n.push(i),i;if(Ye(t))return i._setCustomProperty("$rawContent",t.data),i}yield i;const o=[];if(!1!==e.withChildren)for(const n of this.domChildrenToView(t,e,o))i._appendChild(n);if(this._isInlineObjectElement(i))n.push(i),this._processDomInlineNodes(null,o,e);else for(const t of o)n.push(t)}}_processDomInlineNodes(t,e,n){if(!e.length)return;if(t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let i=!1;for(let o=0;o<e.length;o++){const t=e[o];if(!t.is("$text")){i=!1;continue}let r,s=!1;if(this._isPreFormatted(t))r=Ur(t.data);else{r=t.data.replace(/[ \n\t\r]{1,}/g," "),s=/[^\S\u00A0]/.test(r.charAt(r.length-1));const a=o>0?e[o-1]:null,l=o+1<e.length?e[o+1]:null,c=!a||a.is("element")&&"br"==a.name||i,u=!l&&!jr(t.data);!1!==n.withChildren&&(c&&(r=r.replace(/^ /,"")),u&&(r=r.replace(/ $/,""))),r=Ur(r),"br"!=this.blockFillerMode&&t.parent&&(ps(t.parent,r)?(r="",t.parent.parent&&(t.parent.parent._setCustomProperty("$hasBlockFiller",!0),t.parent._remove())):fs(t.parent,r,this.blockElements)&&(r="",t.parent._setCustomProperty("$hasBlockFiller",!0))),r=r.replace(/ \u00A0/g,"  ");const d=l&&l.is("element")&&"br"!=l.name,h=l&&l.is("$text")&&" "==l.data.charAt(0);(/[ \u00A0]\u00A0$/.test(r)||!l||d||h)&&(r=r.replace(/\u00A0$/," ")),(c||a&&a.is("element")&&"br"!=a.name)&&(r=r.replace(/^\u00A0/," "))}0==r.length&&t.parent?(t._remove(),e.splice(o,1),o--):(t._data=r,i=s)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(" "==e.charAt(0)){const n=this._getTouchingInlineViewNode(t,!1),i=n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n);!i&&n||(e="Â "+e.substr(1))}if(" "==e.charAt(e.length-1)){const n=this._getTouchingInlineViewNode(t,!0),i=n&&n.is("$textProxy")&&" "==n.data.charAt(0);" "!=e.charAt(e.length-2)&&n&&!i||(e=e.substr(0,e.length-1)+"Â ")}return e.replace(/ {2}/g," Â ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1)}_isPreFormatted(t){if(cs(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(e.is("element")&&e.hasStyle("white-space")&&"inherit"!==e.getStyle("white-space"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const n=new qo({startPosition:e?Go._createAfter(t):Go._createBefore(t),direction:e?"forward":"backward"});for(const{item:i}of n){if(i.is("$textProxy"))return i;if(!i.is("element")||!i.getCustomProperty("dataPipeline:transparentRendering")){if(i.is("element","br"))return null;if(this._isInlineObjectElement(i))return i;if(i.is("containerElement")||this._isBlockViewElement(i))return null}}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return!!t.is("element")&&("br"==t.name||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t))}_createViewElement(t,e){if(Ye(t))return new vr(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new Lo(this.document,n)}_isViewElementWithRawContent(t,e){return!1!==e.withChildren&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return"editing"===this.renderingMode&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(as,t),e){while(e.firstChild)n.appendChild(e.firstChild);for(const t of e.getAttributeNames())n.setAttribute(t,e.getAttribute(t))}return n}}function cs(t,e){return t.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function us(t,e){let n=t;while(n)e(n),n=n.parentElement}function ds(t,e){const n=t.isEqualNode(os);return n&&hs(t,e)&&1===t.parentNode.childNodes.length}function hs(t,e){const n=t.parentNode;return!!n&&!!n.tagName&&e.includes(n.tagName.toLowerCase())}function fs(t,e,n){return"Â "==e&&t&&t.is("element")&&1==t.childCount&&n.includes(t.name)}function ps(t,e){return"Â "==e&&t&&t.is("element","span")&&1==t.childCount&&t.hasAttribute("data-cke-filler")}function gs(t){return t.is("element","br")&&t.hasAttribute("data-cke-filler")}function ms(t,e){return"BR"===t.tagName&&hs(t,e)&&1===t.parentNode.childNodes.length}function bs(t){"script"===t&&At("domconverter-unsafe-script-element-detected"),"style"===t&&At("domconverter-unsafe-style-element-detected")}function vs(t){if(!nt.isGecko)return!1;if(!t.rangeCount)return!1;const e=t.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}class ws extends(Ee()){view;document;_isEnabled=!1;constructor(t){super(),this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class _s{view;document;domEvent;domTarget;constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,Fi(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class ys extends ws{useCapture=!1;usePassive=!1;observe(t){const e="string"==typeof this.domEventType?[this.domEventType]:this.domEventType;e.forEach(e=>{this.listenTo(t,e,(t,e)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(e.target)&&this.onDomEvent(e)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,e,n){this.isEnabled&&this.document.fire(t,new _s(this.view,e,n))}}class ks extends ys{domEventType=["keydown","keyup"];onDomEvent(t){const e={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return kn(this)}};this.fire(t.type,t,e)}}class Cs extends ws{_fireSelectionChangeDoneDebounced;constructor(t){super(t),this._fireSelectionChangeDoneDebounced=Wi(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const t=this.document;t.on("arrowKey",(e,n)=>{const i=t.selection;i.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),t.on("arrowKey",(e,n)=>{const i=t.selection;i.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection,n=new Xo(e.getRanges(),{backward:e.isBackward,fake:!1});t!=_n.arrowleft&&t!=_n.arrowup||n.setTo(n.getFirstPosition()),t!=_n.arrowright&&t!=_n.arrowdown||n.setTo(n.getLastPosition());const i={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}class xs extends ws{domConverter;_config;_domElements;_mutationObserver;constructor(t){super(t),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}stopObserving(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0===t.length)return;const e=this.domConverter,n=new Set,i=new Set;for(const r of t){const t=e.mapDomToView(r.target);t&&(t.is("uiElement")||t.is("rawElement")||"childList"!==r.type||this._isBogusBrMutation(r)||i.add(t))}for(const r of t){const t=e.mapDomToView(r.target);if((!t||!t.is("uiElement")&&!t.is("rawElement"))&&"characterData"===r.type){const t=e.findCorrespondingViewText(r.target);t&&!i.has(t.parent)?n.add(t):!t&&jr(r.target)&&i.add(e.mapDomToView(r.target.parentNode))}}const o=[];for(const r of n)o.push({type:"text",node:r});for(const r of i){const t=e.mapViewToDom(r),n=Array.from(r.getChildren()),i=Array.from(e.domChildrenToView(t,{withChildren:!1}));Ki(n,i,Es)||o.push({type:"children",node:r})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(t){let e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}function Es(t,e){if(!Array.isArray(t))return t===e||!(!t.is("$text")||!e.is("$text"))&&t.data===e.data}class Ss extends ys{_renderTimeoutId=null;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(t){super(t),this.useCapture=!0;const e=this.document;e.on("focus",()=>this._handleFocus()),e.on("blur",(t,e)=>this._handleBlur(e)),e.on("beforeinput",()=>{e.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const e=this.document.selection.editableElement;null!==e&&e!==t.target||(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class Ts extends ws{mutationObserver;focusObserver;selection;domConverter;_documents=new WeakSet;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter=0;_pendingSelectionChange=new Set;constructor(t){super(t),this.mutationObserver=t.getObserver(xs),this.focusObserver=t.getObserver(Ss),this.selection=this.document.selection,this.domConverter=t.domConverter,this._fireSelectionChangeDoneDebounced=Wi(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Wi(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(t,e,n)=>{if(n&&this._pendingSelectionChange.size){for(const t of Array.from(this._pendingSelectionChange))this._handleSelectionChange(t);this._pendingSelectionChange.clear()}})}observe(t){const e=t.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},i=()=>{this.document.isSelecting&&(this._handleSelectionChange(e),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",n,{priority:"highest"}),this.listenTo(t,"keydown",i,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",i,{priority:"highest",useCapture:!0}),this._documents.has(e)||(this.listenTo(e,"mouseup",i,{priority:"highest",useCapture:!0}),this.listenTo(e,"selectionchange",()=>{this.document.isComposing&&!nt.isAndroid||(this._handleSelectionChange(e),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(e)},{priority:"lowest"}),this._documents.add(e))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}
/* istanbul ignore next -- @preserve */_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const e=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(e.anchorNode))return;this.mutationObserver.flush();const n=this.domConverter.domSelectionToView(e);if(0!=n.rangeCount)if(this.view.hasDomSelection=!0,this.focusObserver.flush(),this.view.document.isFocused||this.view.document.isReadOnly){if(this._pendingSelectionChange.delete(t),!this.selection.isEqual(n)||!this.domConverter.isDomSelectionCorrect(e))if(++this._loopbackCounter>60)this._reportInfiniteLoop();else if(As(n))if(this.selection.isSimilar(n))this.view.forceRender();else{const t={oldSelection:this.selection,newSelection:n,domSelection:e};this.document.fire("selectionChange",t),this._fireSelectionChangeDoneDebounced(t)}else this.view.forceRender()}else this._pendingSelectionChange.add(t);else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}function As(t){return Array.from(t.getRanges()).flatMap(t=>[t.start.root,t.end.root]).every(t=>t&&t.is("rootElement"))}class Ps extends ys{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(t){super(t);const e=this.document;e.on("compositionstart",()=>{e.isComposing=!0}),e.on("compositionend",()=>{e.isComposing=!1})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Is{_files;_native;constructor(t,e={}){this._files=e.cacheFiles?Rs(t):null,this._native=t}get files(){return this._files||(this._files=Rs(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}function Rs(t){const e=Array.from(t.files||[]),n=Array.from(t.items||[]);return e.length?e:n.filter(t=>"file"===t.kind).map(t=>t.getAsFile())}class Os extends ys{domEventType="beforeinput";onDomEvent(t){const e=t.getTargetRanges(),n=this.view,i=n.document;let o=null,r=null,s=[];if(t.dataTransfer&&(o=new Is(t.dataTransfer)),null!==t.data?r=t.data:o&&(r=o.getData("text/plain")),i.selection.isFake)s=Array.from(i.selection.getRanges()),t.preventDefault();else if(e.length)s=e.map(e=>{let i=n.domConverter.domPositionToView(e.startContainer,e.startOffset);const o=n.domConverter.domPositionToView(e.endContainer,e.endOffset);if(i&&jr(e.startContainer)&&e.startOffset<Hr){t.preventDefault();let n=Hr-e.startOffset;i=i.getLastMatchingPosition(t=>!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))||!(!t.item.is("$textProxy")||!n--),{direction:"backward",singleCharacters:!0})}return Ms(e.endContainer,e.endOffset)&&t.preventDefault(),i?n.createRange(i,o):o?n.createRange(o):void 0}).filter(t=>!!t);else if(nt.isAndroid){const e=t.target.ownerDocument.defaultView.getSelection();s=Array.from(n.domConverter.domSelectionToView(e).getRanges())}if(nt.isAndroid&&"insertCompositionText"==t.inputType&&r&&r.endsWith("\n"))this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[n.createRange(s[0].end)]});else{if(["insertText","insertReplacementText"].includes(t.inputType)&&r&&r.includes("\n")){const e=r.split(/\n{1,2}/g);let n=s;t.preventDefault();for(let r=0;r<e.length;r++){const s=e[r];""!=s&&(this.fire(t.type,t,{data:s,dataTransfer:o,targetRanges:n,inputType:t.inputType,isComposing:t.isComposing}),n=[i.selection.getFirstRange()]),r+1<e.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:n}),n=[i.selection.getFirstRange()])}return}this.fire(t.type,t,{data:r,dataTransfer:o,targetRanges:s,inputType:t.inputType,isComposing:t.isComposing})}}}function Ms(t,e){while(t.parentNode){if(De(t)){if(e!=t.data.length)return!1}else if(e!=t.childNodes.length)return!1;if(e=Ge(t)+1,t=t.parentNode,e<t.childNodes.length&&jr(t.childNodes[e]))return!0}return!1}class Ds extends ws{constructor(t){super(t),this.document.on("keydown",(t,e)=>{if(this.isEnabled&&En(e.keyCode)){const n=new Zo(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(n,e),n.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class Vs extends ws{constructor(t){super(t);const e=this.document;e.on("keydown",(t,n)=>{if(!this.isEnabled||n.keyCode!=_n.tab||n.ctrlKey)return;const i=new Zo(e,"tab",e.selection.getFirstRange());e.fire(i,n),i.stop.called&&t.stop()})}observe(){}stopObserving(){}}class Ns extends(ie()){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(t){super(),this.document=new dr(t),this.domConverter=new ls(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Kr(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Sr(this.document),this.addObserver(xs),this.addObserver(Ss),this.addObserver(Ts),this.addObserver(ks),this.addObserver(Cs),this.addObserver(Ps),this.addObserver(Ds),this.addObserver(Os),this.addObserver(Vs),qr(this),wr(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),nt.isiOS&&this.listenTo(this.document,"blur",(t,e)=>{const n=this.domConverter.mapDomToView(e.domEvent.relatedTarget);n||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:e})=>{e.forEach(t=>this._renderer.markToSync(t.type,t.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(t,e="main"){const n=this.document.getRoot(e);n._name=t.tagName.toLowerCase();const i={};for(const{name:r,value:s}of Array.from(t.attributes))i[r]=s,"class"===r?this._writer.addClass(s.split(" "),n):n.hasAttribute(r)||this._writer.setAttribute(r,s,n);this._initialDomRootAttributes.set(t,i);const o=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};o(),this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",(t,e)=>this._renderer.markToSync("children",e)),n.on("change:attributes",(t,e)=>this._renderer.markToSync("attributes",e)),n.on("change:text",(t,e)=>this._renderer.markToSync("text",e)),n.on("change:isReadOnly",()=>this.change(o)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const r of this._observers.values())r.observe(t,e)}detachDomRoot(t){const e=this.domRoots.get(t);Array.from(e.attributes).forEach(({name:t})=>e.removeAttribute(t));const n=this._initialDomRootAttributes.get(e);for(const i in n)e.setAttribute(i,n[i]);this.domRoots.delete(t),this.domConverter.unbindDomElement(e);for(const i of this._observers.values())i.stopObserving(e)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);for(const[n,i]of this.domRoots)e.observe(i,n);return e.enable(),e}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection({alignToTop:t,forceScroll:e,viewportOffset:n=20,ancestorOffset:i=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const r=$({alignToTop:t,forceScroll:e,viewportOffset:n,ancestorOffset:i});"number"===typeof n&&(n={top:n,bottom:n,left:n,right:n});const s={target:this.domConverter.viewRangeToDom(o),viewportOffset:n,ancestorOffset:i,alignToTop:t,forceScroll:e};this.fire("scrollToTheSelection",s,r),sn(s)}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new Tt("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(e){
/* istanbul ignore next -- @preserve */Tt.rethrowUnexpectedError(e,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Ss).flush(),this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,e){return Go._createAt(t,e)}createPositionAfter(t){return Go._createAfter(t)}createPositionBefore(t){return Go._createBefore(t)}createRange(t,e){return new Ko(t,e)}createRangeOn(t){return Ko._createOn(t)}createRangeIn(t){return Ko._createIn(t)}createSelection(...t){return new Xo(...t)}_disableRendering(t){this._renderingDisabled=t,0==t&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ls{
/* istanbul ignore next -- @preserve */is(){throw new Error("is() method is abstract")}}class Bs extends Ls{textNode;data;offsetInText;constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new Tt("model-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.offsetSize)throw new Tt("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;while(n)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Bs.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class Fs{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new Tt("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new Tt("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=Hs._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,i,o;do{i=this.position,o=this._visitedParent,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this._position=i,this._visitedParent=o)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=Ws(e,n),o=i||js(e,n,i);if(o&&o.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=o;return this._position=e,zs("elementStart",o,t,e,1)}if(o&&o.is("model:$text")){let i;if(this.singleCharacters)i=1;else{let t=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),i=t-e.offset}const r=e.offset-o.startOffset,s=new Bs(o,r,i);return e.offset+=i,this._position=e,zs("text",s,t,e,i)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():zs("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=e.parent,o=Ws(e,i),r=o||$s(e,i,o);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,zs("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():zs("elementEnd",r,t,e));if(r&&r.is("model:$text")){let i;if(this.singleCharacters)i=1;else{let t=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),i=e.offset-t}const o=e.offset-r.startOffset,s=new Bs(r,o-i,i);return e.offset-=i,this._position=e,zs("text",s,t,e,i)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,zs("elementStart",n,t,e,1)}}function zs(t,e,n,i,o){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:o}}}class Hs extends Ls{root;path;stickiness;constructor(t,e,n="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new Tt("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new Tt("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new Tt("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new Tt("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ws(this,this.parent)}get nodeAfter(){const t=this.parent;return js(this,t,Ws(this,t))}get nodeBefore(){const t=this.parent;return $s(this,t,Ws(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=me(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new Fs(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=me(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let i=0;while(e[i]==n[i]&&e[i])i++;return 0===i?null:e[i-1]}getShiftedBy(t){const e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let n=0;n<e;n++){const e=this.path[n]-t.path[n];if(e<-1||e>1)return!1;if(1===e)return Us(t,this,n);if(-1===e)return Us(this,t,n)}return this.path.length===t.path.length||(this.path.length>t.path.length?qs(this.path,e):qs(t.path,e))}hasSameParentAs(t){if(this.root!==t.root)return!1;const e=this.getParentPath(),n=t.getParentPath();return"same"==me(e,n)}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Hs._createAt(this);break}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange,n=e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness;return n?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange,n=e.containsPosition(this)||e.start.isEqual(this);let i;return n?(i=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(i=i._getTransformedByDeletion(t.deletionPosition,1))):i=this.isEqual(t.deletionPosition)?Hs._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),i}_getTransformedByDeletion(t,e){const n=Hs._createAt(this);if(this.root!=t.root)return n;if("same"==me(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e}}else if("prefix"==me(t.getParentPath(),this.getParentPath())){const i=t.path.length-1;if(t.offset<=this.path[i]){if(t.offset+e>this.path[i])return null;n.path[i]-=e}}return n}_getTransformedByInsertion(t,e){const n=Hs._createAt(this);if(this.root!=t.root)return n;if("same"==me(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=e);else if("prefix"==me(t.getParentPath(),this.getParentPath())){const i=t.path.length-1;t.offset<=this.path[i]&&(n.path[i]+=e)}return n}_getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return Hs._createAt(this);const i=this._getTransformedByDeletion(t,n),o=null===i||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness;return o?this._getCombined(t,e):i._getTransformedByInsertion(e,n)}_getCombined(t,e){const n=t.path.length-1,i=Hs._createAt(e);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[n]-t.offset,i.path=[...i.path,...this.path.slice(n+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,n="toNone"){if(t.is("model:position"))return new Hs(t.root,t.path,t.stickiness);{const i=t;if("end"==e)e=i.maxOffset;else{if("before"==e)return this._createBefore(i,n);if("after"==e)return this._createAfter(i,n);if(0!==e&&!e)throw new Tt("model-createpositionat-offset-required",[this,t])}if(!i.is("element")&&!i.is("documentFragment"))throw new Tt("model-position-parent-incorrect",[this,t]);const o=i.getPath();return o.push(e),new this(i.root,o,n)}}static _createAfter(t,e){if(!t.parent)throw new Tt("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new Tt("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const n=new Hs(e.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!e.getRoot(t.root))throw new Tt("model-position-fromjson-no-root",e,{rootName:t.root});return new Hs(e.getRoot(t.root),t.path,t.stickiness)}}function Ws(t,e){const n=e.getChildAtOffset(t.offset);return n&&n.is("$text")&&n.startOffset<t.offset?n:null}function js(t,e,n){return null!==n?null:e.getChildAtOffset(t.offset)}function $s(t,e,n){return null!==n?null:e.getChild(e.offsetToIndex(t.offset)-1)}function Us(t,e,n){return n+1!==t.path.length&&(!!qs(e.path,n+1)&&!!Gs(t,n+1))}function qs(t,e){while(e<t.length){if(0!==t[e])return!1;e++}return!0}function Gs(t,e){let n=t.parent,i=t.path.length-1,o=0;while(i>=e){if(t.path[i]+o!==n.maxOffset)return!1;o=1,i--,n=n.parent}return!0}Hs.prototype.is=function(t){return"position"===t||"model:position"===t};class Ks extends Ls{start;end;constructor(t,e){super(),this.start=Hs._createAt(t),this.end=e?Hs._createAt(e):Hs._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Fs({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),e=this.end.getParentPath();return"same"==me(t,e)}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}containsItem(t){const e=Hs._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ks(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ks(t.end,this.end))):e.push(new Ks(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new Ks(e,n)}return null}getJoined(t,e=!1){let n=this.isIntersecting(t);if(n||(n=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!n)return null;let i=this.start,o=this.end;return t.start.isBefore(i)&&(i=t.start),t.end.isAfter(o)&&(o=t.end),new Ks(i,o)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,n=Hs._createAt(this.start);let i=n.parent;while(n.path.length>e+1){const e=i.maxOffset-n.offset;0!==e&&t.push(new Ks(n,n.getShiftedBy(e))),n.path=n.path.slice(0,-1),n.offset++,i=i.parent}while(n.path.length<=this.end.path.length){const e=this.end.path[n.path.length-1],i=e-n.offset;0!==i&&t.push(new Ks(n,n.getShiftedBy(i))),n.offset=e,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new Fs(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Fs(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new Fs(t);yield e.position;for(const n of e)yield n.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Ks(this.start,this.end)]}getTransformedByOperations(t){const e=[new Ks(this.start,this.end)];for(const n of t)for(let t=0;t<e.length;t++){const i=e[t].getTransformedByOperation(n);e.splice(t,1,...i),t+=i.length-1}for(let n=0;n<e.length;n++){const t=e[n];for(let i=n+1;i<e.length;i++){const n=e[i];(t.containsRange(n)||n.containsRange(t)||t.isEqual(n))&&e.splice(i,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const n=t.sourcePosition,i=t.howMany,o=t.targetPosition;return this._getTransformedByMove(n,o,i,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new Ks(e,n)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Ks(this.start);let e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Hs._createAt(n),e.offset=0):(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new Ks(e,n)):new Ks(e,n)}_getTransformedByInsertion(t,e,n=!1){if(n&&this.containsPosition(t))return[new Ks(this.start,t),new Ks(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const n=new Ks(this.start,this.end);return n.start=n.start._getTransformedByInsertion(t,e),n.end=n.end._getTransformedByInsertion(t,e),[n]}}_getTransformedByMove(t,e,n,i=!1){if(this.isCollapsed){const i=this.start._getTransformedByMove(t,e,n);return[new Ks(i)]}const o=Ks._createFromPositionAndShift(t,n),r=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!i&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const i=this.start._getTransformedByMove(t,e,n),o=this.end._getTransformedByMove(t,e,n);return[new Ks(i,o)]}let s;const a=this.getDifference(o);let l=null;const c=this.getIntersection(o);if(1==a.length?l=new Ks(a[0].start._getTransformedByDeletion(t,n),a[0].end._getTransformedByDeletion(t,n)):2==a.length&&(l=new Ks(this.start,this.end._getTransformedByDeletion(t,n))),s=l?l._getTransformedByInsertion(r,n,null!==c||i):[],c){const t=new Ks(c.start._getCombined(o.start,r),c.end._getCombined(o.start,r));2==s.length?s.splice(1,0,t):s.push(t)}return s}_getTransformedByDeletion(t,e){let n=this.start._getTransformedByDeletion(t,e),i=this.end._getTransformedByDeletion(t,e);return null==n&&null==i?null:(null==n&&(n=t),null==i&&(i=t),new Ks(n,i))}static _createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static _createIn(t){return new this(Hs._createAt(t,0),Hs._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Hs._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new Tt("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const n=t.indexOf(e),i=new this(e.start,e.end);for(let o=n-1;o>=0;o--){if(!t[o].end.isEqual(i.start))break;i.start=Hs._createAt(t[o].start)}for(let o=n+1;o<t.length;o++){if(!t[o].start.isEqual(i.end))break;i.end=Hs._createAt(t[o].end)}return i}static fromJSON(t,e){return new this(Hs.fromJSON(t.start,e),Hs.fromJSON(t.end,e))}}Ks.prototype.is=function(t){return"range"===t||"model:range"===t};class Ys extends(Ft()){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;_cache=new Xs;constructor(){super(),this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition)return;const n=this._modelToViewMapping.get(e.modelPosition.parent);if(!n)throw new Tt("mapping-model-position-view-parent-not-found",this,{modelPosition:e.modelPosition});e.viewPosition=this.findPositionIn(n,e.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition)return;const n=this.findMappedViewAncestor(e.viewPosition),i=this._viewToModelMapping.get(n),o=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=Hs._createAt(i,o)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t,e={}){const n=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const i of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(i);if(e.defer)this._deferredBindingRemovals.set(t,t.root);else{const e=this._viewToModelMapping.delete(t);e&&this._cache.stopTracking(t),this._modelToViewMapping.get(n)==t&&this._modelToViewMapping.delete(n)}}unbindModelElement(t){const e=this.toViewElement(t);if(this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t){const t=this._viewToModelMapping.delete(e);t&&this._cache.stopTracking(e)}}bindElementToMarker(t,e){const n=this._markerNameToElements.get(e)||new Set;n.add(t);const i=this._elementToMarkerNames.get(t)||new Set;i.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,i)}unbindElementFromMarkerName(t,e){const n=this._markerNameToElements.get(e);n&&(n.delete(t),0==n.size&&this._markerNameToElements.delete(e));const i=this._elementToMarkerNames.get(t);i&&(i.delete(e),0==i.size&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,e]of this._deferredBindingRemovals)t.root==e&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new Ks(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Ko(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t,e={}){const n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e)return null;const n=new Set;for(const i of e)if(i.is("attributeElement"))for(const t of i.getElementsWithSameId())n.add(t);else n.add(i);return n}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;while(!this._viewToModelMapping.has(e))e=e.parent;return e}_toModelOffset(t,e,n){if(n!=t){const i=this._toModelOffset(t.parent,t.index,n),o=this._toModelOffset(t,e,t);return i+o}if(t.is("$text"))return e;let i=0;for(let o=0;o<e;o++)i+=this.getModelLength(t.getChild(o));return i}getModelLength(t){const e=[t];let n=0;while(e.length>0){const t=e.pop(),i=t.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(t.name);if(i)n+=i(t);else if(this._viewToModelMapping.has(t))n+=1;else if(t.is("$text"))n+=t.data.length;else{if(t.is("uiElement"))continue;for(const n of t.getChildren())e.push(n)}}return n}findPositionIn(t,e){if(0===e)return this._moveViewPositionToTextNode(new Go(t,0));const n=0==this._viewToModelLengthCallbacks.size&&this._viewToModelMapping.has(t);if(n){const n=this._cache.getClosest(t,e);return this._findPositionStartingFrom(n.viewPosition,n.modelOffset,e,t,!0)}return this._findPositionStartingFrom(new Go(t,0),0,e,t,!1)}_findPositionStartingFrom(t,e,n,i,o){let r,s=t.parent,a=t.offset;if(s.is("$text"))return new Go(s,n-e);let l=e,c=0;while(l<n)if(r=s.getChild(a),r)c=o?this._getModelLengthAndCache(r,i,l):this.getModelLength(r),l+=c,a++;else{if(s==i)throw new Tt("mapping-model-offset-not-found",this,{modelOffset:n,viewContainer:i});a=s.parent.getChildIndex(s)+1,s=s.parent,o&&this._cache.save(s,a,i,l)}let u=new Go(s,a);if(o)while(u.isAtEnd&&u.parent!==i&&u.parent.parent){const t=u.parent.parent,e=t.getChildIndex(u.parent)+1;this._cache.save(t,e,i,l),u=new Go(t,e)}return l==n?this._moveViewPositionToTextNode(u):this._findPositionStartingFrom(new Go(r,0),l-c,n,i,o)}_getModelLengthAndCache(t,e,n){let i=0;if(this._viewToModelMapping.has(t))i=1;else if(t.is("$text"))i=t.data.length;else if(!t.is("uiElement"))for(const o of t.getChildren())i+=this._getModelLengthAndCache(o,e,n+i);return this._cache.save(t.parent,t.index+1,e,n+i),i}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e&&e.is("view:$text")?new Go(e,e.data.length):n&&n.is("view:$text")?new Go(n,0):t}}class Xs extends(Ft()){_cachedMapping=new WeakMap;_nodeToCacheListIndex=new WeakMap;_invalidateOnChildrenChangeCallback=(t,e,n)=>{this._clearCacheInsideParent(e,n.index)};_invalidateOnTextChangeCallback=(t,e)=>{this._clearCacheAfter(e)};save(t,e,n,i){const o=this._cachedMapping.get(n),r=o.cacheMap.get(i);if(r){const n=t.getChild(e-1),i=r.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(r.viewPosition.nodeBefore):0;return void this._nodeToCacheListIndex.set(n,i)}const s=new Go(t,e),a={viewPosition:s,modelOffset:i};o.maxModelOffset=i>o.maxModelOffset?i:o.maxModelOffset,o.cacheMap.set(i,a);let l=o.cacheList.length-1;while(l>=0&&o.cacheList[l].modelOffset>i)l--;if(o.cacheList.splice(l+1,0,a),e>0){const n=t.getChild(e-1);this._nodeToCacheListIndex.set(n,l+1)}}getClosest(t,e){const n=this._cachedMapping.get(t);let i;if(n)if(e>n.maxModelOffset)i=n.cacheList[n.cacheList.length-1];else{const t=n.cacheMap.get(e);i=t||this._findInCacheList(n.cacheList,e)}else i=this.startTracking(t);return{modelOffset:i.modelOffset,viewPosition:i.viewPosition.clone()}}startTracking(t){const e=new Go(t,0),n={viewPosition:e,modelOffset:0},i={maxModelOffset:0,cacheList:[n],cacheMap:new Map([[0,n]])};return this._cachedMapping.set(t,i),t.on("change:children",this._invalidateOnChildrenChangeCallback),t.on("change:text",this._invalidateOnTextChangeCallback),n}stopTracking(t){t.off("change:children",this._invalidateOnChildrenChangeCallback),t.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(t)}_clearCacheInsideParent(t,e){if(0==e)this._cachedMapping.has(t)?this._clearCacheAll(t):this._clearCacheInsideParent(t.parent,t.index);else{const n=t.getChild(e-1);this._clearCacheAfter(n)}}_clearCacheAll(t){const e=this._cachedMapping.get(t);e.maxModelOffset>0&&(e.maxModelOffset=0,e.cacheList.length=1,e.cacheMap.clear(),e.cacheMap.set(0,e.cacheList[0]))}_clearCacheAfter(t){const e=this._nodeToCacheListIndex.get(t);if(void 0===e){const e=t.parent;return void(this._cachedMapping.has(e)||this._clearCacheInsideParent(e.parent,e.index))}let n=t.parent;while(!this._cachedMapping.has(n))n=n.parent;this._clearCacheFromCacheIndex(n,e)}_clearCacheFromCacheIndex(t,e){0===e&&(e=1);const n=this._cachedMapping.get(t),i=n.cacheList[e-1];if(!i)return;n.maxModelOffset=i.modelOffset;const o=n.cacheList.splice(e);for(const r of o){n.cacheMap.delete(r.modelOffset);const t=r.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(t)}}_findInCacheList(t,e){let n=0,i=t.length-1,o=i-n>>1,r=t[o];while(n<i)r.modelOffset<e?n=o+1:i=o-1,o=n+(i-n>>1),r=t[o];return r.modelOffset<=e?r:t[o-1]}}class Js{_consumable=new Map;_textProxyRegistry=new Map;add(t,e){e=Zs(e),t instanceof Bs&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Zs(e),t instanceof Bs&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}test(t,e){e=Zs(e),t instanceof Bs&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(void 0===n)return null;const i=n.get(e);return void 0===i?null:i}revert(t,e){e=Zs(e),t instanceof Bs&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null}verifyAllConsumed(t){const e=[];for(const[n,i]of this._consumable)for(const[o,r]of i){const i=o.split(":")[0];r&&t==i&&e.push({event:o,item:n.name||n.description})}if(e.length)throw new Tt("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const i=n.get(t.endOffset);i&&(e=i.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,i=t.parent,o=Symbol("$textProxy:"+t.data);let r,s;return r=this._textProxyRegistry.get(e),r||(r=new Map,this._textProxyRegistry.set(e,r)),s=r.get(n),s||(s=new Map,r.set(n,s)),s.set(i,o),o}}function Zs(t){const e=t.split(":");return"insert"==e[0]?e[0]:"addMarker"==e[0]||"removeMarker"==e[0]?t:e.length>1?e[0]+":"+e[1]:e[0]}class Qs extends(Ft()){_conversionApi;_firedEventsMap;constructor(t){super(),this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,e,n){const i=t.getRefreshedItems(),o=this._createConversionApi(n,i);for(const s of t.getMarkersToRemove())this._convertMarkerRemove(s.name,s.range,o);const r=this._reduceChanges(t.getChanges(),i);for(const s of r)"insert"===s.type?this._convertInsert(Ks._createFromPositionAndShift(s.position,s.length),o):"reinsert"===s.type?this._convertReinsert(Ks._createFromPositionAndShift(s.position,s.length),o):"remove"===s.type?this._convertRemove(s.position,s.length,s.name,o):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,o);o.mapper.flushDeferredBindings();for(const s of o.mapper.flushUnboundMarkerNames()){const t=e.get(s).getRange();this._convertMarkerRemove(s,t,o),this._convertMarkerAdd(s,t,o)}for(const s of t.getMarkersToAdd())this._convertMarkerAdd(s.name,s.range,o);o.consumable.verifyAllConsumed("insert")}convert(t,e,n,i={}){const o=this._createConversionApi(n,void 0,i);this._convertInsert(t,o);for(const[r,s]of e)this._convertMarkerAdd(r,s,o);o.consumable.verifyAllConsumed("insert")}convertSelection(t,e,n){const i=this._createConversionApi(n);this.fire("cleanSelection",{selection:t},i);const o=t.getFirstPosition().root;if(!i.mapper.toViewElement(o))return;const r=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(i.consumable,t,r),this.fire("selection",{selection:t},i),t.isCollapsed){for(const e of r)if(i.consumable.test(t,"addMarker:"+e.name)){const n=e.getRange();if(!ta(t.getFirstPosition(),e,i.mapper))continue;const o={item:t,markerName:e.name,markerRange:n};this.fire(`addMarker:${e.name}`,o,i)}for(const e of t.getAttributeKeys())if(i.consumable.test(t,"attribute:"+e)){const n={item:t,range:t.getFirstRange(),attributeKey:e,attributeOldValue:null,attributeNewValue:t.getAttribute(e)};this.fire(`attribute:${e}:$text`,n,i)}}}_convertInsert(t,e,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(e.consumable,t);for(const i of t.getWalker({shallow:!0}))this._testAndFire("insert",na(i),e)}_convertRemove(t,e,n,i){this.fire(`remove:${n}`,{position:t,length:e},i)}_convertAttribute(t,e,n,i,o){this._addConsumablesForRange(o.consumable,t,`attribute:${e}`);for(const r of t){const t={item:r.item,range:Ks._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:e,attributeOldValue:n,attributeNewValue:i};this._testAndFire(`attribute:${e}`,t,o)}}_convertReinsert(t,e){const n=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(e.consumable,n);for(const i of n.map(na))this.fire(`remove:${i.item.is("element")?i.item.name:"$text"}`,{position:i.range.start,length:i.item.offsetSize,reconversion:!0},e),this._testAndFire("insert",{...i,reconversion:!0},e)}_convertMarkerAdd(t,e,n){if("$graveyard"==e.root.rootName)return;const i=`addMarker:${t}`;if(n.consumable.add(e,i),this.fire(i,{markerName:t,markerRange:e},n),n.consumable.consume(e,i)){this._addConsumablesForRange(n.consumable,e,i);for(const o of e.getItems()){if(!n.consumable.test(o,i))continue;const r={item:o,range:Ks._createOn(o),markerName:t,markerRange:e};this.fire(i,r,n)}}}_convertMarkerRemove(t,e,n){"$graveyard"!=e.root.rootName&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:e},n)}_reduceChanges(t,e){const n={changes:t,refreshedItems:e};return this.fire("reduceChanges",n),n.changes}_addConsumablesForInsert(t,e){for(const n of e){const e=n.item;if(null===t.test(e,"insert")){t.add(e,"insert");for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n)}}return t}_addConsumablesForRange(t,e,n){for(const i of e.getItems())t.add(i,n);return t}_addConsumablesForSelection(t,e,n){t.add(e,"selection");for(const i of n)t.add(e,"addMarker:"+i.name);for(const i of e.getAttributeKeys())t.add(e,"attribute:"+i);return t}_testAndFire(t,e,n){const i=ea(t,e),o=e.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(e.item):e.item,r=this._firedEventsMap.get(n),s=r.get(o);if(s){if(s.has(i))return;s.add(i)}else r.set(o,new Set([i]));this.fire(i,e,n)}_testAndFireAddAttributes(t,e){const n={item:t,range:Ks._createOn(t)};for(const i of n.item.getAttributeKeys())n.attributeKey=i,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(i),this._testAndFire(`attribute:${i}`,n,e)}_createConversionApi(t,e=new Set,n={}){const i={...this._conversionApi,consumable:new Js,writer:t,options:n,convertItem:t=>this._convertInsert(Ks._createOn(t),i),convertChildren:t=>this._convertInsert(Ks._createIn(t),i,{doNotAddConsumables:!0}),convertAttributes:t=>this._testAndFireAddAttributes(t,i),canReuseView:t=>!e.has(i.mapper.toModelElement(t))};return this._firedEventsMap.set(i,new Map),i}}function ta(t,e,n){const i=e.getRange(),o=Array.from(t.getAncestors());o.shift(),o.reverse();const r=o.some(t=>{if(i.containsItem(t)){const e=n.toViewElement(t);return!!e.getCustomProperty("addHighlight")}});return!r}function ea(t,e){const n=e.item.is("element")?e.item.name:"$text";return`${t}:${n}`}function na(t){return{item:t.item,range:Ks._createFromPositionAndShift(t.previousPosition,t.length)}}class ia extends Ls{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=Yn(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;while(t.parent)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;while(e.parent)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;while(n)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),i=t.getAncestors(e);let o=0;while(n[o]==i[o]&&n[o])o++;return 0===o?null:n[o-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),i=me(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}isAfter(t){return this!=t&&(this.root===t.root&&!this.isBefore(t))}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Yn(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}ia.prototype.is=function(t){return"node"===t||"model:node"===t};class oa extends(Ft(Ls)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){const t=this._ranges.length;return 1===t&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Ks(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new Ks(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new Ks(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,n,i]=t;if("object"==typeof n&&(i=n,n=void 0),null===e)this._setRanges([]);else if(e instanceof oa)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Ks)this._setRanges([e],!!i&&!!i.backward);else if(e instanceof Hs)this._setRanges([new Ks(e)]);else if(e instanceof ia){const t=!!i&&!!i.backward;let o;if("in"==n)o=Ks._createIn(e);else if("on"==n)o=Ks._createOn(e);else{if(void 0===n)throw new Tt("model-selection-setto-required-second-parameter",[this,e]);o=new Ks(Hs._createAt(e,n))}this._setRanges([o],t)}else{if(!be(e))throw new Tt("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,i&&!!i.backward)}}_setRanges(t,e=!1){const n=Array.from(t),i=n.some(e=>{if(!(e instanceof Ks))throw new Tt("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(n.length!==this._ranges.length||i)&&(this._replaceAllRanges(n),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new Tt("model-selection-setfocus-no-ranges",[this,t]);const n=Hs._createAt(t,e);if("same"==n.compareWith(this.focus))return;const i=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(i)?(this._pushRange(new Ks(n,i)),this._lastRangeBackward=!0):(this._pushRange(new Ks(i,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=aa(e.start,t);ca(n,e)&&(yield n);const i=e.getWalker();for(const r of i){const n=r.item;"elementEnd"==r.type&&sa(n,t,e)?yield n:"elementStart"==r.type&&n.is("model:element")&&n.root.document.model.schema.isBlock(n)&&i.jumpTo(Hs._createAt(n,"end"))}const o=aa(e.end,t);ua(o,e)&&(yield o)}}containsEntireContent(t=this.anchor.root){const e=Hs._createAt(t,0),n=Hs._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())},e=Object.fromEntries(this.getAttributes());return Object.keys(e).length&&(t.attributes=e),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new Ks(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new Tt("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){while(this._ranges.length>0)this._popRange()}_popRange(){this._ranges.pop()}}function ra(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function sa(t,e,n){return ra(t,e)&&la(t,n)}function aa(t,e){const n=t.parent,i=n.root.document.model.schema,o=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const s=o.find(t=>!r&&(r=i.isLimit(t),!r&&ra(t,e)));return o.forEach(t=>e.add(t)),s}function la(t,e){const n=da(t);if(!n)return!0;const i=e.containsRange(Ks._createOn(n),!0);return!i}function ca(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(Hs._createAt(t,t.maxOffset))&&la(t,e))}function ua(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(Hs._createAt(t,0))&&la(t,e))}function da(t){const e=t.root.document.model.schema;let n=t.parent;while(n){if(e.isBlock(n))return n;n=n.parent}}oa.prototype.is=function(t){return"selection"===t||"model:selection"===t};class ha extends(Ft(Ks)){constructor(t,e){super(t,e),fa.call(this)}detach(){this.stopListening()}toRange(){return new Ks(this.start,this.end)}static fromRange(t){return new ha(t.start,t.end)}}function fa(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&pa.call(this,n)},{priority:"low"})}function pa(t){const e=this.getTransformedByOperation(t),n=Ks._createFromRanges(e),i=!n.isEqual(this),o=ga(this,t);let r=null;if(i){"$graveyard"==n.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",e,{deletionPosition:r})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function ga(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}ha.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class ma extends ia{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new ma(this.data,this.getAttributes())}static fromJSON(t){return new ma(t.data,t.attributes)}}ma.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const ba="selection:";class va extends(Ft(Ls)){_selection;constructor(t){super(),this._selection=new wa(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return ba+t}static _isStoreAttributeKey(t){return t.startsWith(ba)}}va.prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class wa extends oa{markers=new zn({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,n,i)=>{this._updateMarker(e,i)}),this.listenTo(this._document,"change",(t,e)=>{ya(this._model,e)})}get isCollapsed(){const t=this._ranges.length;return 0===t?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=Ct();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new Tt("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(t=>t.toJSON())),t}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new Tt("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=ha.fromRange(t);return e.on("change:range",(t,n,i)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=i.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const i of this._model.markers){const e=i.name.split(":",1)[0];if(!this._observedMarkers.has(e))continue;const n=i.getRange();for(const o of this.getRanges())n.containsRange(o,!o.isCollapsed)&&t.push(i)}const n=Array.from(this.markers);for(const i of t)this.markers.has(i)||(this.markers.add(i),e=!0);for(const i of Array.from(this.markers))t.includes(i)||(this.markers.remove(i),e=!0);e&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(t,e){const n=t.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let i=!1;const o=Array.from(this.markers),r=this.markers.has(t);if(e){let n=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){n=!0;break}n&&!r?(this.markers.add(t),i=!0):!n&&r&&(this.markers.remove(t),i=!0)}else r&&(this.markers.remove(t),i=!0);i&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(t){const e=Yn(this._getSurroundingAttributes()),n=Yn(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,r]of this._attributePriority)"low"==r&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(e);const i=[];for(const[o,r]of this.getAttributes())n.has(o)&&n.get(o)===r||i.push(o);for(const[o]of n)this.hasAttribute(o)||i.push(o);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(t,e,n=!0){const i=n?"normal":"low";if("low"==i&&"normal"==this._attributePriority.get(t))return!1;const o=super.getAttribute(t);return o!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,i),!0)}_removeAttribute(t,e=!0){const n=e?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(this._attributePriority.set(t,n),!!super.hasAttribute(t)&&(this._attrs.delete(t),!0))}_setAttributesTo(t){const e=new Set;for(const[n,i]of this.getAttributes())t.get(n)!==i&&this._removeAttribute(n,!1);for(const[n,i]of t){const t=this._setAttribute(n,i,!1);t&&e.add(n)}return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(ba)){const n=e.substr(ba.length);yield[n,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let n=null;if(this.isCollapsed){const i=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=_a(i,e)),n||(n=_a(o,e)),!this.isGravityOverridden&&!n){let t=i;while(t&&!n)t=t.previousSibling,n=_a(t,e)}if(!n){let t=o;while(t&&!n)t=t.nextSibling,n=_a(t,e)}n||(n=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const i of t){if(i.item.is("element")&&e.isObject(i.item)){n=_a(i.item,e);break}if("text"==i.type){n=i.item.getAttributes();break}}}return n}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function _a(t,e){if(!t)return null;if(t instanceof Bs||t instanceof ma)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const n=[];for(const[i,o]of t.getAttributes())e.checkAttribute("$text",i)&&!1!==e.getAttributeProperties(i).copyFromObject&&n.push([i,o]);return n}function ya(t,e){const n=t.document.differ;for(const i of n.getChanges()){if("insert"!=i.type)continue;const n=i.position.parent,o=i.length===n.maxOffset;o&&t.enqueueChange(e,t=>{const e=Array.from(n.getAttributeKeys()).filter(t=>t.startsWith(ba));for(const i of e)t.removeAttribute(i,n)})}}class ka{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new Tt("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new Tt("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const n=[];for(const o of e){if(!(o instanceof ia))throw new Tt("model-nodelist-insertnodes-not-node",this);n.push(o)}let i=this.indexToOffset(t);Xn(this._nodes,n,t),Xn(this._offsetToNode,Ca(n),i);for(let o=t;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=i,i+=this._nodes[o].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let n=this.indexToOffset(t);const i=this._nodes.splice(t,e),o=i[i.length-1],r=o.startOffset+o.offsetSize-n;this._offsetToNode.splice(n,r);for(const s of i)s._index=null,s._startOffset=null;for(let s=t;s<this._nodes.length;s++)this._nodes[s]._index=s,this._nodes[s]._startOffset=n,n+=this._nodes[s].offsetSize;return i}_removeNodesArray(t){if(0==t.length)return;for(const n of t)n._index=null,n._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let n=0;n<this._nodes.length;n++)this._nodes[n]._index=n,this._nodes[n]._startOffset=e,e+=this._nodes[n].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function Ca(t){const e=[];let n=0;for(const i of t)for(let t=0;t<i.offsetSize;t++)e[n++]=i;return e}class xa extends ia{name;_children=new ka;constructor(t,e,n){super(e),this.name=t,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const n of t)e=e.getChildAtOffset(n);return e}findAncestor(t,e={}){let n=e.includeSelf?this:this.parent;while(n){if(n.name===t)return n;n=n.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?Sa(this._children):void 0;return new xa(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=Ea(e);for(const i of n)null!==i.parent&&i._remove(),i.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const i of n)i.parent=null;return n}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const n of t.children)n.name?e.push(xa.fromJSON(n)):e.push(ma.fromJSON(n))}return new xa(t.name,t.attributes,e)}}function Ea(t){if("string"==typeof t)return[new ma(t)];be(t)||(t=[t]);const e=[];for(const n of t)"string"==typeof n?e.push(new ma(n)):n instanceof Bs?e.push(new ma(n.data,n.getAttributes())):e.push(n);return e}function Sa(t){const e=[];for(const n of t)e.push(n._clone(!0));return e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */xa.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t};class Ta{_dispatchers;constructor(t){this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class Aa extends Ta{elementToElement(t){return this.add(Za(t))}elementToStructure(t){return this.add(Qa(t))}attributeToElement(t){return this.add(tl(t))}attributeToAttribute(t){return this.add(el(t))}markerToElement(t){return this.add(nl(t))}markerToHighlight(t){return this.add(ol(t))}markerToData(t){return this.add(il(t))}}function Pa(){return(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const i=n.writer,o=n.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(o,r)}}function Ia(){return(t,e,n)=>{n.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||n.convertChildren(e.item)}}function Ra(){return(t,e,n)=>{if(e.reconversion)return;const i=n.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),r=n.mapper.toViewPosition(o,{isPhantom:!0}),s=n.writer.createRange(i,r);za(s.getTrimmed(),n)}}function Oa(t,e){const n=t.createAttributeElement("span",e.attributes);return e.classes&&n._addClass(e.classes),"number"===typeof e.priority&&(n._priority=e.priority),n._id=e.id,n}function Ma(){return(t,e,n)=>{const i=e.selection;if(i.isCollapsed)return;if(!n.consumable.consume(i,"selection"))return;const o=[];for(const r of i.getRanges())o.push(n.mapper.toViewRange(r));n.writer.setSelection(o,{backward:i.isBackward})}}function Da(){return(t,e,n)=>{const i=e.selection;if(!i.isCollapsed)return;if(!n.consumable.consume(i,"selection"))return;const o=n.writer,r=i.getFirstPosition(),s=n.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a)}}function Va(){return(t,e,n)=>{const i=n.writer,o=i.document.selection;for(const r of o.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&n.writer.mergeAttributes(r.start);i.setSelection(null)}}function Na(t){return(e,n,i)=>{if(!i.consumable.test(n.item,e.name))return;const o=t(n.attributeOldValue,i,n),r=t(n.attributeNewValue,i,n);if(!o&&!r)return;i.consumable.consume(n.item,e.name);const s=i.writer,a=s.document.selection;if(n.item instanceof oa||n.item instanceof va)s.wrap(a.getFirstRange(),r);else{let t=i.mapper.toViewRange(n.range);null!==n.attributeOldValue&&o&&(t=s.unwrap(t,o)),null!==n.attributeNewValue&&r&&s.wrap(t,r)}}}function La(t,e=wl){return(n,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;const r=t(i.item,o,i);if(!r)return;e(i.item,o.consumable);const s=i.reconversion&&Ha(i.item,o)||o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,r),o.writer.insert(s,r),o.convertAttributes(i.item),bl(r,i.item.getChildren(),o,{reconversion:i.reconversion})}}function Ba(t,e){return(n,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;const r=new Map;o.writer._registerSlotFactory(pl(i.item,r,o));const s=t(i.item,o,i);if(o.writer._clearSlotFactory(),!s)return;gl(i.item,r,o),e(i.item,o.consumable);const a=i.reconversion&&Ha(i.item,o)||o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,s),o.writer.insert(a,s),o.convertAttributes(i.item),ml(s,r,o,{reconversion:i.reconversion})}}function Fa(t){return(e,n,i)=>{n.isOpening=!0;const o=t(n,i);n.isOpening=!1;const r=t(n,i);if(!o||!r)return;const s=n.markerRange;if(s.isCollapsed&&!i.consumable.consume(s,e.name))return;for(const t of s)if(!i.consumable.consume(t.item,e.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(s.start),o),i.mapper.bindElementToMarker(o,n.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),r),i.mapper.bindElementToMarker(r,n.markerName)),e.stop()}}function za(t,e){const n=e.writer.remove(t);for(const i of e.writer.createRangeIn(n).getItems())e.mapper.unbindViewElement(i,{defer:!0});return t.start}function Ha(t,e){const n=e.mapper.toViewElement(t);return n&&za(e.writer.createRangeOn(n),e)}function Wa(){return(t,e,n)=>{const i=n.mapper.markerNameToElements(e.markerName);if(i){for(const t of i)n.mapper.unbindElementFromMarkerName(t,e.markerName),n.writer.clear(n.writer.createRangeOn(t),t);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function ja(t){return(e,n,i)=>{const o=t(n.markerName,i);if(!o)return;const r=n.markerRange;i.consumable.consume(r,e.name)&&($a(r,!1,i,n,o),$a(r,!0,i,n,o),e.stop())}}function $a(t,e,n,i,o){const r=e?t.start:t.end,s=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(s||a){let t,r;e&&s||!e&&!a?(t=s,r=!0):(t=a,r=!1);const l=n.mapper.toViewElement(t);if(l)return void Ua(l,e,r,n,i,o)}const l=n.mapper.toViewPosition(r);qa(l,e,n,i,o)}function Ua(t,e,n,i,o,r){const s=`data-${r.group}-${e?"start":"end"}-${n?"before":"after"}`,a=t.hasAttribute(s)?t.getAttribute(s).split(","):[];a.unshift(r.name),i.writer.setAttribute(s,a.join(","),t),i.mapper.bindElementToMarker(t,o.markerName)}function qa(t,e,n,i,o){const r=`${o.group}-${e?"start":"end"}`,s=o.name?{name:o.name}:null,a=n.writer.createUIElement(r,s);n.writer.insert(t,a),n.mapper.bindElementToMarker(a,i.markerName)}function Ga(t){return(e,n,i)=>{const o=t(n.markerName,i);if(!o)return;const r=i.mapper.markerNameToElements(n.markerName);if(r){for(const t of r)i.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("containerElement")?(s(`data-${o.group}-start-before`,t),s(`data-${o.group}-start-after`,t),s(`data-${o.group}-end-before`,t),s(`data-${o.group}-end-after`,t)):i.writer.clear(i.writer.createRangeOn(t),t);i.writer.clearClonedElementsGroup(n.markerName),e.stop()}function s(t,e){if(e.hasAttribute(t)){const n=new Set(e.getAttribute(t).split(","));n.delete(o.name),0==n.size?i.writer.removeAttribute(t,e):i.writer.setAttribute(t,Array.from(n).join(","),e)}}}}function Ka(t){return(e,n,i)=>{if(!i.consumable.test(n.item,e.name))return;const o=t(n.attributeOldValue,i,n),r=t(n.attributeNewValue,i,n);if(!o&&!r)return;i.consumable.consume(n.item,e.name);const s=i.mapper.toViewElement(n.item),a=i.writer;if(!s)throw new Tt("conversion-attribute-to-attribute-on-text",i.dispatcher,n);if(null!==n.attributeOldValue&&o){let t=o.value;"style"==o.key&&(t="string"==typeof o.value?new Io(a.document.stylesProcessor).setTo(o.value).getStylesEntries().map(([t])=>t):Object.keys(o.value)),a.removeAttribute(o.key,t,s)}if(null!==n.attributeNewValue&&r){let t=r.value;"style"==r.key&&"string"==typeof r.value&&(t=Object.fromEntries(new Io(a.document.stylesProcessor).setTo(r.value).getStylesEntries())),a.setAttribute(r.key,t,!1,s)}}}function Ya(t){return(e,n,i)=>{if(!n.item)return;if(!(n.item instanceof oa||n.item instanceof va)&&!n.item.is("$textProxy"))return;const o=ul(t,n,i);if(!o)return;if(!i.consumable.consume(n.item,e.name))return;const r=i.writer,s=Oa(r,o),a=r.document.selection;if(n.item instanceof oa||n.item instanceof va)r.wrap(a.getFirstRange(),s);else{const t=i.mapper.toViewRange(n.range),e=r.wrap(t,s);for(const o of e.getItems())if(o.is("attributeElement")&&o.isSimilar(s)){i.mapper.bindElementToMarker(o,n.markerName);break}}}}function Xa(t){return(e,n,i)=>{if(!n.item)return;if(!(n.item instanceof xa))return;const o=ul(t,n,i);if(!o)return;if(!i.consumable.test(n.item,e.name))return;const r=i.mapper.toViewElement(n.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(n.item,e.name);for(const o of Ks._createIn(n.item))i.consumable.consume(o.item,e.name);const t=r.getCustomProperty("addHighlight");t(r,o,i.writer),i.mapper.bindElementToMarker(r,n.markerName)}}}function Ja(t){return(e,n,i)=>{if(n.markerRange.isCollapsed)return;const o=ul(t,n,i);if(!o)return;const r=Oa(i.writer,o),s=i.mapper.markerNameToElements(n.markerName);if(s){for(const t of s)if(i.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("attributeElement"))i.writer.unwrap(i.writer.createRangeOn(t),r);else{const e=t.getCustomProperty("removeHighlight");e(t,o.id,i.writer)}i.writer.clearClonedElementsGroup(n.markerName),e.stop()}}}function Za(t){const e=rl(t.model),n=sl(t.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,La(n,fl(e)),{priority:t.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",hl(e),{priority:"low"})}}function Qa(t){const e=rl(t.model),n=sl(t.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new Tt("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,Ba(n,fl(e)),{priority:t.converterPriority||"normal"}),i.on("reduceChanges",hl(e),{priority:"low"})}}function tl(t){t=$(t);let e=t.model;"string"==typeof e&&(e={key:e});let n=`attribute:${e.key}`;if(e.name&&(n+=":"+e.name),e.values)for(const o of e.values)t.view[o]=sl(t.view[o],"attribute");else t.view=sl(t.view,"attribute");const i=ll(t);return e=>{e.on(n,Na(i),{priority:t.converterPriority||"normal"})}}function el(t){t=$(t);let e=t.model;"string"==typeof e&&(e={key:e});let n=`attribute:${e.key}`;if(e.name&&(n+=":"+e.name),e.values)for(const o of e.values)t.view[o]=cl(t.view[o]);else t.view=cl(t.view);const i=ll(t);return e=>{e.on(n,Ka(i),{priority:t.converterPriority||"normal"})}}function nl(t){const e=sl(t.view,"ui");return n=>{n.on(`addMarker:${t.model}`,Fa(e),{priority:t.converterPriority||"normal"}),n.on(`removeMarker:${t.model}`,Wa(),{priority:t.converterPriority||"normal"})}}function il(t){t=$(t);const e=t.model;let n=t.view;return n||(n=n=>({group:e,name:n.substr(t.model.length+1)})),i=>{i.on(`addMarker:${e}`,ja(n),{priority:t.converterPriority||"normal"}),i.on(`removeMarker:${e}`,Ga(n),{priority:t.converterPriority||"normal"})}}function ol(t){return e=>{e.on(`addMarker:${t.model}`,Ya(t.view),{priority:t.converterPriority||"normal"}),e.on(`addMarker:${t.model}`,Xa(t.view),{priority:t.converterPriority||"normal"}),e.on(`removeMarker:${t.model}`,Ja(t.view),{priority:t.converterPriority||"normal"})}}function rl(t){return"string"==typeof t&&(t={name:t}),{name:t.name,attributes:t.attributes?Mn(t.attributes):[],children:!!t.children}}function sl(t,e){return"function"==typeof t?t:(n,i)=>al(t,i,e)}function al(t,e,n){let i;"string"==typeof t&&(t={name:t});const o=e.writer,r=Object.assign({},t.attributes);if("container"==n)i=o.createContainerElement(t.name,r);else if("attribute"==n){const e={priority:t.priority||fr.DEFAULT_PRIORITY};i=o.createAttributeElement(t.name,r,e)}else i=o.createUIElement(t.name,r);if(t.styles){const e=Object.keys(t.styles);for(const n of e)o.setStyle(n,t.styles[n],i)}if(t.classes){const e=t.classes;if("string"==typeof e)o.addClass(e,i);else for(const t of e)o.addClass(t,i)}return i}function ll(t){return t.model.values?(e,n,i)=>{const o=t.view[e];return o?o(e,n,i):null}:t.view}function cl(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function ul(t,e,n){const i="function"==typeof t?t(e,n):{...t};return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function dl(t){return(e,n)=>{if(!e.is("element",t.name))return!1;if("attribute"==n.type){if(t.attributes.includes(n.attributeKey))return!0}else
/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(t.children)return!0;return!1}}function hl(t){const e=dl(t);return(t,n)=>{const i=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const o of n.changes){const t="attribute"==o.type?o.range.start.nodeAfter:o.position.parent;if(t&&e(t,o)&&"reinsert"!=o.type){if("insert"==o.type&&"rename"==o.action&&n.refreshedItems.add(o.position.nodeAfter),!n.reconvertedElements.has(t)){n.reconvertedElements.add(t);const e=Hs._createBefore(t);let o=i.length;for(let t=i.length-1;t>=0;t--){const n=i[t],r="attribute"==n.type?n.range.start:n.position,s=r.compareWith(e);if("before"==s||"remove"==n.type&&"same"==s)break;o=t}i.splice(o,0,{type:"reinsert",name:t.name,position:e,length:1})}}else i.push(o)}n.changes=i}}function fl(t){return(e,n,i={})=>{const o=["insert"];for(const r of t.attributes)e.hasAttribute(r)&&o.push(`attribute:${r}`);return!!o.every(t=>n.test(e,t))&&(i.preflight||o.forEach(t=>n.consume(e,t)),!0)}}function pl(t,e,n){return(i,o)=>{const r=i.createContainerElement("$slot");let s=null;if("children"===o)s=Array.from(t.getChildren());else{if("function"!=typeof o)throw new Tt("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:o});s=Array.from(t.getChildren()).filter(t=>o(t))}return e.set(r,s),r}}function gl(t,e,n){const i=Array.from(e.values()).flat(),o=new Set(i);if(o.size!=i.length)throw new Tt("conversion-slot-filter-overlap",n.dispatcher,{element:t});if(o.size!=t.childCount)throw new Tt("conversion-slot-filter-incomplete",n.dispatcher,{element:t})}function ml(t,e,n,i){n.mapper.on("modelToViewPosition",s,{priority:"highest"});let o=null,r=null;for([o,r]of e)bl(t,r,n,i),n.writer.setCustomProperty("$structureSlotParent",!0,o.parent),n.writer.move(n.writer.createRangeIn(o),n.writer.createPositionBefore(o)),n.writer.remove(o);function s(t,e){const n=e.modelPosition.nodeAfter,i=r.indexOf(n);i<0||(e.viewPosition=e.mapper.findPositionIn(o,i))}n.mapper.off("modelToViewPosition",s)}function bl(t,e,n,i){for(const o of e)vl(t.root,o,n,i)||n.convertItem(o)}function vl(t,e,n,i){const{writer:o,mapper:r}=n;if(!i.reconversion)return!1;const s=r.toViewElement(e);return!(!s||s.root==t)&&(!!n.canReuseView(s)&&(o.move(o.createRangeOn(s),r.toViewPosition(Hs._createBefore(e))),!0))}function wl(t,e,{preflight:n}={}){return n?e.test(t,"insert"):e.consume(t,"insert")}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _l(t){const{schema:e,document:n}=t.model;for(const i of n.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return t.insertElement("paragraph",i),!0;return!1}function yl(t,e,n){const i=n.createContext(t);return!!n.checkChild(i,"paragraph")&&!!n.checkChild(i.push("paragraph"),e)}function kl(t,e){const n=e.createElement("paragraph");return e.insert(n,t),e.createPositionAt(n,0)}class Cl extends Ta{elementToElement(t){return this.add(Tl(t))}elementToAttribute(t){return this.add(Al(t))}attributeToAttribute(t){return this.add(Pl(t))}elementToMarker(t){return this.add(Il(t))}dataToMarker(t){return this.add(Rl(t))}}function xl(){return(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:i}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=i}}}function El(){return(t,e,{schema:n,consumable:i,writer:o})=>{let r=e.modelCursor;if(!i.test(e.viewItem))return;if(!n.checkChild(r,"$text")){if(!yl(r,"$text",n))return;if(0==e.viewItem.data.trim().length)return;r=kl(r,o)}i.consume(e.viewItem);const s=o.createText(e.viewItem.data);o.insert(s,r),e.modelRange=o.createRange(r,r.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}}function Sl(t,e){return(n,i)=>{const o=i.newSelection,r=[];for(const t of o.getRanges())r.push(e.toModelRange(t));const s=t.createSelection(r,{backward:o.isBackward});s.isEqual(t.document.selection)||t.change(t=>{t.setSelection(s)})}}function Tl(t){t=$(t);const e=Dl(t),n=Ml(t.view),i=n?`element:${n}`:"element";return n=>{n.on(i,e,{priority:t.converterPriority||"normal"})}}function Al(t){t=$(t),Ll(t);const e=Bl(t,!1),n=Ml(t.view),i=n?`element:${n}`:"element";return n=>{n.on(i,e,{priority:t.converterPriority||"low"})}}function Pl(t){t=$(t);let e=null;("string"==typeof t.view||t.view.key)&&(e=Nl(t)),Ll(t,e);const n=Bl(t,!0);return e=>{e.on("element",n,{priority:t.converterPriority||"low"})}}function Il(t){const e=Hl(t.model);return Tl({...t,model:e})}function Rl(t){t=$(t),t.model||(t.model=e=>e?t.view+":"+e:t.view);const e={view:t.view,model:t.model},n=Dl(Wl(e,"start")),i=Dl(Wl(e,"end"));return o=>{o.on(`element:${t.view}-start`,n,{priority:t.converterPriority||"normal"}),o.on(`element:${t.view}-end`,i,{priority:t.converterPriority||"normal"});const r=xt.low,s=xt.highest,a=xt.get(t.converterPriority)/s;o.on("element",Ol(e),{priority:r+a})}}function Ol(t){return(e,n,i)=>{const o=`data-${t.view}`;function r(e,o){for(const r of o){const o=t.model(r,i),s=i.writer.createElement("$marker",{"data-name":o});i.writer.insert(s,e),n.modelCursor.isEqual(e)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(e,1),n.modelRange=n.modelRange._getTransformedByInsertion(e,1)[0]}}(i.consumable.test(n.viewItem,{attributes:o+"-end-after"})||i.consumable.test(n.viewItem,{attributes:o+"-start-after"})||i.consumable.test(n.viewItem,{attributes:o+"-end-before"})||i.consumable.test(n.viewItem,{attributes:o+"-start-before"}))&&(n.modelRange||Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor)),i.consumable.consume(n.viewItem,{attributes:o+"-end-after"})&&r(n.modelRange.end,n.viewItem.getAttribute(o+"-end-after").split(",")),i.consumable.consume(n.viewItem,{attributes:o+"-start-after"})&&r(n.modelRange.end,n.viewItem.getAttribute(o+"-start-after").split(",")),i.consumable.consume(n.viewItem,{attributes:o+"-end-before"})&&r(n.modelRange.start,n.viewItem.getAttribute(o+"-end-before").split(",")),i.consumable.consume(n.viewItem,{attributes:o+"-start-before"})&&r(n.modelRange.start,n.viewItem.getAttribute(o+"-start-before").split(",")))}}function Ml(t){return"string"==typeof t?t:"object"==typeof t&&"string"==typeof t.name?t.name:null}function Dl(t){const e=new Co(t.view);return(n,i,o)=>{const r=e.match(i.viewItem);if(!r)return;const s=r.match;if(s.name=!0,!o.consumable.test(i.viewItem,s))return;const a=Vl(t.model,i.viewItem,o);a&&o.safeInsert(a,i.modelCursor)&&(o.consumable.consume(i.viewItem,s),o.convertChildren(i.viewItem,a),o.updateConversionResult(a,i))}}function Vl(t,e,n){return t instanceof Function?t(e,n):n.writer.createElement(t)}function Nl(t){"string"==typeof t.view&&(t.view={key:t.view});const e=t.view.key,n="undefined"==typeof t.view.value?/[\s\S]*/:t.view.value;let i;if("class"==e||"style"==e){const t="class"==e?"classes":"styles";i={[t]:n}}else i={attributes:{[e]:n}};return t.view.name&&(i.name=t.view.name),t.view=i,e}function Ll(t,e=null){const n=null===e||(t=>t.getAttribute(e)),i="object"!=typeof t.model?t.model:t.model.key,o="object"!=typeof t.model||"undefined"==typeof t.model.value?n:t.model.value;t.model={key:i,value:o}}function Bl(t,e){const n=new Co(t.view);return(i,o,r)=>{if(!o.modelRange&&e)return;const s=n.match(o.viewItem);if(!s)return;if(Fl(t.view,o.viewItem)?s.match.name=!0:delete s.match.name,!r.consumable.test(o.viewItem,s.match))return;const a=t.model.key,l="function"==typeof t.model.value?t.model.value(o.viewItem,r,o):t.model.value;if(null===l||void 0===l)return;o.modelRange||Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor));const c=zl(o.modelRange,{key:a,value:l},e,r);c&&(r.consumable.test(o.viewItem,{name:!0})&&(s.match.name=!0),r.consumable.consume(o.viewItem,s.match))}}function Fl(t,e){const n="function"==typeof t?t(e):t;return!("object"==typeof n&&!Ml(n))&&(!n.classes&&!n.attributes&&!n.styles)}function zl(t,e,n,i){let o=!1;for(const r of Array.from(t.getItems({shallow:n})))i.schema.checkAttribute(r,e.key)&&(o=!0,r.hasAttribute(e.key)||i.writer.setAttribute(e.key,e.value,r));return o}function Hl(t){return(e,n)=>{const i="string"==typeof t?t:t(e,n);return n.writer.createElement("$marker",{"data-name":i})}}function Wl(t,e){const n=(e,n)=>{const i=e.getAttribute("name"),o=t.model(i,n);return n.writer.createElement("$marker",{"data-name":o})};return{view:`${t.view}-${e}`,model:n}}class jl extends(ie()){model;view;mapper;downcastDispatcher;constructor(t,e){super(),this.model=t,this.view=new Ns(e),this.mapper=new Ys,this.downcastDispatcher=new Qs({mapper:this.mapper,schema:t.schema});const n=this.model.document,i=n.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(t=>{this.downcastDispatcher.convertChanges(n.differ,o,t),this.downcastDispatcher.convertSelection(i,o,t)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",Sl(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",Pa(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Ia(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Ra(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Va()),this.downcastDispatcher.on("selection",Ma(),{priority:"low"}),this.downcastDispatcher.on("selection",Da(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(t=>{if("$graveyard"==t.rootName)return null;const e=new Uo(this.view.document,t.name);return e.rootName=t.rootName,this.mapper.bindElements(t,e),e})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const e="string"==typeof t?t:t.name,n=this.model.markers.get(e);if(!n)throw new Tt("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:e});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}class $l extends(ie()){_sourceDefinitions={};_attributeProperties=Object.create(null);_customChildChecks=new Map;_customAttributeChecks=new Map;_genericCheckSymbol=Symbol("$generic");_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,e)=>{e[0]=new Ul(e[0])},{priority:"highest"}),this.on("checkChild",(t,e)=>{e[0]=new Ul(e[0]),e[1]=this.getDefinition(e[1])},{priority:"highest"})}register(t,e){if(this._sourceDefinitions[t])throw new Tt("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache()}extend(t,e){if(!this._sourceDefinitions[t])throw new Tt("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let e;return e="string"==typeof t?t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[e]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const e=this.getDefinition(t);return!(!e||!e.isBlock)}isLimit(t){const e=this.getDefinition(t);return!!e&&!(!e.isLimit&&!e.isObject)}isObject(t){const e=this.getDefinition(t);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}isInline(t){const e=this.getDefinition(t);return!(!e||!e.isInline)}isSelectable(t){const e=this.getDefinition(t);return!!e&&!(!e.isSelectable&&!e.isObject)}isContent(t){const e=this.getDefinition(t);return!!e&&!(!e.isContent&&!e.isObject)}checkChild(t,e){return!!e&&this._checkContextMatch(t,e)}checkAttribute(t,e){const n=this.getDefinition(t.last);if(!n)return!1;const i=this._evaluateAttributeChecks(t,e);return void 0!==i?i:n.allowAttributes.includes(e)}checkMerge(t,e){if(t instanceof Hs){const e=t.nodeBefore,n=t.nodeAfter;if(!(e instanceof xa))throw new Tt("schema-check-merge-no-element-before",this);if(!(n instanceof xa))throw new Tt("schema-check-merge-no-element-after",this);return this.checkMerge(e,n)}if(this.isLimit(t)||this.isLimit(e))return!1;for(const n of e.getChildren())if(!this.checkChild(t,n))return!1;return!0}addChildCheck(t,e){const n=void 0!==e?e:this._genericCheckSymbol,i=this._customChildChecks.get(n)||[];i.push(t),this._customChildChecks.set(n,i)}addAttributeCheck(t,e){const n=void 0!==e?e:this._genericCheckSymbol,i=this._customAttributeChecks.get(n)||[];i.push(t),this._customAttributeChecks.set(n,i)}setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let e;if(t instanceof Hs)e=t.parent;else{const n=t instanceof Ks?[t]:Array.from(t.getRanges());e=n.reduce((t,e)=>{const n=e.getCommonAncestor();return t?t.getCommonAncestor(n,{includeSelf:!0}):n},null)}while(!this.isLimit(e)){if(!e.parent)break;e=e.parent}return e}checkAttributeInSelection(t,e){if(t.isCollapsed){const n=t.getFirstPosition(),i=[...n.getAncestors(),new ma("",t.getAttributes())];return this.checkAttribute(i,e)}{const n=t.getRanges();for(const t of n)for(const n of t)if(this.checkAttribute(n.item,e))return!0}return!1}*getValidRanges(t,e){t=lc(t);for(const n of t)yield*this._getValidRangesForRange(n,e)}getNearestSelectionRange(t,e="both"){if("$graveyard"==t.root.rootName)return null;if(this.checkChild(t,"$text"))return new Ks(t);let n,i;const o=t.getAncestors().reverse().find(t=>this.isLimit(t))||t.root;"both"!=e&&"backward"!=e||(n=new Fs({boundaries:Ks._createIn(o),startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(i=new Fs({boundaries:Ks._createIn(o),startPosition:t}));for(const r of ac(n,i)){const t=r.walker==n?"elementEnd":"elementStart",e=r.value;if(e.type==t&&this.isObject(e.item))return Ks._createOn(e.item);if(this.checkChild(e.nextPosition,"$text"))return new Ks(e.nextPosition)}return null}findAllowedParent(t,e){let n=t.parent;while(n){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(t,e,n){const i=n.model;for(const[o,r]of Object.entries(e))i.schema.checkAttribute(t,o)&&n.setAttribute(o,r,t)}removeDisallowedAttributes(t,e){for(const n of t)if(n.is("$text"))cc(this,n,e);else{const t=Ks._createIn(n),i=t.getPositions();for(const n of i){const t=n.nodeBefore||n.parent;cc(this,t,e)}}}getAttributesWithProperty(t,e,n){const i={};for(const[o,r]of t.getAttributes()){const t=this.getAttributeProperties(o);void 0!==t[e]&&(void 0!==n&&n!==t[e]||(i[o]=r))}return i}createContext(t){return new Ul(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},e=this._sourceDefinitions,n=Object.keys(e);for(const o of n)t[o]=ql(e[o],o);const i=Object.values(t);for(const o of i)Gl(t,o),Kl(t,o),Yl(t,o),Xl(t,o);for(const o of i)Jl(t,o);for(const o of i)Zl(t,o);for(const o of i)Ql(t,o);for(const o of i)ec(t,o);for(const o of i)nc(t,o);this._compiledDefinitions=tc(t)}_checkContextMatch(t,e){const n=t.last;let i=this._evaluateChildChecks(t,e);if(i=void 0!==i?i:e.allowIn.includes(n.name),!i)return!1;const o=this.getDefinition(n),r=t.trimLast();return!!o&&(0==r.length||this._checkContextMatch(r,o))}_evaluateChildChecks(t,e){const n=this._customChildChecks.get(this._genericCheckSymbol)||[],i=this._customChildChecks.get(e.name)||[];for(const o of[...n,...i]){const n=o(t,e);if(void 0!==n)return n}}_evaluateAttributeChecks(t,e){const n=this._customAttributeChecks.get(this._genericCheckSymbol)||[],i=this._customAttributeChecks.get(e)||[];for(const o of[...n,...i]){const n=o(t,e);if(void 0!==n)return n}}*_getValidRangesForRange(t,e){let n=t.start,i=t.start;for(const o of t.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(Ks._createIn(o),e)),this.checkAttribute(o,e)||(n.isEqual(i)||(yield new Ks(n,i)),n=Hs._createAfter(o)),i=Hs._createAfter(o);n.isEqual(i)||(yield new Ks(n,i))}findOptimalInsertionRange(t,e){const n=t.getSelectedElement();if(n&&this.isObject(n)&&!this.isInline(n))return"before"==e||"after"==e?new Ks(Hs._createAt(n,e)):Ks._createOn(n);const i=Hn(t.getSelectedBlocks());if(!i)return new Ks(t.focus);if(i.isEmpty)return new Ks(Hs._createAt(i,0));const o=Hs._createAfter(i);return t.focus.isTouching(o)?new Ks(o):new Ks(Hs._createBefore(i))}}class Ul{_items;constructor(t){if(t instanceof Ul)return t;let e;e="string"==typeof t?[t]:Array.isArray(t)?t:t.getAncestors({includeSelf:!0}),this._items=e.map(sc)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new Ul([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new Ul([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function ql(t,e){const n={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return ic(t,n),oc(t,n,"allowIn"),oc(t,n,"allowChildren"),oc(t,n,"disallowIn"),oc(t,n,"disallowChildren"),oc(t,n,"allowContentOf"),oc(t,n,"allowWhere"),oc(t,n,"allowAttributes"),oc(t,n,"disallowAttributes"),oc(t,n,"allowAttributesOf"),oc(t,n,"inheritTypesFrom"),rc(t,n),n}function Gl(t,e){for(const n of e.allowIn){const i=t[n];i?i.allowChildren.add(e.name):e.allowIn.delete(n)}}function Kl(t,e){for(const n of e.allowChildren){const i=t[n];i?i.allowIn.add(e.name):e.allowChildren.delete(n)}}function Yl(t,e){for(const n of e.disallowIn){const i=t[n];i?i.disallowChildren.add(e.name):e.disallowIn.delete(n)}}function Xl(t,e){for(const n of e.disallowChildren){const i=t[n];i?i.disallowIn.add(e.name):e.disallowChildren.delete(n)}}function Jl(t,e){for(const n of e.disallowChildren)e.allowChildren.delete(n);for(const n of e.disallowIn)e.allowIn.delete(n);for(const n of e.disallowAttributes)e.allowAttributes.delete(n)}function Zl(t,e){for(const n of e.allowContentOf){const i=t[n];i&&(i.disallowChildren.forEach(n=>{e.allowChildren.has(n)||(e.disallowChildren.add(n),t[n].disallowIn.add(e.name))}),i.allowChildren.forEach(n=>{e.disallowChildren.has(n)||(e.allowChildren.add(n),t[n].allowIn.add(e.name))}))}}function Ql(t,e){for(const n of e.allowWhere){const i=t[n];i&&(i.disallowIn.forEach(n=>{e.allowIn.has(n)||(e.disallowIn.add(n),t[n].disallowChildren.add(e.name))}),i.allowIn.forEach(n=>{e.disallowIn.has(n)||(e.allowIn.add(n),t[n].allowChildren.add(e.name))}))}}function tc(t){const e={};for(const n of Object.values(t))e[n.name]={name:n.name,isBlock:!!n.isBlock,isContent:!!n.isContent,isInline:!!n.isInline,isLimit:!!n.isLimit,isObject:!!n.isObject,isSelectable:!!n.isSelectable,allowIn:Array.from(n.allowIn).filter(e=>!!t[e]),allowChildren:Array.from(n.allowChildren).filter(e=>!!t[e]),allowAttributes:Array.from(n.allowAttributes)};return e}function ec(t,e){for(const n of e.allowAttributesOf){const i=t[n];if(!i)return;i.allowAttributes.forEach(t=>{e.disallowAttributes.has(t)||e.allowAttributes.add(t)})}}function nc(t,e){for(const n of e.inheritTypesFrom){const i=t[n];if(i){const t=Object.keys(i).filter(t=>t.startsWith("is"));for(const n of t)n in e||(e[n]=i[n])}}}function ic(t,e){for(const n of t){const t=Object.keys(n).filter(t=>t.startsWith("is"));for(const i of t)e[i]=!!n[i]}}function oc(t,e,n){for(const i of t){let t=i[n];"string"==typeof t&&(t=[t]),Array.isArray(t)&&t.forEach(t=>e[n].add(t))}}function rc(t,e){for(const n of t){const t=n.inheritAllFrom;t&&(e.allowContentOf.add(t),e.allowWhere.add(t),e.allowAttributesOf.add(t),e.inheritTypesFrom.add(t))}}function sc(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute(e){return t.getAttribute(e)}}}function*ac(t,e){let n=!1;while(!n){if(n=!0,t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}if(e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}}}function*lc(t){for(const e of t)yield*e.getMinimalFlatRanges()}function cc(t,e,n){for(const i of e.getAttributeKeys())t.checkAttribute(e,i)||n.removeAttribute(i,e)}class uc extends(Ft()){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(t){super(),this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(t,e)=>this._convertItem(t,e),convertChildren:(t,e)=>this._convertChildren(t,e),safeInsert:(t,e)=>this._safeInsert(t,e),updateConversionResult:(t,e)=>this._updateConversionResult(t,e),splitToAllowedParent:(t,e)=>this._splitToAllowedParent(t,e),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(t,e,n=["$root"]){this.fire("viewCleanup",t),this._modelCursor=hc(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=wo.createFrom(t),this.conversionApi.store={};const{modelRange:i}=this._convertItem(t,this._modelCursor),o=e.createDocumentFragment();if(i){this._removeEmptyElements();const t=this._modelCursor.parent,n=t._removeChildren(0,t.childCount);o._insertChild(0,n),o.markers=dc(o,e)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(t,e){const n={viewItem:t,modelCursor:e,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,n,this.conversionApi):t.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof Ks))throw new Tt("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(t,e){let n=e.is("position")?e:Hs._createAt(e,0);const i=new Ks(n);for(const o of Array.from(t.getChildren())){const t=this._convertItem(o,n);t.modelRange instanceof Ks&&(i.end=t.modelRange.end,n=t.modelCursor)}return{modelRange:i,modelCursor:n}}_safeInsert(t,e){const n=this._splitToAllowedParent(t,e);return!!n&&(this.conversionApi.writer.insert(t,n.position),!0)}_updateConversionResult(t,e){const n=this._getSplitParts(t),i=this.conversionApi.writer;e.modelRange||(e.modelRange=i.createRange(i.createPositionBefore(t),i.createPositionAfter(n[n.length-1])));const o=this._cursorParents.get(t);e.modelCursor=o?i.createPositionAt(o,0):e.modelRange.end}_splitToAllowedParent(t,e){const{schema:n,writer:i}=this.conversionApi;let o=n.findAllowedParent(e,t);if(o){if(o===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return yl(e,t,n)?{position:kl(e,i)}:null;const r=this.conversionApi.writer.split(e,o),s=[];for(const l of r.range.getWalker())if("elementEnd"==l.type)s.push(l.item);else{const t=s.pop(),e=l.item;this._registerSplitPair(t,e)}const a=r.range.end.parent;return this._cursorParents.set(t,a),{position:r.position,cursorParent:a}}_registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);const n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e)}_getSplitParts(t){let e;return e=this._splitParts.has(t)?this._splitParts.get(t):[t],e}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){const t=new Map;for(const e of this._splitParts.keys())if(e.isEmpty&&!this._emptyElementsToKeep.has(e)){const n=t.get(e.parent)||[];n.push(e),this._splitParts.delete(e),t.set(e.parent,n)}for(const[e,n]of t)e._removeChildrenArray(n);t.size&&this._removeEmptyElements()}}function dc(t,e){const n=new Set,i=new Map,o=Ks._createIn(t).getItems();for(const r of o)r.is("element","$marker")&&n.add(r);for(const r of n){const t=r.getAttribute("data-name"),n=e.createPositionBefore(r);i.has(t)?i.get(t).end=n.clone():i.set(t,new Ks(n.clone())),e.remove(r)}return i}function hc(t,e){let n;for(const i of new Ul(t)){const t={};for(const e of i.getAttributeKeys())t[e]=i.getAttribute(e);const o=e.createElement(i.name,t);n&&e.insert(o,n),n=Hs._createAt(o,0)}return n}class fc{getHtml(t){const e=Q.document.implementation.createHTMLDocument(""),n=e.createElement("div");return n.appendChild(t),n.innerHTML}}class pc{domParser;domConverter;htmlWriter;skipComments=!0;constructor(t){this.domParser=new DOMParser,this.domConverter=new ls(t,{renderingMode:"data"}),this.htmlWriter=new fc}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode="marked"==t?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),i=e.body.childNodes;while(i.length>0)n.appendChild(i[0]);return n}}class gc extends(Ft()){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(t,e){super(),this.model=t,this.mapper=new Ys,this.downcastDispatcher=new Qs({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",Pa(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Ia(),{priority:"lowest"}),this.upcastDispatcher=new uc({schema:t.schema}),this.viewDocument=new dr(e),this.stylesProcessor=e,this.htmlProcessor=new pc(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Sr(this.viewDocument),this.upcastDispatcher.on("text",El(),{priority:"lowest"}),this.upcastDispatcher.on("element",xl(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",xl(),{priority:"lowest"}),ie().prototype.decorate.call(this,"init"),ie().prototype.decorate.call(this,"set"),ie().prototype.decorate.call(this,"get"),ie().prototype.decorate.call(this,"toView"),ie().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},_l)},{priority:"lowest"})}get(t={}){const{rootName:e="main",trim:n="empty"}=t;if(!this._checkIfRootsExists([e]))throw new Tt("datacontroller-get-non-existent-root",this);const i=this.model.document.getRoot(e);return i.isAttached()||At("datacontroller-get-detached-root",this),"empty"!==n||this.model.hasContent(i,{ignoreWhitespaces:!0})?this.stringify(i,t):""}stringify(t,e={}){const n=this.toView(t,e);return this.processor.toData(n)}toView(t,e={}){const n=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();const o=Ks._createIn(t),r=new xr(n);this.mapper.bindElements(t,r);const s=t.is("documentFragment")?t.markers:mc(t);return this.downcastDispatcher.convert(o,s,i,e),r}init(t){if(this.model.document.version)throw new Tt("datacontroller-init-document-not-empty",this);let e={};if("string"===typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new Tt("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},t=>{for(const n of Object.keys(e)){const i=this.model.document.getRoot(n);t.insert(this.parse(e[n],i),i,0)}}),Promise.resolve()}set(t,e={}){let n={};if("string"===typeof t?n.main=t:n=t,!this._checkIfRootsExists(Object.keys(n)))throw new Tt("datacontroller-set-non-existent-root",this);this.model.enqueueChange(e.batchType||{},t=>{t.setSelection(null),t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const e of Object.keys(n)){const i=this.model.document.getRoot(e);t.remove(t.createRangeIn(i)),t.insert(this.parse(n[e],i),i,0)}})}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.model.change(n=>this.upcastDispatcher.convert(t,n,e))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t)if(!this.model.document.getRoot(e))return!1;return!0}}function mc(t){const e=[],n=t.root.document;if(!n)return new Map;const i=Ks._createIn(t);for(const o of n.model.markers){const t=o.getRange(),n=t.isCollapsed,r=t.start.isEqual(i.start)||t.end.isEqual(i.end);if(n&&r)e.push([o.name,t]);else{const n=i.getIntersection(t);n&&e.push([o.name,n])}}return e.sort(([t,e],[n,i])=>{if("after"!==e.end.compareWith(i.start))return 1;if("before"!==e.start.compareWith(i.end))return-1;switch(e.start.compareWith(i.start)){case"before":return 1;case"after":return-1;default:switch(e.end.compareWith(i.end)){case"before":return 1;case"after":return-1;default:return n.localeCompare(t)}}}),new Map(e)}class bc{_helpers=new Map;_downcast;_upcast;constructor(t,e){this._downcast=Mn(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Mn(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e),i=this._upcast.includes(e);if(!i&&!n)throw new Tt("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new Tt("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of vc(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of vc(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of vc(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new Tt("conversion-group-exists",this);const i=n?new Aa(e):new Cl(e);this._helpers.set(t,i)}}function*vc(t){if(t.model.values)for(const e of t.model.values){const n={key:t.model.key,value:e},i=t.view[e],o=t.upcastAlso?t.upcastAlso[e]:void 0;yield*wc(n,i,o)}else yield*wc(t.model,t.view,t.upcastAlso)}function*wc(t,e,n){if(yield{model:t,view:e},n)for(const i of Mn(n))yield{model:t,view:i}}class _c{namespaces;domParser;domConverter;htmlWriter;skipComments=!0;constructor(t,e={}){this.namespaces=e.namespaces||[],this.domParser=new DOMParser,this.domConverter=new ls(t,{renderingMode:"data"}),this.htmlWriter=new fc}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{keepOriginalCase:!0,skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode="marked"==t?"markedNbsp":"nbsp"}_toDom(t){const e=this.namespaces.map(t=>`xmlns:${t}="nsp"`).join(" ");t=`<xml ${e}>${t}</xml>`;const n=this.domParser.parseFromString(t,"text/xml"),i=n.querySelector("parsererror");if(i)throw new Error("Parse error - "+i.textContent);const o=n.createDocumentFragment(),r=n.documentElement.childNodes;while(r.length>0)o.appendChild(r[0]);return o}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class yc{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function kc(t,e){const n=Sc(e),i=n.reduce((t,e)=>t+e.offsetSize,0),o=t.parent;Ac(t);const r=t.index;return o._insertChild(r,n),Tc(o,r+n.length),Tc(o,r),new Ks(t,t.getShiftedBy(i))}function Cc(t){if(!t.isFlat)throw new Tt("operation-utils-remove-range-not-flat",this);const e=t.start.parent;Ac(t.start),Ac(t.end);const n=e._removeChildren(t.start.index,t.end.index-t.start.index);return Tc(e,t.start.index),n}function xc(t,e){if(!t.isFlat)throw new Tt("operation-utils-move-range-not-flat",this);const n=Cc(t);return e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),kc(e,n)}function Ec(t,e,n){Ac(t.start),Ac(t.end);for(const i of t.getItems({shallow:!0})){const t=i.is("$textProxy")?i.textNode:i;null!==n?t._setAttribute(e,n):t._removeAttribute(e),Tc(t.parent,t.index)}Tc(t.end.parent,t.end.index)}function Sc(t){const e=[];function n(t){if("string"==typeof t)e.push(new ma(t));else if(t instanceof Bs)e.push(new ma(t.data,t.getAttributes()));else if(t instanceof ia)e.push(t);else if(be(t))for(const e of t)n(e)}n(t);for(let i=1;i<e.length;i++){const t=e[i],n=e[i-1];t instanceof ma&&n instanceof ma&&Pc(t,n)&&(e.splice(i-1,2,new ma(n.data+t.data,n.getAttributes())),i--)}return e}function Tc(t,e){const n=t.getChild(e-1),i=t.getChild(e);if(n&&i&&n.is("$text")&&i.is("$text")&&Pc(n,i)){const o=new ma(n.data+i.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,o)}}function Ac(t){const e=t.textNode,n=t.parent;if(e){const i=t.offset-e.startOffset,o=e.index;n._removeChildren(o,1);const r=new ma(e.data.substr(0,i),e.getAttributes()),s=new ma(e.data.substr(i),e.getAttributes());n._insertChild(o,[r,s])}}function Pc(t,e){const n=t.getAttributes(),i=e.getAttributes();for(const o of n){if(o[1]!==e.getAttribute(o[0]))return!1;i.next()}return i.next().done}class Ic extends yc{sourcePosition;howMany;targetPosition;constructor(t,e,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[Ks._createFromPositionAndShift(this.sourcePosition,this.howMany),Ks._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Ic(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Ic(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,i=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new Tt("move-operation-nodes-do-not-exist",this);if(t===e&&n<i&&i<n+this.howMany)throw new Tt("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==me(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=n&&this.targetPosition.path[t]<n+this.howMany)throw new Tt("move-operation-node-into-itself",this)}}_execute(){xc(Ks._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const n=Hs.fromJSON(t.sourcePosition,e),i=Hs.fromJSON(t.targetPosition,e);return new this(n,t.howMany,i,t.baseVersion)}}class Rc extends yc{position;nodes;shouldReceiveAttributes;constructor(t,e,n){super(n),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new ka(Sc(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new ka([...this.nodes].map(t=>t._clone(!0))),e=new Rc(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new Hs(t,[0]);return new Ic(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new Tt("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new ka([...t].map(t=>t._clone(!0))),kc(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const n=[];for(const o of t.nodes)o.name?n.push(xa.fromJSON(o)):n.push(ma.fromJSON(o));const i=new Rc(Hs.fromJSON(t.position,e),n,t.baseVersion);return i.shouldReceiveAttributes=t.shouldReceiveAttributes,i}}class Oc extends yc{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,n,i,o){super(o),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=n,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Hs(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ks(this.splitPosition,t)}get affectedSelectable(){const t=[Ks._createFromPositionAndShift(this.splitPosition,0),Ks._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Ks._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new Oc(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new Hs(t,[0]);return new Mc(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new Tt("split-operation-position-invalid",this);if(!t.parent)throw new Tt("split-operation-split-in-root",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new Tt("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new Tt("split-operation-graveyard-position-invalid",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)xc(Ks._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();kc(this.insertionPosition,e)}const e=new Ks(Hs._createAt(t,this.splitPosition.offset),Hs._createAt(t,t.maxOffset));xc(e,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new Hs(t.root,e,"toPrevious")}static fromJSON(t,e){const n=Hs.fromJSON(t.splitPosition,e),i=Hs.fromJSON(t.insertionPosition,e),o=t.graveyardPosition?Hs.fromJSON(t.graveyardPosition,e):null;return new this(n,t.howMany,i,o,t.baseVersion)}}class Mc extends yc{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,n,i,o){super(o),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new Hs(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ks(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Ks._createOn(t),Ks._createFromPositionAndShift(this.targetPosition,0),Ks._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Mc(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new Hs(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new Oc(t,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new Tt("merge-operation-source-position-invalid",this);if(!e.parent)throw new Tt("merge-operation-target-position-invalid",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new Tt("merge-operation-how-many-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent,e=Ks._createIn(t);xc(e,this.targetPosition),xc(Ks._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const n=Hs.fromJSON(t.sourcePosition,e),i=Hs.fromJSON(t.targetPosition,e),o=Hs.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,i,o,t.baseVersion)}}class Dc extends yc{name;oldRange;newRange;affectsData;_markers;constructor(t,e,n,i,o,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=n?n.clone():null,this.affectsData=o,this._markers=i}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new Dc(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Dc(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new Dc(t.name,t.oldRange?Ks.fromJSON(t.oldRange,e):null,t.newRange?Ks.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class Vc extends yc{range;key;oldValue;newValue;constructor(t,e,n,i,o){super(o),this.range=t.clone(),this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===i?null:i}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Vc(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Vc(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new Tt("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Yi(t.getAttribute(this.key),this.oldValue))throw new Tt("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new Tt("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Yi(this.oldValue,this.newValue)||Ec(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Vc(Ks.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Nc extends yc{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Nc(this.baseVersion)}getReversed(){return new Nc(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Lc extends yc{position;oldName;newName;constructor(t,e,n,i){super(i),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Lc(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Lc(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof xa))throw new Tt("rename-operation-wrong-position",this);if(""!==this.oldName&&t.name!==this.oldName)throw new Tt("rename-operation-wrong-name",this);this.oldName=t.name}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Lc(Hs.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Bc extends yc{root;key;oldValue;newValue;constructor(t,e,n,i,o){super(o),this.root=t,this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===i?null:i}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Bc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Bc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new Tt("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Tt("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Tt("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new Tt("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Bc(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Fc extends yc{rootName;elementName;isAdd;_document;constructor(t,e,n,i,o){if(super(o),this.rootName=t,this.elementName=e,this.isAdd=n,this._document=i,!this._document.getRoot(this.rootName)){const t=this._document.createRoot(this.elementName,this.rootName);t._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Fc(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Fc(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new Fc(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const zc={};zc[Vc.className]=Vc,zc[Rc.className]=Rc,zc[Dc.className]=Dc,zc[Ic.className]=Ic,zc[Nc.className]=Nc,zc[yc.className]=yc,zc[Lc.className]=Lc,zc[Bc.className]=Bc,zc[Fc.className]=Fc,zc[Oc.className]=Oc,zc[Mc.className]=Mc;class Hc{static fromJSON(t,e){return zc[t.__className].fromJSON(t,e)}}const Wc=new Map;function jc(t,e,n){let i=Wc.get(t);i||(i=new Map,Wc.set(t,i)),i.set(e,n)}function $c(t,e){const n=Wc.get(t);return n&&n.has(e)?n.get(e):Uc}function Uc(t){return[t]}function qc(t,e,n={}){const i=$c(t.constructor,e.constructor);try{return t=t.clone(),i(t,e,n)}catch(o){throw o}}function Gc(t,e,n){t=t.slice(),e=e.slice();const i=new Kc(n.document,n.useRelations,n.forceWeakRemove);i.setOriginalOperations(t),i.setOriginalOperations(e);const o=i.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:o};const r=new WeakMap;for(const l of t)r.set(l,0);const s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;while(a<t.length){const n=t[a],o=r.get(n);if(o==e.length){a++;continue}const s=e[o],l=qc(n,s,i.getContext(n,s,!0)),c=qc(s,n,i.getContext(s,n,!1));i.updateRelation(n,s),i.setOriginalOperations(l,n),i.setOriginalOperations(c,s);for(const t of l)r.set(t,o+c.length);t.splice(a,1,...l),e.splice(o,1,...c)}if(Jc(t),Jc(e),n.padWithNoOps){const n=t.length-s.originalOperationsACount,i=e.length-s.originalOperationsBCount;Xc(t,i-n),Xc(e,n-i)}return Yc(t,s.nextBaseVersionB),Yc(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:o}}class Kc{originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(t,e,n=!1){this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const i of t)this.originalOperations.set(i,n||i)}updateRelation(t,e){if(t instanceof Ic)e instanceof Mc?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)?this._setRelation(t,e,"moveTargetAfter"):t.howMany>1&&t.sourcePosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"firstToMoveMerged"):t.howMany>1&&t.sourcePosition.getShiftedBy(t.howMany-1).isEqual(e.deletionPosition)&&this._setRelation(t,e,"lastToMoveMerged"):e instanceof Ic&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof Oc){if(e instanceof Mc)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof Ic)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const i=n.end.offset-t.splitPosition.offset,o=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:i,offset:o})}}}else if(t instanceof Mc)e instanceof Mc?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof Oc?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof Ic&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof Dc){const n=t.newRange;if(!n)return;if(e instanceof Mc){const i=n.start.isEqual(e.targetPosition),o=n.start.isEqual(e.deletionPosition),r=n.end.isEqual(e.deletionPosition),s=n.end.isEqual(e.sourcePosition);(i||o||r||s)&&this._setRelation(t,e,{wasInLeftElement:i,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:s})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),i=this._history.getUndoneOperation(n);if(!i)return null;const o=this.originalOperations.get(t),r=this._relations.get(o);return r&&r.get(i)||null}_setRelation(t,e,n){const i=this.originalOperations.get(t),o=this.originalOperations.get(e);let r=this._relations.get(i);r||(r=new Map,this._relations.set(i,r)),r.set(o,n)}}function Yc(t,e){for(const n of t)n.baseVersion=e++}function Xc(t,e){for(let n=0;n<e;n++)t.push(new Nc(0))}function Jc(t){const e=new Map;for(let n=0;n<t.length;n++){const i=t[n];i instanceof Dc&&(-1!==i.baseVersion?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),t.splice(n,1),n--))}for(const{op:n,ranges:i}of e.values())i.length?n.newRange=Ks._createFromRanges(i):n.newRange=null}function Zc(t,e,n){const i=t.nodes,o=i.getNode(0).getAttribute(e);if(o==n)return null;const r=new Ks(t.position,t.position.getShiftedBy(t.howMany));return new Vc(r,e,o,n,0)}function Qc(t,e){const n=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,o=[];n.containsRange(t,!0)?i=t:t.start.hasSameParentAs(n.start)?(o=t.getDifference(n),i=t.getIntersection(n)):o=[t];const r=[];for(let s of o){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);const t=e.getMovedRangeStart(),n=s.start.hasSameParentAs(t),i=s._getTransformedByInsertion(t,e.howMany,n);r.push(...i)}return i&&r.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}function tu(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function eu(t,e){const n=[];for(let i=0;i<t.length;i++){const o=t[i],r=new Ic(o.start,o.end.offset-o.start.offset,e,0);n.push(r);for(let e=i+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return n}jc(Vc,Vc,(t,e,n)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const i=t.range.getDifference(e.range).map(e=>new Vc(e,t.key,t.oldValue,t.newValue,0)),o=t.range.getIntersection(e.range);return o&&n.aIsStrong&&i.push(new Vc(o,e.key,e.newValue,t.newValue,0)),0==i.length?[new Nc(0)]:i}return[t]}),jc(Vc,Rc,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const n=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes),i=n.map(e=>new Vc(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const n=Zc(e,t.key,t.oldValue);n&&i.unshift(n)}return i}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),jc(Vc,Mc,(t,e)=>{const n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(Ks._createFromPositionAndShift(e.graveyardPosition,1));const i=t.range._getTransformedByMergeOperation(e);return i.isCollapsed||n.push(i),n.map(e=>new Vc(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),jc(Vc,Ic,(t,e)=>{const n=Qc(t.range,e);return n.map(e=>new Vc(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),jc(Vc,Oc,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const n=t.clone();return n.range=new Ks(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,n]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),jc(Rc,Vc,(t,e)=>{const n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const i=Zc(t,e.key,e.newValue);i&&n.push(i)}return n}),jc(Rc,Rc,(t,e,n)=>(t.position.isEqual(e.position)&&n.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),jc(Rc,Ic,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),jc(Rc,Oc,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),jc(Rc,Mc,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),jc(Dc,Rc,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),jc(Dc,Dc,(t,e,n)=>{if(t.name==e.name){if(!n.aIsStrong)return[new Nc(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),jc(Dc,Mc,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),jc(Dc,Ic,(t,e)=>{const n=[t];if(t.oldRange&&(t.oldRange=Ks._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const i=t.newRange._getTransformedByMoveOperation(e);t.newRange=i[0];for(let e=1;e<i.length;e++){const o=t.clone();o.oldRange=null,o.newRange=i[e],o.baseVersion=-1,n.push(o)}}return n}),jc(Dc,Oc,(t,e,n)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){const i=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?n.abRelation.wasStartBeforeMergedElement?t.newRange.start=Hs._createAt(e.insertionPosition):n.abRelation.wasInLeftElement?t.newRange.start=Hs._createAt(t.newRange.start):t.newRange.start=Hs._createAt(e.moveTargetPosition):t.newRange.start=i.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?t.newRange.end=Hs._createAt(e.insertionPosition):n.abRelation.wasInRightElement?t.newRange.end=Hs._createAt(e.moveTargetPosition):t.newRange.end=Hs._createAt(t.newRange.end):t.newRange.end=i.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),jc(Mc,Rc,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),jc(Mc,Mc,(t,e,n)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(n.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),t.sourcePosition=new Hs(e.graveyardPosition.root,n),t.howMany=0,[t]}return[new Nc(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){const i="$graveyard"==t.targetPosition.root.rootName,o="$graveyard"==e.targetPosition.root.rootName,r=i&&!o,s=o&&!i,a=s||!r&&n.aIsStrong;if(a){const n=e.targetPosition._getTransformedByMergeOperation(e),i=t.targetPosition._getTransformedByMergeOperation(e);return[new Ic(n,t.howMany,i,0)]}return[new Nc(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&n.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),jc(Mc,Ic,(t,e,n)=>{const i=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!n.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.sourcePosition)?[new Nc(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==n.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==n.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),jc(Mc,Oc,(t,e,n)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){const i=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(i||"mergeTargetNotMoved"==n.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t]}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==n.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),jc(Ic,Rc,(t,e)=>{const n=Ks._createFromPositionAndShift(t.sourcePosition,t.howMany),i=n._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),jc(Ic,Ic,(t,e,n)=>{const i=Ks._createFromPositionAndShift(t.sourcePosition,t.howMany),o=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,s=n.aIsStrong,a=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?a=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),tu(t,e)&&tu(e,t))return[e.getReversed()];const l=i.containsPosition(e.targetPosition);if(l&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),eu([i],r);const c=o.containsPosition(t.targetPosition);if(c&&o.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),eu([i],r);const u=me(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==u||"extension"==u)return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),eu([i],r);"remove"!=t.type||"remove"==e.type||n.aWasUndone||n.forceWeakRemove?"remove"==t.type||"remove"!=e.type||n.bWasUndone||n.forceWeakRemove||(s=!1):s=!0;const d=[],h=i.getDifference(o);for(const p of h){p.start=p.start._getTransformedByDeletion(e.sourcePosition,e.howMany),p.end=p.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const t="same"==me(p.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=p._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,t);d.push(...n)}const f=i.getIntersection(o);return null!==f&&s&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===d.length?d.push(f):1==d.length?o.start.isBefore(i.start)||o.start.isEqual(i.start)?d.unshift(f):d.push(f):d.splice(1,0,f)),0===d.length?[new Nc(t.baseVersion)]:eu(d,r)}),jc(Ic,Oc,(t,e,n)=>{let i=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(i=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==n.abRelation)return t.howMany++,t.targetPosition=i,[t];const o=Ks._createFromPositionAndShift(t.sourcePosition,t.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=n.abRelation||t.howMany++,t.targetPosition=i,[t];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let t=new Ks(e.splitPosition,o.end);t=t._getTransformedBySplitOperation(e);const n=[new Ks(o.start,e.splitPosition),t];return eu(n,i)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==n.abRelation&&(i=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==n.abRelation&&(i=t.targetPosition);const r=o._getTransformedBySplitOperation(e),s=[r];if(e.graveyardPosition){const i=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);t.howMany>1&&i&&!n.aWasUndone&&s.push(Ks._createFromPositionAndShift(e.insertionPosition,1))}return eu(s,i)}),jc(Ic,Mc,(t,e,n)=>{const i=Ks._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.sourcePosition))if("remove"!=t.type||n.forceWeakRemove){if(1==t.howMany)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Nc(0)]}else if(!n.aWasUndone){const n=[];let i=e.graveyardPosition.clone(),o=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(n.push(new Ic(t.sourcePosition,t.howMany-1,r,0)),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1),o=o._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const s=e.deletionPosition._getCombined(t.sourcePosition,r),a=new Ic(i,1,s,0),l=a.getMovedRangeStart().path.slice();l.push(0);const c=new Hs(a.targetPosition.root,l);o=o._getTransformedByMove(i,s,1);const u=new Ic(o,e.howMany,c,0);return n.push(a),n.push(u),n}const o=Ks._createFromPositionAndShift(t.sourcePosition,t.howMany),r=o._getTransformedByMergeOperation(e);return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),jc(Lc,Rc,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),jc(Lc,Mc,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),jc(Lc,Ic,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),jc(Lc,Lc,(t,e,n)=>{if(t.position.isEqual(e.position)){if(!n.aIsStrong)return[new Nc(0)];t.oldName=e.newName}return[t]}),jc(Lc,Oc,(t,e)=>{const n=t.position.path,i=e.splitPosition.getParentPath();if("same"==me(n,i)&&!e.graveyardPosition){const e=new Lc(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),jc(Bc,Bc,(t,e,n)=>{if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new Nc(0)];t.oldValue=e.newValue}return[t]}),jc(Fc,Fc,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new Nc(0)]:[t]),jc(Oc,Rc,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),jc(Oc,Mc,(t,e,n)=>{if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const i=new Hs(e.graveyardPosition.root,n),o=Oc.getInsertionPosition(new Hs(e.graveyardPosition.root,n)),r=new Oc(i,0,o,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Oc.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Oc.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),jc(Oc,Ic,(t,e,n)=>{const i=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const o=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&o){const n=t.splitPosition._getTransformedByMoveOperation(e),i=t.graveyardPosition._getTransformedByMoveOperation(e),o=i.path.slice();o.push(0);const r=new Hs(i.root,o),s=new Ic(n,t.howMany,r,0);return[s]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const o=t.splitPosition.isEqual(e.targetPosition);if(o&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Oc.getInsertionPosition(t.splitPosition),[t];if(o&&n.abRelation&&n.abRelation.howMany){const{howMany:e,offset:i}=n.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(i),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.splitPosition)){const n=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=n,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Oc.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=Oc.getInsertionPosition(t.splitPosition),[t]}),jc(Oc,Oc,(t,e,n)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Nc(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Nc(0)];if("splitBefore"==n.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const i="$graveyard"==t.splitPosition.root.rootName,o="$graveyard"==e.splitPosition.root.rootName,r=i&&!o,s=o&&!i,a=s||!r&&n.aIsStrong;if(a){const n=[];return e.howMany&&n.push(new Ic(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&n.push(new Ic(t.splitPosition,t.howMany,t.moveTargetPosition,0)),n}return[new Nc(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.baRelation){const n=e.insertionPosition.path.slice();n.push(0);const i=new Hs(e.insertionPosition.root,n),o=new Ic(t.insertionPosition,1,i,0);return[t,o]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Oc.getInsertionPosition(t.splitPosition),[t]});class nu extends(Ft(Hs)){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new Tt("model-liveposition-root-not-rootelement",t);iu.call(this)}detach(){this.stopListening()}toPosition(){return new Hs(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}function iu(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&ou.call(this,n)},{priority:"low"})}function ou(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}nu.prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};class ru{operations;isUndoable;isLocal;isUndo;isTyping;constructor(t={}){"string"===typeof t&&(t="transparent"===t?{isUndoable:!1}:{},At("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:i=!1,isTyping:o=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=i,this.isTyping=o}get baseVersion(){for(const t of this.operations)if(null!==t.baseVersion)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}class su{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(t){this._markerCollection=t}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size&&0==this._changedRoots.size}bufferOperation(t){const e=t;switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const t of e.range.getItems({shallow:!0}))this._isInInsertedElement(t.parent)||this._markAttribute(t);break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const t=this._isInInsertedElement(e.sourcePosition.parent),n=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),n||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const i=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const e of i.getItems({shallow:!0}))this._setElementState(e,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=Ks._createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getData();this.bufferMarkerChange(e.name,t,t)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const t=e.splitPosition.parent;if(!this._isInInsertedElement(t)){this._markRemove(t,e.splitPosition.offset,e.howMany);const n=Ks._createFromPositionAndShift(e.splitPosition,e.howMany);for(const t of n.getItems({shallow:!0}))this._setElementState(t,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const t=e.sourcePosition.parent;this._isInInsertedElement(t.parent)||this._markRemove(t.parent,t.startOffset,1);const n=e.graveyardPosition.parent;this._markInsert(n,e.graveyardPosition.offset,1),this._setElementState(t,"move");const i=e.targetPosition.parent;if(!this._isInInsertedElement(i)){this._markInsert(i,e.targetPosition.offset,t.maxOffset);const n=Ks._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const t of n.getItems({shallow:!0}))this._setElementState(t,"move")}break}case"detachRoot":case"addRoot":{const t=e.affectedSelectable;if(!t._isLoaded)return;if(t.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const t=e.root.rootName;this._bufferRootAttributeChange(t,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let i=this._changedMarkers.get(t);i?i.newMarkerData=n:(i={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,i)),null==i.oldMarkerData.range&&null==n.range&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.oldMarkerData.range&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.newMarkerData.range&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length)return!0;if(this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,i=!t.range&&e.range,o=t.range&&e.range&&!t.range.isEqual(e.range);if(n||i||o)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const t=this._changesInElement.get(n).sort((t,e)=>t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1),i=this._elementChildrenSnapshots.get(n),o=lu(n.getChildren()),r=cu(i.length,t);let s=0,a=0;for(const l of r)if("i"===l){const t=this._getDiffActionForNode(o[s].node,"insert"),i=this._elementsSnapshots.get(o[s].node),r=this._getInsertDiff(n,s,t,o[s],i);e.push(r),s++}else if("r"===l){const t=this._getDiffActionForNode(i[a].node,"remove"),o=this._getRemoveDiff(n,s,t,i[a]);e.push(o),a++}else if("a"===l){const t=i[a].attributes,r=o[s].attributes;let l;if("$text"==o[s].name)l=new Ks(Hs._createAt(n,s),Hs._createAt(n,s+1));else{const t=n.offsetToIndex(s);l=new Ks(Hs._createAt(n,s),Hs._createAt(n.getChild(t),0))}const c=this._getAttributesDiff(l,t,r);e.push(...c),s++,a++}else s++,a++}e.sort((t,e)=>t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1);for(let n=1,i=0;n<e.length;n++){const t=e[i],o=e[n],r="remove"==t.type&&"remove"==o.type&&"$text"==t.name&&"$text"==o.name&&t.position.isEqual(o.position),s="insert"==t.type&&"insert"==o.type&&"$text"==t.name&&"$text"==o.name&&t.position.parent==o.position.parent&&t.position.offset+t.length==o.position.offset,a="attribute"==t.type&&"attribute"==o.type&&t.position.parent==o.position.parent&&t.range.isFlat&&o.range.isFlat&&t.position.offset+t.length==o.position.offset&&t.attributeKey==o.attributeKey&&t.attributeOldValue==o.attributeOldValue&&t.attributeNewValue==o.attributeNewValue;r||s||a?(t.length++,a&&(t.range.end=t.range.end.getShiftedBy(1)),e[n]=null):i=n}e=e.filter(t=>t);for(const n of e)delete n.changeCount,"attribute"==n.type&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(uu),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return void 0!==e.state&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=Ks._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const t=n.getData();this.bufferMarkerChange(n.name,t,t)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const t=e.getData();this.bufferMarkerChange(e.name,{...t,range:null},t)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t))return void this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});const n=this._changedRoots.get(t);void 0!==n.state?(delete n.state,void 0===n.attributes&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,i){const o=this._changedRoots.get(t)||{name:t},r=o.attributes||{};if(r[e]){const t=r[e];i===t.oldValue?delete r[e]:t.newValue=i}else r[e]={oldValue:n,newValue:i};0===Object.entries(r).length?(delete o.attributes,void 0===o.state&&this._changedRoots.delete(t)):(o.attributes=r,this._changedRoots.set(t,o))}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const i={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const i={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let i=0;i<n.length;i++)n[i].howMany<1&&(n.splice(i,1),i--)}_setElementState(t,e){if(!t.is("element"))return;const n=su._statesPriority.indexOf(this._elementState.get(t)),i=su._statesPriority.indexOf(e);i>n&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element"))return e;if(!this._elementsSnapshots.has(t))return e;const n=this._elementState.get(t);return n&&"move"!=n?n:e}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=lu(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const n of e)this._elementsSnapshots.set(n.node,n)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const i=t.offset+t.howMany,o=n.offset+n.howMany;if("insert"==t.type&&("insert"==n.type&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<o&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==n.type&&t.offset<n.offset&&(n.offset+=t.howMany),"attribute"==n.type))if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<o){const o=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:i,howMany:o-n.howMany,count:this._changeCount++})}if("remove"==t.type){if("insert"==n.type)if(i<=n.offset)n.offset-=t.howMany;else if(i<=o)if(t.offset<n.offset){const e=i-n.offset;n.offset=t.offset,n.howMany-=e,t.nodesToHandle-=e}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<o){const e=o-t.offset;n.howMany-=e,t.nodesToHandle-=e}if("remove"==n.type&&(i<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),"attribute"==n.type)if(i<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const e=i-n.offset;n.offset=t.offset,n.howMany-=e}else if(t.offset<o)if(i<=o){const i=n.howMany;n.howMany=t.offset-n.offset;const o=i-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:o,count:this._changeCount++})}else n.howMany-=o-t.offset}if("attribute"==t.type){if("insert"==n.type)if(t.offset<n.offset&&i>n.offset){if(i>o){const t={type:"attribute",offset:o,howMany:i-o,count:this._changeCount++};this._handleChange(t,e),e.push(t)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<o&&(i>o?(t.nodesToHandle=i-o,t.offset=o):t.nodesToHandle=0);if("remove"==n.type&&t.offset<n.offset&&i>n.offset){const o={type:"attribute",offset:n.offset,howMany:i-n.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}"attribute"==n.type&&(t.offset>=n.offset&&i<=o?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&i>=o&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n,i,o){const r={type:"insert",position:Hs._createAt(t,e),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++,action:n};return"insert"!=n&&o&&(r.before={name:o.name,attributes:new Map(o.attributes)}),r}_getRemoveDiff(t,e,n,i){return{type:"remove",action:n,position:Hs._createAt(t,e),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const i=[];n=new Map(n);for(const[o,r]of e){const e=n.has(o)?n.get(o):null;e!==r&&i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:e,changeCount:this._changeCount++}),n.delete(o)}for(const[o,r]of n)i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return i}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),i=t.startOffset;if(n)for(const o of n)if("insert"==o.type&&i>=o.offset&&i<o.offset+o.howMany)return!0;return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const i=new Ks(Hs._createAt(t,e),Hs._createAt(t,e+n));for(const o of i.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function au(t){return{node:t,name:t.is("$text")?"$text":t.name,attributes:new Map(t.getAttributes())}}function lu(t){const e=[];for(const n of t)if(n.is("$text"))for(let t=0;t<n.data.length;++t)e.push(au(n));else e.push(au(n));return e}function cu(t,e){const n=[];let i=0,o=0;for(const r of e){if(r.offset>i){for(let t=0;t<r.offset-i;t++)n.push("e");o+=r.offset-i}if("insert"==r.type){for(let t=0;t<r.howMany;t++)n.push("i");i=r.offset+r.howMany}else if("remove"==r.type){for(let t=0;t<r.howMany;t++)n.push("r");i=r.offset,o+=r.howMany}else{if(r.howMany>1500)for(let t=0;t<r.howMany;t++)n.push("a");else n.push(..."a".repeat(r.howMany).split(""));i=r.offset+r.howMany,o+=r.howMany}}if(o<t)for(let r=0;r<t-o-i;r++)n.push("e");return n}function uu(t){const e="position"in t&&"$graveyard"==t.position.root.rootName,n="range"in t&&"$graveyard"==t.range.root.rootName;return!e&&!n}class du{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new Tt("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];void 0===t&&(t=n.baseVersion);let i=e-1;for(const[s,a]of this._gaps)t>s&&t<a&&(t=a),i>s&&i<a&&(i=s-1);if(i<n.baseVersion||t>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(t);void 0===o&&(o=0);let r=this._baseVersionToOperationIndex.get(i);return void 0===r&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(void 0!==e)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class hu extends xa{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,n="main"){super(e),this._document=t,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}hu.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t};const fu="$graveyard";class pu extends(Ft()){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(t){super(),this.model=t,this.history=new du,this.selection=new va(this),this.roots=new zn({idProperty:"rootName"}),this.differ=new su(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",fu),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&this.differ.bufferOperation(n)},{priority:"high"}),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&this.history.addOperation(n)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(t,e,n,i,o)=>{const r={...e.getData(),range:i};this.differ.bufferMarkerChange(e.name,o,r),null===n&&e.on("change",(t,n)=>{const i=e.getData();this.differ.bufferMarkerChange(e.name,{...i,range:n},i)})}),this.registerPostFixer(t=>{let e=!1;for(const n of this.roots)n.isAttached()||n.isEmpty||(t.remove(t.createRangeIn(n)),e=!0);for(const n of this.model.markers)n.getRange().root.isAttached()||(t.removeMarker(n),e=!0);return e})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(fu)}createRoot(t="$root",e="main"){if(this.roots.get(e))throw new Tt("model-document-createroot-name-exists",this,{name:e});const n=new hu(this,t,e);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(t=>t.rootName)}getRoots(t=!1){return this.roots.filter(e=>e!=this.graveyard&&(t||e.isAttached())&&e._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=Ji(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=this.model,n=e.schema,i=e.createPositionFromPath(t,[0]),o=n.getNearestSelectionRange(i);return o||e.createRange(i)}_validateSelectionRange(t){return t.start.isValid()&&t.end.isValid()&&gu(t.start)&&gu(t.end)}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(this.selection.refresh(),e=n(t),e)break}while(e)}}function gu(t){const e=t.textNode;if(e){const n=e.data,i=t.offset-e.startOffset;return!oi(n,i)&&!ri(n,i)}return!0}class mu extends(Ft()){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(t){const e=t instanceof bu?t.name:t;return this._markers.has(e)}get(t){return this._markers.get(t)||null}_set(t,e,n=!1,i=!1){const o=t instanceof bu?t.name:t;if(o.includes(","))throw new Tt("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const t=r.getData(),s=r.getRange();let a=!1;return s.isEqual(e)||(r._attachLiveRange(ha.fromRange(e)),a=!0),n!=r.managedUsingOperations&&(r._managedUsingOperations=n,a=!0),"boolean"===typeof i&&i!=r.affectsData&&(r._affectsData=i,a=!0),a&&this.fire(`update:${o}`,r,s,e,t),r}const s=ha.fromRange(e),a=new bu(o,s,n,i);return this._markers.set(o,a),this.fire(`update:${o}`,a,null,e,{...a.getData(),range:null}),a}_remove(t){const e=t instanceof bu?t.name:t,n=this._markers.get(e);return!!n&&(this._markers.delete(e),this.fire(`update:${e}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0)}_refresh(t){const e=t instanceof bu?t.name:t,n=this._markers.get(e);if(!n)throw new Tt("markercollection-refresh-marker-not-exists",this);const i=n.getRange();this.fire(`update:${e}`,n,i,i,n.getData())}*getMarkersAtPosition(t){for(const e of this)e.getRange().containsPosition(t)&&(yield e)}*getMarkersIntersectingRange(t){for(const e of this)null!==e.getRange().getIntersection(t)&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class bu extends(Ft(Ls)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,n,i){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new Tt("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new Tt("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new Tt("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new Tt("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new Tt("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}bu.prototype.is=function(t){return"marker"===t||"model:marker"===t};class vu extends yc{sourcePosition;howMany;constructor(t,e){super(null),this.sourcePosition=t.clone(),this.howMany=e}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new Tt("detach-operation-on-document-node",this)}_execute(){Cc(Ks._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class wu extends Ls{markers=new Map;_children=new ka;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const n of t)e=e.getChildAtOffset(n);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const n of t)n.name?e.push(xa.fromJSON(n)):e.push(ma.fromJSON(n));return new wu(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=_u(e);for(const i of n)null!==i.parent&&i._remove(),i.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const i of n)i.parent=null;return n}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}function _u(t){return"string"==typeof t?[new ma(t)]:(be(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new ma(t):t instanceof Bs?new ma(t.data,t.getAttributes()):t))}wu.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t};class yu{model;batch;constructor(t,e){this.model=t,this.batch=e}createText(t,e){return new ma(t,e)}createElement(t,e){return new xa(t,e)}createDocumentFragment(){return new wu}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof ma&&""==t.data)return;const i=Hs._createAt(e,n);if(t.parent){if(Su(t.root,i.root))return void this.move(Ks._createOn(t),i);if(t.root.document)throw new Tt("model-writer-insert-forbidden-move",this);this.remove(t)}const o=i.root.document?i.root.document.version:null,r=t instanceof wu?t._removeChildren(0,t.childCount):t,s=new Rc(i,r,o);if(t instanceof ma&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),t instanceof wu)for(const[a,l]of t.markers){const t=Hs._createAt(l.root,0),e=new Ks(l.start._getCombined(t,i),l.end._getCombined(t,i)),n={range:e,usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,n):this.addMarker(a,n)}}insertText(t,e,n,i){e instanceof wu||e instanceof xa||e instanceof Hs?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,i)}insertElement(t,e,n,i){e instanceof wu||e instanceof xa||e instanceof Hs?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,i)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof wu||e instanceof xa?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof wu||e instanceof xa?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof Ks){const i=n.getMinimalFlatRanges();for(const n of i)ku(this,t,e,n)}else Cu(this,t,e,n)}setAttributes(t,e){for(const[n,i]of Yn(t))this.setAttribute(n,i,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Ks){const n=e.getMinimalFlatRanges();for(const e of n)ku(this,t,null,e)}else Cu(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=t=>{for(const e of t.getAttributeKeys())this.removeAttribute(e,t)};if(t instanceof Ks)for(const n of t.getItems())e(n);else e(t)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof Ks))throw new Tt("writer-move-invalid-range",this);if(!t.isFlat)throw new Tt("writer-move-range-not-flat",this);const i=Hs._createAt(e,n);if(i.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!Su(t.root,i.root))throw new Tt("writer-move-different-document",this);const o=t.root.document?t.root.document.version:null,r=new Ic(t.start,t.end.offset-t.start.offset,i,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(t){this._assertWriterUsedCorrectly();const e=t instanceof Ks?t:Ks._createOn(t),n=e.getMinimalFlatRanges().reverse();for(const i of n)this._addOperationForAffectedMarkers("move",i),Eu(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof xa))throw new Tt("writer-merge-no-element-before",this);if(!(n instanceof xa))throw new Tt("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(Ks._createIn(n),Hs._createAt(e,"end")),this.remove(n)}_merge(t){const e=Hs._createAt(t.nodeBefore,"end"),n=Hs._createAt(t.nodeAfter,0),i=t.root.document.graveyard,o=new Hs(i,[0]),r=t.root.document.version,s=new Mc(n,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(s),this.model.applyOperation(s)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof xa))throw new Tt("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,i=new Lc(Hs._createBefore(t),t.name,e,n);this.batch.addOperation(i),this.model.applyOperation(i)}split(t,e){this._assertWriterUsedCorrectly();let n,i,o=t.parent;if(!o.parent)throw new Tt("writer-split-element-no-parent",this);if(e||(e=o.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new Tt("writer-split-invalid-limit-element",this);do{const e=o.root.document?o.root.document.version:null,r=o.maxOffset-t.offset,s=Oc.getInsertionPosition(t),a=new Oc(t,r,s,null,e);this.batch.addOperation(a),this.model.applyOperation(a),n||i||(n=o,i=t.parent.nextSibling),t=this.createPositionAfter(t.parent),o=t.parent}while(o!==e);return{position:t,range:new Ks(Hs._createAt(n,"end"),Hs._createAt(i,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new Tt("writer-wrap-range-not-flat",this);const n=e instanceof xa?e:new xa(e);if(n.childCount>0)throw new Tt("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new Tt("writer-wrap-element-attached",this);this.insert(n,t.start);const i=new Ks(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(i,Hs._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new Tt("writer-unwrap-element-no-parent",this);this.move(Ks._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new Tt("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,i=e.range,o=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new Tt("writer-addmarker-marker-exists",this);if(!i)throw new Tt("writer-addmarker-no-range",this);return n?(xu(this,t,null,i,o),this.model.markers.get(t)):this.model.markers._set(t,i,n,o)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n="string"==typeof t?t:t.name,i=this.model.markers.get(n);if(!i)throw new Tt("writer-updatemarker-marker-not-exists",this);if(!e)return At("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),void this.model.markers._refresh(i);const o="boolean"==typeof e.usingOperation,r="boolean"==typeof e.affectsData,s=r?e.affectsData:i.affectsData;if(!o&&!e.range&&!r)throw new Tt("writer-updatemarker-wrong-options",this);const a=i.getRange(),l=e.range?e.range:a;o&&e.usingOperation!==i.managedUsingOperations?e.usingOperation?xu(this,n,null,l,s):(xu(this,n,a,null,s),this.model.markers._set(n,l,void 0,s)):i.managedUsingOperations?xu(this,n,a,l,s):this.model.markers._set(n,l,void 0,s)}removeMarker(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new Tt("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);if(!n.managedUsingOperations)return void this.model.markers._remove(e);const i=n.getRange();xu(this,e,i,null,n.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(t);if(n&&n.isAttached())throw new Tt("writer-addroot-root-exists",this);const i=this.model.document,o=new Fc(t,e,!0,i,i.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new Tt("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===e&&this.removeMarker(o);for(const o of e.getAttributeKeys())this.removeAttribute(o,e);this.remove(this.createRangeIn(e));const n=this.model.document,i=new Fc(e.rootName,e.name,!1,n,n.version);this.batch.addOperation(i),this.model.applyOperation(i)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"===typeof t)this._setSelectionAttribute(t,e);else for(const[n,i]of Yn(t))this._setSelectionAttribute(n,i)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"===typeof t)this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const i=va._getStoreAttributeKey(t);this.setAttribute(i,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=va._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new Tt("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const i=n.getRange();let o=!1;if("move"===t){const t=e;o=t.containsPosition(i.start)||t.start.isEqual(i.start)||t.containsPosition(i.end)||t.end.isEqual(i.end)}else{const t=e,n=t.nodeBefore,r=t.nodeAfter,s=i.start.parent==n&&i.start.isAtEnd,a=i.end.parent==r&&0==i.end.offset,l=i.end.nodeAfter==r,c=i.start.nodeAfter==r;o=s||a||l||c}o&&this.updateMarker(n.name,{range:i})}}}function ku(t,e,n,i){const o=t.model,r=o.document;let s,a,l,c=i.start;for(const d of i.getWalker({shallow:!0}))l=d.item.getAttribute(e),s&&a!=l&&(a!=n&&u(),c=s),s=d.nextPosition,a=l;function u(){const i=new Ks(c,s),l=i.root.document?r.version:null,u=new Vc(i,e,a,n,l);t.batch.addOperation(u),o.applyOperation(u)}s instanceof Hs&&s!=c&&a!=n&&u()}function Cu(t,e,n,i){const o=t.model,r=o.document,s=i.getAttribute(e);let a,l;if(s!=n){const c=i.root===i;if(c){const t=i.document?r.version:null;l=new Bc(i,e,s,n,t)}else{a=new Ks(Hs._createBefore(i),t.createPositionAfter(i));const o=a.root.document?r.version:null;l=new Vc(a,e,s,n,o)}t.batch.addOperation(l),o.applyOperation(l)}}function xu(t,e,n,i,o){const r=t.model,s=r.document,a=new Dc(e,n,i,r.markers,!!o,s.version);t.batch.addOperation(a),r.applyOperation(a)}function Eu(t,e,n,i){let o;if(t.root.document){const n=i.document,r=new Hs(n.graveyard,[0]);o=new Ic(t,e,r,n.version)}else o=new vu(t,e);n.addOperation(o),i.applyOperation(o)}function Su(t,e){return t===e||t instanceof hu&&e instanceof hu}function Tu(t){t.document.registerPostFixer(e=>Au(e,t))}function Au(t,e){const n=e.document.selection,i=e.schema,o=[];let r=!1;for(const s of n.getRanges()){const t=Pu(s,i);t&&!t.isEqual(s)?(o.push(t),r=!0):o.push(s)}return r&&t.setSelection(Du(o),{backward:n.isBackward}),!1}function Pu(t,e){return t.isCollapsed?Iu(t,e):Ru(t,e)}function Iu(t,e){const n=t.start,i=e.getNearestSelectionRange(n);if(!i){const t=n.getAncestors().reverse().find(t=>e.isObject(t));return t?Ks._createOn(t):null}if(!i.isCollapsed)return i;const o=i.start;return n.isEqual(o)?null:new Ks(o)}function Ru(t,e){const{start:n,end:i}=t,o=e.checkChild(n,"$text"),r=e.checkChild(i,"$text"),s=e.getLimitElement(n),a=e.getLimitElement(i);if(s===a){if(o&&r)return null;if(Mu(n,i,e)){const t=n.nodeAfter&&e.isSelectable(n.nodeAfter),o=t?null:e.getNearestSelectionRange(n,"forward"),r=i.nodeBefore&&e.isSelectable(i.nodeBefore),s=r?null:e.getNearestSelectionRange(i,"backward"),a=o?o.start:n,l=s?s.end:i;return new Ks(a,l)}}const l=s&&!s.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const t=n.nodeAfter&&i.nodeBefore&&n.nodeAfter.parent===i.nodeBefore.parent,o=l&&(!t||!Vu(n.nodeAfter,e)),r=c&&(!t||!Vu(i.nodeBefore,e));let u=n,d=i;return o&&(u=Hs._createBefore(Ou(s,e))),r&&(d=Hs._createAfter(Ou(a,e))),new Ks(u,d)}return null}function Ou(t,e){let n=t,i=n;while(e.isLimit(i)&&i.parent)n=i,i=i.parent;return n}function Mu(t,e,n){const i=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),o=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return i||o}function Du(t){const e=[...t],n=new Set;let i=1;while(i<e.length){const t=e[i],o=e.slice(0,i);for(const[r,s]of o.entries())if(!n.has(r))if(t.isEqual(s))n.add(r);else if(t.isIntersecting(s)){n.add(r),n.add(i);const o=t.getJoined(s);e.push(o)}i++}const o=e.filter((t,e)=>!n.has(e));return o}function Vu(t,e){return t&&e.isSelectable(t)}function Nu(t,e,n={}){if(e.isCollapsed)return;const i=e.getFirstRange();if("$graveyard"==i.root.rootName)return;const o=t.schema;t.change(t=>{if(!n.doNotResetEntireContent&&Yu(o,e))return void Ku(t,e);const r={};if(!n.doNotAutoparagraph){const t=e.getSelectedElement();t&&Object.assign(r,o.getAttributesWithProperty(t,"copyOnReplace",!0))}let s,a;n.doNotFixSelection?(s=nu.fromPosition(i.start,"toPrevious"),a=nu.fromPosition(i.end,"toNext")):[s,a]=Lu(i),s.isTouching(a)||t.remove(t.createRange(s,a)),n.leaveUnmerged||(Fu(t,s,a),o.removeDisallowedAttributes(s.parent.getChildren(),t)),Xu(t,e,s),!n.doNotAutoparagraph&&Uu(o,s)&&Gu(t,s,e,r),s.detach(),a.detach()})}function Lu(t){const e=t.root.document.model,n=t.start;let i=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){const n=Bu(i);if(n&&i.isTouching(e.createPositionAt(n,0))){const n=e.createSelection(t);e.modifySelection(n,{direction:"backward"});const o=n.getLastPosition(),r=e.createRange(o,i);e.hasContent(r,{ignoreMarkers:!0})||(i=o)}}return[nu.fromPosition(n,"toPrevious"),nu.fromPosition(i,"toNext")]}function Bu(t){const e=t.parent,n=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const o of i){if(n.isLimit(o))return null;if(n.isBlock(o))return o}}function Fu(t,e,n){const i=t.model;if(!ju(t.model.schema,e,n))return;const[o,r]=$u(e,n);o&&r&&(!i.hasContent(o,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?Hu(t,e,n,o.parent):zu(t,e,n,o.parent))}function zu(t,e,n,i){const o=e.parent,r=n.parent;if(o!=i&&r!=i){e=t.createPositionAfter(o),n=t.createPositionBefore(r),n.isEqual(e)||t.insert(r,e),t.merge(e);while(n.parent.isEmpty){const e=n.parent;n=t.createPositionBefore(e),t.remove(e)}ju(t.model.schema,e,n)&&zu(t,e,n,i)}}function Hu(t,e,n,i){const o=e.parent,r=n.parent;if(o!=i&&r!=i){e=t.createPositionAfter(o),n=t.createPositionBefore(r),n.isEqual(e)||t.insert(o,n);while(e.parent.isEmpty){const n=e.parent;e=t.createPositionBefore(n),t.remove(n)}n=t.createPositionBefore(r),Wu(t,n),ju(t.model.schema,e,n)&&Hu(t,e,n,i)}}function Wu(t,e){const n=e.nodeBefore,i=e.nodeAfter;n.name!=i.name&&t.rename(n,i.name),t.clearAttributes(n),t.setAttributes(Object.fromEntries(i.getAttributes()),n),t.merge(e)}function ju(t,e,n){const i=e.parent,o=n.parent;return i!=o&&(!t.isLimit(i)&&!t.isLimit(o)&&qu(e,n,t))}function $u(t,e){const n=t.getAncestors(),i=e.getAncestors();let o=0;while(n[o]&&n[o]==i[o])o++;return[n[o],i[o]]}function Uu(t,e){const n=t.checkChild(e,"$text"),i=t.checkChild(e,"paragraph");return!n&&i}function qu(t,e,n){const i=new Ks(t,e);for(const o of i.getWalker())if(n.isLimit(o.item))return!1;return!0}function Gu(t,e,n,i={}){const o=t.createElement("paragraph");t.model.schema.setAllowedAttributes(o,i,t),t.insert(o,e),Xu(t,n,t.createPositionAt(o,0))}function Ku(t,e){const n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),Gu(t,t.createPositionAt(n,0),e)}function Yu(t,e){const n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;const i=e.getFirstRange();return i.start.parent!=i.end.parent&&t.checkChild(n,"paragraph")}function Xu(t,e,n){e instanceof va?t.setSelection(n):e.setTo(n)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ju(t,e){return t.change(t=>{const n=t.createDocumentFragment(),i=e.getFirstRange();if(!i||i.isCollapsed)return n;const o=i.start.root,r=i.start.getCommonPath(i.end),s=o.getNodeByPath(r);let a;a=i.start.parent==i.end.parent?i:t.createRange(t.createPositionAt(s,i.start.path[r.length]),t.createPositionAt(s,i.end.path[r.length]+1));const l=a.end.offset-a.start.offset;for(const e of a.getItems({shallow:!0}))e.is("$textProxy")?t.appendText(e.data,e.getAttributes(),n):t.append(t.cloneElement(e,!0),n);if(a!=i){const e=i._getTransformedByMove(a.start,t.createPositionAt(n,0),l)[0],o=t.createRange(t.createPositionAt(n,0),e.start),r=t.createRange(e.end,t.createPositionAt(n,"end"));Zu(r,t),Zu(o,t)}return n})}function Zu(t,e){const n=[];Array.from(t.getItems({direction:"backward"})).map(t=>e.createRangeOn(t)).filter(e=>{const n=(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end));return n}).forEach(t=>{n.push(t.start.parent),e.remove(t)}),n.forEach(t=>{let n=t;while(n.parent&&n.isEmpty){const t=e.createRangeOn(n);n=n.parent,e.remove(t)}})}function Qu(t,e,n){return t.change(i=>{const o=n||t.document.selection;o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0});const r=new td(t,i,o.anchor),s=[];let a;if(e.is("documentFragment")){if(e.markers.size){const t=[];for(const[n,i]of e.markers){const{start:e,end:o}=i,r=e.isEqual(o);t.push({position:e,name:n,isCollapsed:r},{position:o,name:n,isCollapsed:r})}t.sort(({position:t},{position:e})=>t.isBefore(e)?1:-1);for(const{position:n,name:o,isCollapsed:r}of t){let t=null,a=null;const l=n.parent===e&&n.isAtStart,c=n.parent===e&&n.isAtEnd;l||c?r&&(a=l?"start":"end"):(t=i.createElement("$marker"),i.insert(t,n)),s.push({name:o,element:t,collapsed:a})}}a=e.getChildren()}else a=[e];r.handleNodes(a);let l=r.getSelectionRange();if(e.is("documentFragment")&&s.length){const t=l?ha.fromRange(l):null,e={};for(let n=s.length-1;n>=0;n--){const{name:t,element:o,collapsed:a}=s[n],l=!e[t];if(l&&(e[t]=[]),o){const n=i.createPositionAt(o,"before");e[t].push(n),i.remove(o)}else{const n=r.getAffectedRange();if(!n){a&&e[t].push(r.position);continue}a?e[t].push(n[a]):e[t].push(l?n.start:n.end)}}for(const[n,[o,r]]of Object.entries(e))o&&r&&o.root===r.root&&o.root.document&&!i.model.markers.has(n)&&i.addMarker(n,{usingOperation:!0,affectsData:!0,range:new Ks(o,r)});t&&(l=t.toRange(),t.detach())}
/* istanbul ignore else -- @preserve */l&&(o instanceof va?i.setSelection(l):o.setTo(l));const c=r.getAffectedRange()||t.createRange(o.anchor);return r.destroy(),c})}class td{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(t,e,n){this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))e.offsetSize>0&&this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){
/* istanbul ignore if -- @preserve */if(this._lastNode=t,this.position.parent!=t||!this.position.isAtEnd)throw new Tt("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Ks._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Ks(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){this._checkAndSplitToAllowedPosition(t)?(t=this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t):this.schema.isObject(t)||this._handleDisallowedNode(t)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=nu.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){
/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new Tt("insertcontent-wrong-position",this,{node:t,position:this.position});return this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),t.parent||(t=this._documentFragmentPosition.nodeBefore),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t),t}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=nu.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=nu.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof xa))return;if(!this._canMergeLeft(t))return;const e=nu._createBefore(t);e.stickiness="toNext";const n=nu.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=nu._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=nu._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof xa))return;if(!this._canMergeRight(t))return;const e=nu._createAfter(t);
/* istanbul ignore if -- @preserve */if(e.stickiness="toNext",!this.position.isEqual(e))throw new Tt("insertcontent-invalid-insertion-position",this);this.position=Hs._createAt(e.nodeBefore,"end");const n=nu.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=nu._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=nu._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof xa&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof xa&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;e!=this.position.parent&&this._insertPartialFragment();while(e!=this.position.parent)if(this.position.isAtStart){const t=this.position.parent;this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===e&&this.writer.remove(t)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const t=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){const n=this.schema.createContext(t);return this.schema.checkChild(n,e)||this.schema.checkChild(n,"paragraph")&&this.schema.checkChild(n.push("paragraph"),e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function ed(t,e,n,i={}){if(!t.schema.isObject(e))throw new Tt("insertobject-element-not-an-object",t,{object:e});const o=n||t.document.selection;let r=o;i.findOptimalPosition&&t.schema.isBlock(e)&&(r=t.createSelection(t.schema.findOptimalInsertionRange(o,i.findOptimalPosition)));const s=Hn(o.getSelectedBlocks()),a={};return s&&Object.assign(a,t.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),t.change(n=>{r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0});let o=e;const s=r.anchor.parent,l=t.schema.createContext(s);!t.schema.checkChild(l,e)&&t.schema.checkChild(l,"paragraph")&&t.schema.checkChild(l.push("paragraph"),e)&&(o=n.createElement("paragraph"),n.insert(e,o)),t.schema.setAllowedAttributes(o,a,n);const c=t.insertContent(o,r);return c.isCollapsed||i.setSelection&&nd(n,e,i.setSelection,a),c})}function nd(t,e,n,i){const o=t.model;if("on"==n)return void t.setSelection(e,"on");if("after"!=n)throw new Tt("insertobject-invalid-place-parameter-value",o);let r=e.nextSibling;if(o.schema.isInline(e))return void t.setSelection(e,"after");const s=r&&o.schema.checkChild(r,"$text");!s&&o.schema.checkChild(e.parent,"paragraph")&&(r=t.createElement("paragraph"),o.schema.setAllowedAttributes(r,i,t),o.insertContent(r,t.createPositionAfter(e))),r&&t.setSelection(r,0)}const id=' ,.?!:;"-()';function od(t,e,n={}){const i=t.schema,o="backward"!=n.direction,r=n.unit?n.unit:"character",s=!!n.treatEmojiAsSingleUnit,a=e.focus,l=new Fs({boundaries:ld(a,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:l,schema:i,isForward:o,unit:r,treatEmojiAsSingleUnit:s};let u;while(u=l.next()){if(u.done)return;const n=rd(c,u.value);if(n)return void(e instanceof va?t.change(t=>{t.setSelectionFocus(n)}):e.setFocus(n))}}function rd(t,e){const{isForward:n,walker:i,unit:o,schema:r,treatEmojiAsSingleUnit:s}=t,{type:a,item:l,nextPosition:c}=e;if("text"==a)return"word"===t.unit?ad(i,n):sd(i,o,s);if(a==(n?"elementStart":"elementEnd")){if(r.isSelectable(l))return Hs._createAt(l,n?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(l))return void i.skip(()=>!0);if(r.checkChild(c,"$text"))return c}}function sd(t,e,n){const i=t.position.textNode;if(i){const o=i.data;let r=t.position.offset-i.startOffset;while(oi(o,r)||"character"==e&&ri(o,r)||n&&ai(o,r))t.next(),r=t.position.offset-i.startOffset}return t.position}function ad(t,e){let n=t.position.textNode;n||(n=e?t.position.nodeAfter:t.position.nodeBefore);while(n&&n.is("$text")){const i=t.position.offset-n.startOffset;if(ud(n,i,e))n=e?t.position.nodeAfter:t.position.nodeBefore;else{if(cd(n.data,i,e))break;t.next()}}return t.position}function ld(t,e){const n=t.root,i=Hs._createAt(n,e?"end":0);return e?new Ks(t,i):new Ks(i,t)}function cd(t,e,n){const i=e+(n?0:-1);return id.includes(t.charAt(i))}function ud(t,e,n){return e===(n?t.offsetSize:0)}class dd extends(ie()){markers;document;schema;_pendingChanges;_currentWriter;constructor(){super(),this.markers=new mu,this.document=new pu(this),this.schema=new $l,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,e)=>{const n=e[0];n._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),Tu(this),this.document.registerPostFixer(_l),this.on("insertContent",(t,[e,n])=>{t.return=Qu(this,e,n)}),this.on("insertObject",(t,[e,n,i])=>{t.return=ed(this,e,n,i)}),this.on("canEditAt",t=>{const e=!this.document.isReadOnly;t.return=e,e||t.stop()})}change(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new ru,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(e){
/* istanbul ignore next -- @preserve */Tt.rethrowUnexpectedError(e,this)}}enqueueChange(t,e){try{t?"function"===typeof t?(e=t,t=new ru):t instanceof ru||(t=new ru(t)):t=new ru,this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(n){
/* istanbul ignore next -- @preserve */Tt.rethrowUnexpectedError(n,this)}}applyOperation(t){t._execute()}insertContent(t,e,n,...i){const o=hd(e,n);return this.fire("insertContent",[t,o,n,...i])}insertObject(t,e,n,i,...o){const r=hd(e,n);return this.fire("insertObject",[t,r,i,i,...o])}deleteContent(t,e){Nu(this,t,e)}modifySelection(t,e){od(this,t,e)}getSelectedContent(t){return Ju(this,t)}hasContent(t,e={}){const n=t instanceof Ks?t:Ks._createIn(t);if(n.isCollapsed)return!1;const{ignoreWhitespaces:i=!1,ignoreMarkers:o=!1}=e;if(!o)for(const r of this.markers.getMarkersIntersectingRange(n))if(r.affectsData)return!0;for(const r of n.getItems())if(this.schema.isContent(r)){if(!r.is("$textProxy"))return!0;if(!i)return!0;if(-1!==r.data.search(/\S/))return!0}return!1}canEditAt(t){const e=hd(t);return this.fire("canEditAt",[e])}createPositionFromPath(t,e,n){return new Hs(t,e,n)}createPositionAt(t,e){return Hs._createAt(t,e)}createPositionAfter(t){return Hs._createAfter(t)}createPositionBefore(t){return Hs._createBefore(t)}createRange(t,e){return new Ks(t,e)}createRangeIn(t){return Ks._createIn(t)}createRangeOn(t){return Ks._createOn(t)}createSelection(...t){return new oa(...t)}createBatch(t){return new ru(t)}createOperationFromJSON(t){return Hc.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{while(this._pendingChanges.length){const e=this._pendingChanges[0].batch;this._currentWriter=new yu(this,e);const n=this._pendingChanges[0].callback(this._currentWriter);t.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}}function hd(t,e){if(t)return t instanceof oa||t instanceof va?t:t instanceof ia?e||0===e?new oa(t,e):t.is("rootElement")?new oa(t,"in"):new oa(t,"on"):new oa(t)}class fd extends ys{domEventType="click";onDomEvent(t){this.fire(t.type,t)}}class pd extends ys{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(t){this.fire(t.type,t)}}class gd extends ys{domEventType=["touchstart","touchend","touchmove"];onDomEvent(t){this.fire(t.type,t)}}class md extends ys{domEventType=["pointerdown","pointerup","pointermove"];onDomEvent(t){this.fire(t.type,t)}}class bd{document;constructor(t){this.document=t}createDocumentFragment(t){return new xr(this.document,t)}createElement(t,e,n){return new Lo(this.document,t,e,n)}createText(t){return new bo(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const i=n.getChildIndex(t);return this.removeChildren(i,1,n),this.insertChild(i,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new Lo(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){r(t)&&void 0===n?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return Go._createAt(t,e)}createPositionAfter(t){return Go._createAfter(t)}createPositionBefore(t){return Go._createBefore(t)}createRange(t,e){return new Ko(t,e)}createRangeOn(t){return Ko._createOn(t)}createRangeIn(t){return Ko._createIn(t)}createSelection(...t){return new Xo(...t)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const vd=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,wd=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,_d=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,yd=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,kd=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Cd=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,xd=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function Ed(t){return t.startsWith("#")?vd.test(t):t.startsWith("rgb")?wd.test(t)||_d.test(t):t.startsWith("hsl")?yd.test(t)||kd.test(t):xd.has(t.toLowerCase())}const Sd=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function Td(t){return Sd.includes(t)}const Ad=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Pd(t){return Ad.test(t)}const Id=/^[+-]?[0-9]*([.][0-9]+)?%$/;function Rd(t){return Id.test(t)}const Od=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function Md(t){return Od.includes(t)}const Dd=["center","top","bottom","left","right"];function Vd(t){return Dd.includes(t)}const Nd=["fixed","scroll","local"];function Ld(t){return Nd.includes(t)}const Bd=/^url\(/;function Fd(t){return Bd.test(t)}function zd(t=""){if(""===t)return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=$d(t),n=e[0],i=e[2]||n,o=e[1]||n,r=e[3]||o;return{top:n,bottom:i,right:o,left:r}}function Hd(t){return e=>{const{top:n,right:i,bottom:o,left:r}=e,s=[];return[n,i,r,o].every(t=>!!t)?s.push([t,Wd(e)]):(n&&s.push([t+"-top",n]),i&&s.push([t+"-right",i]),o&&s.push([t+"-bottom",o]),r&&s.push([t+"-left",r])),s}}function Wd({top:t,right:e,bottom:n,left:i}){const o=[];return i!==e?o.push(t,e,n,i):n!==t?o.push(t,e,n):e!==t?o.push(t,e):o.push(t),o.join(" ")}function jd(t){return e=>({path:t,value:zd(e)})}function $d(t){const e=t.trim().slice(0,1500).matchAll(Cd);return Array.from(e).map(t=>t[0])}function Ud(t){t.setNormalizer("background",qd()),t.setNormalizer("background-color",Gd()),t.setReducer("background",Kd()),t.setStyleRelation("background",["background-color"])}function qd(){return t=>{const e={},n=$d(t);for(const i of n)Md(i)?(e.repeat=e.repeat||[],e.repeat.push(i)):Vd(i)?(e.position=e.position||[],e.position.push(i)):Ld(i)?e.attachment=i:Ed(i)?e.color=i:Fd(i)&&(e.image=i);return{path:"background",value:e}}}function Gd(){return t=>({path:"background.color",value:t})}function Kd(){return t=>{const e=[];return e.push(["background-color",t.color]),e}}function Yd(t){t.setNormalizer("border",Xd()),t.setNormalizer("border-top",Jd("top")),t.setNormalizer("border-right",Jd("right")),t.setNormalizer("border-bottom",Jd("bottom")),t.setNormalizer("border-left",Jd("left")),t.setNormalizer("border-color",Zd("color")),t.setNormalizer("border-width",Zd("width")),t.setNormalizer("border-style",Zd("style")),t.setNormalizer("border-top-color",th("color","top")),t.setNormalizer("border-top-style",th("style","top")),t.setNormalizer("border-top-width",th("width","top")),t.setNormalizer("border-right-color",th("color","right")),t.setNormalizer("border-right-style",th("style","right")),t.setNormalizer("border-right-width",th("width","right")),t.setNormalizer("border-bottom-color",th("color","bottom")),t.setNormalizer("border-bottom-style",th("style","bottom")),t.setNormalizer("border-bottom-width",th("width","bottom")),t.setNormalizer("border-left-color",th("color","left")),t.setNormalizer("border-left-style",th("style","left")),t.setNormalizer("border-left-width",th("width","left")),t.setExtractor("border-top",eh("top")),t.setExtractor("border-right",eh("right")),t.setExtractor("border-bottom",eh("bottom")),t.setExtractor("border-left",eh("left")),t.setExtractor("border-top-color","border.color.top"),t.setExtractor("border-right-color","border.color.right"),t.setExtractor("border-bottom-color","border.color.bottom"),t.setExtractor("border-left-color","border.color.left"),t.setExtractor("border-top-width","border.width.top"),t.setExtractor("border-right-width","border.width.right"),t.setExtractor("border-bottom-width","border.width.bottom"),t.setExtractor("border-left-width","border.width.left"),t.setExtractor("border-top-style","border.style.top"),t.setExtractor("border-right-style","border.style.right"),t.setExtractor("border-bottom-style","border.style.bottom"),t.setExtractor("border-left-style","border.style.left"),t.setReducer("border-color",Hd("border-color")),t.setReducer("border-style",Hd("border-style")),t.setReducer("border-width",Hd("border-width")),t.setReducer("border-top",rh("top")),t.setReducer("border-right",rh("right")),t.setReducer("border-bottom",rh("bottom")),t.setReducer("border-left",rh("left")),t.setReducer("border",oh()),t.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),t.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),t.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),t.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),t.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),t.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function Xd(){return t=>{const{color:e,style:n,width:i}=ih(t);return{path:"border",value:{color:zd(e),style:zd(n),width:zd(i)}}}}function Jd(t){return e=>{const{color:n,style:i,width:o}=ih(e),r={};return void 0!==n&&(r.color={[t]:n}),void 0!==i&&(r.style={[t]:i}),void 0!==o&&(r.width={[t]:o}),{path:"border",value:r}}}function Zd(t){return e=>({path:"border",value:Qd(e,t)})}function Qd(t,e){return{[e]:zd(t)}}function th(t,e){return n=>({path:"border",value:{[t]:{[e]:n}}})}function eh(t){return(e,n)=>{if(n.border)return nh(n.border,t)}}function nh(t,e){const n={};return t.width&&t.width[e]&&(n.width=t.width[e]),t.style&&t.style[e]&&(n.style=t.style[e]),t.color&&t.color[e]&&(n.color=t.color[e]),n}function ih(t){const e={},n=$d(t);for(const i of n)Pd(i)||/thin|medium|thick/.test(i)?e.width=i:Td(i)?e.style=i:e.color=i;return e}function oh(){return e=>{const n=nh(e,"top"),i=nh(e,"right"),o=nh(e,"bottom"),r=nh(e,"left"),s=[n,i,o,r],a={width:t(s,"width"),style:t(s,"style"),color:t(s,"color")},l=sh(a,"all");if(l.length)return l;const c=Object.entries(a).reduce((t,[e,n])=>(n&&(t.push([`border-${e}`,n]),s.forEach(t=>delete t[e])),t),[]);return[...c,...sh(n,"top"),...sh(i,"right"),...sh(o,"bottom"),...sh(r,"left")]};function t(t,e){return t.map(t=>t[e]).reduce((t,e)=>t==e?t:null)}}function rh(t){return e=>sh(e,t)}function sh(t,e){const n=[];if(t&&t.width&&n.push("width"),t&&t.style&&n.push("style"),t&&t.color&&n.push("color"),3==n.length){const i=n.map(e=>t[e]).join(" ");return["all"==e?["border",i]:[`border-${e}`,i]]}return"all"==e?[]:n.map(n=>[`border-${e}-${n}`,t[n]])}function ah(t){t.setNormalizer("padding",jd("padding")),t.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),t.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),t.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),t.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),t.setReducer("padding",Hd("padding")),t.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}const lh="[",ch="]",uh="{",dh="}",hh={container:Ho,attribute:fr,empty:mr,ui:vr,raw:kr},fh={setContentOf:(t,e)=>{t.innerHTML=e}};function ph(t,e={}){if(!(t instanceof Ns))throw new TypeError("View needs to be an instance of module:engine/view/view~EditingView.");const n=t.document,i=!!e.withoutSelection,o=e.rootName||"main",r=n.getRoot(o),s={showType:e.showType,showPriority:e.showPriority,renderUIElements:e.renderUIElements,renderRawElements:e.renderRawElements,ignoreRoot:!0,domConverter:e.domConverter,skipListItemIds:e.skipListItemIds};return i?ph._stringify(r,null,s):ph._stringify(r,n.selection,s)}function gh(t,e,n={}){if(!(t instanceof Ns))throw new TypeError("View needs to be an instance of module:engine/view/view~EditingView.");const i=t.document,o=n.rootName||"main",r=i.getRoot(o);t.change(t=>{const n=gh._parse(e,{rootElement:r});n.view&&n.selection&&t.setSelection(n.selection)})}function mh(t,e=null,n={}){let i;i=e instanceof Go||e instanceof Ko?new Jo(e):e;const o=new wh(t,i,n);return o.stringify()}function bh(t,e={}){const n=new dr(new Ro);e.order=e.order||[];const i=new vh({sameSelectionCharacters:e.sameSelectionCharacters}),o=new _c(n,{namespaces:Object.keys(hh)});e.inlineObjectElements&&o.domConverter.inlineObjectElements.push(...e.inlineObjectElements);let r=o.toView(t);if(r=_h(r),e.rootElement){const t=e.rootElement,n=r._removeChildren(0,r.childCount);t._removeChildren(0,t.childCount),t._appendChild(n),r=t}const s=i._parseView(r,e.order);if(r.is("documentFragment")&&1===r.childCount&&(r=r.getChild(0)),s.length){const t=new Jo(s,{backward:!!e.lastRangeBackward});return{view:r,selection:t}}return r.parent&&r._remove(),r}ph._stringify=mh,gh._parse=bh;class vh{sameSelectionCharacters;_positions;constructor(t){this.sameSelectionCharacters=!!t.sameSelectionCharacters}_parseView(t,e){this._positions=[],this._getPositions(t);let n=this._createRanges();if(e.length){if(e.length!=n.length)throw new Error(`Parse error - there are ${n.length} ranges found, but ranges order array contains ${e.length} elements.`);n=this._sortRanges(n,e)}return n}_getPositions(t){if(t.is("documentFragment")||t.is("element")){const e=[...t.getChildren()];for(const t of e)this._getPositions(t)}if(t.is("$text")){const e=new RegExp(`[${uh}${dh}\\${ch}\\${lh}]`,"g");let n,i=t.data,o=0;const r=[];while(n=e.exec(i)){const t=n.index,e=n[0];r.push({bracket:e,textOffset:t-o}),o++}i=i.replace(e,""),t._data=i;const s=t.index,a=t.parent;i||t._remove();for(const l of r)if(i)if(this.sameSelectionCharacters||!this.sameSelectionCharacters&&(l.bracket==uh||l.bracket==dh))this._positions.push({bracket:l.bracket,position:new Go(t,l.textOffset)});else{if(!this.sameSelectionCharacters&&0!==l.textOffset&&l.textOffset!==i.length)throw new Error(`Parse error - range delimiter '${l.bracket}' is placed inside text node.`);const t=0===l.textOffset?s:s+1;this._positions.push({bracket:l.bracket,position:new Go(a,t)})}else{if(!this.sameSelectionCharacters&&l.bracket==uh||l.bracket==dh)throw new Error(`Parse error - text range delimiter '${l.bracket}' is placed inside empty text node. `);this._positions.push({bracket:l.bracket,position:new Go(a,s)})}}}_sortRanges(t,e){const n=[];let i=0;for(const o of e){if(void 0===t[o-1])throw new Error("Parse error - provided ranges order is invalid.");n[o-1]=t[i],i++}return n}_createRanges(){const t=[];let e=null;for(const n of this._positions){if(!e&&(n.bracket==ch||n.bracket==dh))throw new Error(`Parse error - end of range was found '${n.bracket}' but range was not started before.`);if(e&&(n.bracket==lh||n.bracket==uh))throw new Error(`Parse error - start of range was found '${n.bracket}' but one range is already started.`);n.bracket==lh||n.bracket==uh?e=new Ko(n.position,n.position):(e.end=n.position,t.push(e),e=null)}if(null!==e)throw new Error("Parse error - range was started but no end delimiter was found.");return t}}class wh{root;selection;ranges;showType;showPriority;showAttributeElementId;ignoreRoot;sameSelectionCharacters;renderUIElements;renderRawElements;domConverter;skipListItemIds;constructor(t,e,n){this.root=t,this.selection=e,this.ranges=[],e&&(this.ranges=[...e.getRanges()]),this.showType=!!n.showType,this.showPriority=!!n.showPriority,this.showAttributeElementId=!!n.showAttributeElementId,this.ignoreRoot=!!n.ignoreRoot,this.sameSelectionCharacters=!!n.sameSelectionCharacters,this.renderUIElements=!!n.renderUIElements,this.renderRawElements=!!n.renderRawElements,this.domConverter=n.domConverter||fh,this.skipListItemIds=void 0===n.skipListItemIds||!!n.skipListItemIds}stringify(){let t="";return this._walkView(this.root,e=>{t+=e}),this.skipListItemIds&&(t=t.replaceAll(/ data-list-item-id="[^"]+"/g,"")),t}_walkView(t,e){const n=this.ignoreRoot&&this.root===t;if(t.is("element")||t.is("documentFragment")){if(t.is("element")&&!n&&e(this._stringifyElementOpen(t)),this.renderUIElements&&t.is("uiElement"))e(t.render(document,this.domConverter).innerHTML);else if(this.renderRawElements&&t.is("rawElement")){const n=document.createElement("div");t.render(n,this.domConverter),e(n.innerHTML)}else{let n=0;e(this._stringifyElementRanges(t,n));for(const i of t.getChildren())this._walkView(i,e),n++,e(this._stringifyElementRanges(t,n))}t.is("element")&&!n&&e(this._stringifyElementClose(t))}t.is("$text")&&e(this._stringifyTextRanges(t))}_stringifyElementRanges(t,e){let n="",i="",o="";for(const r of this.ranges)r.start.parent==t&&r.start.offset===e&&(r.isCollapsed?o+=lh+ch:n+=lh),r.end.parent!==t||r.end.offset!==e||r.isCollapsed||(i+=ch);return i+o+n}_stringifyTextRanges(t){const e=t.data.length,n=t.data.split("");let i,o;this.sameSelectionCharacters?(i=lh,o=ch):(i=uh,o=dh),n[e]="";const r=n.map(t=>({letter:t,start:"",end:"",collapsed:""}));for(const s of this.ranges){const n=s.start,a=s.end;n.parent==t&&n.offset>=0&&n.offset<=e&&(s.isCollapsed?r[a.offset].collapsed+=i+o:r[n.offset].start+=i),a.parent==t&&a.offset>=0&&a.offset<=e&&!s.isCollapsed&&(r[a.offset].end+=o)}return r.map(t=>t.end+t.collapsed+t.start+t.letter).join("")}_stringifyElementOpen(t){const e=this._stringifyElementPriority(t),n=this._stringifyElementId(t),i=this._stringifyElementType(t),o=[i,t.name].filter(t=>""!==t).join(":"),r=this._stringifyElementAttributes(t),s=[o,e,n,r];return`<${s.filter(t=>""!==t).join(" ")}>`}_stringifyElementClose(t){const e=this._stringifyElementType(t),n=[e,t.name].filter(t=>""!==t).join(":");return`</${n}>`}_stringifyElementType(t){if(this.showType)for(const e in hh)if(t instanceof hh[e])return e;return""}_stringifyElementPriority(t){return this.showPriority&&t.is("attributeElement")?`view-priority="${t.priority}"`:""}_stringifyElementId(t){return this.showAttributeElementId&&t.is("attributeElement")&&t.id?`view-id="${t.id}"`:""}_stringifyElementAttributes(t){const e=[],n=[...t.getAttributeKeys()].sort();for(const i of n){let n;n="class"===i?[...t.getClassNames()].sort().join(" "):"style"===i?[...t.getStyleNames()].sort().map(e=>`${e}:${t.getStyle(e).replace(/"/g,"&quot;")}`).join(";"):t.getAttribute(i),e.push(`${i}="${n}"`)}return e.join(" ")}}function _h(t){if(t.is("element")||t.is("documentFragment")){const e=t.is("documentFragment")?new xr(t.document):yh(t.document,t);for(const n of[...t.getChildren()]){if(e.is("emptyElement"))throw new Error("Parse error - cannot parse inside ViewEmptyElement.");if(e.is("uiElement"))throw new Error("Parse error - cannot parse inside UIElement.");if(e.is("rawElement"))throw new Error("Parse error - cannot parse inside RawElement.");e._appendChild(_h(n))}return e}return t}function yh(t,e){const n=kh(e),i=hh[n.type],o=i?new i(t,n.name):new Lo(t,n.name);o.is("attributeElement")&&(null!==n.priority&&(o._priority=n.priority),null!==n.id&&(o._id=n.id));for(const r of e.getAttributeKeys())o._setAttribute(r,e.getAttribute(r));return o}function kh(t){const e=t.name.split(":"),n=xh(t.getAttribute("view-priority")),i=t.hasAttribute("view-id")?t.getAttribute("view-id"):null;if(t._removeAttribute("view-priority"),t._removeAttribute("view-id"),1==e.length)return{name:e[0],type:null!==n?"attribute":null,priority:n,id:i};const o=Ch(e[0]);if(o)return{name:e[1],type:o,priority:n,id:i};throw new Error(`Parse error - cannot parse element's name: ${t.name}.`)}function Ch(t){return t in hh?t:null}function xh(t){const e=parseInt(t,10);return isNaN(e)?null:e}function Eh(t,e={}){if(!(t instanceof dd))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");const n=e.rootName||"main",i=t.document.getRoot(n);return Eh._stringify(i,e.withoutSelection?null:t.document.selection,e.convertMarkers?t.markers:null)}function Sh(t,e,n={}){if(!(t instanceof dd))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let i,o=null;const r=t.document.getRoot(n.rootName||"main"),s=Sh._parse(e,t.schema,{lastRangeBackward:n.lastRangeBackward,selectionAttributes:n.selectionAttributes,context:[r.name],inlineObjectElements:n.inlineObjectElements});function a(e){if(e.remove(e.createRangeIn(r)),e.insert(i,r),e.setSelection(null),e.removeSelectionAttribute(t.document.selection.getAttributeKeys()),o){const t=[];for(const e of o.getRanges()){const n=new Hs(r,e.start.path),i=new Hs(r,e.end.path);t.push(new Ks(n,i))}e.setSelection(t,{backward:o.isBackward}),n.selectionAttributes&&e.setSelectionAttribute(o.getAttributes())}}"model"in s?(i=s.model,o=s.selection):i=s,void 0!==n.batchType?t.enqueueChange(n.batchType,a):t.change(a)}function Th(t,e=null,n=null){const i=new dd,o=new Ys;let r,s=null;if(t instanceof hu||t instanceof wu)r=i.createRangeIn(t);else if(t.parent)r=new Ks(i.createPositionBefore(t),i.createPositionAfter(t));else{const e=new wu(t);r=i.createRangeIn(e)}e instanceof oa||e instanceof va?s=e:(e instanceof Ks||e instanceof Hs)&&(s=new oa(e));const a=new Ro,l=new Ns(a),c=l.document,u=new Uo(c,"div");u.rootName="main",c.roots.add(u);const d=new Qs({mapper:o,schema:i.schema});o.bindElements(t.root,u),d.on("insert:$text",Pa()),d.on("insert",Ia(),{priority:"lowest"}),d.on("attribute",(t,e,n)=>{if(e.item instanceof oa||e.item instanceof va||e.item.is("$textProxy")){const i=Na((t,{writer:n})=>n.createAttributeElement("model-text-with-attributes",{[e.attributeKey]:Mh(t)}));i(t,e,n)}}),d.on("insert",La(t=>{const e=Dh(t.getAttributes(),Mh);return new Ho(c,t.name,e)})),d.on("selection",Ma()),d.on("selection",Da()),d.on("addMarker",Fa((t,{writer:e})=>{const n=t.markerName+":"+(t.isOpening?"start":"end");return e.createUIElement(n)}));const h=new Map;if(n)for(const g of Array.from(n).sort((t,e)=>t.name<e.name?1:-1))h.set(g.name,g.getRange());const f=l._writer;d.convert(r,h,f),s&&d.convertSelection(s,n||i.markers,f);let p=mh(u,c.selection,{sameSelectionCharacters:!0});return p=p.substr(5,p.length-11),l.destroy(),p.replace(new RegExp("model-text-with-attributes","g"),"$text")}function Ah(t,e,n={}){const i=new Ys;t=t.replace(new RegExp("\\$text","g"),"model-text-with-attributes");const o=bh(t,{sameSelectionCharacters:!0,lastRangeBackward:!!n.lastRangeBackward,inlineObjectElements:n.inlineObjectElements});let r,s=null,a=null;"view"in o&&"selection"in o?(r=o.view,s=o.selection):r=o;const l=new dd,c=new uc({schema:e});c.on("documentFragment",Ph(i)),c.on("element:model-text-with-attributes",Rh()),c.on("element",Ih(i)),c.on("text",Rh());let u=l.change(t=>c.convert(r.root,t,n.context||"$root"));if(i.bindElements(u,r.root),1==u.childCount&&(u=u.getChild(0)),s){const t=[];for(const e of s.getRanges())t.push(i.toModelRange(e));a=new oa(t,{backward:s.isBackward});for(const[e,i]of Yn(n.selectionAttributes||[]))a.setAttribute(e,i)}return a?{model:u,selection:a}:u}function Ph(t){return(e,n,i)=>{const o=i.convertChildren(n.viewItem,n.modelCursor);t.bindElements(n.modelCursor.parent,n.viewItem),n=Object.assign(n,o),e.stop()}}function Ih(t){return(e,n,i)=>{const o=n.viewItem.name;if(!i.schema.checkChild(n.modelCursor,o))throw new Error(`Element '${o}' was not allowed in given position.`);const r=Dh(n.viewItem.getAttributes(),Oh),s=i.writer.createElement(n.viewItem.name,r);i.writer.insert(s,n.modelCursor),t.bindElements(s,n.viewItem),i.convertChildren(n.viewItem,s),n.modelRange=Ks._createOn(s),n.modelCursor=n.modelRange.end,e.stop()}}function Rh(){return(t,e,n)=>{if(!n.schema.checkChild(e.modelCursor,"$text"))throw new Error("Text was not allowed in given position.");let i;if(e.viewItem.is("element")){const t=Dh(e.viewItem.getAttributes(),Oh),o=e.viewItem.getChild(0);i=n.writer.createText(o.data,t)}else i=n.writer.createText(e.viewItem.data);n.writer.insert(i,e.modelCursor),e.modelRange=Ks._createFromPositionAndShift(e.modelCursor,i.offsetSize),e.modelCursor=e.modelRange.end,t.stop()}}function Oh(t){try{return JSON.parse(t)}catch{return t}}function Mh(t){return r(t)?JSON.stringify(t):t}function*Dh(t,e){for(const[n,i]of t)yield[n,e(i)]}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */Eh._stringify=Th,Sh._parse=Ah;Symbol("_treeDump");function Vh(t,e=0,n={}){"object"!==typeof n&&(n={});const{leading:i=!0,trailing:o=!0}=n;return Wi(t,e,{leading:i,trailing:o,maxWait:e})}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class Nh{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(t){if(this.crashes=[],this._crashNumberLimit="number"===typeof t.crashNumberLimit?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"===typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const e="error"in t?t.error:t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(t=>t!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const i of n)i.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date,n=(t-e)/this._crashNumberLimit;return n>this._minimumNonErrorTimePeriod}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Lh(t,e=new Set){const n=[t],i=new Set;let o=0;while(n.length>o){const t=n[o++];if(!i.has(t)&&Bh(t)&&!e.has(t))if(i.add(t),Symbol.iterator in t)try{for(const e of t)n.push(e)}catch{}else for(const e in t)"defaultValue"!==e&&n.push(t[e])}return i}function Bh(t){const e=Object.prototype.toString.call(t),n=typeof t;return!("number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||void 0===t||null===t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}function Fh(t,e,n=new Set){if(t===e&&zh(t))return!0;const i=Lh(t,n),o=Lh(e,n);for(const r of i)if(o.has(r))return!0;return!1}function zh(t){return"object"===typeof t&&null!==t}class Hh extends Nh{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(t,e={}){super(e),this._throttledSave=Vh(this._save.bind(this),"number"===typeof e.saveInterval?e.saveInterval:5e3),t&&(this._creator=(e,n)=>t.create(e,n)),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},e=[],n=this._config.rootsAttributes||{},i={};for(const[r,s]of Object.entries(this._data.roots))s.isLoaded?(t[r]="",i[r]=n[r]||{}):e.push(r);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:e,rootsAttributes:i,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(Wh),this._initUsingData?this.create(t,o,o.context):W(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,e=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData="string"==typeof t||Object.keys(t).length>0&&"string"==typeof Object.values(t)[0],this._config=this._cloneEditorConfiguration(e)||{},this._config.context=n,this._creator(t,this._config))).then(t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,e=t.model.document.roots.filter(t=>t.isAttached()&&"$graveyard"!=t.rootName),{plugins:n}=t,i=n.has("CommentsRepository")&&n.get("CommentsRepository"),o=n.has("TrackChanges")&&n.get("TrackChanges"),r={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};e.forEach(t=>{r.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}});for(const s of t.model.markers)s._affectsData&&(r.markers[s.name]={rangeJSON:s.getRange().toJSON(),usingOperation:s._managedUsingOperations,affectsData:s._affectsData});return i&&(r.commentThreads=JSON.stringify(i.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(r.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),r}_getEditables(){const t={};for(const e of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(e);n&&(t[e]=n)}return t}_isErrorComingFromThisItem(t){return Fh(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return z(t,(t,e)=>W(t)||"context"===e?t:void 0)}}class Wh{editor;_data;constructor(t){this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const n=t.createElement(e.name,e.attributes);if(e.children)for(const i of e.children)n._appendChild(this._createNode(t,i));return n}return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([n,{content:i,attributes:o}])=>{const r=JSON.parse(i),s=JSON.parse(o),a=e.model.document.getRoot(n);for(const[e,l]of s)t.setAttribute(e,l,a);for(const e of r){const n=this._createNode(t,e);t.insert(n,a,"end")}}),Object.entries(this._data.markers).forEach(([n,i])=>{const{document:o}=e.model,{rangeJSON:{start:r,end:s},...a}=i,l=o.getRoot(r.root),c=t.createPositionFromPath(l,r.path,r.stickiness),u=t.createPositionFromPath(l,s.path,s.stickiness),d=t.createRange(c,u);t.addMarker(n,{range:d,...a})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);if(this.editor.plugins.has("CommentsRepository")){const e=this.editor.plugins.get("CommentsRepository");for(const t of e.getCommentThreads())e._removeCommentThread({threadId:t.id});t.forEach(t=>{const e=this.editor.config.get("collaboration.channelId"),n=this.editor.plugins.get("CommentsRepository");n.addCommentThread({channelId:e,...t})})}if(this.editor.plugins.has("TrackChangesEditing")){const t=this.editor.plugins.get("TrackChangesEditing");for(const e of t.getSuggestions())t._removeSuggestion(e);e.forEach(e=>{t.addSuggestionData(e)})}}}const jh=Symbol("MainQueueId");class $h extends Nh{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new Uh;_contextConfig;_item;constructor(t,e={}){super(e),this._watchdogConfig=e,this._creator=e=>t.create(e),this._destructor=t=>t.destroy(),this._actionQueues.onEmpty(()=>{"initializing"===this.state&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(jh,()=>(this._contextConfig=t,this._create()))}getItem(t){const e=this._getWatchdog(t);return e._item}getItemState(t){const e=this._getWatchdog(t);return e.state}add(t){const e=qh(t);return Promise.all(e.map(t=>this._actionQueues.enqueue(t.id,()=>{if("destroyed"===this.state)throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let e;if(this._watchdogs.has(t.id))throw new Error(`Item with the given id is already added: '${t.id}'.`);if("editor"===t.type)return e=new Hh(null,this._watchdogConfig),e.setCreator(t.creator),e._setExcludedProperties(this._contextProps),t.destructor&&e.setDestructor(t.destructor),this._watchdogs.set(t.id,e),e.on("error",(n,{error:i,causesRestart:o})=>{this._fire("itemError",{itemId:t.id,error:i}),o&&this._actionQueues.enqueue(t.id,()=>new Promise(n=>{const i=()=>{e.off("restart",i),this._fire("itemRestart",{itemId:t.id}),n()};e.on("restart",i)}))}),e.create(t.sourceElementOrData,t.config,this._context);throw new Error(`Not supported item type: '${t.type}'.`)})))}remove(t){const e=qh(t);return Promise.all(e.map(t=>this._actionQueues.enqueue(t,()=>{const e=this._getWatchdog(t);return this._watchdogs.delete(t),e.destroy()})))}destroy(){return this._actionQueues.enqueue(jh,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(jh,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=Lh(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const e=this._watchdogs.get(t);if(!e)throw new Error(`Item with the given id was not registered: ${t}.`);return e}_isErrorComingFromThisItem(t){for(const e of this._watchdogs.values())if(e._isErrorComingFromThisItem(t))return!1;return Fh(this._context,t.context)}}class Uh{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const n=t===jh;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const i=n?Promise.all(this._queues.values()):Promise.all([this._queues.get(jh),this._queues.get(t)]),o=i.then(e),r=o.catch(()=>{});return this._queues.set(t,r),o.finally(()=>{this._activeActions--,this._queues.get(t)===r&&0===this._activeActions&&this._onEmptyCallbacks.forEach(t=>t())})}}function qh(t){return Array.isArray(t)?t:[t]}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class Gh extends(ie()){editor;_disableStack=new Set;constructor(t){super(),this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Kh,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Kh),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function Kh(t){t.return=!1,t.stop()}class Yh extends(ie()){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(t){super(),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",e=>{if(!this.affectsData)return;const n=t.model.document.selection,i="$graveyard"==n.getFirstPosition().root.rootName,o=!i&&t.model.canEditAt(n);(t.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(e.return=!1,e.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Xh,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Xh),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function Xh(t){t.return=!1,t.stop()}class Jh{_commands;constructor(){this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new Tt("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class Zh extends(Ft()){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(t,e=[],n=[]){super(),this._context=t,this._availablePlugins=new Map;for(const i of e)i.pluginName&&this._availablePlugins.set(i.pluginName,i);this._contextPlugins=new Map;for(const[i,o]of n)this._contextPlugins.set(i,o),this._contextPlugins.set(o,i),i.pluginName&&this._availablePlugins.set(i.pluginName,i)}*[Symbol.iterator](){for(const t of this._plugins)"function"==typeof t[0]&&(yield t)}get(t){const e=this._plugins.get(t);if(!e){let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new Tt("plugincollection-plugin-not-loaded",this._context,{plugin:e})}return e}has(t){return this._plugins.has(t)}init(t,e=[],n=[]){const i=this,o=this._context;h(t),p(t);const r=t.filter(t=>!u(t,e)),s=[...f(r)];_(s,n);const a=v(s);return w(a,"init").then(()=>w(a,"afterInit")).then(()=>a);function l(t){return"function"===typeof t}function c(t){return l(t)&&!!t.isContextPlugin}function u(t,e){return e.some(e=>e===t||(d(t)===e||d(e)===t))}function d(t){return l(t)?t.pluginName||t.name:t}function h(t,e=new Set){t.forEach(t=>{l(t)&&(e.has(t)||(e.add(t),t.pluginName&&!i._availablePlugins.has(t.pluginName)&&i._availablePlugins.set(t.pluginName,t),t.requires&&h(t.requires,e)))})}function f(t,e=new Set){return t.map(t=>l(t)?t:i._availablePlugins.get(t)).reduce((t,n)=>e.has(n)?t:(e.add(n),n.requires&&(p(n.requires,n),f(n.requires,e).forEach(e=>t.add(e))),t.add(n)),new Set)}function p(t,e=null){t.map(t=>l(t)?t:i._availablePlugins.get(t)||t).forEach(t=>{g(t,e),m(t,e),b(t,e)})}function g(t,e){if(!l(t)){if(e)throw new Tt("plugincollection-soft-required",o,{missingPlugin:t,requiredBy:d(e)});throw new Tt("plugincollection-plugin-not-found",o,{plugin:t})}}function m(t,e){if(c(e)&&!c(t))throw new Tt("plugincollection-context-required",o,{plugin:d(t),requiredBy:d(e)})}function b(t,n){if(n&&u(t,e))throw new Tt("plugincollection-required",o,{plugin:d(t),requiredBy:d(n)})}function v(t){return t.map(t=>{let e=i._contextPlugins.get(t);return e=e||new t(o),i._add(t,e),e})}function w(t,e){return t.reduce((t,n)=>n[e]?i._contextPlugins.has(n)?t:t.then(n[e].bind(n)):t,Promise.resolve())}function _(t,e){for(const n of e){if("function"!=typeof n)throw new Tt("plugincollection-replace-plugin-invalid-type",null,{pluginItem:n});const e=n.pluginName;if(!e)throw new Tt("plugincollection-replace-plugin-missing-name",null,{pluginItem:n});if(n.requires&&n.requires.length)throw new Tt("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:e});const o=i._availablePlugins.get(e);if(!o)throw new Tt("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:e});const r=t.indexOf(o);if(-1===r){if(i._contextPlugins.has(o))return;throw new Tt("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:e})}if(o.requires&&o.requires.length)throw new Tt("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:e});t.splice(r,1,n),i._availablePlugins.set(e,n)}}}destroy(){const t=[];for(const[,e]of this)"function"!=typeof e.destroy||this._contextPlugins.has(e)||t.push(e.destroy());return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const n=t.pluginName;if(n){if(this._plugins.has(n))throw new Tt("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e)}}}class Qh{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(t){const{translations:e,...n}=t||{};this.config=new we(n,this.constructor.defaultConfig);const i=this.constructor.builtinPlugins;this.config.define("plugins",i),this.plugins=new Zh(this,i);const o=this.config.get("language")||{};this.locale=new Bn({uiLanguage:"string"===typeof o?o:o.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new zn}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if("function"!=typeof n)throw new Tt("context-initplugins-constructor-only",null,{Plugin:n});if(!0!==n.isContextPlugin)throw new Tt("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new Tt("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}class tf extends(ie()){context;constructor(t){super(),this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class ef extends Gn{editor;constructor(t){super(),this.editor=t}set(t,e,n={}){if("string"==typeof e){const t=e;e=(e,n)=>{this.editor.execute(t),n()}}super.set(t,e,n)}}const nf="contentEditing",of="common";class rf{keystrokeInfos=new Map;_editor;constructor(t){this._editor=t;const e=t.config.get("menuBar.isVisible"),n=t.locale.t;this.addKeystrokeInfoCategory({id:nf,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const i=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&i.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:i}]})}addKeystrokeInfoCategory({id:t,label:e,description:n,groups:i}){this.keystrokeInfos.set(t,{id:t,label:e,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:of}),i&&i.forEach(e=>{this.addKeystrokeInfoGroup({categoryId:t,...e})})}addKeystrokeInfoGroup({categoryId:t=nf,id:e,label:n,keystrokes:i}){const o=this.keystrokeInfos.get(t);if(!o)throw new Tt("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});o.groups.set(e,{id:e,label:n,keystrokes:i||[]})}addKeystrokeInfos({categoryId:t=nf,groupId:e=of,keystrokes:n}){if(!this.keystrokeInfos.has(t))throw new Tt("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:n});const i=this.keystrokeInfos.get(t);if(!i.groups.has(e))throw new Tt("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:n});i.groups.get(e).keystrokes.push(...n)}}function sf(t){return{sessionId:hf(),pageSessionId:ff(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:af(t),plugins:lf(t.plugins),distribution:uf(),env:df(),integration:Object.create(null),menuBar:{isVisible:!!t.config.get("menuBar.isVisible")},language:{ui:t.locale.uiLanguage,content:t.locale.contentLanguage},toolbar:{main:cf(t.config.get("toolbar")),block:cf(t.config.get("blockToolbar")),balloon:cf(t.config.get("balloonToolbar"))}}}function af(t){return Object.getPrototypeOf(t).constructor.editorName}function lf(t){return Array.from(t).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:n,isOfficialPlugin:i,isPremiumPlugin:o}=t;return{isContext:!!n,isOfficial:!!i,isPremium:!!o,name:e}})}function cf(t){if(!t)return;const e=Array.isArray(t)?{items:t}:t,n=r(e.items||[]),i=n.includes("-");return{isMultiline:i,shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:o(n)};function o(t){return t.filter(t=>"|"!==t&&"-"!==t)}function r(t){return t.flatMap(t=>"string"===typeof t?[t]:r(t.items))}}function uf(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function df(){let t="unknown",e="unknown";return nt.isMac?t="mac":nt.isWindows?t="windows":nt.isiOS?t="ios":nt.isAndroid&&(t="android"),nt.isGecko?e="gecko":nt.isBlink?e="blink":nt.isSafari&&(e="safari"),{os:t,browser:e}}function hf(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",Ct()),localStorage.getItem("__ckeditor-session-id")}function ff(){return Q.window.CKEDITOR_PAGE_SESSION_ID=Q.window.CKEDITOR_PAGE_SESSION_ID||Ct(),Q.window.CKEDITOR_PAGE_SESSION_ID}class pf extends(ie()){static get editorName(){return"Editor"}accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(t={}){if(super(),"sanitizeHtml"in t)throw new Tt("editor-config-sanitizehtml-not-supported");const e=this.constructor,{translations:n,...i}=e.defaultConfig||{},{translations:o=n,...r}=t,s=t.language||i.language;this._context=t.context||new Qh({language:s,translations:o}),this._context._addEditor(this,!t.context);const a=Array.from(e.builtinPlugins||[]);this.config=new we(r,i),this.config.define("plugins",a),this.config.define(this._context._getEditorConfig()),c(this.config),this.plugins=new Zh(this,a,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new Jh,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new dd,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const l=new Ro;function c(t){let e=t.get("licenseKey");if(!e&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(e=window.CKEDITOR_GLOBAL_LICENSE_KEY,t.set("licenseKey",e)),!e)throw new Tt("license-key-missing")}function u(t){const e=t.config.get("licenseKey"),n=window[Symbol.for("cke distribution")]||"sh";function i(e,n){t.enableReadOnlyMode(Symbol("invalidLicense")),t._showLicenseError(e,n)}function o(t){const e=["exp","jti","vc"];return e.every(e=>e in t)}function r(t){const e=Object.getOwnPropertyNames(t).sort(),n=e.filter(e=>"vc"!=e&&null!=t[e]).map(e=>t[e]);return n}function s(t){const{hostname:e}=new URL(window.location.href);if(t.includes(e))return!0;const n=e.split(".");return t.filter(t=>t.includes("*")).map(t=>t.split(".")).filter(t=>t.length<=n.length).map(t=>Array(n.length-t.length).fill("*"===t[0]?"*":"").concat(t)).some(t=>n.every((e,n)=>t[n]===e||"*"===t[n]))}function a(t){const e=t[0].toUpperCase()+t.slice(1),n="evaluation"===t?"an":"a";console.info(`%cCKEditor 5 ${e} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`â ï¸ You are using ${n} ${t} license of CKEditor 5`+("trial"===t?" which is for evaluation purposes only":"")+". For production usage, please obtain a production license at https://portal.ckeditor.com/")}if("GPL"==e)return void("cloud"==n&&i("distributionChannel"));const l=ci(e);if(!l)return void i("invalid");if(!o(l))return void i("invalid");if(l.distributionChannel&&!Mn(l.distributionChannel).includes(n))return void i("distributionChannel");if(ti(r(l))!=l.vc.toLowerCase())return void i("invalid");const c=new Date(1e3*l.exp);if(c<Dt)return void i("expired");const u=l.licensedHosts;if(u&&u.length>0&&!s(u))i("domainLimit");else if(["evaluation","trial"].includes(l.licenseType)&&1e3*l.exp<Date.now())i("expired");else{if(["development","evaluation","trial"].includes(l.licenseType)){const{licenseType:t}=l;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[t]||(a(t),window.CKEDITOR_WARNING_SUPPRESSIONS[t]=!0)}if(["evaluation","trial"].includes(l.licenseType)){const e=l.licenseType,n=setTimeout(()=>{i(`${e}Limit`)},6e5);t.on("destroy",()=>{clearTimeout(n)})}l.usageEndpoint&&t.once("ready",()=>{const n={requestId:Ct(),requestTime:Math.round(Date.now()/1e3),license:e,editor:gf(t)};t._sendUsageRequest(l.usageEndpoint,n).then(t=>{const{status:e,message:n}=t;n&&console.warn(n),"ok"!=e&&i("usageLimit")},()=>{Pt("license-key-validation-endpoint-not-reachable",{url:l.usageEndpoint})})},{priority:"high"})}}this.data=new gc(this.model,l),this.editing=new jl(this.model,l),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new bc([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new ef(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new rf(this),u(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new Tt("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if("string"!==typeof t&&"symbol"!==typeof t)throw new Tt("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),1===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if("string"!==typeof t&&"symbol"!==typeof t)throw new Tt("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),0===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,e=t.get("plugins"),n=t.get("removePlugins")||[],i=t.get("extraPlugins")||[],o=t.get("substitutePlugins")||[];return this.plugins.init(e.concat(i),n,o).then(t=>(r(this),t));function r(t){const e=t.config.get("licenseKey");if("GPL"===e)return;const n=ci(e);if(!n)return;const i=[...t.plugins].map(([t])=>t).find(t=>!!t.pluginName&&(!!t.licenseFeatureCode&&di(n,t.licenseFeatureCode)));i&&(t.enableReadOnlyMode(Symbol("invalidLicense")),t._showLicenseError("pluginNotAllowed",i.pluginName))}}destroy(){let t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(t=>this.once("ready",t))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...e){try{return this.commands.execute(t,...e)}catch(n){
/* istanbul ignore next -- @preserve */Tt.rethrowUnexpectedError(n,this)}}focus(){this.editing.view.focus()}
/* istanbul ignore next -- @preserve */static create(...t){throw new Error("This is an abstract method.")}static Context=Qh;static EditorWatchdog=Hh;static ContextWatchdog=$h;_showLicenseError(t,e){setTimeout(()=>{if("invalid"==t)throw new Tt("invalid-license-key");if("expired"==t)throw new Tt("license-key-expired");if("domainLimit"==t)throw new Tt("license-key-domain-limit");if("pluginNotAllowed"==t){const t=e.replace(/(Editing|UI)$/,""),n=this.plugins.has(t);throw new Tt("license-key-plugin-not-allowed",null,{pluginName:n?t:e})}if("featureNotAllowed"==t)throw new Tt("license-key-feature-not-allowed",null,{featureName:e});if("evaluationLimit"==t)throw new Tt("license-key-evaluation-limit");if("trialLimit"==t)throw new Tt("license-key-trial-limit");if("developmentLimit"==t)throw new Tt("license-key-development-limit");if("usageLimit"==t)throw new Tt("license-key-usage-limit");if("distributionChannel"==t)throw new Tt("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(t,e){const n=new Headers({"Content-Type":"application/json"}),i=await fetch(new URL(t),{method:"POST",headers:n,body:JSON.stringify(e)});if(!i.ok)throw new Error(`HTTP Response: ${i.status}`);return i.json()}}function gf(t){const e=sf(t);function n(t,n){if(void 0!==gi(e,t))throw new Tt("editor-usage-data-path-already-set",{path:t});Si(e,t,n)}return t.fire("collectUsageData",{setUsageData:n}),e}function mf(t){if(!j(t.updateSourceElement))throw new Tt("attachtoform-missing-elementapi-interface",t);const e=t.sourceElement;if(bf(e)&&e.form){let n;const i=e.form,o=()=>t.updateSourceElement();j(i.submit)&&(n=i.submit,i.submit=()=>{o(),n.apply(i)}),i.addEventListener("submit",o),t.on("destroy",()=>{i.removeEventListener("submit",o),n&&(i.submit=n)})}}function bf(t){return!!t&&"textarea"===t.tagName.toLowerCase()}function vf(t){class e extends t{sourceElement;updateSourceElement(t){if(!this.sourceElement)throw new Tt("editor-missing-sourceelement",this);const e=this.config.get("updateSourceElementOnDestroy"),n=this.sourceElement instanceof HTMLTextAreaElement;if(!e&&!n)return void Ue(this.sourceElement,"");const i="string"===typeof t?t:this.data.get();Ue(this.sourceElement,i)}}return e}class wf extends tf{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new zn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if("string"!==typeof t)throw new Tt("pendingactions-add-invalid-message",this);const e=new(ie());return e.set("message",t),this._actions.add(e),this.hasAny=!0,e}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class _f extends(ie()){total;_reader;_data;constructor(){super();const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const e=this._reader;return this.total=t.size,new Promise((n,i)=>{e.onload=()=>{const t=e.result;this._data=t,n(t)},e.onerror=()=>{i("error")},e.onabort=()=>{i("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}}class yf extends Gh{loaders=new zn;_loadersMap=new Map;_pendingAction=null;static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[wf]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return At("filerepository-no-upload-adapter"),null;const e=new kf(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then(t=>{this._loadersMap.set(t,e)}).catch(()=>{}),e.on("change:uploaded",()=>{let t=0;for(const e of this.loaders)t+=e.uploaded;this.uploaded=t}),e.on("change:uploadTotal",()=>{let t=0;for(const e of this.loaders)e.uploadTotal&&(t+=e.uploadTotal);this.uploadTotal=t}),e}destroyLoader(t){const e=t instanceof kf?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach((t,n)=>{t===e&&this._loadersMap.delete(n)})}_updatePendingAction(){const t=this.editor.plugins.get(wf);if(this.loaders.length){if(!this._pendingAction){const e=this.editor.t,n=t=>`${e("Upload in progress")} ${parseInt(t)}%.`;this._pendingAction=t.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else t.remove(this._pendingAction),this._pendingAction=null}}class kf extends(ie()){id;_filePromiseWrapper;_adapter;_reader;constructor(t,e){super(),this.id=Ct(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new _f,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new Tt("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if("reading"!==this.status)throw this.status;return this.status="idle",t}).catch(t=>{if("aborted"===t)throw this.status="aborted","aborted";throw this.status="error",this._reader.error?this._reader.error:t})}upload(){if("idle"!=this.status)throw new Tt("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{if("aborted"===this.status)throw"aborted";throw this.status="error",t})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==t?this._reader.abort():"uploading"==t&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const e={};return e.promise=new Promise((n,i)=>{e.rejecter=i,e.isFulfilled=!1,t.then(t=>{e.isFulfilled=!0,n(t)}).catch(t=>{e.isFulfilled=!0,i(t)})}),e}}function Cf(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(Cf).join(",");const e=String(t);return"0"===e&&Object.is(Number(t),-0)?"-0":e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class xf{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(t,e=20){this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(t,e)=>{e.isLocal&&e.isUndoable&&e!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){this.isLocked&&!t||(this._batch=null,this._size=0)}}class Ef extends Yh{_buffer;constructor(t,e){super(t),this._buffer=new xf(t.model,e),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const e=this.editor.model,n=e.document,i=t.text||"",o=i.length;let r=n.selection;if(t.selection?r=t.selection:t.range&&(r=e.createSelection(t.range)),!e.canEditAt(r))return;const s=t.resultRange;e.enqueueChange(this._buffer.batch,t=>{this._buffer.lock();const a=Array.from(n.selection.getAttributes());e.deleteContent(r),i&&e.insertContent(t.createText(i,a),r),s?t.setSelection(s):r.is("documentSelection")||t.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}const Sf=["insertText","insertReplacementText"],Tf=[...Sf,"insertCompositionText"];class Af extends ws{focusObserver;constructor(t){super(t),this.focusObserver=t.getObserver(Ss);const e=nt.isAndroid?Tf:Sf,n=t.document;n.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;const{data:r,targetRanges:s,inputType:a,domEvent:l,isComposing:c}=o;if(!e.includes(a))return;this.focusObserver.flush();const u=new yt(n,"insertText");n.fire(u,new _s(t,l,{text:r,selection:t.createSelection(s),isComposing:c})),u.stop.called&&i.stop()}),nt.isAndroid||n.on("compositionend",(e,{data:i,domEvent:o})=>{this.isEnabled&&i&&n.fire("insertText",new _s(t,o,{text:i,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class Pf extends Gh{_typingQueue;static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,n=t.editing.view,i=t.editing.mapper,o=e.document.selection;this._typingQueue=new If(t),n.addObserver(Af);const r=new Ef(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",r),t.commands.add("input",r),this.listenTo(n.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(n.document,"insertText",(t,s)=>{const{text:a,selection:l}=s;if(n.document.selection.isFake&&l&&n.document.selection.isSimilar(l)&&s.preventDefault(),l&&Array.from(l.getRanges()).some(t=>!t.isCollapsed)&&s.preventDefault(),!r.isEnabled)return void s.preventDefault();let c;c=l?Array.from(l.getRanges()).map(t=>i.toModelRange(t)).map(t=>Pu(t,e.schema)||t):Array.from(o.getRanges());let u=a;if(nt.isAndroid){const t=Array.from(c[0].getItems()).reduce((t,e)=>t+(e.is("$textProxy")?e.data:""),"");if(t&&(t.length<=u.length?u.startsWith(t)&&(u=u.substring(t.length),c[0].start=c[0].start.getShiftedBy(t.length)):t.startsWith(u)&&(c[0].start=c[0].start.getShiftedBy(u.length),u="")),0==u.length&&c[0].isCollapsed)return}const d={text:u,selection:e.createSelection(c)};this._typingQueue.push(d,Boolean(s.isComposing)),s.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),nt.isAndroid?this.listenTo(n.document,"keydown",(t,i)=>{!o.isCollapsed&&229==i.keyCode&&n.document.isComposing&&Rf(e,r)}):this.listenTo(n.document,"compositionstart",()=>{o.isCollapsed||Rf(e,r)},{priority:"high"}),this.listenTo(n.document,"mutations",(t,{mutations:e})=>{if(this._typingQueue.hasAffectedElements())for(const{node:n}of e){const t=Mf(n,i),e=i.toModelElement(t);if(this._typingQueue.isElementAffected(e))return void this._typingQueue.flush("mutations")}}),this.listenTo(n.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(n.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const t=[];if(this._typingQueue.hasAffectedElements())for(const e of this._typingQueue.flushAffectedElements()){const n=i.toViewElement(e);n&&t.push({type:"children",node:n})}!t.length&&nt.isAndroid||n.document.fire("mutations",{mutations:t})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class If{editor;flushDebounced=Wi(()=>this.flush("timeout"),50);_queue=[];_isComposing=!1;_affectedElements=new Set;constructor(t){this.editor=t}destroy(){this.flushDebounced.cancel(),this._affectedElements.clear();while(this._queue.length)this.shift()}get length(){return this._queue.length}push(t,e){const n={text:t.text};if(t.selection){n.selectionRanges=[];for(const e of t.selection.getRanges())n.selectionRanges.push(ha.fromRange(e)),this._affectedElements.add(e.start.parent)}this._queue.push(n),this._isComposing||=e,this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const n=t.selectionRanges.map(t=>Of(t)).filter(t=>!!t);n.length&&(e.selection=this.editor.model.createSelection(n))}return e}flush(t){const e=this.editor,n=e.model,i=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText"),r=o.buffer;n.enqueueChange(r.batch,()=>{r.lock();while(this._queue.length){const t=this.shift();e.execute("insertText",t)}r.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),i.scrollToTheSelection()}isElementAffected(t){return this._affectedElements.has(t)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const t=Array.from(this._affectedElements);return this._affectedElements.clear(),t}}function Rf(t,e){if(!e.isEnabled)return;const n=e.buffer;n.lock(),t.enqueueChange(n.batch,()=>{t.deleteContent(t.document.selection)}),n.unlock()}function Of(t){const e=t.toRange();return t.detach(),"$graveyard"==e.root.rootName?null:e}function Mf(t,e){let n=t.is("$text")?t.parent:t;while(!e.toModelElement(n))n=n.parent;return n}class Df extends Yh{direction;_buffer;constructor(t,e){super(t),this.direction=e,this._buffer=new xf(t.model,t.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(t={}){const e=this.editor.model,n=e.document;e.enqueueChange(this._buffer.batch,i=>{this._buffer.lock();const o=i.createSelection(t.selection||n.selection);if(!e.canEditAt(o))return;const r=t.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&e.modifySelection(o,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r))return void this._replaceEntireContentWithParagraph(i);if(this._shouldReplaceFirstBlockWithParagraph(o,r))return void this.editor.execute("paragraph",{selection:o});if(o.isCollapsed)return;let a=0;o.getFirstRange().getMinimalFlatRanges().forEach(t=>{a+=ge(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),e.deleteContent(o,{doNotResetEntireContent:s,direction:this.direction}),this._buffer.input(a),i.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const e=this.editor.model,n=e.document,i=n.selection,o=e.schema.getLimitElement(i),r=i.isCollapsed&&i.containsEntireContent(o);if(!r)return!1;if(!e.schema.checkChild(o,"paragraph"))return!1;const s=o.getChild(0);return!s||!s.is("element","paragraph")}_replaceEntireContentWithParagraph(t){const e=this.editor.model,n=e.document,i=n.selection,o=e.schema.getLimitElement(i),r=t.createElement("paragraph");t.remove(t.createRangeIn(o)),t.insert(r,o),t.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(t,e){const n=this.editor.model;if(e>1||"backward"!=this.direction)return!1;if(!t.isCollapsed)return!1;const i=t.getFirstPosition(),o=n.schema.getLimitElement(i),r=o.getChild(0);return i.parent==r&&(!!t.containsEntireContent(r)&&(!!n.schema.checkChild(o,"paragraph")&&"paragraph"!=r.name))}}const Vf="character",Nf="word",Lf="codePoint",Bf="selection",Ff="backward",zf="forward",Hf={deleteContent:{unit:Bf,direction:Ff},deleteContentBackward:{unit:Lf,direction:Ff},deleteWordBackward:{unit:Nf,direction:Ff},deleteHardLineBackward:{unit:Bf,direction:Ff},deleteSoftLineBackward:{unit:Bf,direction:Ff},deleteContentForward:{unit:Vf,direction:zf},deleteWordForward:{unit:Nf,direction:zf},deleteHardLineForward:{unit:Bf,direction:zf},deleteSoftLineForward:{unit:Bf,direction:zf}};class Wf extends ws{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",()=>{n++}),e.on("keyup",()=>{n=0}),e.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:s,inputType:a}=o,l=Hf[a];if(!l)return;const c={direction:l.direction,unit:l.unit,sequence:n};c.unit==Bf&&(c.selectionToRemove=t.createSelection(r[0])),"deleteContentBackward"===a&&(nt.isAndroid&&(c.sequence=1),$f(r)&&(c.unit=Bf,c.selectionToRemove=t.createSelection(r)));const u=new Zo(e,"delete",r[0]);e.fire(u,new _s(t,s,c)),u.stop.called&&i.stop()}),nt.isBlink&&jf(this)}observe(){}stopObserving(){}}function jf(t){const e=t.view,n=e.document;let i=null,o=!1;function r(t){return t==_n.backspace||t==_n.delete}function s(t){return t==_n.backspace?Ff:zf}n.on("keydown",(t,{keyCode:e})=>{i=e,o=!1}),n.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=n.selection,d=t.isEnabled&&l==i&&r(l)&&!u.isCollapsed&&!o;if(i=null,d){const t=u.getFirstRange(),i=new Zo(n,"delete",t),o={unit:Bf,direction:s(l),selectionToRemove:u};n.fire(i,new _s(e,c,o))}}),n.on("beforeinput",(t,{inputType:e})=>{const n=Hf[e],a=r(i)&&n&&n.direction==s(i);a&&(o=!0)},{priority:"high"}),n.on("beforeinput",(t,{inputType:e,data:n})=>{const o=i==_n.delete&&"insertText"==e&&""==n;o&&t.stop()},{priority:"high"})}function $f(t){if(1!=t.length||t[0].isCollapsed)return!1;const e=t[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let n=0;for(const{nextPosition:i,item:o}of e){if(i.parent.is("$text")){const t=i.parent.data,e=i.offset;if(oi(t,e)||ri(t,e)||ai(t,e))continue;n++}else(o.is("containerElement")||o.is("emptyElement"))&&n++;if(n>1)return!0}return!1}class Uf extends Gh{_undoOnBackspace;static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,i=t.model.document;e.addObserver(Wf),this._undoOnBackspace=!1;const o=new Df(t,"forward");t.commands.add("deleteForward",o),t.commands.add("forwardDelete",o),t.commands.add("delete",new Df(t,"backward")),this.listenTo(n,"delete",(i,o)=>{n.isComposing||o.preventDefault();const{direction:r,sequence:s,selectionToRemove:a,unit:l}=o,c="forward"===r?"deleteForward":"delete",u={sequence:s};if("selection"==l){const e=Array.from(a.getRanges()).map(e=>t.editing.mapper.toModelRange(e)).map(e=>Pu(e,t.model.schema)||e);u.selection=t.model.createSelection(e)}else u.unit=l;t.execute(c,u),e.scrollToTheSelection()},{priority:"low"}),this.listenTo(n,"keydown",(o,r)=>{if(n.isComposing||r.keyCode!=_n.backspace||!i.selection.isCollapsed)return;const s=t.model.schema.getLimitElement(i.selection),a=t.model.createPositionAt(s,0);if(a.isTouching(i.selection.getFirstPosition())){r.preventDefault();const i=t.model.schema.getNearestSelectionRange(a,"forward");if(!i)return;const o=e.createSelection(t.editing.mapper.toViewRange(i)),s=o.getFirstRange(),l=new Zo(document,"delete",s),c={unit:"selection",direction:"backward",selectionToRemove:o};n.fire(l,new _s(e,r.domEvent,c))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(e,n)=>{this._undoOnBackspace&&"backward"==n.direction&&1==n.sequence&&"codePoint"==n.unit&&(this._undoOnBackspace=!1,t.execute("undo"),n.preventDefault(),e.stop())},{context:"$capture"}),this.listenTo(i,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class qf extends Gh{static get requires(){return[Pf,Uf]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Gf(t,e){let n=t.start;const i=Array.from(t.getWalker({ignoreElementEnd:!1})).reduce((t,{item:i})=>i.is("$text")||i.is("$textProxy")?t+i.data:(n=e.createPositionAfter(i),""),"");return{text:i,range:e.createRange(n,t.end)}}class Kf extends(ie()){model;testCallback;_hasMatch;constructor(t,e){super(),this.model=t,this.testCallback=e,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model,e=t.document;this.listenTo(e.selection,"change:range",(t,{directChange:n})=>{n&&(e.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1))}),this.listenTo(e,"change:data",(t,e)=>{!e.isUndo&&e.isLocal&&this._evaluateTextBeforeSelection("data",{batch:e})})}_evaluateTextBeforeSelection(t,e={}){const n=this.model,i=n.document,o=i.selection,r=n.createRange(n.createPositionAt(o.focus.parent,0),o.focus),{text:s,range:a}=Gf(r,n),l=this.testCallback(s);if(!l&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!l,l){const n=Object.assign(e,{text:s,range:a});"object"==typeof l&&Object.assign(n,l),this.fire(`matched:${t}`,n)}}}class Yf extends Gh{attributes;_overrideUid;_isNextGravityRestorationSkipped=!1;static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}constructor(t){super(t),this.attributes=new Set,this._overrideUid=null}init(){const t=this.editor,e=t.model,n=t.editing.view,i=t.locale,o=e.document.selection;this.listenTo(n.document,"arrowKey",(t,e)=>{if(!o.isCollapsed)return;if(e.shiftKey||e.altKey||e.ctrlKey)return;const n=e.keyCode==_n.arrowright,r=e.keyCode==_n.arrowleft;if(!n&&!r)return;const s=i.contentLanguageDirection;let a=!1;a="ltr"===s&&n||"rtl"===s&&r?this._handleForwardMovement(e):this._handleBackwardMovement(e),!0===a&&t.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(t,e)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!e.directChange&&ep(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(t){this.attributes.add(t)}_handleForwardMovement(t){const e=this.attributes,n=this.editor.model,i=n.document.selection,o=i.getFirstPosition();return!this._isGravityOverridden&&((!o.isAtStart||!Xf(i,e))&&(!!ep(o,e)&&(t&&Qf(t),Xf(i,e)&&ep(o,e,!0)?Zf(n,e):this._overrideGravity(),!0)))}_handleBackwardMovement(t){const e=this.attributes,n=this.editor.model,i=n.document.selection,o=i.getFirstPosition();return this._isGravityOverridden?(t&&Qf(t),this._restoreGravity(),ep(o,e,!0)?Zf(n,e):Jf(n,e,o),!0):o.isAtStart?!!Xf(i,e)&&(t&&Qf(t),Jf(n,e,o),!0):!Xf(i,e)&&ep(o,e,!0)?(t&&Qf(t),Jf(n,e,o),!0):!!tp(o,e)&&(o.isAtEnd&&!Xf(i,e)&&ep(o,e)?(t&&Qf(t),Jf(n,e,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1))}_enableClickingAfterNode(){const t=this.editor,e=t.model,n=e.document.selection,i=t.editing.view.document;t.editing.view.addObserver(pd),t.editing.view.addObserver(gd);let o=!1,r=!1;this.listenTo(i,"touchstart",()=>{r=!1,o=!0}),this.listenTo(i,"mousedown",()=>{r=!0}),this.listenTo(i,"selectionChange",()=>{const t=this.attributes;if(!r&&!o)return;if(r=!1,o=!1,!n.isCollapsed)return;if(!Xf(n,t))return;const i=n.getFirstPosition();ep(i,t)&&(i.isAtStart||ep(i,t,!0)?Zf(e,t):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor,e=t.model,n=e.document.selection,i=this.attributes;this.listenTo(e,"insertContent",()=>{const t=n.getFirstPosition();Xf(n,i)&&ep(t,i)&&Zf(e,i)},{priority:"low"})}_handleDeleteContentAfterNode(){const t=this.editor,e=t.model,n=e.document.selection,i=t.editing.view;let o=!1,r=!1;this.listenTo(i.document,"delete",(t,e)=>{o="backward"===e.direction},{priority:"high"}),this.listenTo(e,"deleteContent",()=>{if(!o)return;const t=n.getFirstPosition();r=Xf(n,this.attributes)&&!tp(t,this.attributes)},{priority:"high"}),this.listenTo(e,"deleteContent",()=>{o&&(o=!1,r||t.model.enqueueChange(()=>{const t=n.getFirstPosition();Xf(n,this.attributes)&&ep(t,this.attributes)&&(t.isAtStart||ep(t,this.attributes,!0)?Zf(e,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Xf(t,e){for(const n of e)if(t.hasAttribute(n))return!0;return!1}function Jf(t,e,n){const i=n.nodeBefore;t.change(n=>{if(i){const e=[],o=t.schema.isObject(i)&&t.schema.isInline(i);for(const[n,r]of i.getAttributes())!t.schema.checkAttribute("$text",n)||o&&!1===t.schema.getAttributeProperties(n).copyFromObject||e.push([n,r]);n.setSelectionAttribute(e)}else n.removeSelectionAttribute(e)})}function Zf(t,e){t.change(t=>{t.removeSelectionAttribute(e)})}function Qf(t){t.preventDefault()}function tp(t,e){const n=t.getShiftedBy(-1);return ep(n,e)}function ep(t,e,n=!1){const{nodeBefore:i,nodeAfter:o}=t;for(const r of e){const t=i?i.getAttribute(r):void 0,e=o?o.getAttribute(r):void 0;if((!n||void 0!==t&&void 0!==e)&&e!==t)return!0}return!1}np('"'),np("'"),np("'"),np('"'),np('"'),np("'");function np(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function ip(t,e,n,i){return i.createRange(op(t,e,n,!0,i),op(t,e,n,!1,i))}function op(t,e,n,i,o){let r=t.textNode||(i?t.nodeBefore:t.nodeAfter),s=null;while(r&&r.getAttribute(e)==n)s=r,r=i?r.previousSibling:r.nextSibling;return s?o.createPositionAt(s,i?"before":"after"):t}function rp(t,e,n,i){const o=t.editing.view,r=new Set;o.document.registerPostFixer(o=>{const s=t.model.document.selection;let a=!1;if(s.hasAttribute(e)){const l=ip(s.getFirstPosition(),e,s.getAttribute(e),t.model),c=t.editing.mapper.toViewRange(l);for(const t of c.getItems())t.is("element",n)&&!t.hasClass(i)&&(o.addClass(i,t),r.add(t),a=!0)}return a}),t.conversion.for("editingDowncast").add(t=>{function e(){o.change(t=>{for(const e of r.values())t.removeClass(i,e),r.delete(e)})}t.on("insert",e,{priority:"highest"}),t.on("remove",e,{priority:"highest"}),t.on("attribute",e,{priority:"highest"}),t.on("selection",e,{priority:"highest"})})}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
var sp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103z"/><path d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17m0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10" clip-rule="evenodd"/></svg>',ap='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.75.75 0 0 1-.511.187.75.75 0 0 1-.511-.187M4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5z"/></svg>',lp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75"/></svg>',cp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',up='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',dp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.75 11.875a.75.75 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.75.75 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.75.75 0 0 1-.508.184.75.75 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75"/></svg>',hp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75m0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75m0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75m0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75"/></svg>',fp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.75.75 0 0 1 .511-.187.75.75 0 0 1 .511.187M15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5z"/></svg>',pp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.187 17H5.773q-.956 0-1.364-.415-.41-.416-.409-1.323V4.738q0-.926.419-1.332.418-.405 1.354-.406h4.68q1.035 0 1.793.124.76.124 1.36.478.512.296.906.75a3.26 3.26 0 0 1 .808 2.162q0 2.102-2.167 3.075 2.846.879 2.847 3.421a3.76 3.76 0 0 1-2.296 3.504 6 6 0 0 1-1.517.377q-.857.11-2 .11zm-.217-6.217H7v4.087h3.069q2.965 0 2.965-2.072 0-1.061-.768-1.537-.768-.478-2.296-.478M7 5.13v3.619h2.606q1.093 0 1.69-.2a1.6 1.6 0 0 0 .91-.765q.247-.4.247-.897 0-1.06-.778-1.409-.778-.348-2.375-.348z"/></svg>',gp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75m6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75"/></svg>',mp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414z"/></svg>',bp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2"/><path fill-opacity=".6" d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492z"/></svg>',vp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.972 16.615a1 1 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a1 1 0 0 1-.745.292"/></svg>',wp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 9 9 0 0 1-.372.008m-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414M9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415m4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415"/></svg>',_p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0" class="ck-icon__fill"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',yp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7zM0 7h1v2H0zm15 0h1v2h-1zm-8 8h2v1H7z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',kp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m-7 6.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Cp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136z"/></svg>',xp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Ep='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1zM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1zm-5.655 6a2.13 2.13 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7"/></svg>',Sp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a3 3 0 0 1-.414-.287 3 3 0 0 1-1.055-2.03 3 3 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.13 2.13 0 0 0-1.875-.978"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/></svg>',Tp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.4 5.4 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023q.675.195 1.307.573l.058.033q.068.042.135.086V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.1 2.1 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.65.65 0 0 0-.096.492.66.66 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.74 1.74 0 0 1 2.478-.463 1.87 1.87 0 0 1 .476 2.55.64.64 0 0 0-.071.5.65.65 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.23 3.23 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.63.63 0 0 0 .092-.475.64.64 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.74 1.74 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.65.65 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.61.61 0 0 0-.845.17"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236z"/></svg>',Ap='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822zM14 5V2l3.3 3zm-3.692 12.5q.093.157.213.303L11.52 19H8v-.876a2.24 2.24 0 0 0 1.82-.624zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Pp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.586 14.633.021.004q-.054.502.393.962.123.125.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15q.711-.106 1.005-.334.235-.182.404-.597l2.416-9.55a1.05 1.05 0 0 0-.281-.823 1.1 1.1 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195q-.564.084-.823.296-.323.263-.623.79z"/></svg>',Ip='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184"/></svg>',Rp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4m0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4m0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4"/></svg>',Op='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M5.714 15.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.832-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.141-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.143.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m6.078.914V8.531H10.79q-.21.59-.778 1.03-.567.442-1.05.6v1.121a4.3 4.3 0 0 0 1.595-.936V15zm3.344 0v-1.235h-1.235V15zm-9.422 9.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.833-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.142-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.142.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m7.088.914v-1.147H10.35q.097-.167.253-.343.155-.175.74-.712t.81-.821q.338-.431.493-.824.156-.394.156-.829 0-.765-.544-1.279-.546-.514-1.499-.514-.87 0-1.45.444t-.69 1.463l1.23.124q.036-.54.264-.774t.615-.233q.391 0 .613.222t.222.635q0 .374-.255.756-.189.277-1.024 1.055-1.037.962-1.388 1.544-.352.583-.422 1.233zm2.334 0v-1.235h-1.235V24zM5.714 34.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.832-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.142-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.142.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m4.992 1.024q.924 0 1.543-.598.62-.597.62-1.446 0-.585-.332-.997a1.5 1.5 0 0 0-.886-.532q.927-.505.927-1.353 0-.598-.452-1.073-.55-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.6 1.6 0 0 0-.667.55q-.24.349-.359.933l1.139.194q.048-.422.272-.642t.54-.22q.321 0 .515.194c.194.194.193.302.193.518q0 .383-.264.613-.263.231-.764.218l-.136 1.006q.33-.092.566-.092.36 0 .611.272.25.273.25.739 0 .492-.26.782a.83.83 0 0 1-.644.29.84.84 0 0 1-.607-.242q-.25-.241-.308-.698l-1.195.145q.093.813.668 1.316t1.45.503m4.43-.11v-1.235h-1.235V34z"/></svg>',Mp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M10.29 15V8.531H9.286q-.21.59-.778 1.03-.567.442-1.05.6v1.121a4.3 4.3 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15zM11.3 24v-1.147H8.848q.096-.167.252-.343.156-.175.74-.712.585-.536.81-.821.338-.431.494-.824.156-.394.156-.829 0-.765-.545-1.279t-1.499-.514q-.87 0-1.45.444t-.69 1.463l1.23.124q.036-.54.264-.774.23-.233.616-.233.39 0 .613.222t.222.635q0 .374-.255.756-.19.277-1.024 1.055-1.038.962-1.389 1.544T6.971 24zm2.333 0v-1.235h-1.235V24zM9.204 34.11q.922 0 1.542-.598.62-.597.62-1.446 0-.585-.332-.997a1.5 1.5 0 0 0-.886-.532q.928-.505.928-1.353 0-.598-.453-1.073-.549-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.6 1.6 0 0 0-.668.55q-.24.349-.358.933l1.138.194q.048-.422.272-.642t.54-.22q.322 0 .515.194c.193.194.193.302.193.518q0 .383-.263.613-.263.231-.765.218l-.136 1.006q.33-.092.567-.092.36 0 .61.272.251.273.251.739 0 .492-.261.782a.83.83 0 0 1-.644.29.84.84 0 0 1-.607-.242q-.251-.241-.307-.698l-1.196.145q.093.813.668 1.316t1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',Dp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6"/></svg>',Vp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M9.62 14.105q.408 0 .768-.153c.36-.153.466-.257.677-.462q.013.036.044.145.07.242.119.365h1.221a2.7 2.7 0 0 1-.222-.626q-.06-.293-.059-.908l.013-1.441q0-.804-.165-1.105-.165-.302-.569-.497-.405-.195-1.23-.195-.91 0-1.371.325-.462.325-.65 1.002l1.12.202q.114-.326.299-.455.184-.13.514-.13.488 0 .663.152.176.151.176.508v.123q-.333.14-1.2.303-.641.123-.982.288t-.53.474a1.33 1.33 0 0 0-.188.706q0 .598.415.988.416.391 1.136.391zm.368-.87a.68.68 0 0 1-.492-.189.6.6 0 0 1-.193-.448q0-.263.241-.435.159-.105.673-.215a7 7 0 0 0 .751-.19v.247q0 .443-.048.602a.77.77 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14zM10.2 25.105q.813 0 1.382-.646.57-.645.57-1.84 0-1.156-.559-1.774a1.82 1.82 0 0 0-1.41-.617q-.783 0-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592q.39.2.79.2zm-.299-.975q-.531 0-.852-.492-.23-.348-.229-1.073 0-.703.295-1.048a.93.93 0 0 1 .738-.345q.453 0 .743.354t.29 1.154q0 .751-.288 1.1t-.697.35m4.478.87v-1.235h-1.234V25zm-4.017 9.105q.9 0 1.437-.426.536-.426.725-1.261l-1.213-.207q-.092.489-.316.688a.83.83 0 0 1-.576.2.92.92 0 0 1-.75-.343q-.278-.343-.278-1.173 0-.747.274-1.066.275-.318.736-.318.348 0 .565.184t.28.55l1.216-.22q-.22-.751-.722-1.119-.504-.366-1.356-.366-1.042 0-1.653.643-.61.645-.61 1.8 0 1.143.608 1.788.609.646 1.633.646M14.633 34v-1.235h-1.235V34z"/></svg>',Np='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11.88 8.7V7.558h-1.234V8.7zm0 5.3V9.333h-1.234V14zm2.5 0v-1.235h-1.234V14zm-4.75 4.7v-1.142H8.395V18.7zm0 5.3v-4.667H8.395V24zm2.5-5.3v-1.142h-1.234V18.7zm0 5.3v-4.667h-1.234V24zm2.501 0v-1.235h-1.235V24zM7.38 28.7v-1.142H6.145V28.7zm0 5.3v-4.667H6.145V34zm2.5-5.3v-1.142H8.646V28.7zm0 5.3v-4.667H8.646V34zm2.5-5.3v-1.142h-1.234V28.7zm0 5.3v-4.667h-1.234V34zm2.501 0v-1.235h-1.235V34z"/></svg>',Lp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M14 27v6H8v-6zm0-9v6H8v-6zm0-9v6H8V9z"/></svg>',Bp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15zM9.352 25q1.244-.009 1.569-.044.518-.057.872-.305.354-.249.558-.664t.205-.855q0-.558-.317-.97-.315-.414-.905-.585a1.5 1.5 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83q0-.419-.197-.754a1.65 1.65 0 0 0-.495-.539 1.7 1.7 0 0 0-.672-.266q-.375-.063-1.14-.063H7.158V25zm.142-3.88H8.46v-1.49h.747q.918 0 1.112.022.325.04.49.226.165.188.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 12 12 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05q.888 0 1.154.092.266.093.406.295a.84.84 0 0 1 .14.492q0 .342-.181.547a.8.8 0 0 1-.473.257q-.189.04-.892.04M14.88 25v-1.235h-1.234V25zm-5.018 9.11q1.037 0 1.711-.512t.965-1.567l-1.261-.4q-.163.708-.536 1.037-.375.33-.892.33-.704 0-1.143-.519-.44-.518-.44-1.74 0-1.15.447-1.665.445-.514 1.162-.514.52 0 .881.29.362.29.477.79l1.288-.307q-.22-.774-.66-1.187-.738-.698-1.92-.698-1.353 0-2.184.89-.83.89-.83 2.498 0 1.521.825 2.397.826.877 2.11.877M14.88 34v-1.235h-1.234V34z"/></svg>',Fp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11.916 15V8.558h-1.301V15zm2.465 0v-1.235h-1.235V15zM9.665 25v-6.442h-1.3V25zm2.5 0v-6.442h-1.3V25zm2.466 0v-1.235h-1.235V25zm-7.216 9v-6.442h-1.3V34zm2.5 0v-6.442h-1.3V34zm2.501 0v-6.442h-1.3V34zm2.465 0v-1.235h-1.235V34z"/></svg>',zp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z" class="ck-icon__fill"/><path d="m2.556 16.727.234-.348q-.445-.226-.498-.426-.054-.206.115-.837.14-.375.169-.595a4.5 4.5 0 0 0 0-.725q-.313-.931-.284-1.26.03-.327.475-.862l6.77-9.414q.808-1.365 3.199.18 2.39 1.549 1.784 2.686l-5.877 10.36q-.237.618-.526.782-.29.163-1.232.21-.543.196-.738.318t-.526.47q-.44.397-.632.397-.143 0-.524-.226l-.31.41zm-.279.415 1.575 1.103-.392.515H1.19zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574q.263-.375-1.092-1.192-1.354-.819-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5z"/></svg>',Hp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382z"/></svg>',Wp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M3.5 3v5H2V3.7H1v-1h2.5zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001q-.073.607-.333.988-.263.381-1.244 1.312H4.3v1h-4zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>',jp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H6.5V12h6.997z"/></svg>',$p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1m-1.505.5H3.504V12h12.991z"/></svg>',Up='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',qp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z" opacity=".5"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H9.5V12h6.997z"/></svg>',Gp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',Kp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',Yp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H9.5V12h6.997z"/></svg>',Xp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95zm.55 3.5v-2h2v2zm0 9.3v2h2v-2zm15-11.3v2h2v-2zM8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046zm11.421-9.101a.6.6 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.6.6 0 0 1 .206-.138.6.6 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243"/></svg>',Jp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15.5v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm0-2v1h-1v-1zm-19 0v1H0v-1zM14.5 2v1h-1V2zm2 0v1h-1V2zm2 0v1h-1V2zm-8 0v1h-1V2zm-2 0v1h-1V2zm-2 0v1h-1V2zm-2 0v1h-1V2zm8 0v1h-1V2zm-10 0v1h-1V2z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2m0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.49.49 0 0 1-.476-.5V4c0-.276.213-.5.476-.5z"/></svg>',Zp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2M13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7z"/></svg>',Qp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2M10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9z"/></svg>',tg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2M7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11z"/></svg>',eg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5M5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1"/></svg>',ng='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m7.3 17.37-.061.088a1.52 1.52 0 0 1-.934.535l-4.178.663-.806-4.153a1.5 1.5 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346zM6.07 16.512l-3.276-2.295.53 2.73zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328M8 18.5 9.375 17H19v1.5z"/></svg>',ig='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568z" class="ck-icon__fill"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97q.249-.348.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005zm-.634.166-1.976.516-.026-1.918zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349M8.245 18.5 9.59 17h9.406v1.5z"/></svg>',og='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4"/></svg>',rg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1"/></svg>',sg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',ag='<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>\n',lg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.75.75 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.8.8 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032z"/></svg>',cg='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',ug='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75m18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75m-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2z"/></svg>',dg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>\n',hg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6M6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',fg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5zM2 12h5V8H2zm10-4H8v4h4zM2 2v5h5V2zm0 16h5v-5H2zM13 7h5V2h-5zM8 2v5h4V2z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43zM13 6a1 1 0 0 1 1 1v3.172a2 2 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.98 1.98 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm-1 2H8v4h4z"/></svg>',pg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M18 7v1H2V7zm0 5v1H2v-1z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1m-2 1H8v4h4zm0 6H8v4h4zm0 6H8v4h4z"/></svg>',gg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M7 2h1v16H7zm5 0h1v7h-1zm6 5v1H2V7zM8 12v1H2v-1z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1m1 2v9h10V9z"/></svg>',mg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2zm4 6H8v4h4z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2 2 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/></svg>',bg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M7 2h1v16H7zm5 0h1v16h-1z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1m1 2v4h4V8zm6 0v4h4V8zm6 0v4h4V8z"/></svg>',vg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 5.5v3h4v-3zm0 4v3h4v-3zm0 4v3h4v-3zm5 3h4v-3H8zm5 0h4v-3h-4zm4-4v-3h-4v3zm0-4v-3h-4v3zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5zm-6.5-4v-3H8v3zm0-4v-3H8v3z"/></svg>',wg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1zm10.453 2.61a1.89 1.89 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.9 1.9 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598M7.463 8.163a.6.6 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.63.63 0 0 0-.417-.185m6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.62.62 0 0 0-.42-.165M.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.91.91 0 0 0-.912-.912zM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516zm4.947 0h1.801v4.3h2.7v1.4h-4.5zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9zm-8.517 1.457-.614 2.059h1.262z"/></svg>',_g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.816 11.5 7.038 4.785 4.261 11.5zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254z"/></svg>',yg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',kg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m2.315 14.705 2.224-2.24a.69.69 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.7.7 0 0 1-.112.089.65.65 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75M2.329 5.745l2.21-2.226a.69.69 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.7.7 0 0 1-.496.196.64.64 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>',Cg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8s3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4"/></svg>',xg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.75.75 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.8.8 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032z"/></svg>',Eg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184m4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06z"/></svg>';const Sg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const bD in Sg)Object.freeze(Sg[bD]);var Tg=Object.freeze(Sg),Ag=Ig,Pg={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Ig(t){var e,n,i=[],o=1;if("number"===typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"===typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),Tg[t])i=Tg[t].slice(),n="rgb";else if("transparent"===t)o=0,n="rgb",i=[0,0,0];else if("#"===t[0]){var r=t.slice(1),s=r.length,a=s<=4;o=1,a?(i=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],4===s&&(o=parseInt(r[3]+r[3],16)/255)):(i=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],8===s&&(o=parseInt(r[6]+r[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];n=l.replace(/a$/,"");var c="cmyk"===n?4:"gray"===n?1:3;i=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===n&&(n=i.shift()),i=i.map(function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===n?255*t:"h"===n[0]?100*t:"l"!==n[0]||e?"lab"===n?125*t:"lch"===n?e<2?150*t:360*t:"o"!==n[0]||e?"oklab"===n?.4*t:"oklch"===n?e<2?.4*t:360*t:t:t:100*t;if("h"===n[e]||2===e&&"h"===n[n.length-1]){if(void 0!==Pg[t])return Pg[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}),o=i.length>c?i.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(i=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),n=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:n,values:i,alpha:o}}const Rg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const bD in Rg)Object.freeze(Rg[bD]);var Og=Object.freeze(Rg);const Mg={};for(const bD of Object.keys(Og))Mg[Og[bD]]=bD;const Dg={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Vg=Dg;const Ng=(6/29)**3;function Lg(t){const e=t>.0031308?1.055*t**(1/2.4)-.055:12.92*t;return Math.min(Math.max(0,e),1)}function Bg(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const bD of Object.keys(Dg)){if(!("channels"in Dg[bD]))throw new Error("missing channels property: "+bD);if(!("labels"in Dg[bD]))throw new Error("missing channel labels property: "+bD);if(Dg[bD].labels.length!==Dg[bD].channels)throw new Error("channel and label counts mismatch: "+bD);const{channels:t,labels:e}=Dg[bD];delete Dg[bD].channels,delete Dg[bD].labels,Object.defineProperty(Dg[bD],"channels",{value:t}),Object.defineProperty(Dg[bD],"labels",{value:e})}function Fg(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}function zg(){const t={},e=Object.keys(Vg);for(let{length:n}=e,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}function Hg(t){const e=zg(),n=[t];e[t].distance=0;while(n.length>0){const t=n.pop(),i=Object.keys(Vg[t]);for(let{length:o}=i,r=0;r<o;r++){const o=i[r],s=e[o];-1===s.distance&&(s.distance=e[t].distance+1,s.parent=t,n.unshift(o))}}return e}function Wg(t,e){return function(n){return e(t(n))}}function jg(t,e){const n=[e[t].parent,t];let i=Vg[e[t].parent][t],o=e[t].parent;while(e[o].parent)n.unshift(e[o].parent),i=Wg(Vg[e[o].parent][o],i),o=e[o].parent;return i.conversion=n,i}function $g(t){const e=Hg(t),n={},i=Object.keys(e);for(let{length:o}=i,r=0;r<o;r++){const t=i[r],o=e[t];null!==o.parent&&(n[t]=jg(t,e))}return n}Dg.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=r-o;let a,l;switch(r){case o:a=0;break;case e:a=(n-i)/s;break;case n:a=2+(i-e)/s;break;case i:a=4+(e-n)/s;break}a=Math.min(60*a,360),a<0&&(a+=360);const c=(o+r)/2;return l=r===o?0:c<=.5?s/(r+o):s/(2-r-o),[a,100*l,100*c]},Dg.rgb.hsv=function(t){let e,n,i,o,r;const s=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),d=function(t){return(c-t)/6/u+.5};if(0===u)o=0,r=0;else{switch(r=u/c,e=d(s),n=d(a),i=d(l),c){case s:o=i-n;break;case a:o=1/3+e-i;break;case l:o=2/3+n-e;break}o<0?o+=1:o>1&&(o-=1)}return[360*o,100*r,100*c]},Dg.rgb.hwb=function(t){const e=t[0],n=t[1];let i=t[2];const o=Dg.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(n,i));return i=1-1/255*Math.max(e,Math.max(n,i)),[o,100*r,100*i]},Dg.rgb.oklab=function(t){const e=Bg(t[0]/255),n=Bg(t[1]/255),i=Bg(t[2]/255),o=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*i),r=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*i),a=.2104542553*o+.793617785*r-.0040720468*s,l=1.9779984951*o-2.428592205*r+.4505937099*s,c=.0259040371*o+.7827717662*r-.808675766*s;return[100*a,100*l,100*c]},Dg.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.min(1-e,1-n,1-i),r=(1-e-o)/(1-o)||0,s=(1-n-o)/(1-o)||0,a=(1-i-o)/(1-o)||0;return[100*r,100*s,100*a,100*o]},Dg.rgb.keyword=function(t){const e=Mg[t];if(e)return e;let n,i=Number.POSITIVE_INFINITY;for(const o of Object.keys(Og)){const e=Og[o],r=Fg(t,e);r<i&&(i=r,n=o)}return n},Dg.keyword.rgb=function(t){return Og[t]},Dg.rgb.xyz=function(t){const e=Bg(t[0]/255),n=Bg(t[1]/255),i=Bg(t[2]/255),o=.4124564*e+.3575761*n+.1804375*i,r=.2126729*e+.7151522*n+.072175*i,s=.0193339*e+.119192*n+.9503041*i;return[100*o,100*r,100*s]},Dg.rgb.lab=function(t){const e=Dg.rgb.xyz(t);let n=e[0],i=e[1],o=e[2];n/=95.047,i/=100,o/=108.883,n=n>Ng?n**(1/3):7.787*n+16/116,i=i>Ng?i**(1/3):7.787*i+16/116,o=o>Ng?o**(1/3):7.787*o+16/116;const r=116*i-16,s=500*(n-i),a=200*(i-o);return[r,s,a]},Dg.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,i=t[2]/100;let o,r;if(0===n)return r=255*i,[r,r,r];const s=i<.5?i*(1+n):i+n-i*n,a=2*i-s,l=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,r=6*o<1?a+6*(s-a)*o:2*o<1?s:3*o<2?a+(s-a)*(2/3-o)*6:a,l[c]=255*r;return l},Dg.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,i=t[2]/100,o=n;const r=Math.max(i,.01);i*=2,n*=i<=1?i:2-i,o*=r<=1?r:2-r;const s=(i+n)/2,a=0===i?2*o/(r+o):2*n/(i+n);return[e,100*a,100*s]},Dg.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let i=t[2]/100;const o=Math.floor(e)%6,r=e-Math.floor(e),s=255*i*(1-n),a=255*i*(1-n*r),l=255*i*(1-n*(1-r));switch(i*=255,o){case 0:return[i,l,s];case 1:return[a,i,s];case 2:return[s,i,l];case 3:return[s,a,i];case 4:return[l,s,i];case 5:return[i,s,a]}},Dg.hsv.hsl=function(t){const e=t[0],n=t[1]/100,i=t[2]/100,o=Math.max(i,.01);let r,s;s=(2-n)*i;const a=(2-n)*o;return r=n*o,r/=a<=1?a:2-a,r=r||0,s/=2,[e,100*r,100*s]},Dg.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,i=t[2]/100;const o=n+i;let r;o>1&&(n/=o,i/=o);const s=Math.floor(6*e),a=1-i;r=6*e-s,0!==(1&s)&&(r=1-r);const l=n+r*(a-n);let c,u,d;switch(s){default:case 6:case 0:c=a,u=l,d=n;break;case 1:c=l,u=a,d=n;break;case 2:c=n,u=a,d=l;break;case 3:c=n,u=l,d=a;break;case 4:c=l,u=n,d=a;break;case 5:c=a,u=n,d=l;break}return[255*c,255*u,255*d]},Dg.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=t[3]/100,r=1-Math.min(1,e*(1-o)+o),s=1-Math.min(1,n*(1-o)+o),a=1-Math.min(1,i*(1-o)+o);return[255*r,255*s,255*a]},Dg.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100;let o,r,s;return o=3.2404542*e+-1.5371385*n+-.4985314*i,r=-.969266*e+1.8760108*n+.041556*i,s=.0556434*e+-.2040259*n+1.0572252*i,o=Lg(o),r=Lg(r),s=Lg(s),[255*o,255*r,255*s]},Dg.xyz.lab=function(t){let e=t[0],n=t[1],i=t[2];e/=95.047,n/=100,i/=108.883,e=e>Ng?e**(1/3):7.787*e+16/116,n=n>Ng?n**(1/3):7.787*n+16/116,i=i>Ng?i**(1/3):7.787*i+16/116;const o=116*n-16,r=500*(e-n),s=200*(n-i);return[o,r,s]},Dg.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*i),r=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*i),a=.2104542553*o+.793617785*r-.0040720468*s,l=1.9779984951*o-2.428592205*r+.4505937099*s,c=.0259040371*o+.7827717662*r-.808675766*s;return[100*a,100*l,100*c]},Dg.oklab.oklch=function(t){return Dg.lab.lch(t)},Dg.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=(.999999998*e+.396337792*n+.215803758*i)**3,r=(1.000000008*e-.105561342*n-.063854175*i)**3,s=(1.000000055*e-.089484182*n-1.291485538*i)**3,a=1.227013851*o-.55779998*r+.281256149*s,l=-.040580178*o+1.11225687*r-.071676679*s,c=-.076381285*o-.421481978*r+1.58616322*s;return[100*a,100*l,100*c]},Dg.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=(e+.3963377774*n+.2158037573*i)**3,r=(e-.1055613458*n-.0638541728*i)**3,s=(e-.0894841775*n-1.291485548*i)**3,a=Lg(4.0767416621*o-3.3077115913*r+.2309699292*s),l=Lg(-1.2684380046*o+2.6097574011*r-.3413193965*s),c=Lg(-.0041960863*o-.7034186147*r+1.707614701*s);return[255*a,255*l,255*c]},Dg.oklch.oklab=function(t){return Dg.lch.lab(t)},Dg.lab.xyz=function(t){const e=t[0],n=t[1],i=t[2];let o,r,s;r=(e+16)/116,o=n/500+r,s=r-i/200;const a=r**3,l=o**3,c=s**3;return r=a>Ng?a:(r-16/116)/7.787,o=l>Ng?l:(o-16/116)/7.787,s=c>Ng?c:(s-16/116)/7.787,o*=95.047,r*=100,s*=108.883,[o,r,s]},Dg.lab.lch=function(t){const e=t[0],n=t[1],i=t[2];let o;const r=Math.atan2(i,n);o=360*r/2/Math.PI,o<0&&(o+=360);const s=Math.sqrt(n*n+i*i);return[e,s,o]},Dg.lch.lab=function(t){const e=t[0],n=t[1],i=t[2],o=i/360*2*Math.PI,r=n*Math.cos(o),s=n*Math.sin(o);return[e,r,s]},Dg.rgb.ansi16=function(t,e=null){const[n,i,o]=t;let r=null===e?Dg.rgb.hsv(t)[2]:e;if(r=Math.round(r/50),0===r)return 30;let s=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(n/255));return 2===r&&(s+=60),s},Dg.hsv.ansi16=function(t){return Dg.rgb.ansi16(Dg.hsv.rgb(t),t[2])},Dg.rgb.ansi256=function(t){const e=t[0],n=t[1],i=t[2];if(e>>4===n>>4&&n>>4===i>>4)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;const o=16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5);return o},Dg.ansi16.rgb=function(t){t=t[0];let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=.5*(Math.trunc(t>50)+1),i=(1&e)*n*255,o=(e>>1&1)*n*255,r=(e>>2&1)*n*255;return[i,o,r]},Dg.ansi256.rgb=function(t){if(t=t[0],t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;t-=16;const n=Math.floor(t/36)/5*255,i=Math.floor((e=t%36)/6)/5*255,o=e%6/5*255;return[n,i,o]},Dg.rgb.hex=function(t){const e=((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2])),n=e.toString(16).toUpperCase();return"000000".slice(n.length)+n},Dg.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];3===e[0].length&&(n=[...n].map(t=>t+t).join(""));const i=Number.parseInt(n,16),o=i>>16&255,r=i>>8&255,s=255&i;return[o,r,s]},Dg.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.max(Math.max(e,n),i),r=Math.min(Math.min(e,n),i),s=o-r;let a;const l=s<1?r/(1-s):0;return a=s<=0?0:o===e?(n-i)/s%6:o===n?2+(i-e)/s:4+(e-n)/s,a/=6,a%=1,[360*a,100*s,100*l]},Dg.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,i=n<.5?2*e*n:2*e*(1-n);let o=0;return i<1&&(o=(n-.5*i)/(1-i)),[t[0],100*i,100*o]},Dg.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,i=e*n;let o=0;return i<1&&(o=(n-i)/(1-i)),[t[0],100*i,100*o]},Dg.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,i=t[2]/100;if(0===n)return[255*i,255*i,255*i];const o=[0,0,0],r=e%1*6,s=r%1,a=1-s;let l=0;switch(Math.floor(r)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-n)*i,[255*(n*o[0]+l),255*(n*o[1]+l),255*(n*o[2]+l)]},Dg.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,i=e+n*(1-e);let o=0;return i>0&&(o=e/i),[t[0],100*o,100*i]},Dg.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100,i=n*(1-e)+.5*e;let o=0;return i>0&&i<.5?o=e/(2*i):i>=.5&&i<1&&(o=e/(2*(1-i))),[t[0],100*o,100*i]},Dg.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,i=e+n*(1-e);return[t[0],100*(i-e),100*(1-i)]},Dg.hwb.hcg=function(t){const e=t[1]/100,n=t[2]/100,i=1-n,o=i-e;let r=0;return o<1&&(r=(i-o)/(1-o)),[t[0],100*o,100*r]},Dg.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},Dg.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},Dg.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},Dg.gray.hsl=function(t){return[0,0,t[0]]},Dg.gray.hsv=Dg.gray.hsl,Dg.gray.hwb=function(t){return[0,100,t[0]]},Dg.gray.cmyk=function(t){return[0,0,0,t[0]]},Dg.gray.lab=function(t){return[t[0],0,0]},Dg.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),n=(e<<16)+(e<<8)+e,i=n.toString(16).toUpperCase();return"000000".slice(i.length)+i},Dg.rgb.gray=function(t){const e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var Ug=$g;const qg={},Gg=Object.keys(Vg);function Kg(t){const e=function(...e){const n=e[0];return void 0===n||null===n?n:(n.length>1&&(e=n),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function Yg(t){const e=function(...e){const n=e[0];if(void 0===n||null===n)return n;n.length>1&&(e=n);const i=t(e);if("object"===typeof i)for(let{length:t}=i,o=0;o<t;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}for(const bD of Gg){qg[bD]={},Object.defineProperty(qg[bD],"channels",{value:Vg[bD].channels}),Object.defineProperty(qg[bD],"labels",{value:Vg[bD].labels});const t=Ug(bD),e=Object.keys(t);for(const n of e){const e=t[n];qg[bD][n]=Yg(e),qg[bD][n].raw=Kg(e)}}var Xg=qg;const Jg=(t,e=0,n=1)=>t>n?n:t<e?e:t,Zg=(t,e=0,n=Math.pow(10,e))=>Math.round(n*t)/n,Qg=(Math.PI,t=>am(tm(t))),tm=t=>("#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?Zg(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?Zg(parseInt(t.substring(6,8),16)/255,2):1}),em=t=>sm(om(t)),nm=({h:t,s:e,v:n,a:i})=>{const o=(200-e)*n/100;return{h:Zg(t),s:Zg(o>0&&o<200?e*n/100/(o<=100?o:200-o)*100:0),l:Zg(o/2),a:Zg(i,2)}},im=t=>{const{h:e,s:n,l:i}=nm(t);return`hsl(${e}, ${n}%, ${i}%)`},om=({h:t,s:e,v:n,a:i})=>{t=t/360*6,e/=100,n/=100;const o=Math.floor(t),r=n*(1-e),s=n*(1-(t-o)*e),a=n*(1-(1-t+o)*e),l=o%6;return{r:Zg(255*[n,s,r,r,a,n][l]),g:Zg(255*[a,n,n,s,r,r][l]),b:Zg(255*[r,r,a,n,n,s][l]),a:Zg(i,2)}},rm=t=>{const e=t.toString(16);return e.length<2?"0"+e:e},sm=({r:t,g:e,b:n,a:i})=>{const o=i<1?rm(Zg(255*i)):"";return"#"+rm(t)+rm(e)+rm(n)+o},am=({r:t,g:e,b:n,a:i})=>{const o=Math.max(t,e,n),r=o-Math.min(t,e,n),s=r?o===t?(e-n)/r:o===e?2+(n-t)/r:4+(t-e)/r:0;return{h:Zg(60*(s<0?s+6:s)),s:Zg(o?r/o*100:0),v:Zg(o/255*100),a:i}},lm=(t,e)=>{if(t===e)return!0;for(const n in t)if(t[n]!==e[n])return!1;return!0},cm=(t,e)=>t.toLowerCase()===e.toLowerCase()||lm(tm(t),tm(e)),um={},dm=t=>{let e=um[t];return e||(e=document.createElement("template"),e.innerHTML=t,um[t]=e),e},hm=(t,e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))};let fm=!1;const pm=t=>"touches"in t,gm=t=>!(fm&&!pm(t))&&(fm||(fm=pm(t)),!0),mm=(t,e)=>{const n=pm(e)?e.touches[0]:e,i=t.el.getBoundingClientRect();hm(t.el,"move",t.getMove({x:Jg((n.pageX-(i.left+window.pageXOffset))/i.width),y:Jg((n.pageY-(i.top+window.pageYOffset))/i.height)}))},bm=(t,e)=>{const n=e.keyCode;n>40||t.xy&&n<37||n<33||(e.preventDefault(),hm(t.el,"move",t.getMove({x:39===n?.01:37===n?-.01:34===n?.05:33===n?-.05:35===n?1:36===n?-1:0,y:40===n?.01:38===n?-.01:0},!0)))};class vm{constructor(t,e,n,i){const o=dm(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(o.content.cloneNode(!0));const r=t.querySelector(`[part=${e}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=i,this.nodes=[r.firstChild,r]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(fm?"touchmove":"mousemove",this),e(fm?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!gm(t)||!fm&&0!=t.button)return;this.el.focus(),mm(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),mm(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":bm(this,t);break}}style(t){t.forEach((t,e)=>{for(const n in t)this.nodes[e].style.setProperty(n,t[n])})}}class wm extends vm{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:t/360*100+"%",color:im({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Zg(t)}`)}getMove(t,e){return{h:e?Jg(this.h+360*t.x,0,360):360*t.x}}}class _m extends vm{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:100-t.v+"%",left:`${t.s}%`,color:im(t)},{"background-color":im({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Zg(t.s)}%, Brightness ${Zg(t.v)}%`)}getMove(t,e){return{s:e?Jg(this.hsva.s+100*t.x,0,100):100*t.x,v:e?Jg(this.hsva.v-100*t.y,0,100):Math.round(100-100*t.y)}}}var ym=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',km="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Cm="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}";const xm=Symbol("same"),Em=Symbol("color"),Sm=Symbol("hsva"),Tm=Symbol("update"),Am=Symbol("parts"),Pm=Symbol("css"),Im=Symbol("sliders");class Rm extends HTMLElement{static get observedAttributes(){return["color"]}get[Pm](){return[ym,km,Cm]}get[Im](){return[_m,wm]}get color(){return this[Em]}set color(t){if(!this[xm](t)){const e=this.colorModel.toHsva(t);this[Tm](e),this[Em]=t}}constructor(){super();const t=dm(`<style>${this[Pm].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[Am]=this[Im].map(t=>new t(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this["color"],this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const i=this.colorModel.fromAttr(n);this[xm](i)||(this.color=i)}handleEvent(t){const e=this[Sm],n={...e,...t.detail};let i;this[Tm](n),lm(n,e)||this[xm](i=this.colorModel.fromHsva(n))||(this[Em]=i,hm(this,"color-changed",{value:i}))}[xm](t){return this.color&&this.colorModel.equal(t,this.color)}[Tm](t){this[Sm]=t,this[Am].forEach(e=>e.update(t))}}const Om={defaultColor:"#000",toHsva:Qg,fromHsva:({h:t,s:e,v:n})=>em({h:t,s:e,v:n,a:1}),equal:cm,fromAttr:t=>t};class Mm extends Rm{get colorModel(){return Om}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class Dm extends zn{_parentElement;constructor(t=[]){super(t,{idProperty:"viewUid"}),this.on("add",(t,e,n)=>{this._renderViewIntoCollectionParent(e,n)}),this.on("remove",(t,e)=>{e.element&&this._parentElement&&e.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const e of this)this._renderViewIntoCollectionParent(e)}delegate(...t){if(!t.length||!Vm(t))throw new Tt("ui-viewcollection-delegate-wrong-events",this);return{to:e=>{for(const n of this)for(const i of t)n.delegate(i).to(e);this.on("add",(n,i)=>{for(const o of t)i.delegate(o).to(e)}),this.on("remove",(n,i)=>{for(const o of t)i.stopDelegating(o,e)})}}}_renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}remove(t){return super.remove(t)}}function Vm(t){return t.every(t=>"string"==typeof t)}const Nm="http://www.w3.org/1999/xhtml";class Lm extends(Ft()){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(t){super(),Object.assign(this,Ym(Km(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=cb(),this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new Tt("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(e){if(e.children)for(const n of e.children)rb(n)?yield n:sb(n)&&(yield*t(n))}yield*t(this)}static bind(t,e){return{to(n,i){return new Fm({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:i})},if(n,i,o){return new zm({observable:t,emitter:e,attribute:n,valueIfTrue:i,callback:o})}}}static extend(t,e){if(t._isRendered)throw new Tt("template-extend-render",[this,t]);ib(t,Ym(Km(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new Tt("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||Nm,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),Hm(this.text)?this._bindToObservable({schema:this.text,updater:Um(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){if(!this.attributes)return;const e=t.node,n=t.revertData;for(const i in this.attributes){const o=e.getAttribute(i),r=this.attributes[i];n&&(n.attributes[i]=o);const s=lb(r)?r[0].ns:null;if(Hm(r)){const a=lb(r)?r[0].value:r;n&&ub(i)&&a.unshift(o),this._bindToObservable({schema:a,updater:qm(e,i,s),data:t})}else if("style"==i&&"string"!==typeof r[0])this._renderStyleAttribute(r[0],t);else{n&&o&&ub(i)&&r.unshift(o);const t=r.map(t=>t&&t.value||t).reduce((t,e)=>t.concat(e),[]).reduce(eb,"");ob(t)||e.setAttributeNS(s,i,t)}}}_renderStyleAttribute(t,e){const n=e.node;for(const i in t){const o=t[i];Hm(o)?this._bindToObservable({schema:[o],updater:Gm(n,i),data:e}):Wm(i)?n.style.setProperty(i,o):n.style[i]=o}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,i=t.isApplying;let o=0;for(const r of this.children)if(ab(r)){if(!i){r.setParent(e);for(const t of r)n.appendChild(t.element)}}else if(rb(r))i||(r.isRendered||r.render(),n.appendChild(r.element));else if(ke(r))n.appendChild(r);else if(i){const e=t.revertData,i=cb();e.children.push(i),r._renderNode({intoFragment:!1,node:n.childNodes[o++],isApplying:!0,revertData:i})}else n.appendChild(r.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map(n=>{const[i,o]=e.split("@");return n.activateDomEventListener(i,o,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const i=n.revertData;$m(t,e,n);const o=t.filter(t=>!ob(t)).filter(t=>t.observable).map(i=>i.activateAttributeListener(t,e,n));i&&i.bindings.push(o)}_revertTemplateFromNode(t,e){for(const i of e.bindings)for(const t of i)t();if(e.text)return void(t.textContent=e.text);const n=t;for(const i in e.attributes){const t=e.attributes[i];null===t?n.removeAttribute(i):n.setAttribute(i,t)}for(let i=0;i<e.children.length;++i)this._revertTemplateFromNode(n.childNodes[i],e.children[i])}}class Bm{attribute;observable;emitter;callback;constructor(t){this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const i=()=>$m(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,i),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,i)}}}class Fm extends Bm{eventNameOrFunction;constructor(t){super(t),this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,e,n){const i=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,i),()=>{this.emitter.stopListening(n.node,t,i)}}}class zm extends Bm{valueIfTrue;constructor(t){super(t),this.valueIfTrue=t.valueIfTrue}getValue(t){const e=super.getValue(t);return!ob(e)&&(this.valueIfTrue||!0)}}function Hm(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(Hm):t instanceof Bm)}function Wm(t){const e=/^--[a-zA-Z_-][\w-]*$/;return e.test(t)}function jm(t,e){return t.map(t=>t instanceof Bm?t.getValue(e):t)}function $m(t,e,{node:n}){const i=jm(t,n);let o;o=1==t.length&&t[0]instanceof zm?i[0]:i.reduce(eb,""),ob(o)?e.remove():e.set(o)}function Um(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function qm(t,e,n){return{set(i){t.setAttributeNS(n,e,i)},remove(){t.removeAttributeNS(n,e)}}}function Gm(t,e){return{set(n){Wm(e)?t.style.setProperty(e,n):t.style[e]=n},remove(){Wm(e)?t.style.removeProperty(e):t.style[e]=null}}}function Km(t){const e=z(t,t=>{if(t&&(t instanceof Bm||sb(t)||rb(t)||ab(t)))return t});return e}function Ym(t){if("string"==typeof t?t=Zm(t):t.text&&Qm(t),t.on&&(t.eventListeners=Jm(t.on),delete t.on),!t.text){t.attributes&&Xm(t.attributes);const e=[];if(t.children)if(ab(t.children))e.push(t.children);else for(const n of t.children)sb(n)||rb(n)||ke(n)?e.push(n):e.push(new Lm(n));t.children=e}return t}function Xm(t){for(const e in t)t[e].value&&(t[e].value=Mn(t[e].value)),tb(t,e)}function Jm(t){for(const e in t)tb(t,e);return t}function Zm(t){return{text:[t]}}function Qm(t){t.text=Mn(t.text)}function tb(t,e){t[e]=Mn(t[e])}function eb(t,e){return ob(e)?t:ob(t)?e:`${t} ${e}`}function nb(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function ib(t,e){if(e.attributes&&(t.attributes||(t.attributes={}),nb(t.attributes,e.attributes)),e.eventListeners&&(t.eventListeners||(t.eventListeners={}),nb(t.eventListeners,e.eventListeners)),e.text&&t.text.push(...e.text),e.children&&e.children.length){if(t.children.length!=e.children.length)throw new Tt("ui-template-extend-children-mismatch",t);let n=0;for(const i of e.children)ib(t.children[n++],i)}}function ob(t){return!t&&0!==t}function rb(t){return t instanceof db}function sb(t){return t instanceof Lm}function ab(t){return t instanceof Dm}function lb(t){return i(t[0])&&t[0].ns}function cb(){return{children:[],bindings:[],attributes:{}}}function ub(t){return"class"==t||"style"==t}class db extends(Ee(ie())){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(t){super(),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new zn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t,n.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Lm.bind(this,this)}createCollection(t){const e=new Dm(t);return this._viewCollections.add(e),e}registerChild(t){be(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){be(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new Lm(t)}extendTemplate(t){Lm.extend(this.template,t)}render(){if(this.isRendered)throw new Tt("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}const hb={POLITE:"polite",ASSERTIVE:"assertive"};class fb{editor;view;constructor(t){this.editor=t,t.once("ready",()=>{for(const t of Object.values(hb))this.announce("",t)})}announce(t,e=hb.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new pb(n.locale),n.ui.view.body.add(this.view));const{politeness:i,isUnsafeHTML:o}="string"===typeof e?{politeness:e}:e;let r=this.view.regionViews.find(t=>t.politeness===i);r||(r=new gb(n,i),this.view.regionViews.add(r)),r.announce({announcement:t,isUnsafeHTML:o})}}class pb extends db{regionViews;constructor(t){super(t),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class gb extends db{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(t,e){super(t.locale),this.setTemplate({tag:"div",attributes:{"aria-live":e,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{null!==this._pruneAnnouncementsInterval&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=e,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:e}){if(!t.trim().length)return;const n=document.createElement("li");e?this._domConverter.setContentOf(n,t):n.innerText=t,this._listElement.appendChild(n)}get _listElement(){return this.element.querySelector("ul")}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mb({emitter:t,activator:e,callback:n,contextElements:i,listenerOptions:o}){t.listenTo(document,"mousedown",(t,o)=>{if(!e())return;const r="function"==typeof o.composedPath?o.composedPath():[],s="function"==typeof i?i():i;for(const e of s)if(e.contains(o.target)||r.includes(e))return;n()},o)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bb(t){class e extends t{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...t){super(...t),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.template&&this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}function vb(t){class e extends t{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...t){super(...t),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(Q.document,"mouseup",this._onDragEndBound),this.listenTo(Q.document,"touchend",this._onDragEndBound),this.listenTo(Q.document,"mousemove",this._onDragBound),this.listenTo(Q.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(Q.document,"mouseup",this._onDragEndBound),this.stopListening(Q.document,"touchend",this._onDragEndBound),this.stopListening(Q.document,"mousemove",this._onDragBound),this.stopListening(Q.document,"touchmove",this._onDragBound)}_onDragStart(t,e){if(!this._isHandleElementPressed(e))return;this._attachDragListeners();let n=0,i=0;e instanceof MouseEvent?(n=e.clientX,i=e.clientY):(n=e.touches[0].clientX,i=e.touches[0].clientY),this._lastDraggingCoordinates={x:n,y:i},this.isDragging=!0}_onDrag(t,e){if(!this.isDragging)return void this._detachDragListeners();let n=0,i=0;e instanceof MouseEvent?(n=e.clientX,i=e.clientY):(n=e.touches[0].clientX,i=e.touches[0].clientY),e.preventDefault(),this.fire("drag",{deltaX:Math.round(n-this._lastDraggingCoordinates.x),deltaY:Math.round(i-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:n,y:i}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(t){return!!this.dragHandleElement&&(this.dragHandleElement===t.target||t.target instanceof HTMLElement&&this.dragHandleElement.contains(t.target))}}return e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wb({view:t}){t.listenTo(t.element,"submit",(e,n)=>{n.preventDefault(),t.fire("submit")},{useCapture:!0})}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _b({keystrokeHandler:t,focusTracker:e,gridItems:n,numberOfColumns:i,uiLanguageDirection:o}){const r="number"===typeof i?()=>i:i;function s(t){return i=>{const o=n.find(t=>t.element===e.focusedElement),r=n.getIndex(o),s=t(r,n);n.get(s).focus(),i.stopPropagation(),i.preventDefault()}}function a(t,e){return t===e-1?0:t+1}function l(t,e){return 0===t?e-1:t-1}t.set("arrowright",s((t,e)=>"rtl"===o?l(t,e.length):a(t,e.length))),t.set("arrowleft",s((t,e)=>"rtl"===o?a(t,e.length):l(t,e.length))),t.set("arrowup",s((t,e)=>{let n=t-r();return n<0&&(n=t+r()*Math.floor(e.length/r()),n>e.length-1&&(n-=r())),n})),t.set("arrowdown",s((t,e)=>{let n=t+r();return n>e.length-1&&(n=t%r()),n}))}class yb extends db{id;constructor(t){super(t),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Ct()}`;const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}class kb extends db{constructor(t,e){super(t);const n=t.t,i=new yb;i.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":i.id,role:"document",tabindex:-1},children:[ve(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),i]})}focus(){this.element.focus()}_createCategories(t){return t.map(t=>{const e=[ve(document,"h3",{},t.label),...Array.from(t.groups.values()).map(t=>this._createGroup(t)).flat()];return t.description&&e.splice(1,0,ve(document,"p",{},t.description)),ve(document,"section",{},e)})}_createGroup(t){const e=t.keystrokes.sort((t,e)=>t.label.localeCompare(e.label)).map(t=>this._createGroupRow(t)).flat(),n=[ve(document,"dl",{},e)];return t.label&&n.unshift(ve(document,"h4",{},t.label)),n}_createGroupRow(t){const e=this.locale.t,n=ve(document,"dt"),i=ve(document,"dd"),o=xb(t.keystroke),r=[];for(const s of o)r.push(s.map(Cb).join(""));return n.innerHTML=t.label,i.innerHTML=r.join(", ")+(t.mayRequireFn&&nt.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[n,i]}}function Cb(t){return xn(t).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function xb(t){return"string"===typeof t?[[t]]:"string"===typeof t[0]?[t]:t}class Eb extends db{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml"),e=t.querySelector("svg");if(!e)throw new Tt("ui-iconview-invalid-svg",this);const n=e.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:i,value:o}of Array.from(e.attributes))Eb.presentationalAttributeNames.includes(i)&&this.element.setAttribute(i,o);while(this.element.firstChild)this.element.removeChild(this.element.firstChild);while(e.childNodes.length>0)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}class Sb extends db{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class Tb extends db{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(t,e=new Sb){super(t);const n=this.bindTemplate,i=Ct();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${i}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(e),this.iconView=new Eb,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",t=>!t),n.if("isVisible","ck-hidden",t=>!t),n.to("isOn",t=>t?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",t=>t||"button"),tabindex:n.to("tabindex"),"aria-checked":n.to("_ariaChecked"),"aria-pressed":n.to("_ariaPressed"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,t=>!t),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(t=>{this.isEnabled?this.fire("execute"):t.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(t,e,n)=>!(!e||Ab(n))&&String(!!t)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(t,e,n)=>!(!e||!Ab(n))&&String(!!t)),nt.isSafari&&(this._focusDelayed||(this._focusDelayed=Jn(()=>this.focus(),0)),o.on.mousedown=n.to(()=>{this._focusDelayed()}),o.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(t,e,n,i)=>{n&&!i?this.children.add(this.iconView,0):!n&&i&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new db;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>xn(t))}]}),t}_getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=xn(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}function Ab(t){switch(t){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class Pb extends db{children;iconView;constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("label",e.label||""),this.set("class",e.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),e.icon&&(this.iconView=new Eb,this.iconView.content=e.icon,this.children.add(this.iconView));const i=new db(t);i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:n.to("label")}]}),this.children.add(i)}}class Ib extends(Ft()){focusables;focusTracker;keystrokeHandler;actions;constructor(t){if(super(),this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(const i of n)t.keystrokeHandler.set(i,(t,n)=>{this[e](),n()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Rb)||null}get last(){return this.focusables.filter(Rb).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,n)=>{const i=e.element===this.focusTracker.focusedElement;return i&&(t=n),i}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;t&&this.focusables.getIndex(t)===this.current||t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;t&&this.focusables.getIndex(t)===this.current||t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const e=()=>null===this.current?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",t=>{const n=e();this.focusNext(),n!==e()&&t.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",t=>{const n=e();this.focusPrevious(),n!==e()&&t.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,e){t&&this.focusTracker.focusedElement!==t.element&&t.focus(e)}_getDomFocusableItem(t){const e=this.focusables.length;if(!e)return null;const n=this.current;if(null===n)return this[1===t?"first":"last"];let i=this.focusables.get(n),o=(n+e+t)%e;do{const n=this.focusables.get(o);if(Rb(n)){i=n;break}o=(o+e+t)%e}while(o!==n);return i}}function Rb(t){return Ob(t)&&Je(t.element)}function Ob(t){return!(!("focus"in t)||"function"!=typeof t.focus)}function Mb(t){return Ob(t)&&"focusCycler"in t&&t.focusCycler instanceof Ib}class Db extends db{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(t){super(t),this.children=this.createCollection(),this.keystrokes=new Gn,this._focusTracker=new Wn,this._focusables=new Dm,this.focusCycler=new Ib({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const e of t){const t=new Tb(this.locale);let n;for(n in t.on("execute",()=>e.onExecute()),e.onCreate&&e.onCreate(t),e)"onExecute"!=n&&"onCreate"!=n&&t.set(n,e[n]);this.children.add(t)}this._updateFocusCyclableItems()}focus(t){-1===t?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class Vb extends db{children;constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){while(this.children.length)this.children.remove(0)}}const Nb={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},Lb=qe("px");class Bb extends(vb(db)){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(t,{getCurrentDomRoot:e,getViewportOffset:n,keystrokeHandlerOptions:i}){super(t);const o=this.bindTemplate,r=t.t;this.set("className",""),this.set("ariaLabel",r("Editor dialog")),this.set("isModal",!1),this.set("position",Nb.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=e,this._getViewportOffset=n,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Gn,this.focusTracker=new Wn,this._focusables=new Dm,this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:i}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",t=>!t),o.if("_isVisible","ck-hidden",t=>!t)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",t=>Lb(t)),left:o.to("_left",t=>Lb(t)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,e)=>{t.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),e())}),this.on("drag",(t,{deltaX:e,deltaY:n})=>{this.wasMoved=!0,this.moveBy(e,n)}),this.listenTo(Q.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(Q.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,e,n)=>{n&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:e,hasCloseButton:n=!0,content:i,actionButtons:o}){e&&(this.headerView=new Pb(this.locale,{icon:t}),n&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=e,this.ariaLabel=e,this.parts.add(this.headerView,0)),i&&(i instanceof db&&(i=[i]),this.contentView=new Vb(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),o&&(this.actionsView=new Db(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,e){const n=this._getViewportRect(),i=this._getDialogRect();t+i.width>n.right&&(t=n.right-i.width),t<n.left&&(t=n.left),e<n.top&&(e=n.top),this._moveTo(t,e)}_moveTo(t,e){this._left=t,this._top=e}moveBy(t,e){this.moveTo(this._left+t,this._top+e)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let e,n=this.position;this._getCurrentDomRoot()?e=this._getVisibleDomRootRect(t):n=Nb.SCREEN_CENTER;const i=Bb.defaultOffset,o=this._getDialogRect();if(null!=this.position){if("function"==typeof this.position){const t=this.position(o,e);return null==t?void this._moveOffScreen():void this._moveTo(t.left,t.top)}switch(n){case Nb.EDITOR_TOP_SIDE:if(e){const t="ltr"===this.locale.contentLanguageDirection?e.right-o.width-i:e.left+i;this.moveTo(t,e.top+i)}else this._moveOffScreen();break;case Nb.EDITOR_CENTER:e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),Math.round(e.top+e.height/2-o.height/2)):this._moveOffScreen();break;case Nb.SCREEN_CENTER:this.moveTo(Math.round((t.width-o.width)/2),Math.round((t.height-o.height)/2));break;case Nb.EDITOR_TOP_CENTER:e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.top+i):this._moveOffScreen();break;case Nb.EDITOR_BOTTOM_CENTER:e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.bottom-o.height-i):this._moveOffScreen();break;case Nb.EDITOR_ABOVE_CENTER:e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.top-o.height-i):this._moveOffScreen();break;case Nb.EDITOR_BELOW_CENTER:e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.bottom+i):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let e=new Le(this._getCurrentDomRoot()).getVisible();return e?(e=t.getIntersection(e),e||null):null}_getDialogRect(){return new Le(this.element.firstElementChild)}_getViewportRect(){const t=new Le(Q.window);return this.isModal?t:tn(this._getViewportOffset())}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const e of this.contentView.children)Ob(e)&&t.push(e);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),Mb(t)&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){const t=new Tb(this.locale),e=this.locale.t;return t.set({label:e("Close"),tooltip:!0,icon:mp}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}}class Fb extends Gh{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}constructor(t){super(t);const e=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:e("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}destroy(){super.destroy(),Fb._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,e)=>{this._show(e)}),this.on("show",(t,e)=>{e.onShow&&e.onShow(this)},{priority:"low"}),this.on("hide",()=>{Fb._visibleDialogPlugin&&Fb._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const t=this.editor;t.keystrokes.set("Ctrl+F6",(e,n)=>{this.isOpen&&!this.view.isModal&&(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),n())})}_initMultiRootIntegration(){const t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;const e=t.document.differ.getChangedRoots();for(const t of e)t.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:e,title:n,hasCloseButton:i=!0,content:o,actionButtons:r,className:s,isModal:a,position:l,onHide:c,keystrokeHandlerOptions:u}){const d=this.editor;this.view=new Bb(d.locale,{getCurrentDomRoot:()=>d.editing.view.getDomRoot(d.model.document.selection.anchor.root.rootName),getViewportOffset:()=>d.ui.viewportOffset,keystrokeHandlerOptions:u});const h=this.view;h.on("close",()=>{this.hide()}),d.ui.view.body.add(h),d.keystrokes.listenTo(h.element),l||(l=a?Nb.SCREEN_CENTER:Nb.EDITOR_CENTER),a&&this._lockBodyScroll(),h.set({position:l,_isVisible:!0,className:s,isModal:a}),h.setupParts({icon:e,title:n,hasCloseButton:i,content:o,actionButtons:r}),this.id=t,c&&(this._onHide=c),this.isOpen=!0,Fb._visibleDialogPlugin=this}hide(){Fb._visibleDialogPlugin&&Fb._visibleDialogPlugin.fire(`hide:${Fb._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const t=this.editor,e=this.view;e.isModal&&this._unlockBodyScroll(),e.contentView&&e.contentView.reset(),t.ui.view.body.remove(e),t.ui.focusTracker.remove(e.element),t.keystrokes.stopListening(e.element),e.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,Fb._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}}class zb extends Tb{_checkIconHolderView=new Hb;constructor(t,e=new Sb){super(t,e),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",n.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(t,e)=>t||e)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,e,n)=>{const{children:i,_checkIconHolderView:o}=this;n?i.add(o,0):i.remove(o)})}}class Hb extends db{children;_checkIconView=this._createCheckIconView();constructor(){super();const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,e,n)=>{const{children:i,_checkIconView:o}=this;n&&!i.has(o)?i.add(o):!n&&i.has(o)&&i.remove(o)})}_createCheckIconView(){const t=new Eb;return t.content=vp,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class Wb extends zb{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class jb extends Gh{contentView=null;static get requires(){return[Fb]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t;t.ui.componentFactory.add("accessibilityHelp",()=>{const t=this._createButton(Tb);return t.set({tooltip:!0,withText:!1,label:e("Accessibility help")}),t}),t.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const t=this._createButton(Wb);return t.label=e("Accessibility"),t}),t.keystrokes.set("Alt+0",(t,e)=>{this._toggleDialog(),e()}),this._setupRootLabels()}_createButton(t){const e=this.editor,n=e.plugins.get("Dialog"),i=e.locale,o=new t(i);return o.set({keystroke:"Alt+0",icon:sp,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(n,"id",t=>"accessibilityHelp"===t),o}_setupRootLabels(){const t=this.editor,e=t.editing.view,n=t.t;function i(t,e){const i=e.getAttribute("aria-label"),o=[i,n("Press %0 for help.",[xn("Alt+0")])].filter(t=>t).join(". ");t.setAttribute("aria-label",o,e)}t.ui.on("ready",()=>{e.change(t=>{for(const n of e.document.roots)i(t,n)}),t.on("addRoot",(n,o)=>{const r=t.editing.view.document.getRoot(o.rootName);e.change(t=>i(t,r))},{priority:"low"})})}_toggleDialog(){const t=this.editor,e=t.plugins.get("Dialog"),n=t.locale.t;this.contentView||(this.contentView=new kb(t.locale,t.accessibility.keystrokeInfos)),"accessibilityHelp"===e.id?e.hide():e.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:n("Accessibility help"),icon:sp,hasCloseButton:!0,content:this.contentView})}}class $b extends Dm{locale;_bodyCollectionContainer;static _bodyWrapper;constructor(t,e=[]){super(e),this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Lm({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),$b._bodyWrapper&&$b._bodyWrapper.isConnected||($b._bodyWrapper=ve(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild($b._bodyWrapper)),$b._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),$b._bodyWrapper&&!$b._bodyWrapper.childElementCount&&($b._bodyWrapper.remove(),delete $b._bodyWrapper)}}const Ub=qe("px"),qb={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class Gb extends db{content;_pinWhenIsVisibleCallback;_resizeObserver;constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",t=>`ck-balloon-panel_${t}`),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",Ub),left:e.to("left",Ub)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const e=Kb(t.target);if(e&&!Je(e))return!1;this.show();const n=Gb.defaultPositions,i=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast,n.viewportStickyNorth],limiter:Q.document.body,fitInViewport:!0},t),o=Gb._getOptimalPosition(i)||qb,r=parseInt(o.left),s=parseInt(o.top),a=o.name,l=o.config||{},{withArrow:c=!0}=l;return this.top=s,this.left=r,this.position=a,this.withArrow=c,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let e=Kb(t.target);const n=t.limiter?Kb(t.limiter):Q.document.body;if(this.listenTo(Q.document,"scroll",(i,o)=>{const r=o.target,s=e&&r.contains(e),a=n&&r.contains(n);!s&&!a&&e&&n||this.attachTo(t)},{useCapture:!0}),this.listenTo(Q.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(e&&De(e)&&(e=e.parentElement),e)){const t=()=>{Je(e)||this.unpin()};this._resizeObserver=new $e(e,t)}return!0}_stopPinning(){this.stopListening(Q.document,"scroll"),this.stopListening(Q.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:e=Gb.arrowSideOffset,heightOffset:n=Gb.arrowHeightOffset,stickyVerticalOffset:i=Gb.stickyVerticalOffset,config:o}=t;return{northWestArrowSouthWest:(t,n)=>({top:r(t,n),left:t.left-e,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(t,n)=>({top:r(t,n),left:t.left-.25*n.width-e,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(t,e)=>({top:r(t,e),left:t.left-e.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(t,n)=>({top:r(t,n),left:t.left-.75*n.width+e,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(t,n)=>({top:r(t,n),left:t.left-n.width+e,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(t,n)=>({top:r(t,n),left:t.left+t.width/2-e,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(t,n)=>({top:r(t,n),left:t.left+t.width/2-.25*n.width-e,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(t,e)=>({top:r(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(t,n)=>({top:r(t,n),left:t.left+t.width/2-.75*n.width+e,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(t,n)=>({top:r(t,n),left:t.left+t.width/2-n.width+e,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(t,n)=>({top:r(t,n),left:t.right-e,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(t,n)=>({top:r(t,n),left:t.right-.25*n.width-e,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(t,e)=>({top:r(t,e),left:t.right-e.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(t,n)=>({top:r(t,n),left:t.right-.75*n.width+e,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(t,n)=>({top:r(t,n),left:t.right-n.width+e,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:t=>({top:s(t),left:t.left-e,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.left-.25*n.width-e,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(t,e)=>({top:s(t),left:t.left-e.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.left-.75*n.width+e,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(t,n)=>({top:s(t),left:t.left-n.width+e,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:t=>({top:s(t),left:t.left+t.width/2-e,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.left+t.width/2-.25*n.width-e,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(t,e)=>({top:s(t),left:t.left+t.width/2-e.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.left+t.width/2-.75*n.width+e,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(t,n)=>({top:s(t),left:t.left+t.width/2-n.width+e,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:t=>({top:s(t),left:t.right-e,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.right-.25*n.width-e,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(t,e)=>({top:s(t),left:t.right-e.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.right-.75*n.width+e,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(t,n)=>({top:s(t),left:t.right-n.width+e,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(t,e)=>({top:t.top+t.height/2-e.height/2,left:t.left-e.width-n,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(t,e)=>({top:t.top+t.height/2-e.height/2,left:t.right+n,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(t,e,n)=>{const r=new Le(Q.document.body).getIntersection(n.getVisible());if(!r)return null;const s=r.getVisible();return t.getIntersection(s)&&s.top-t.top-i<e.height&&s.bottom-t.bottom<e.height?{top:s.top+i,left:t.left+t.width/2-e.width/2,name:"arrowless",config:{withArrow:!1,...o}}:null}};function r(t,e){return t.top-e.height-n}function s(t){return t.bottom+n}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=Ze;static defaultPositions=Gb.generatePositions()}function Kb(t){return W(t)?t:Ve(t)?t.commonAncestorContainer:"function"==typeof t?Kb(t()):null}const Yb=50,Xb=350;class Jb extends(Ee()){editor;_balloonView=null;_showBalloonThrottled=Vh(()=>this._showBalloon(),50,{leading:!0});_lastFocusedEditableElement=null;_balloonClass;constructor(t,e={}){super(),this.editor=t,this._balloonClass=e.balloonClass,t.on("ready",()=>this._handleEditorReady())}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor;this._isEnabled()&&t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(t,e,n)=>{this._updateLastFocusedEditableElement(),n?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(t,e,n)=>{this._updateLastFocusedEditableElement(),n&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:"ltr"===this.editor.locale.contentLanguageDirection?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const t=this._getBalloonAttachOptions();t&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(t))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const t=this.editor,e=new Gb,n=this._createBadgeContent();return e.content.add(n),this._balloonClass&&(e.class=this._balloonClass),t.ui.view.body.add(e),e}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const t=this._getNormalizedConfig(),e="right"===t.side?Zb(this._lastFocusedEditableElement,t):Qb(this._lastFocusedEditableElement,t);return{target:this._lastFocusedEditableElement,positions:[e]}}_updateLastFocusedEditableElement(){const t=this.editor,e=t.ui.focusTracker.isFocused,n=t.ui.focusTracker.focusedElement;if(!e||!n)return void(this._lastFocusedEditableElement=null);const i=Array.from(t.ui.getEditableElementsNames()).map(e=>t.ui.getEditableElement(e));i.includes(n)?this._lastFocusedEditableElement=n:this._lastFocusedEditableElement=i[0]}}function Zb(t,e){return tv(t,e,(t,n)=>t.left+t.width-n.width-e.horizontalOffset)}function Qb(t,e){return tv(t,e,t=>t.left+e.horizontalOffset)}function tv(t,e,n){return(i,o)=>{const r=new Le(t);if(r.width<Xb||r.height<Yb)return null;let s;s="inside"===e.position?r.bottom-o.height:r.bottom-o.height/2,s-=e.verticalOffset;const a=n(r,o),l=i.clone().moveTo(a,s).getIntersection(o.clone().moveTo(a,s)),c=l.getVisible();return!c||c.getArea()<o.getArea()?null:{top:s,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}const ev="Powered by";class nv extends Jb{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor,e=t.config.get("ui.poweredBy.forceVisible");if(e)return!0;const n=t.config.get("licenseKey");if("GPL"==n)return!0;const i=Zn(n.split(".")[1]);return!i||!i.whiteLabel}_createBadgeContent(){return new iv(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,i="inside"===n?5:t.verticalOffset;return{position:n,side:e.side||t.side,label:void 0===e.label?ev:e.label,verticalOffset:void 0!==e.verticalOffset?e.verticalOffset:i,horizontalOffset:void 0!==e.horizontalOffset?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class iv extends db{constructor(t,e){super(t);const n=new Eb,i=this.bindTemplate;n.set({content:ag,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],n],on:{dragstart:i.to(t=>t.preventDefault())}}]})}}class ov extends Tb{toggleSwitchView;constructor(t){super(t),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new db;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class rv extends(av(Tb)){}class sv extends(av(zb)){}function av(t){class e extends t{_fileInputView;constructor(...t){super(...t),this._fileInputView=new lv(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}class lv extends db{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(/* istanbul ignore next -- @preserve */()=>{this.element?.files?.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class cv extends db{buttonView;children;constructor(t,e){super(t);const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),e&&this.children.addMany(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const t=new Tb(this.locale),e=t.bindTemplate;return t.set({withText:!0,icon:Cp}),t.extendTemplate({attributes:{"aria-expanded":e.to("isOn",t=>String(t))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",t=>!t),t.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),t}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function uv(t,e){const n=t.t,i={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return e.map(t=>{const e=i[t.label];return e&&e!=t.label&&(t.label=e),t})}function dv(t){return t.map(hv).filter(t=>!!t)}function hv(t){return"string"===typeof t?{model:t,label:t,hasBorder:!1,view:{name:"span",styles:{color:t}}}:{model:t.color,label:t.label||t.color,hasBorder:void 0!==t.hasBorder&&t.hasBorder,view:{name:"span",styles:{color:`${t.color}`}}}}class fv extends Tb{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=_p,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",t=>nt.isMediaForcedColors?null:t)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class pv extends db{columns;items;focusTracker;keystrokes;constructor(t,e){super(t);const n=e&&e.colorDefinitions?e.colorDefinitions:[];this.columns=e?.columns||5;const i={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Wn,this.keystrokes=new Gn,this.items.on("add",(t,e)=>{e.isOn=e.color===this.selectedColor}),n.forEach(t=>{const e=new fv;e.set({color:t.color,label:t.label,tooltip:!0,hasBorder:t.options.hasBorder}),e.on("execute",()=>{this.fire("execute",{value:t.color,hasBorder:t.options.hasBorder,label:t.label})}),this.items.add(e)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:i}}),this.on("change:selectedColor",(t,e,n)=>{for(const i of this.items)i.isOn=i.color===n})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element),_b({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale?.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}function gv(t,e){if(!t)return"";const n=wv(t);if(!n)return"";if(n.space===e)return t;if(!_v(n))return"";const i=Xg[n.space],o=i[e];if(!o)return"";const r=o("hex"===n.space?n.hexValue:n.values);return vv(r,e)}function mv(t){if(!t)return"";const e=wv(t);return e?"hex"===e.space?e.hexValue:gv(t,"hex"):"#000"}function bv(t,e){void 0===customElements.get(t)&&customElements.define(t,e)}function vv(t,e){switch(e){case"hex":return`#${t}`;case"rgb":return`rgb(${t[0]}, ${t[1]}, ${t[2]})`;case"hsl":return`hsl(${t[0]}, ${t[1]}%, ${t[2]}%)`;case"hwb":return`hwb(${t[0]}, ${t[1]}, ${t[2]})`;case"lab":return`lab(${t[0]}% ${t[1]} ${t[2]})`;case"lch":return`lch(${t[0]}% ${t[1]} ${t[2]})`;default:return""}}function wv(t){if(t.startsWith("#")){const e=Ag(t);return{space:"hex",values:e.values,hexValue:t,alpha:e.alpha}}const e=Ag(t);return e.space?e:null}function _v(t){return Object.keys(Xg).includes(t.space)}class yv extends db{fieldView;labelView;statusView;fieldWrapperChildren;constructor(t,e){super(t);const n=`ck-labeled-field-view-${Ct()}`,i=`ck-labeled-field-view-status-${Ct()}`;this.fieldView=e(this,n,i),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(i),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(t,e)=>t||e);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",t=>!t),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const e=new yb(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}_createStatusView(t){const e=new db(this.locale),n=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",t=>!t)],id:t,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),e}focus(t){this.fieldView.focus(t)}}class kv extends db{focusTracker;constructor(t){super(t),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Wn,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",e.if("isFocused","ck-input_focused"),e.if("isEmpty","ck-input-text_empty"),e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),tabindex:e.to("tabIndex"),readonly:e.to("isReadOnly"),"aria-invalid":e.if("hasError",!0),"aria-describedby":e.to("ariaDescribedById"),"aria-label":e.to("ariaLabel")},on:{input:e.to((...t)=>{this.fire("input",...t),this._updateIsEmpty()}),change:e.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(t,e,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Cv(this.element)}_setDomElementValue(t){this.element.value=t||0===t?t:""}}function Cv(t){return!t.value}class xv extends kv{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class Ev extends xv{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class Sv extends xv{constructor(t,{min:e,max:n,step:i}={}){super(t);const o=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",i),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}class Tv extends db{children;constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",t=>`ck-dropdown__panel_${t}`),e.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:e.to(t=>{"input"!==t.target.tagName.toLocaleLowerCase()&&t.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;"function"===typeof t.focus?t.focus():At("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;"function"===typeof t.focusLast?t.focusLast():t.focus()}}}class Av extends db{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;menuView;constructor(t,e,n){super(t);const i=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Gn,this.focusTracker=new Wn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",t=>!t)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,e,n)=>{if(n)if("auto"===this.panelPosition){const t=Av._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=t?t.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(t,e)=>{this.isOpen&&(this.isOpen=!1,e())};this.keystrokes.set("arrowdown",(t,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())}),this.keystrokes.set("arrowright",(t,e)=>{this.isOpen&&e()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:e,southEast:n,southWest:i,northEast:o,northWest:r,southMiddleEast:s,southMiddleWest:a,northMiddleEast:l,northMiddleWest:c}=Av.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[n,i,s,a,t,o,r,l,c,e]:[i,n,a,s,t,r,o,c,l,e]}get _defaultPanelPositionName(){return"rtl"===this.locale.uiLanguageDirection?"sw":"se"}static defaultPanelPositions={south:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),southMiddleEast:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}),southMiddleWest:(t,e)=>({top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"}),north:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),northMiddleEast:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}),northMiddleWest:(t,e)=>({top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"})};static _getOptimalPosition=Ze}class Pv extends Tb{arrowView;constructor(t){super(t),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Eb;return t.content=Cp,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class Iv extends db{children;constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",e.if("isVisible","ck-hidden",t=>!t)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class Rv extends db{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Ov extends db{labelView;items;children;constructor(t,e=new yb){super(t);const n=this.bindTemplate,i=new Mv(t);this.set({label:"",isVisible:!0}),this.labelView=e,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,i]),i.set({role:"group",ariaLabelledBy:e.id}),i.focusTracker.destroy(),i.keystrokes.destroy(),this.items=i.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",n.if("isVisible","ck-hidden",t=>!t)]},children:this.children})}focus(){if(this.items){const t=this.items.find(t=>!(t instanceof Rv));t&&t.focus()}}}class Mv extends db{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(t){super(t);const e=this.bindTemplate;this.focusables=new Dm,this.items=this.createCollection(),this.focusTracker=new Wn,this.keystrokes=new Gn,this._focusCycler=new Ib({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:e.to("role"),"aria-label":e.to("ariaLabel"),"aria-labelledby":e.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof Ov?this._registerFocusableItemsGroup(t):t instanceof Iv&&this._registerFocusableListItem(t);this.items.on("change",(t,e)=>{for(const n of e.removed)n instanceof Ov?this._deregisterFocusableItemsGroup(n):n instanceof Iv&&this._deregisterFocusableListItem(n);for(const n of Array.from(e.added).reverse())n instanceof Ov?this._registerFocusableItemsGroup(n,e.index):this._registerFocusableListItem(n,e.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,e){this.focusTracker.add(t.element),this.focusables.add(t,e)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(e,n)=>{for(const t of n.removed)this._deregisterFocusableListItem(t);for(const i of Array.from(n.added).reverse())this._registerFocusableListItem(i,this.items.getIndex(t)+n.index)}}_registerFocusableItemsGroup(t,e){Array.from(t.items).forEach((t,n)=>{const i="undefined"!==typeof e?e+n:void 0;this._registerFocusableListItem(t,i)});const n=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,n),t.items.on("change",n)}_deregisterFocusableItemsGroup(t){for(const e of t.items)this._deregisterFocusableListItem(e);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}class Dv extends db{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Vv extends db{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nv(t){return t.bindTemplate.to(e=>{e.target===t.element&&e.preventDefault()})}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Lv(t){if(Array.isArray(t))return{items:t,removeItems:[]};const e={items:[],removeItems:[]};return t?{...e,...t}:e}const Bv=(()=>({alignLeft:up,bold:pp,importExport:Ap,paragraph:eg,plus:rg,text:_g,threeVerticalDots:yg,pilcrow:og,dragIndicator:kp}))();class Fv extends db{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(t,e){super(t);const n=this.bindTemplate,i=this.t;this.options=e||{},this.set("ariaLabel",i("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new Wn,this.keystrokes=new Gn,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new zv(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o="rtl"===t.uiLanguageDirection;this._focusCycler=new Ib({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact"),n.if("isGrouping","ck-toolbar_grouping"),n.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:n.to("role"),"aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Nv(this)}}),this._behavior=this.options.shouldGroupWhenFull?new Wv(this):new Hv(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t);this.items.on("add",(t,e)=>{this.focusTracker.add(e)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,e,n){this.items.addMany(this._buildItemsFromConfig(t,e,n))}switchBehavior(t){this._behavior.type!==t&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),"dynamic"===t?(this._behavior=new Wv(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new Hv(this),this._behavior.render(this)))}_buildItemsFromConfig(t,e,n){const o=Lv(t),r=n||o.removeItems,s=this._cleanItemsConfiguration(o.items,e,r).map(t=>i(t)?this._createNestedToolbarDropdown(t,e,r):"|"===t?new Dv:"-"===t?new Vv:e.create(t)).filter(t=>!!t);return s}_cleanItemsConfiguration(t,e,n){const o=t.filter((t,o,r)=>"|"===t||-1===n.indexOf(t)&&("-"===t?!this.options.shouldGroupWhenFull||(At("toolbarview-line-break-ignored-when-grouping-items",r),!1):!(!i(t)&&!e.has(t))||(At("toolbarview-item-unavailable",{item:t}),!1)));return this._cleanSeparatorsAndLineBreaks(o)}_cleanSeparatorsAndLineBreaks(t){const e=t=>"-"!==t&&"|"!==t,n=t.length,i=t.findIndex(e);if(-1===i)return[];const o=n-t.slice().reverse().findIndex(e);return t.slice(i,o).filter((t,n,i)=>{if(e(t))return!0;const o=n>0&&i[n-1]===t;return!o})}_createNestedToolbarDropdown(t,e,n){let{label:i,icon:o,items:r,tooltip:s=!0,withText:a=!1}=t;if(r=this._cleanItemsConfiguration(r,e,n),!r.length)return null;const l=this.locale,c=$v(l);return i||At("toolbarview-nested-toolbar-dropdown-missing-label",t),c.class="ck-toolbar__nested-toolbar-dropdown",c.buttonView.set({label:i,tooltip:s,withText:!!a}),!1!==o?c.buttonView.icon=Bv[o]||o||yg:c.buttonView.withText=!0,Uv(c,()=>c.toolbarView._buildItemsFromConfig(r,e,n)),c}}class zv extends db{children;constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Hv{type="static";constructor(t){t.isGrouping=!1,t.itemsView.children.bindTo(t.items).using(t=>t),t.focusables.bindTo(t.items).using(t=>Ob(t)?t:null)}render(){}destroy(){}}class Wv{type="dynamic";view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(t){this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.view.isGrouping=!0,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(t,e)=>{const n=e.index,i=Array.from(e.added);for(const o of e.removed)n>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=n;o<n+i.length;o++){const t=i[o-n];o>this.ungroupedItems.length?this.groupedItems.add(t,o-this.ungroupedItems.length):this.ungroupedItems.add(t,o)}this._updateGrouping()})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const t=this.view;if(t.items.length){for(let e=0;e<t.items.length;e++){const n=[...t.items][e];this.ungroupedItems.add(n,e)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Je(this.viewElement))return void(this.shouldUpdateGroupingOnNextResize=!0);const t=this.groupedItems.length;let e;while(this._areItemsOverflowing)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){while(this.groupedItems.length&&!this._areItemsOverflowing)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Le(t.lastChild),i=new Le(t);if(!this.cachedPadding){const n=Q.window.getComputedStyle(t),i="ltr"===e?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(n[i])}return"ltr"===e?n.right>i.right-this.cachedPadding:n.left<i.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new $e(this.viewElement,e=>{t&&t===e.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Dv),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=$v(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",Uv(n,this.groupedItems),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:"rtl"===t.uiLanguageDirection?"se":"sw",icon:yg}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{Ob(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class jv extends db{children;actionView;arrowView;keystrokes;focusTracker;constructor(t,e){super(t);const n=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(e),this.arrowView=this._createArrowView(),this.keystrokes=new Gn,this.focusTracker=new Wn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",n.to("class"),n.if("isVisible","ck-hidden",t=>!t),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,e)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),e())}),this.keystrokes.set("arrowleft",(t,e)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),e())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const e=t||new Tb;return t||e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const t=new Tb,e=t.bindTemplate;return t.icon=Cp,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":e.to("isOn"),"aria-haspopup":!0,"aria-expanded":e.to("isOn",t=>String(t))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function $v(t,e=Pv){const n="function"==typeof e?new e(t):e,i=new Tv(t),o=new Av(t,n,i);return n.bind("isEnabled").to(o),n instanceof jv?n.arrowView.bind("isOn").to(o,"isOpen"):n.bind("isOn").to(o,"isOpen"),Xv(o),o}function Uv(t,e,n={}){t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.isOpen?qv(t,e,n):t.once("change:isOpen",()=>qv(t,e,n),{priority:"highest"}),n.enableActiveItemFocusOnDropdownOpen&&Yv(t,()=>t.toolbarView.items.find(t=>t.isOn))}function qv(t,e,n){const i=t.locale,o=i.t,r=t.toolbarView=new Fv(i),s="function"==typeof e?e():e;r.ariaLabel=n.ariaLabel||o("Dropdown toolbar"),n.maxWidth&&(r.maxWidth=n.maxWidth),n.class&&(r.class=n.class),n.isCompact&&(r.isCompact=n.isCompact),n.isVertical&&(r.isVertical=!0),s instanceof Dm?r.items.bindTo(s).using(t=>t):r.items.addMany(s),t.panelView.children.add(r),t.focusTracker.add(r),r.items.delegate("execute").to(t)}function Gv(t,e,n={}){t.isOpen?Kv(t,e,n):t.once("change:isOpen",()=>Kv(t,e,n),{priority:"highest"}),Yv(t,()=>t.listView.items.find(t=>t instanceof Iv&&t.children.first.isOn))}function Kv(t,e,n){const i=t.locale,o=t.listView=new Mv(i),r="function"==typeof e?e():e;o.ariaLabel=n.ariaLabel,o.role=n.role,ow(t,o.items,r,i),t.panelView.children.add(o),o.items.delegate("execute").to(t)}function Yv(t,e){t.on("change:isOpen",()=>{if(!t.isOpen)return;const n=e();n&&("function"===typeof n.focus?n.focus():At("ui-dropdown-focus-child-on-open-child-missing-focus",{view:n}))},{priority:xt.low-10})}function Xv(t){Jv(t),Qv(t),tw(t),ew(t),nw(t),iw(t)}function Jv(t){mb({emitter:t,activator:()=>t.isRendered&&t.isOpen,callback:()=>{t.isOpen=!1},contextElements:()=>[t.element,...Zv(t.focusTracker).filter(e=>!t.element.contains(e))]})}function Zv(t){return[...t.elements,...t.externalViews.flatMap(t=>Zv(t.focusTracker))]}function Qv(t){t.on("execute",e=>{e.source instanceof ov||(t.isOpen=!1)})}function tw(t){t.focusTracker.on("change:isFocused",(e,n,i)=>{!i&&t.isOpen&&(t.isOpen=!1)})}function ew(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isOpen&&(t.panelView.focus(),n())}),t.keystrokes.set("arrowup",(e,n)=>{t.isOpen&&(t.panelView.focusLast(),n())})}function nw(t){t.on("change:isOpen",(e,n,i)=>{if(i)return;const o=t.focusTracker.elements;o.some(t=>t.contains(Q.document.activeElement))&&t.buttonView.focus()})}function iw(t){t.on("change:isOpen",(e,n,i)=>{i&&t.panelView.focus()},{priority:"low"})}function ow(t,e,n,i){rw(e),e.bindTo(n).using(e=>{if("separator"===e.type)return new Rv(i);if("group"===e.type){const n=new Ov(i);return n.set({label:e.label}),ow(t,n.items,e.items,i),n.items.delegate("execute").to(t),n}if("button"===e.type||"switchbutton"===e.type){const t="menuitemcheckbox"===e.model.role||"menuitemradio"===e.model.role,n=new Iv(i);let o;return"button"===e.type?(o=new zb(i,e.labelView),o.set({isToggleable:t})):o=new ov(i),o.bind(...Object.keys(e.model)).to(e.model),o.delegate("execute").to(n),n.children.add(o),n}return null})}function rw(t){let e=0;const n=t=>t instanceof Iv&&t.children.first instanceof zb?t.children.first:null,i=t=>{const e=n(t);return e&&e.isToggleable?e:null},o=e=>{for(const i of t){const t=n(i);t&&(t.hasCheckSpace=e)}};t.on("change",(t,r)=>{const s=e>0;for(const n of r.removed)i(n)&&e--;for(const i of r.added){const t=n(i);t&&(t.isToggleable&&e++,t.hasCheckSpace=e>0)}const a=e>0;s!==a&&o(a)})}const sw=(t,e,n)=>{const i=new Ev(t.locale);return i.set({id:e,ariaDescribedById:n}),i.bind("isReadOnly").to(t,"isEnabled",t=>!t),i.bind("hasError").to(t,"errorText",t=>!!t),i.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(i),i},aw=(t,e,n)=>{const i=new Sv(t.locale);return i.set({id:e,ariaDescribedById:n,inputMode:"numeric"}),i.bind("isReadOnly").to(t,"isEnabled",t=>!t),i.bind("hasError").to(t,"errorText",t=>!!t),i.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(i),i},lw=(t,e,n)=>{const i=$v(t.locale);return i.set({id:e,ariaDescribedById:n}),i.bind("isEnabled").to(t),i},cw=150;class uw extends db{hexInputRow;_debounceColorPickerEvent;_config;constructor(t,e={}){super(t),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const n=this.createCollection();e.hideInput||n.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:n}),this._config=e,this._debounceColorPickerEvent=Wi(t=>{this.set("color",t),this.fire("colorSelected",{color:this.color})},cw,{leading:!0}),this.on("set:color",(t,e,n)=>{t.return=gv(n,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=dw(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),dw(this.color)!=dw(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),bv("hex-color-picker",Mm),this.picker=Q.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const t=document.createElement("style");t.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(t)}this.picker.addEventListener("color-changed",t=>{const e=t.detail.value;this._debounceColorPickerEvent(e)})}focus(){
/* istanbul ignore next -- @preserve */if(!this._config.hideInput&&(nt.isGecko||nt.isiOS||nt.isSafari||nt.isBlink)){const t=this.hexInputRow.children.get(1);t.focus()}const t=this.slidersView.first;t.focus()}_createSlidersView(){const t=[...this.picker.shadowRoot.children],e=t.filter(t=>"slider"===t.getAttribute("role")),n=e.map(t=>{const e=new hw(t);return e});this.slidersView=this.createCollection(),n.forEach(t=>{this.slidersView.add(t)})}_createInputRow(){const t=this._createColorInput();return new pw(this.locale,t)}_createColorInput(){const t=new yv(this.locale,sw),{t:e}=this.locale;return t.set({label:e("HEX"),class:"color-picker-hex-input"}),t.fieldView.bind("value").to(this,"_hexColor",e=>t.isFocused?t.fieldView.value:e.startsWith("#")?e.substring(1):e),t.fieldView.on("input",()=>{const e=t.fieldView.element.value;if(e){const t=gw(e);t&&this._debounceColorPickerEvent(t)}}),t}isValid(){const{t:t}=this.locale;return!!this._config.hideInput||(this.resetValidationStatus(),!!this.hexInputRow.getParsedColor()||(this.hexInputRow.inputView.errorText=t('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function dw(t){let e=mv(t);return e||(e="#000"),4===e.length&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class hw extends db{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class fw extends db{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class pw extends db{children;inputView;constructor(t,e){super(t),this.inputView=e,this.children=this.createCollection([new fw,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return gw(this.inputView.fieldView.element.value)}}function gw(t){if(!t)return null;const e=t.trim().replace(/^#/,"");return[3,4,6,8].includes(e.length)&&/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?`#${e}`:null}class mw extends(ie(zn)){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",0===this.length)})}add(t,e){return this.find(e=>e.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class bw extends db{items;colorDefinitions;focusTracker;columns;documentColors;documentColorsCount;staticColorsGrid;documentColorsGrid;colorPickerButtonView;removeColorButtonView;_focusables;_documentColorsLabel;_removeButtonLabel;_colorPickerLabel;constructor(t,{colors:e,columns:n,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:s,focusTracker:a,focusables:l}){super(t);const c=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=a,this.items=this.createCollection(),this.colorDefinitions=e,this.columns=n,this.documentColors=new mw,this.documentColorsCount=r,this._focusables=l,this._removeButtonLabel=i,this._colorPickerLabel=s,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",c.if("isVisible","ck-hidden",t=>!t)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(t,e){const n=t.document,i=this.documentColorsCount;this.documentColors.clear();for(const o of n.getRoots()){const n=t.createRangeIn(o);for(const t of n.getItems())if(t.is("$textProxy")&&t.hasAttribute(e)&&(this._addColorToDocumentColors(t.getAttribute(e)),this.documentColors.length>=i))return}}updateSelectedColors(){const t=this.documentColorsGrid,e=this.staticColorsGrid,n=this.selectedColor;e.selectedColor=n,t&&(t.selectedColor=n)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const t=Lm.bind(this.documentColors,this.documentColors),e=new db(this.locale);e.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(e),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Tb,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:wp,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const t=new Tb;return t.set({withText:!0,icon:xp,label:this._removeButtonLabel}),t.class="ck-color-selector__remove-color",t.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),t.render(),t}_createStaticColorsGrid(){const t=new pv(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.on("execute",(t,e)=>{this.fire("execute",{value:e.value,source:"staticColorsGrid"})}),t}_createDocumentColorsGrid(){const t=Lm.bind(this.documentColors,this.documentColors),e=new pv(this.locale,{columns:this.columns});return e.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),e.items.bindTo(this.documentColors).using(t=>{const e=new fv;return e.set({color:t.color,hasBorder:t.options?.hasBorder}),t.label&&e.set({label:t.label,tooltip:!0}),e.on("execute",()=>{this.fire("execute",{value:t.color,source:"documentColorsGrid"})}),e}),this.documentColors.on("change:isEmpty",(t,n,i)=>{i&&(e.selectedColor=null)}),e}_addColorToDocumentColors(t){const e=this.colorDefinitions.find(e=>e.color===t);e?this.documentColors.add(Object.assign({},e)):this.documentColors.add({color:t,label:t,options:{hasBorder:!1}})}}class vw extends db{items;colorPickerView;saveButtonView;cancelButtonView;actionBarView;focusTracker;keystrokes;_focusables;_colorPickerViewConfig;constructor(t,{focusTracker:e,focusables:n,keystrokes:i,colorPickerViewConfig:o}){super(t),this.items=this.createCollection(),this.focusTracker=e,this.keystrokes=i,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=n,this._colorPickerViewConfig=o;const r=this.bindTemplate,{saveButtonView:s,cancelButtonView:a}=this._createActionButtons();this.saveButtonView=s,this.cancelButtonView=a,this.actionBarView=this._createActionBarView({saveButtonView:s,cancelButtonView:a}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",r.if("isVisible","ck-hidden",t=>!t)]},children:this.items})}render(){super.render();const t=new uw(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=t,this.colorPickerView.render(),this.selectedColor&&(t.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(e,n,i)=>{t.color=i}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",t=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),t.stopPropagation(),t.preventDefault())})}_stopPropagationOnArrowsKeys(){const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}_addColorPickersElementsToFocusTracker(){for(const e of this.colorPickerView.slidersView)this.focusTracker.add(e.element),this._focusables.add(e);const t=this.colorPickerView.hexInputRow.children.get(1);t.element&&(this.focusTracker.add(t.element),this._focusables.add(t)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:t,cancelButtonView:e}){const n=new db,i=this.createCollection();return i.add(t),i.add(e),n.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:i}),n}_createActionButtons(){const t=this.locale,e=t.t,n=new Tb(t),i=new Tb(t);return n.set({icon:vp,class:"ck-button-save",type:"button",withText:!1,label:e("Accept")}),i.set({icon:mp,class:"ck-button-cancel",type:"button",withText:!1,label:e("Cancel")}),n.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),i.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:n,cancelButtonView:i}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(t,e)=>{this.fire("execute",{value:e.color,source:"colorPicker"}),this.set("selectedColor",e.color)})}}class ww extends db{focusTracker;keystrokes;items;colorGridsFragmentView;colorPickerFragmentView;_focusCycler;_focusables;_colorPickerViewConfig;constructor(t,{colors:e,columns:n,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:s,colorPickerViewConfig:a}){super(t),this.items=this.createCollection(),this.focusTracker=new Wn,this.keystrokes=new Gn,this._focusables=new Dm,this._colorPickerViewConfig=a,this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new bw(t,{colors:e,columns:n,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:s,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new vw(t,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:a}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(t,e,n)=>{this.colorGridsFragmentView.set("selectedColor",n),this.colorPickerFragmentView.set("selectedColor",n)}),this.colorGridsFragmentView.on("change:selectedColor",(t,e,n)=>{this.set("selectedColor",n)}),this.colorPickerFragmentView.on("change:selectedColor",(t,e,n)=>{this.set("selectedColor",n)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){this.colorPickerFragmentView.colorPickerView&&!this._isColorPickerFragmentVisible&&(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(t,e){this.colorGridsFragmentView.updateDocumentColors(t,e)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){2!==this.items.length&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class _w{editor;_components=new Map;constructor(t){this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(yw(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new Tt("componentfactory-item-missing",this,{name:t});return this._components.get(yw(t)).callback(this.editor.locale)}has(t){return this._components.has(yw(t))}}function yw(t){return String(t).toLowerCase()}const kw="ck-tooltip";class Cw extends(Ee()){tooltipTextView;balloonPanelView;static defaultBalloonPositions=Gb.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(t){if(super(),Cw._editors.add(t),Cw._instance)return Cw._instance;Cw._instance=this,this.tooltipTextView=new db(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Gb(t.locale),this.balloonPanelView.class=kw,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=Sw(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Wi(this._pinTooltip,600),this._unpinTooltipDebounced=Wi(this._unpinTooltip,400),this.listenTo(Q.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(Q.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Q.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Q.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Q.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Q.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const e=t.ui.view&&t.ui.view.body;Cw._editors.delete(t),this.stopListening(t.ui),e&&e.has(this.balloonPanelView)&&e.remove(this.balloonPanelView),Cw._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Cw._instance=null)}static getPositioningFunctions(t){const e=Cw.defaultBalloonPositions;return{s:[e.southArrowNorth,e.southArrowNorthEast,e.southArrowNorthWest],n:[e.northArrowSouth],e:[e.eastArrowWest],w:[e.westArrowEast],sw:[e.southArrowNorthEast],se:[e.southArrowNorthWest]}[t]}_onKeyDown(t,e){"Escape"===e.key&&this._currentElementWithTooltip&&(this._unpinTooltip(),e.stopPropagation())}_onEnterOrFocus(t,{target:e}){const n=xw(e);n?n!==this._currentElementWithTooltip?(this._unpinTooltip(),"focus"===t.name&&!n.matches(":hover")||n.matches("[data-cke-tooltip-instant]")?this._pinTooltip(n,Ew(n)):this._pinTooltipDebounced(n,Ew(n))):this._unpinTooltipDebounced.cancel():"focus"===t.name&&this._unpinTooltip()}_onLeaveOrBlur(t,{target:e,relatedTarget:n}){if("mouseleave"===t.name){if(!W(e))return;const t=this.balloonPanelView.element,i=t&&(t===n||t.contains(n)),o=!i&&e===t;if(i)return void this._unpinTooltipDebounced.cancel();if(!o&&this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;const r=xw(e),s=xw(n);(o||r&&r!==s)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||r&&r.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(t,{target:e}){this._currentElementWithTooltip&&(e.contains(this.balloonPanelView.element)&&e.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:e,position:n,cssClass:i}){this._unpinTooltip();const o=Hn(Cw._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=e,this.balloonPanelView.class=[kw,i].filter(t=>t).join(" "),this.balloonPanelView.pin({target:t,positions:Cw.getPositioningFunctions(n)}),this._mutationObserver.attach(t);for(const r of Cw._editors)this.listenTo(r.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=n}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of Cw._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=Ew(this._currentElementWithTooltip);Je(this._currentElementWithTooltip)&&t.text?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Cw.getPositioningFunctions(t.position)}):this._unpinTooltip()}}function xw(t){return W(t)?t.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function Ew(t){return{text:t.dataset.ckeTooltipText,position:t.dataset.ckeTooltipPosition||"s",cssClass:t.dataset.ckeTooltipClass||""}}function Sw(t){const e=new MutationObserver(()=>{t()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}class Tw extends Jb{licenseTypeMessage={evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"};constructor(t){super(t,{balloonClass:"ck-evaluation-badge-balloon"})}_isEnabled(){const t=this.editor,e=t.config.get("licenseKey"),n=Pw(e);return Boolean(n&&this.licenseTypeMessage[n])}_createBadgeContent(){const t=this.editor.config.get("licenseKey"),e=Pw(t);return new Aw(this.editor.locale,this.licenseTypeMessage[e])}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,i=e.side||t.side;return{position:n,side:"left"===i?"right":"left",verticalOffset:t.verticalOffset,horizontalOffset:t.horizontalOffset}}}class Aw extends db{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function Pw(t){if("GPL"==t)return"GPL";const e=Zn(t.split(".")[1]);return e?e.licenseType||"production":null}class Iw extends Iv{constructor(t,e){super(t);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const Rw=5,Ow={toggleMenusAndFocusItemsOnHover(t){t.on("menu:mouseenter",e=>{if(t.isFocusBorderEnabled||t.isOpen){if(t.isOpen)for(const n of t.menus){const t=e.path[0],i=t instanceof Iw&&t.children.first===n;n.isOpen=(e.path.includes(n)||i)&&n.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(t){const e="rtl"===t.locale.uiLanguageDirection;function n(e,n){const i=t.children.getIndex(e),o=e.isOpen,r=t.children.length,s=t.children.get((i+r+n)%r);e.isOpen=!1,o&&(s.isOpen=!0),s.buttonView.focus()}t.on("menu:arrowright",t=>{n(t.source,e?-1:1)}),t.on("menu:arrowleft",t=>{n(t.source,e?1:-1)})},closeMenusWhenTheBarCloses(t){t.on("change:isOpen",()=>{t.isOpen||t.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(t){t.on("menu:change:isOpen",(e,n,i)=>{i&&t.menus.filter(t=>e.source.parentMenuView===t.parentMenuView&&e.source!==t&&t.isOpen).forEach(t=>{t.isOpen=!1})})},closeOnClickOutside(t){mb({emitter:t,activator:()=>t.isOpen,callback:()=>t.close(),contextElements:()=>t.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(t){let e=!1;t.on("change:isOpen",(n,i,o)=>{o||(e||(t.isFocusBorderEnabled=!1),e=!1)}),t.listenTo(t.element,"keydown",()=>{e=!0},{useCapture:!0}),t.listenTo(t.element,"keyup",()=>{e=!1},{useCapture:!0}),t.listenTo(t.element,"focus",()=>{e&&(t.isFocusBorderEnabled=!0)},{useCapture:!0})}},Mw={openAndFocusPanelOnArrowDownKey(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isEnabled&&t.focusTracker.focusedElement===t.buttonView.element&&(t.isOpen||(t.isOpen=!0),t.panelView.focus(),n())})},openOnArrowRightKey(t){const e="rtl"===t.locale.uiLanguageDirection?"arrowleft":"arrowright";t.keystrokes.set(e,(e,n)=>{t.focusTracker.focusedElement===t.buttonView.element&&t.isEnabled&&(t.isOpen||(t.isOpen=!0),t.panelView.focus(),n())})},openOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!0})},toggleOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!t.isOpen})},openAndFocusOnEnterKeyPress(t){t.keystrokes.set("enter",(e,n)=>{t.focusTracker.focusedElement===t.buttonView.element&&(t.isOpen=!0,t.panelView.focus(),n())})},closeOnArrowLeftKey(t){const e="rtl"===t.locale.uiLanguageDirection?"arrowright":"arrowleft";t.keystrokes.set(e,(e,n)=>{t.isOpen&&(t.isOpen=!1,t.focus(),n())})},closeOnEscKey(t){t.keystrokes.set("esc",(e,n)=>{t.isOpen&&(t.isOpen=!1,t.focus(),n())})},closeOnParentClose(t){t.parentMenuView.on("change:isOpen",(e,n,i)=>{i||e.source!==t.parentMenuView||(t.isOpen=!1)})}},Dw={southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),eastSouth:t=>({top:t.top,left:t.right-Rw,name:"es"}),eastNorth:(t,e)=>({top:t.top-e.height,left:t.right-Rw,name:"en"}),westSouth:(t,e)=>({top:t.top,left:t.left-e.width+Rw,name:"ws"}),westNorth:(t,e)=>({top:t.top-e.height,left:t.left-e.width+Rw,name:"wn"})},Vw=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:insertFootnote","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException:inline","menuBar:restrictedEditingException:block"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:lineHeight","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands","menuBar:toggleAi","menuBar:aiQuickActions"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function Nw(t){let e;return e="items"in t&&t.items?{items:t.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...t}:{items:$(Vw),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...t},e}function Lw({normalizedConfig:t,locale:e,componentFactory:n,extraItems:i}){const o=$(t);return Fw(t,o,i),Bw(t,o),Fw(t,o,o.addItems),Hw(t,o,n),Ww(t,o),$w(o,e),o}function Bw(t,e){const n=e.removeItems,i=[];e.items=e.items.filter(({menuId:t})=>!n.includes(t)||(i.push(t),!1)),Uw(e.items,t=>{t.groups=t.groups.filter(({groupId:t})=>!n.includes(t)||(i.push(t),!1));for(const e of t.groups)e.items=e.items.filter(t=>{const e=Xw(t);return!n.includes(e)||(i.push(e),!1)})});for(const o of n)i.includes(o)||At("menu-bar-item-could-not-be-removed",{menuBarConfig:t,itemName:o})}function Fw(t,e,n){const i=[];if(0!=n.length){for(const t of n){const n=Kw(t.position),o=Yw(t.position);if(qw(t))if(o){const r=e.items.findIndex(t=>t.menuId===o);if(-1!=r)"before"===n?(e.items.splice(r,0,t.menu),i.push(t)):"after"===n&&(e.items.splice(r+1,0,t.menu),i.push(t));else{const r=zw(e,t.menu,o,n);r&&i.push(t)}}else"start"===n?(e.items.unshift(t.menu),i.push(t)):"end"===n&&(e.items.push(t.menu),i.push(t));else if(Gw(t))Uw(e.items,e=>{if(e.menuId===o)"start"===n?(e.groups.unshift(t.group),i.push(t)):"end"===n&&(e.groups.push(t.group),i.push(t));else{const r=e.groups.findIndex(t=>t.groupId===o);-1!==r&&("before"===n?(e.groups.splice(r,0,t.group),i.push(t)):"after"===n&&(e.groups.splice(r+1,0,t.group),i.push(t)))}});else{const r=zw(e,t.item,o,n);r&&i.push(t)}}for(const e of n)i.includes(e)||At("menu-bar-item-could-not-be-added",{menuBarConfig:t,addedItemConfig:e})}}function zw(t,e,n,i){let o=!1;return Uw(t.items,t=>{for(const{groupId:r,items:s}of t.groups){if(o)return;if(r===n)"start"===i?(s.unshift(e),o=!0):"end"===i&&(s.push(e),o=!0);else{const t=s.findIndex(t=>Xw(t)===n);-1!==t&&("before"===i?(s.splice(t,0,e),o=!0):"after"===i&&(s.splice(t+1,0,e),o=!0))}}}),o}function Hw(t,e,n){Uw(e.items,i=>{for(const o of i.groups)o.items=o.items.filter(o=>{const r="string"===typeof o&&!n.has(o);return r&&!e.isUsingDefaultConfig&&At("menu-bar-item-unavailable",{menuBarConfig:t,parentMenuConfig:$(i),componentName:o}),!r})})}function Ww(t,e){const n=e.isUsingDefaultConfig;let i=!1;e.items=e.items.filter(e=>!!e.groups.length||(jw(t,e,n),!1)),e.items.length?(Uw(e.items,e=>{e.groups=e.groups.filter(t=>!!t.items.length||(i=!0,!1));for(const o of e.groups)o.items=o.items.filter(e=>!(Jw(e)&&!e.groups.length)||(jw(t,e,n),i=!0,!1))}),i&&Ww(t,e)):jw(t,t,n)}function jw(t,e,n){n||At("menu-bar-menu-empty",{menuBarConfig:t,emptyMenuConfig:e})}function $w(t,e){const n=e.t,i={File:n({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:n({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:n({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:n({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:n({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:n({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:n({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:n({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:n({string:"Font",id:"MENU_BAR_MENU_FONT"})};Uw(t.items,t=>{t.label in i&&(t.label=i[t.label])})}function Uw(t,e){if(Array.isArray(t))for(const i of t)n(i);function n(t){e(t);for(const e of t.groups)for(const t of e.items)Jw(t)&&n(t)}}function qw(t){return"object"===typeof t&&"menu"in t}function Gw(t){return"object"===typeof t&&"group"in t}function Kw(t){return t.startsWith("start")?"start":t.startsWith("end")?"end":t.startsWith("after")?"after":"before"}function Yw(t){const e=t.match(/^[^:]+:(.+)/);return e?e[1]:null}function Xw(t){return"string"===typeof t?t:t.menuId}function Jw(t){return"object"===typeof t&&"menuId"in t}class Zw extends(ie()){editor;componentFactory;focusTracker;tooltipManager;poweredBy;evaluationBadge;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];_extraMenuBarElements=[];_lastFocusedForeignElement=null;_domEmitter;constructor(t){super();const e=t.editing.view;this.editor=t,this.componentFactory=new _w(t),this.focusTracker=new Wn,this.tooltipManager=new Cw(t),this.poweredBy=new nv(t),this.evaluationBadge=new Tw(t),this.ariaLiveAnnouncer=new fb(t),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(e.document,"layoutChanged",this.update.bind(this)),this.listenTo(e,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor),this.focusTracker.add(e);const n=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(e)};this.isReady?n():this.once("ready",n)}removeEditableElement(t){const e=this._editableElementsMap.get(t);e&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(e),this.focusTracker.remove(e),e.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,e={}){t.isRendered?(this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:e})}extendMenuBar(t){this._extraMenuBarElements.push(t)}initMenuBar(t){const e=t.element;this.focusTracker.add(e),this.editor.keystrokes.listenTo(e);const n=Nw(this.editor.config.get("menuBar")||{});t.fillFromConfig(n,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(t,n)=>{e.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),n())}),this.editor.keystrokes.set("Alt+F9",(n,i)=>{e.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),i())})}_readViewportOffsetFromConfig(){const t=this.editor,e=t.config.get("ui.viewportOffset");if(e)return e;const n=t.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){const t=this.editor;let e;t.keystrokes.set("Alt+F10",(t,n)=>{this._saveLastFocusedForeignElement();const i=this._getCurrentFocusedToolbarDefinition();i&&e||(e=this._getFocusableCandidateToolbarDefinitions());for(let o=0;o<e.length;o++){const t=e.shift();if(e.push(t),t!==i&&this._focusFocusableCandidateToolbar(t)){i&&i.options.afterBlur&&i.options.afterBlur();break}}n()}),t.keystrokes.set("Esc",(e,n)=>{const i=this._getCurrentFocusedToolbarDefinition();i&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),i.options.afterBlur&&i.options.afterBlur(),n())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const e of this._focusableToolbarDefinitions){const{toolbarView:n,options:i}=e;(Je(n.element)||i.beforeFocus)&&t.push(e)}return t.sort((t,e)=>Qw(t)-Qw(e)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:e,options:{beforeFocus:n}}=t;return n&&n(),!!Je(e.element)&&(e.focus(),!0)}_handleScrollToTheSelection(t,e){const n={top:0,bottom:0,left:0,right:0,...this.viewportOffset};e.viewportOffset.top+=n.top,e.viewportOffset.bottom+=n.bottom,e.viewportOffset.left+=n.left,e.viewportOffset.right+=n.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const e of t)this.focusTracker.add(e.element);t.on("add",(t,e)=>{this.focusTracker.add(e.element)}),t.on("remove",(t,e)=>{this.focusTracker.remove(e.element)})}_initViewportOffset(t){this.on("set:viewportOffset",(t,e,n)=>{const i=this._getVisualViewportTopOffset(n);n.visualTop!==i&&(t.return={...n,visualTop:i})}),this.set("viewportOffset",t)}_initVisualViewportSupport(){if(!Q.window.visualViewport)return;const t=()=>{const t=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==t&&(this.viewportOffset={...this.viewportOffset,visualTop:t})};this._domEmitter=new(Ee()),this._domEmitter.listenTo(Q.window.visualViewport,"scroll",t),this._domEmitter.listenTo(Q.window.visualViewport,"resize",t)}_getVisualViewportTopOffset(t){const e=rn().top,n=t.top||0;return e>n?0:n-e}}function Qw(t){const{toolbarView:e,options:n}=t;let i=10;return Je(e.element)&&i--,n.isContextual&&(i-=2),i}class t_ extends db{body;menuBarView;toolbar;constructor(t){super(t),this.body=new $b(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class e_ extends t_{top;main;_voiceLabelView;constructor(t){super(t),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,e=new yb;return e.text=t("Rich Text Editor"),e.extendTemplate({attributes:{class:"ck-voice-label"}}),e}}class n_ extends db{name=null;_editingView;_editableElement;_hasExternalElement;constructor(t,e,n){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=e}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;function e(e){t.change(n=>{const i=t.document.getRoot(e.name);n.addClass(e.isFocused?"ck-focused":"ck-blurred",i),n.removeClass(e.isFocused?"ck-blurred":"ck-focused",i)})}function n(i){t.once("change:isRenderingInProgress",(t,o,r)=>{r?n(i):e(i)})}t.isRenderingInProgress?n(this):e(this)}}class i_ extends n_{_options;constructor(t,e,n,i={}){super(t,e,n),this._options=i,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(e=>{const n=t.document.getRoot(this.name);e.setAttribute("aria-label",this.getEditableAriaLabel(),n)})}getEditableAriaLabel(){const t=this.locale.t,e=this._options.label,n=this._editableElement,i=this.name;if("string"==typeof e)return e;if("object"===typeof e)return e[i];if("function"===typeof e)return e(this);if(n){const t=n.getAttribute("aria-label");if(t)return t}return t("Rich Text Editor. Editing area: %0",i)}}class o_ extends db{children;constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("class",["ck","ck-form__row",...Mn(e.class||[])]),this.children=this.createCollection(),e.children&&e.children.forEach(t=>this.children.add(t)),this.set("_role",null),this.set("_ariaLabelledBy",null),e.labelView&&this.set({_role:"group",_ariaLabelledBy:e.labelView.id}),this.setTemplate({tag:"div",attributes:{class:n.to("class",t=>t.join(" ")),role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}class r_ extends tf{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class s_ extends(ie()){constructor(t,e){super(),e&&Fi(this,e),t&&this.set(t)}}const a_=qe("px");class l_ extends Gh{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}constructor(t){super(t),this.positionLimiter=()=>{const t=this.editor.editing.view,e=t.document,n=e.selection.editableElement;return n?t.domConverter.mapViewToDom(n.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new Tt("contextualballoon-add-view-exist",[this,t]);const e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));const n=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),n.set(t.view,t),this._viewToStack.set(t.view,n),n===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new Tt("contextualballoon-remove-view-not-exist",[this,t]);const e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack.delete(this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),t}showStack(t){this.visibleStack=t;const e=this._idToStack.get(t);if(!e)throw new Tt("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop())}_createPanelView(){this._view=new Gb(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){const e=Array.from(this._idToStack.entries()).find(e=>e[1]===t);return e[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]))}_createRotatorView(){const t=new c_(this.editor.locale),e=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>!e&&t>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(t,n)=>{if(n<2)return"";const i=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return e("%0 of %1",[i,n])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new u_(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>{const n=!e&&t>=2;return n?Math.min(t-1,2):0}),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:e="",withArrow:n=!0,singleViewMode:i=!1}){this.view.class=e,this.view.withArrow=n,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),i&&(this._singleViewMode=!0)}}class c_ extends db{focusTracker;buttonPrevView;buttonNextView;content;constructor(t){super(t);const e=t.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Wn,this.buttonPrevView=this._createButtonView(e("Previous"),sg),this.buttonNextView=this._createButtonView(e("Next"),Hp),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",t=>t?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,e){const n=new Tb(this.locale);return n.set({label:t,icon:e,tooltip:!0}),n}}class u_ extends db{content;_balloonPanelView;constructor(t,e){super(t);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=e,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",t=>t?"":"ck-hidden")],style:{top:n.to("top",a_),left:n.to("left",a_),width:n.to("width",a_),height:n.to("height",a_)}},children:this.content}),this.on("change:numberOfPanels",(t,e,n,i)=>{n>i?this._addPanels(n-i):this._removePanels(i-n),this.updatePosition()})}_addPanels(t){while(t--){const t=new db;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(t){while(t--){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:e}=this._balloonPanelView,{width:n,height:i}=new Le(this._balloonPanelView.element);Object.assign(this,{top:t,left:e,width:n,height:i})}}}const d_=qe("px");class h_ extends db{content;contentPanelElement;_contentPanelPlaceholder;constructor(t){super(t);const e=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Lm({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",t=>t?"block":"none"),height:e.to("isSticky",t=>t?d_(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Lm({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",e.if("isSticky","ck-sticky-panel__content_sticky"),e.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",t=>t?d_(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:e.to("_stickyTopOffset",t=>t?d_(t):t),bottom:e.to("_stickyBottomOffset",t=>t?d_(t):t),marginLeft:e.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(Q.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),Q.window.visualViewport&&(this.listenTo(Q.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(Q.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive)return void this._unstick();const t=new Le(this.limiterElement);let e=t.getVisible();if(e){const t=new Le(Q.window);t.top+=this.viewportTopOffset,t.height-=this.viewportTopOffset,e=e.getIntersection(t)}const{left:n,top:i}=rn();if(t.moveBy(n,i),e&&e.moveBy(n,i),e&&t.top<e.top)if(this._contentPanelRect.height+this.limiterBottomOffset>e.height){const n=Math.max(t.bottom-e.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+n+1<t.height?this._stickToBottomOfLimiter(n):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(e.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=d_(-Q.window.scrollX+rn().left)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=d_(-Q.window.scrollX+rn().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Le(this.contentPanelElement)}}class f_ extends zb{arrowView;constructor(t){super(t);const e=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t)),"data-cke-tooltip-disabled":e.to("isOn")},on:{mouseenter:e.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Eb;return t.content=Cp,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class p_ extends db{children;constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",e.to("position",t=>`ck-menu-bar__menu__panel_position_${t}`),e.if("isVisible","ck-hidden",t=>!t)],tabindex:"-1"},children:this.children,on:{selectstart:e.to(t=>{"input"!==t.target.tagName.toLocaleLowerCase()&&t.preventDefault()})}})}focus(t=1){this.children.length&&(1===t?this.children.first.focus():this.children.last.focus())}}class g_ extends db{buttonView;panelView;focusTracker;keystrokes;constructor(t){super(t);const e=this.bindTemplate;this.buttonView=new f_(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new p_(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Gn,this.focusTracker=new Wn,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",e.to("class"),e.if("isEnabled","ck-disabled",t=>!t),e.if("parentMenuView","ck-menu-bar__menu_top-level",t=>!t)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),Mw.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(Mw.openOnButtonClick(this),Mw.openOnArrowRightKey(this),Mw.closeOnArrowLeftKey(this),Mw.openAndFocusOnEnterKeyPress(this),Mw.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),Mw.openAndFocusPanelOnArrowDownKey(this),Mw.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,e)=>{this.fire("arrowright"),e()}),this.keystrokes.set("arrowleft",(t,e)=>{this.fire("arrowleft"),e()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,e,n)=>{if(!n)return;const i=g_._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=i?i.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:e,northEast:n,northWest:i,westSouth:o,eastSouth:r,westNorth:s,eastNorth:a}=Dw;return"ltr"===this.locale.uiLanguageDirection?this.parentMenuView?[r,a,o,s]:[t,e,n,i]:this.parentMenuView?[o,s,r,a]:[e,t,i,n]}get _defaultMenuPositionName(){return"ltr"===this.locale.uiLanguageDirection?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}static _getOptimalPosition=Ze}class m_ extends Mv{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(t=>{const e=b_(t);return e&&e.isToggleable});this.items.forEach(e=>{const n=b_(e);n&&(n.hasCheckSpace=t)})}}function b_(t){return t instanceof Iv?t.children.map(t=>v_(t)?t.buttonView:t).find(t=>t instanceof zb):null}function v_(t){return"object"===typeof t&&"buttonView"in t&&t.buttonView instanceof Tb}class w_ extends sv{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const __=["mouseenter","arrowleft","arrowright","change:isOpen"];class y_ extends db{children;menus=[];constructor(t){super(t);const e=t.t,n=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",n.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":e("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,e,n=[]){const i=this.locale,o=Lw({normalizedConfig:t,locale:i,componentFactory:e,extraItems:n}),r=o.items.map(t=>this._createMenu({componentFactory:e,menuDefinition:t}));this.children.addMany(r)}render(){super.render(),Ow.toggleMenusAndFocusItemsOnHover(this),Ow.closeMenusWhenTheBarCloses(this),Ow.closeMenuWhenAnotherOnTheSameLevelOpens(this),Ow.focusCycleMenusOnArrows(this),Ow.closeOnClickOutside(this),Ow.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}disable(){for(const t of this.children)t.isEnabled=!1}enable(){for(const t of this.children)t.isEnabled=!0}registerMenu(t,e=null){e?(t.delegate(...__).to(e),t.parentMenuView=e):t.delegate(...__).to(this,t=>"menu:"+t),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:e,parentMenuView:n}){const i=this.locale,o=new g_(i);return this.registerMenu(o,n),o.buttonView.set({label:e.label}),o.once("change:isOpen",()=>{const n=new m_(i);n.ariaLabel=e.label,o.panelView.children.add(n),n.items.addMany(this._createMenuItems({menuDefinition:e,parentMenuView:o,componentFactory:t}))}),o}_createMenuItems({menuDefinition:t,parentMenuView:e,componentFactory:n}){const o=this.locale,r=[];for(const s of t.groups){for(const t of s.items){const s=new Iw(o,e);if(i(t))s.children.add(this._createMenu({componentFactory:n,menuDefinition:t,parentMenuView:e}));else{const i=this._createMenuItemContentFromFactory({componentName:t,componentFactory:n,parentMenuView:e});if(!i)continue;s.children.add(i)}r.push(s)}s!==t.groups[t.groups.length-1]&&r.push(new Rv(o))}return r}_createMenuItemContentFromFactory({componentName:t,parentMenuView:e,componentFactory:n}){const i=n.create(t);return i instanceof g_||i instanceof Wb||i instanceof w_?(this._registerMenuTree(i,e),i.on("execute",()=>{this.close()}),i):(At("menu-bar-component-unsupported",{componentName:t,componentView:i}),null)}_registerMenuTree(t,e){if(!(t instanceof g_))return void t.delegate("mouseenter").to(e);this.registerMenu(t,e);const n=t.panelView.children.filter(t=>t instanceof m_)[0];if(!n)return void t.delegate("mouseenter").to(e);const i=n.items.filter(t=>t instanceof Iv);for(const o of i)this._registerMenuTree(o.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(e,n,i)=>{clearTimeout(t),i?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(t=>t.isOpen)},0)})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class k_ extends Yh{attributeKey;constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document,i=n.selection,o=void 0===t.forceValue?!this.value:t.forceValue;e.change(t=>{if(i.isCollapsed)o?t.setSelectionAttribute(this.attributeKey,!0):t.removeSelectionAttribute(this.attributeKey);else{const n=e.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const e of n)o?t.setAttribute(this.attributeKey,o,e):t.removeAttribute(this.attributeKey,e)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const i of n.getRanges())for(const t of i.getItems())if(e.checkAttribute(t,this.attributeKey))return t.hasAttribute(this.attributeKey);return!1}}const C_="bold";class x_ extends Gh{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:C_}),t.model.schema.setAttributeProperties(C_,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:C_,view:"strong",upcastAlso:["b",t=>{const e=t.getStyle("font-weight");return e&&("bold"==e||Number(e)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(C_,new k_(t,C_)),t.keystrokes.set("CTRL+B",C_),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function E_({editor:t,commandName:e,plugin:n,icon:i,label:o,keystroke:r}){return s=>{const a=t.commands.get(e),l=new s(t.locale);return l.set({label:o,icon:i,keystroke:r,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Wb?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),n.listenTo(l,"execute",()=>{t.execute(e),t.editing.view.focus()}),l}}const S_="bold";class T_ extends Gh{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=E_({editor:t,commandName:S_,plugin:this,icon:pp,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(S_,()=>n(Tb)),t.ui.componentFactory.add("menuBar:"+S_,()=>n(Wb))}}class A_ extends Gh{static get requires(){return[x_,T_]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const P_="italic";class I_ extends Gh{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:P_}),t.model.schema.setAttributeProperties(P_,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:P_,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(P_,new k_(t,P_)),t.keystrokes.set("CTRL+I",P_),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}const R_="italic";class O_ extends Gh{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=E_({editor:t,commandName:R_,plugin:this,icon:Pp,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(R_,()=>n(Tb)),t.ui.componentFactory.add("menuBar:"+R_,()=>n(Wb))}}class M_ extends Gh{static get requires(){return[I_,O_]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const D_="strikethrough";class V_ extends Gh{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:D_}),t.model.schema.setAttributeProperties(D_,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:D_,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),t.commands.add(D_,new k_(t,D_)),t.keystrokes.set("CTRL+SHIFT+X","strikethrough"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}const N_="strikethrough";class L_ extends Gh{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=E_({editor:t,commandName:N_,plugin:this,icon:hg,keystroke:"CTRL+SHIFT+X",label:e("Strikethrough")});t.ui.componentFactory.add(N_,()=>n(Tb)),t.ui.componentFactory.add("menuBar:"+N_,()=>n(Wb))}}class B_ extends Gh{static get requires(){return[V_,L_]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const F_="underline";class z_ extends Gh{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:F_}),t.model.schema.setAttributeProperties(F_,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:F_,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(F_,new k_(t,F_)),t.keystrokes.set("CTRL+U","underline"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}const H_="underline";class W_ extends Gh{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=E_({editor:t,commandName:H_,plugin:this,icon:Cg,label:e("Underline"),keystroke:"CTRL+U"});t.ui.componentFactory.add(H_,()=>n(Tb)),t.ui.componentFactory.add("menuBar:"+H_,()=>n(Wb))}}class j_ extends Gh{static get requires(){return[z_,W_]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function*$_(t,e){for(const n of e)n&&t.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class U_ extends Yh{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,n=e.document.selection,i=e.schema,o=n.isCollapsed,r=n.getFirstRange(),s=r.start.parent,a=r.end.parent;if(i.isLimit(s)||i.isLimit(a))return o||s!=a||e.deleteContent(n),!1;if(o){const e=$_(t.model.schema,n.getAttributes());return q_(t,r.start),t.setSelectionAttribute(e),!0}{const i=!(r.start.isAtStart&&r.end.isAtEnd),o=s==a;if(e.deleteContent(n,{leaveUnmerged:i}),i){if(o)return q_(t,n.focus),!0;t.setSelection(a,0)}}return!1}}function q_(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}const G_={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class K_ extends ws{constructor(t){super(t);const e=this.document;let n=!1;e.on("keydown",(t,e)=>{n=e.shiftKey}),e.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;let r=o.inputType;nt.isSafari&&n&&"insertParagraph"==r&&(r="insertLineBreak");const s=o.domEvent,a=G_[r];if(!a)return;const l=new Zo(e,"enter",o.targetRanges[0]);e.fire(l,new _s(t,s,{isSoft:a.isSoft})),l.stop.called&&i.stop()})}observe(){}stopObserving(){}}class Y_ extends Gh{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,i=this.editor.t;e.addObserver(K_),t.commands.add("enter",new U_(t)),this.listenTo(n,"enter",(i,o)=>{n.isComposing||o.preventDefault(),o.isSoft||(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class X_ extends Yh{execute(){const t=this.editor.model,e=t.document;t.change(n=>{Z_(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=J_(t.schema,e.selection)}}function J_(t,e){if(e.rangeCount>1)return!1;const n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;const i=e.getFirstRange(),o=i.start.parent,r=i.end.parent;return!ty(o,t)&&!ty(r,t)||o===r}function Z_(t,e,n){const i=n.isCollapsed,o=n.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(i){const i=$_(t.schema,n.getAttributes());Q_(t,e,o.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(i)}else{const i=!(o.start.isAtStart&&o.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:i}),a?Q_(t,e,n.focus):i&&e.setSelection(s,0)}}function Q_(t,e,n){const i=e.createElement("softBreak");t.insertContent(i,n),e.setSelection(i,"after")}function ty(t,e){return!t.is("rootElement")&&(e.isLimit(t)||ty(t.parent,e))}class ey extends Gh{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.conversion,i=t.editing.view,o=i.document,r=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(t,{writer:e})=>e.createEmptyElement("br")}),i.addObserver(K_),t.commands.add("shiftEnter",new X_(t)),this.listenTo(o,"enter",(e,n)=>{o.isComposing||n.preventDefault(),n.isSoft&&(t.execute("shiftEnter"),i.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class ny extends(Ft()){_stack=[];add(t,e){const n=this._stack,i=n[0];this._insertDescriptor(t);const o=n[0];i===o||iy(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:e})}remove(t,e){const n=this._stack,i=n[0];this._removeDescriptor(t);const o=n[0];i===o||iy(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t.id);if(iy(t,e[n]))return;n>-1&&e.splice(n,1);let i=0;while(e[i]&&oy(e[i],t))i++;e.splice(i,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t);n>-1&&e.splice(n,1)}}function iy(t,e){return t&&e&&t.priority==e.priority&&ry(t.classes)==ry(e.classes)}function oy(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&ry(t.classes)>ry(e.classes)}function ry(t){return Array.isArray(t)?t.sort().join(","):t}const sy="ck-widget",ay="ck-widget_selected";function ly(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}function cy(t,e,n={}){if(!t.is("containerElement"))throw new Tt("widget-to-widget-wrong-element-type",null,{element:t});return e.setAttribute("contenteditable","false",t),e.addClass(sy,t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=by,e.setCustomProperty("widgetLabel",[],t),n.label&&fy(t,n.label),n.hasSelectionHandle&&vy(t,e),hy(t,e),t}function uy(t,e,n){if(e.classes&&n.addClass(Mn(e.classes),t),e.attributes)for(const i in e.attributes)n.setAttribute(i,e.attributes[i],t)}function dy(t,e,n){if(e.classes&&n.removeClass(Mn(e.classes),t),e.attributes)for(const i in e.attributes)n.removeAttribute(i,t)}function hy(t,e,n=uy,i=dy){const o=new ny;o.on("change:top",(e,o)=>{o.oldDescriptor&&i(t,o.oldDescriptor,o.writer),o.newDescriptor&&n(t,o.newDescriptor,o.writer)});const r=(t,e,n)=>o.add(e,n),s=(t,e,n)=>o.remove(e,n);e.setCustomProperty("addHighlight",r,t),e.setCustomProperty("removeHighlight",s,t)}function fy(t,e){const n=t.getCustomProperty("widgetLabel");n.push(e)}function py(t){const e=t.getCustomProperty("widgetLabel");return e.reduce((t,e)=>"function"===typeof e?t?t+". "+e():e():t?t+". "+e:e,"")}function gy(t,e,n={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),!1!==n.withAriaRole&&e.setAttribute("role","textbox",t),t.isReadOnly||e.setAttribute("tabindex","-1",t),n.label&&e.setAttribute("aria-label",n.label,t),e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",(n,i,o)=>{e.setAttribute("contenteditable",o?"false":"true",t),o?e.removeAttribute("tabindex",t):e.setAttribute("tabindex","-1",t)}),t.on("change:isFocused",(n,i,o)=>{o?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t)}),hy(t,e),t}function my(t,e){const n=t.getSelectedElement();if(n){const i=Sy(t);if(i)return e.createRange(e.createPositionAt(n,i))}return e.schema.findOptimalInsertionRange(t)}function by(){return null}function vy(t,e){const n=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(t){const e=this.toDomElement(t),n=new Eb;return n.set("content",yp),n.render(),e.appendChild(n.element),e});e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handle"],t)}function wy(t){const e=t=>{const{width:e,paddingLeft:n,paddingRight:i}=t.ownerDocument.defaultView.getComputedStyle(t);return parseFloat(e)-(parseFloat(n)||0)-(parseFloat(i)||0)},n=t.parentElement;if(!n)return 0;let i=e(n);const o=5;let r=0,s=n;while(isNaN(i)){if(s=s.parentElement,++r>o)return 0;i=e(s)}return i}function _y(t,e=new Le(t)){const n=wy(t);return n?e.width/n*100:0}const yy="widget-type-around";function ky(t,e,n){return!!t&&ly(t)&&!n.isInline(e)}function Cy(t){return t.closest(".ck-widget__type-around__button")}function xy(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Ey(t,e){const n=t.closest(".ck-widget");return e.mapDomToView(n)}function Sy(t){return t.getAttribute(yy)}const Ty=["before","after"],Ay=(new DOMParser).parseFromString(cg,"image/svg+xml").firstChild,Py="ck-widget__type-around_disabled";class Iy extends Gh{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Y_,Uf]}init(){const t=this.editor,e=t.editing.view;this.on("change:isEnabled",(n,i,o)=>{e.change(t=>{for(const n of e.document.roots)o?t.removeClass(Py,n):t.addClass(Py,n)}),o||t.model.change(t=>{t.removeSelectionAttribute(yy)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,e){const n=this.editor,i=n.editing.view,o=n.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(t,e),attributes:o}),i.focus(),i.scrollToTheSelection()}_listenToIfEnabled(t,e,n,i){this.listenTo(t,e,(...t)=>{this.isEnabled&&n(...t)},i)}_insertParagraphAccordingToFakeCaretPosition(){const t=this.editor,e=t.model,n=e.document.selection,i=Sy(n);if(!i)return!1;const o=n.getSelectedElement();return this._insertParagraph(o,i),!0}_enableTypeAroundUIInjection(){const t=this.editor,e=t.model.schema,n=t.locale.t,i={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(t,o,r)=>{const s=r.mapper.toViewElement(o.item);if(s&&ky(s,o.item,e)){Ry(r.writer,i,s);const t=s.getCustomProperty("widgetLabel");t.push(()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):"")}},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,e=t.model,n=e.document.selection,i=e.schema,o=t.editing.view;function r(t){return`ck-widget_type-around_show-fake-caret_${t}`}this._listenToIfEnabled(o.document,"arrowKey",(t,e)=>{this._handleArrowKeyPress(t,e)},{context:[ly,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(e,n)=>{n.directChange&&t.model.change(t=>{t.removeSelectionAttribute(yy)})}),this._listenToIfEnabled(e.document,"change:data",()=>{const e=n.getSelectedElement();if(e){const n=t.editing.mapper.toViewElement(e);if(ky(n,e,i))return}t.model.change(t=>{t.removeSelectionAttribute(yy)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(t,e,n)=>{const o=n.writer;if(this._currentFakeCaretModelElement){const t=n.mapper.toViewElement(this._currentFakeCaretModelElement);t&&(o.removeClass(Ty.map(r),t),this._currentFakeCaretModelElement=null)}const s=e.selection.getSelectedElement();if(!s)return;const a=n.mapper.toViewElement(s);if(!ky(a,s,i))return;const l=Sy(e.selection);l&&(o.addClass(r(l),a),this._currentFakeCaretModelElement=s)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(e,n,i)=>{i||t.model.change(t=>{t.removeSelectionAttribute(yy)})})}_handleArrowKeyPress(t,e){const n=this.editor,i=n.model,o=i.document.selection,r=i.schema,s=n.editing.view;if(e.shiftKey)return;const a=e.keyCode,l=An(a,n.locale.contentLanguageDirection),c=s.document.selection.getSelectedElement(),u=n.editing.mapper.toModelElement(c);let d;ky(c,u,r)?d=this._handleArrowKeyPressOnSelectedWidget(l):o.isCollapsed?d=this._handleArrowKeyPressWhenSelectionNextToAWidget(l):e.shiftKey||(d=this._handleArrowKeyPressWhenNonCollapsedSelection(l)),d&&(e.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const e=this.editor,n=e.model,i=n.document.selection,o=Sy(i);return n.change(e=>{if(!o)return e.setSelectionAttribute(yy,t?"after":"before"),!0;{const n=o===(t?"after":"before");if(!n)return e.removeSelectionAttribute(yy),!0}return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const e=this.editor,n=e.model,i=n.schema,o=e.plugins.get("Widget"),r=o._getObjectElementNextToSelection(t),s=e.editing.mapper.toViewElement(r);return!!ky(s,r,i)&&(n.change(e=>{o._setSelectionOverElement(r),e.setSelectionAttribute(yy,t?"before":"after")}),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(t){const e=this.editor,n=e.model,i=n.schema,o=e.editing.mapper,r=n.document.selection,s=t?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter,a=o.toViewElement(s);return!!ky(a,s,i)&&(n.change(e=>{e.setSelection(s,"on"),e.setSelectionAttribute(yy,t?"after":"before")}),!0)}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,e=t.editing.view;this._listenToIfEnabled(e.document,"mousedown",(n,i)=>{const o=Cy(i.domTarget);if(!o)return;const r=xy(o),s=Ey(o,e.domConverter),a=t.editing.mapper.toModelElement(s);this._insertParagraph(a,r),i.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,e=t.model.document.selection,n=t.editing.view;this._listenToIfEnabled(n.document,"enter",(n,i)=>{if("atTarget"!=n.eventPhase)return;const o=e.getSelectedElement(),r=t.editing.mapper.toViewElement(o),s=t.model.schema;let a;this._insertParagraphAccordingToFakeCaretPosition()?a=!0:ky(r,o,s)&&(this._insertParagraph(o,i.isSoft?"before":"after"),a=!0),a&&(i.preventDefault(),n.stop())},{context:ly})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor,e=t.editing.view.document;this._listenToIfEnabled(e,"insertText",(t,n)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(n.selection=e.selection)},{priority:"high"}),nt.isAndroid?this._listenToIfEnabled(e,"keydown",(t,e)=>{229==e.keyCode&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(e,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const t=this.editor,e=t.editing.view,n=t.model,i=n.schema;this._listenToIfEnabled(e.document,"delete",(e,o)=>{if("atTarget"!=e.eventPhase)return;const r=Sy(n.document.selection);if(!r)return;const s=o.direction,a=n.document.selection.getSelectedElement(),l="before"===r,c="forward"==s,u=l===c;if(u)t.execute("delete",{selection:n.createSelection(a,"on")});else{const e=i.getNearestSelectionRange(n.createPositionAt(a,r),s);if(e)if(e.isCollapsed){const o=n.createSelection(e.start);if(n.modifySelection(o,{direction:s}),o.focus.isEqual(e.start)){const t=Dy(i,e.start.parent);n.deleteContent(n.createSelection(t,"on"),{doNotAutoparagraph:!0})}else n.change(n=>{n.setSelection(e),t.execute(c?"deleteForward":"delete")})}else n.change(n=>{n.setSelection(e),t.execute(c?"deleteForward":"delete")})}o.preventDefault(),e.stop()},{context:ly})}_enableInsertContentIntegration(){const t=this.editor,e=this.editor.model,n=e.document.selection;this._listenToIfEnabled(t.model,"insertContent",(t,[i,o])=>{if(o&&!o.is("documentSelection"))return;const r=Sy(n);return r?(t.stop(),e.change(t=>{const o=n.getSelectedElement(),s=e.createPositionAt(o,r),a=t.createSelection(s),l=e.insertContent(i,a);return t.setSelection(a),l})):void 0},{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,e=this.editor.model,n=e.document.selection;this._listenToIfEnabled(t.model,"insertObject",(t,e)=>{const[,i,o={}]=e;if(i&&!i.is("documentSelection"))return;const r=Sy(n);r&&(o.findOptimalPosition=r,e[3]=o)},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,e=this.editor.model,n=e.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(t,[e])=>{if(e&&!e.is("documentSelection"))return;const i=Sy(n);i&&t.stop()},{priority:"high"})}}function Ry(t,e,n){const i=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(t){const n=this.toDomElement(t);return Oy(n,e),My(n),n});t.insert(t.createPositionAt(n,"end"),i)}function Oy(t,e){for(const n of Ty){const i=new Lm({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:e[n],"aria-hidden":"true"},children:[t.ownerDocument.importNode(Ay,!0)]});t.appendChild(i.render())}}function My(t){const e=new Lm({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render())}function Dy(t,e){let n=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||t.isLimit(i))break;n=i}return n}function Vy(t){const e=t.model;return(n,i)=>{const o=i.keyCode==_n.arrowup,r=i.keyCode==_n.arrowdown,s=i.shiftKey,a=e.document.selection;if(!o&&!r)return;const l=r,c=Ny(t,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(s)return}(c.isCollapsed||Fy(t,c,l))&&(e.change(t=>{const n=l?c.end:c.start;if(s){const i=e.createSelection(a.anchor);i.setFocus(n),t.setSelection(i)}else t.setSelection(n)}),n.stop(),i.preventDefault(),i.stopPropagation())}}}function Ny(t,e,n){const i=t.model;if(n){const t=e.focus,n=Ly(i,t,"forward");if(!n)return;const o=i.createRange(t,n),r=By(i.schema,o,"backward");if(r)return i.createRange(t,r)}else{const t=e.focus,n=Ly(i,t,"backward");if(!n)return;const o=i.createRange(n,t),r=By(i.schema,o,"forward");if(r)return i.createRange(r,t)}}function Ly(t,e,n){const i=t.schema,o=t.createRangeIn(e.root),r="forward"==n?"elementStart":"elementEnd";for(const{previousPosition:s,item:a,type:l}of o.getWalker({startPosition:e,direction:n})){if(i.isLimit(a)&&!i.isInline(a))return s;if(l==r&&i.isBlock(a))return null}return null}function By(t,e,n){const i="backward"==n?e.end:e.start;if(t.checkChild(i,"$text"))return i;for(const{nextPosition:o}of e.getWalker({direction:n}))if(t.checkChild(o,"$text"))return o}function Fy(t,e,n){const i=t.model,o=t.view.domConverter;if(n){const t=i.createSelection(e.start);i.modifySelection(t),t.focus.isAtEnd||e.start.isEqual(t.focus)||(e=i.createRange(t.focus,e.end))}const r=t.mapper.toViewRange(e),s=o.viewRangeToDom(r),a=Le.getDomRangeRects(s);let l;for(const c of a)if(void 0!==l){if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}else l=Math.round(c.bottom);return!0}class zy extends Gh{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[Iy,Uf]}init(){const t=this.editor,e=t.editing.view,n=e.document,i=t.t;this.editor.editing.downcastDispatcher.on("selection",(e,n,i)=>{const o=i.writer,r=n.selection;if(r.isCollapsed)return;const s=r.getSelectedElement();if(!s)return;const a=t.editing.mapper.toViewElement(s);ly(a)&&i.consumable.consume(r,"selection")&&o.setSelection(o.createRangeOn(a),{fake:!0,label:py(a)})}),this.editor.editing.downcastDispatcher.on("selection",(t,e,n)=>{this._clearPreviouslySelectedWidgets(n.writer);const i=n.writer,o=i.document.selection;let r=null;for(const s of o.getRanges())for(const t of s){const e=t.item;ly(e)&&!Uy(e,r)&&(i.addClass(ay,e),this._previouslySelected.add(e),r=e)}},{priority:"low"}),e.addObserver(pd),e.addObserver(md),this.listenTo(n,"mousedown",(...t)=>this._onMousedown(...t)),this.listenTo(n,"pointerdown",(...t)=>this._onPointerdown(...t)),this.listenTo(n,"arrowKey",(...t)=>{this._handleSelectionChangeOnArrowKeyPress(...t)},{context:[ly,"$text"]}),this.listenTo(n,"arrowKey",(...t)=>{this._preventDefaultOnArrowKeyPress(...t)},{context:"$root"}),this.listenTo(n,"arrowKey",Vy(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(t,e)=>{this._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop())},{context:"$root"}),this.listenTo(n,"tab",(t,n)=>{this._selectNextEditable(n.shiftKey?"backward":"forward")&&(e.scrollToTheSelection(),n.preventDefault(),t.stop())},{context:t=>ly(t)||t.is("editableElement"),priority:"low"}),this.listenTo(n,"keydown",(t,e)=>{e.keystroke==_n.esc&&this._selectAncestorWidget()&&(e.preventDefault(),t.stop())},{context:t=>t.is("editableElement"),priority:"low"}),t.accessibility.addKeystrokeInfoGroup({id:"widget",label:i("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:i("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:i("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:i("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:i("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:i("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(t,e){const n=e.target;n&&e.domEvent.detail>=3&&this._selectBlockContent(n)&&e.preventDefault()}_onPointerdown(t,e){if(!e.domEvent.isPrimary)return;const n=this.editor,i=n.editing.view,o=i.document;let r=e.target;if(!r)return;if(!ly(r)){const t=jy(r);if(!t)return;if(ly(t))r=t;else{const t=$y(i,e);if(!t||!ly(t))return;r=t}}(nt.isAndroid||nt.isiOS)&&e.preventDefault(),o.isFocused||i.focus();const s=n.editing.mapper.toModelElement(r);this._setSelectionOverElement(s)}_selectBlockContent(t){const e=this.editor,n=e.model,i=e.editing.mapper,o=n.schema,r=i.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),s=qy(i.toModelElement(r),n.schema);return!!s&&(n.change(t=>{const e=o.isLimit(s)?null:Gy(t.createPositionAfter(s),o),n=t.createPositionAt(s,0),i=e?t.createPositionAt(e,0):t.createPositionAt(s,"end");t.setSelection(t.createRange(n,i))}),!0)}_handleSelectionChangeOnArrowKeyPress(t,e){const n=e.keyCode,i=this.editor.model,o=i.schema,r=i.document.selection,s=r.getSelectedElement(),a=Sn(n,this.editor.locale.contentLanguageDirection),l="down"==a||"right"==a,c="up"==a||"down"==a;if(!e.shiftKey&&!r.isCollapsed){if(Hy(r,o)){const n=l?r.getLastPosition():r.getFirstPosition(),s=o.getNearestSelectionRange(n,l?"forward":"backward");s&&(i.change(t=>{t.setSelection(s)}),e.preventDefault(),t.stop())}return}const u=Wy(i,l),d=i.createSelection(u);if(i.modifySelection(d,{direction:l?"forward":"backward"}),d.isEqual(u))return;d.focus.isTouching(u.focus)&&i.modifySelection(d,{direction:l?"forward":"backward"});const h=l?u.focus.nodeBefore:u.focus.nodeAfter,f=d.focus.nodeBefore,p=d.focus.nodeAfter,g=l?f:p;if(e.shiftKey)(s&&o.isObject(s)||g&&o.isObject(g)||h&&o.isObject(h))&&(i.change(t=>{t.setSelection(d)}),e.preventDefault(),t.stop());else if(g&&o.isObject(g)){if(o.isInline(g)&&c)return;i.change(t=>{t.setSelection(g,"on")}),e.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,e){const n=this.editor.model,i=n.schema,o=n.document.selection.getSelectedElement();o&&i.isObject(o)&&(e.preventDefault(),t.stop())}_handleDelete(t){const e=this.editor.model.document,n=e.selection;if(!this.editor.model.canEditAt(n))return;if(!n.isCollapsed)return;const i=this._getObjectElementNextToSelection(t);return i?(this.editor.model.change(t=>{let e=n.anchor.parent;while(e.isEmpty){const n=e;e=n.parent,t.remove(n)}this._setSelectionOverElement(i)}),!0):void 0}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(t){const e=this.editor.model,n=e.schema,i=e.document.selection,o=e.createSelection(i);if(e.modifySelection(o,{direction:t?"forward":"backward"}),o.isEqual(i))return null;const r=t?o.focus.nodeBefore:o.focus.nodeAfter;return r&&n.isObject(r)?r:null}_clearPreviouslySelectedWidgets(t){for(const e of this._previouslySelected)t.removeClass(ay,e);this._previouslySelected.clear()}_selectNextEditable(t){const e=this.editor.editing,n=e.view,i=this.editor.model,o=n.document.selection,r=i.document.selection;let s;if(r.rangeCount>1){const n=r.isBackward?r.getFirstRange():r.getLastRange();s=e.mapper.toViewPosition("forward"==t?n.end:n.start)}else s="forward"==t?o.getFirstPosition():o.getLastPosition();const a=this._findNextFocusRange(s,t);return!!a&&(i.change(t=>{t.setSelection(a)}),!0)}_findNextFocusRange(t,e){const n=this.editor.editing,i=n.view,o=this.editor.model,r=i.document.selection,s=r.editableElement,a=s.getPath();let l=r.getSelectedElement();l&&!ly(l)&&(l=null);const c="forward"==e?i.createRange(t,i.createPositionAt(t.root,"end")):i.createRange(i.createPositionAt(t.root,0),t);for(const{nextPosition:u}of c.getWalker({direction:e})){const t=u.parent;if(ly(t)&&t!=l){const e=n.mapper.toModelElement(t);if(!o.schema.isBlock(e))continue;if("extension"!=me(a,t.getPath()))return o.createRangeOn(e)}else if(t.is("editableElement")){if(t==s&&!l)continue;const i=n.mapper.toModelPosition(u),r=o.schema.getNearestSelectionRange(i,e);if(!r)continue;return t==s&&l?r:"extension"!=me(a,t.getPath())?o.createRangeIn(o.schema.getLimitElement(r)):r}}return null}_selectAncestorWidget(){const t=this.editor,e=t.editing.mapper,n=t.editing.view.document.selection,i=n.getFirstPosition().parent,o=i.is("$text")?i.parent:i,r=o.findAncestor(ly);if(!r)return!1;const s=e.toModelElement(r);
/* istanbul ignore next -- @preserve */return!!s&&(t.model.change(t=>{t.setSelection(s,"on")}),!0)}}function Hy(t,e){const n=t.getFirstPosition(),i=t.getLastPosition(),o=n.nodeAfter,r=i.nodeBefore;return!!o&&e.isObject(o)||!!r&&e.isObject(r)}function Wy(t,e){const n=t.document.selection,i=n.getSelectedElement(),o=Sy(n);return i&&"before"==o?t.createSelection(i,"before"):i&&"after"==o?t.createSelection(i,"after"):t.createSelection(n.getRanges(),{backward:i&&t.schema.isObject(i)?!e:n.isBackward})}function jy(t){let e=t;while(e){if(e.is("editableElement")||ly(e))return e;e=e.parent}return null}function $y(t,e){const n=Oe(e.domEvent);let i=null;if(i=n?t.domConverter.domRangeToView(n):t.createRange(t.createPositionAt(e.target,0)),!i)return null;const o=i.start;if(!o.parent)return null;let r=o.parent;return o.parent.is("editableElement")&&(o.isAtEnd&&o.nodeBefore?r=o.nodeBefore:o.isAtStart&&o.nodeAfter&&(r=o.nodeAfter)),r.is("$text")?r.parent:r}function Uy(t,e){return!!e&&Array.from(t.getAncestors()).includes(e)}function qy(t,e){for(const n of t.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(n,"$text"))return n;if(e.isLimit(n)&&!e.isObject(n))break}return null}function Gy(t,e){const n=new Fs({startPosition:t});for(const{item:i}of n){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}class Ky extends Gh{_toolbarDefinitions=new Map;_balloon;static get requires(){return[l_]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const e=t.plugins.get("BalloonToolbar");this.listenTo(e,"show",e=>{Jy(t.editing.view.document.selection)&&e.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values())t.view.destroy()}register(t,{ariaLabel:e,items:n,getRelatedElement:i,balloonClassName:o="ck-toolbar-container",positions:r}){if(!n.length)return void At("widget-toolbar-no-items",{toolbarId:t});const s=this.editor,a=s.t,l=new Fv(s.locale);if(l.ariaLabel=e||a("Widget toolbar"),this._toolbarDefinitions.has(t))throw new Tt("widget-toolbar-duplicated",this,{toolbarId:t});const c={view:l,getRelatedElement:i,balloonClassName:o,itemsConfig:n,positions:r,initialized:!1};s.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const t=i(s.editing.view.document.selection);t&&this._showToolbar(c,t)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(t,c)}_updateToolbarsVisibility(){let t=0,e=null,n=null;for(const i of this._toolbarDefinitions.values()){const o=i.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&o)if(this.editor.ui.focusTracker.isFocused){const r=o.getAncestors().length;r>t&&(t=r,e=o,n=i)}else this._isToolbarVisible(i)&&this._hideToolbar(i);else this._isToolbarInBalloon(i)&&this._hideToolbar(i)}n&&this._showToolbar(n,e)}_hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,e){this._isToolbarVisible(t)?Yy(this.editor,e,t.positions):this._isToolbarInBalloon(t)||(t.initialized||(t.initialized=!0,t.view.fillFromConfig(t.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:t.view,position:Xy(this.editor,e,t.positions),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const e of this._toolbarDefinitions.values())if(this._isToolbarVisible(e)){const n=e.getRelatedElement(this.editor.editing.view.document.selection);Yy(this.editor,n,t.positions)}}))}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function Yy(t,e,n){const i=t.plugins.get("ContextualBalloon"),o=Xy(t,e,n);i.updatePosition(o)}function Xy(t,e,n){const i=t.editing.view,o=Gb.defaultPositions;return{target:i.domConverter.mapViewToDom(e),positions:n||[o.northArrowSouth,o.northArrowSouthWest,o.northArrowSouthEast,o.southArrowNorth,o.southArrowNorthWest,o.southArrowNorthEast,o.viewportStickyNorth]}}function Jy(t){const e=t.getSelectedElement();return!(!e||!ly(e))}class Zy extends(ie()){_referenceCoordinates;_options;_originalWidth;_originalHeight;_originalWidthPercents;_aspectRatio;constructor(t){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(t,e,n){const i=new Le(e);this.activeHandlePosition=ek(t),this._referenceCoordinates=Qy(e,nk(this.activeHandlePosition)),this._originalWidth=i.width,this._originalHeight=i.height,this._aspectRatio=i.width/i.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=_y(n,i)}update(t){this.proposedWidth=t.width,this.proposedHeight=t.height,this.proposedWidthPercents=t.widthPercents,this.proposedHandleHostWidth=t.handleHostWidth,this.proposedHandleHostHeight=t.handleHostHeight}}function Qy(t,e){const n=new Le(t),i=e.split("-"),o={x:"right"==i[1]?n.right:n.left,y:"bottom"==i[0]?n.bottom:n.top};return o.x+=t.ownerDocument.defaultView.scrollX,o.y+=t.ownerDocument.defaultView.scrollY,o}function tk(t){return`ck-widget__resizer__handle-${t}`}function ek(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const n of e)if(t.classList.contains(tk(n)))return n}function nk(t){const e=t.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[e[0]]}-${n[e[1]]}`}class ik extends db{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:t.if("_isVisible","none",t=>!t)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(t,e)=>null!==t&&null!==e),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(e,n,i)=>"px"===t.unit?`${e}Ã${n}`:`${i}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(t,e,n)=>e<50||n<50?"above-center":t)}_dismiss(){this.unbind(),this._isVisible=!1}}class ok extends(ie()){_state;_sizeView;_options;_viewResizerWrapper=null;_initialViewWidth;constructor(t){super(),this._options=t,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,e)=>t&&e),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){const t=this._options.editor.editing.view;t.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){const t=this._options.editor.editing.view;t.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const t=this,e=this._options.viewElement,n=this._options.editor.editing.view;n.change(n=>{const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(e){const n=this.toDomElement(e);return t._appendHandles(n),t._appendSizeUI(n),n});n.insert(n.createPositionAt(e,"end"),i),n.addClass("ck-widget_with-resizer",e),this._viewResizerWrapper=i,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(t){this._state=new Zy(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(t,this._getHandleHost(),this._getResizeHost())}updateSize(t){const e=this._proposeNewSize(t),n=this._options.editor.editing.view;n.change(t=>{const n=this._options.unit||"%",i=("%"===n?e.widthPercents:e.width)+n;t.setStyle("width",i,this._options.viewElement)});const i=this._getHandleHost(),o=new Le(i),r=Math.round(o.width),s=Math.round(o.height),a=new Le(i);e.width=Math.round(a.width),e.height=Math.round(a.height),this.redraw(o),this.state.update({...e,handleHostWidth:r,handleHostHeight:s})}commit(){const t=this._options.unit||"%",e=("%"===t?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(e)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(t){const e=this._domResizerWrapper;if(!ak(e))return;const n=e.parentElement,i=this._getHandleHost(),o=this._viewResizerWrapper,r=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let s;if(n.isSameNode(i)){const e=t||new Le(i);s=[e.width+"px",e.height+"px",void 0,void 0]}else s=[i.offsetWidth+"px",i.offsetHeight+"px",i.offsetLeft+"px",i.offsetTop+"px"];"same"!==me(r,s)&&this._options.editor.editing.view.change(t=>{t.setStyle({width:s[0],height:s[1],left:s[2],top:s[3]},o)})}containsHandle(t){return this._domResizerWrapper.contains(t)}static isResizeHandle(t){return t.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss();const t=this._options.editor.editing.view;t.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(t){const e=this.state,n=sk(t),i=!this._options.isCentered||this._options.isCentered(this),o={x:e._referenceCoordinates.x-(n.x+e.originalWidth),y:n.y-e.originalHeight-e._referenceCoordinates.y};i&&e.activeHandlePosition.endsWith("-right")&&(o.x=n.x-(e._referenceCoordinates.x+e.originalWidth)),i&&(o.x*=2);let r=Math.abs(e.originalWidth+o.x),s=Math.abs(e.originalHeight+o.y);const a=r/e.aspectRatio>s?"width":"height";return"width"==a?s=r/e.aspectRatio:r=s*e.aspectRatio,{width:Math.round(r),height:Math.round(s),widthPercents:Math.min(Math.round(e.originalWidthPercents/e.originalWidth*r*100)/100,100)}}_getResizeHost(){const t=this._domResizerWrapper.parentElement;return this._options.getResizeHost(t)}_getHandleHost(){const t=this._domResizerWrapper.parentElement;return this._options.getHandleHost(t)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const n of e)t.appendChild(new Lm({tag:"div",attributes:{class:`ck-widget__resizer__handle ${rk(n)}`}}).render())}_appendSizeUI(t){this._sizeView=new ik,this._sizeView.render(),t.appendChild(this._sizeView.element)}}function rk(t){return`ck-widget__resizer__handle-${t}`}function sk(t){return{x:t.pageX,y:t.pageY}}function ak(t){return t&&t.ownerDocument&&t.ownerDocument.contains(t)}class lk extends Gh{_resizers=new Map;_observer;_redrawSelectedResizerThrottled;static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.editing,e=Q.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),t.view.addObserver(pd),this._observer=new(Ee()),this.listenTo(t.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(e,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(e,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Vh(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[t,e]of this._resizers)t.isAttached()||(this._resizers.delete(t),e.destroy())},{priority:"lowest"}),this._observer.listenTo(Q.window,"resize",this._redrawSelectedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",()=>{const t=n.getSelectedElement(),e=this.getResizerByViewElement(t)||null;e?this.select(e):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const t of this._resizers.values())t.destroy();this._redrawSelectedResizerThrottled.cancel()}select(t){this.deselect(),this.selectedResizer=t,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(t){const e=new ok(t),n=this.editor.plugins;if(e.attach(),n.has("WidgetToolbarRepository")){const t=n.get("WidgetToolbarRepository");e.on("begin",()=>{t.forceDisabled("resize")},{priority:"lowest"}),e.on("cancel",()=>{t.clearForceDisabled("resize")},{priority:"highest"}),e.on("commit",()=>{t.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(t.viewElement,e);const i=this.editor.editing.view.document.selection,o=i.getSelectedElement();return this.getResizerByViewElement(o)==e&&this.select(e),e}getResizerByViewElement(t){return this._resizers.get(t)}_getResizerByHandle(t){for(const e of this._resizers.values())if(e.containsHandle(t))return e}_mouseDownListener(t,e){const n=e.domTarget;ok.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n)||null,this._activeResizer&&(this._activeResizer.begin(n),t.stop(),e.preventDefault()))}_mouseMoveListener(t,e){this._activeResizer&&this._activeResizer.updateSize(e)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}Error;function ck(t){return t}function uk(t,e){const n={},i=Object.keys(t);for(let o=0;o<i.length;o++){const r=i[o],s=t[r];n[r]=e(s,r,t)}return n}function dk(t){return function(e){return gi(e,t)}}function hk(t,e,n){return"function"!==typeof n?vk(t,e):fk(t,e,function t(e,i,o,r,s,a){const l=n(e,i,o,r,s,a);return void 0!==l?Boolean(l):fk(e,i,t,a)},new Map)}function fk(t,e,n,o){if(e===t)return!0;switch(typeof e){case"object":return pk(t,e,n,o);case"function":{const i=Object.keys(e);return i.length>0?fk(t,{...e},n,o):bi(t,e)}default:return i(t)?"string"!==typeof e||""===e:bi(t,e)}}function pk(t,e,n,i){if(null==e)return!0;if(Array.isArray(e))return mk(t,e,n,i);if(e instanceof Map)return gk(t,e,n,i);if(e instanceof Set)return bk(t,e,n,i);const o=Object.keys(e);if(null==t)return 0===o.length;if(0===o.length)return!0;if(i&&i.has(e))return i.get(e)===t;i&&i.set(e,t);try{for(let r=0;r<o.length;r++){const s=o[r];if(!D(t)&&!(s in t))return!1;if(void 0===e[s]&&void 0!==t[s])return!1;if(null===e[s]&&null!==t[s])return!1;const a=n(t[s],e[s],s,t,e,i);if(!a)return!1}return!0}finally{i&&i.delete(e)}}function gk(t,e,n,i){if(0===e.size)return!0;if(!(t instanceof Map))return!1;for(const[o,r]of e.entries()){const s=t.get(o),a=n(s,r,o,t,e,i);if(!1===a)return!1}return!0}function mk(t,e,n,i){if(0===e.length)return!0;if(!Array.isArray(t))return!1;const o=new Set;for(let r=0;r<e.length;r++){const s=e[r];let a=!1;for(let l=0;l<t.length;l++){if(o.has(l))continue;const c=t[l];let u=!1;const d=n(c,s,r,t,e,i);if(d&&(u=!0),u){o.add(l),a=!0;break}}if(!a)return!1}return!0}function bk(t,e,n,i){return 0===e.size||t instanceof Set&&mk([...t],[...e],n,i)}function vk(t,e){return hk(t,e,()=>{})}function wk(t){return L(t,void 0,t,new Map,void 0)}function _k(t){return t=wk(t),e=>vk(e,t)}function yk(t,e){let n;if(n=Array.isArray(e)?e:"string"===typeof e&&hi(e)&&null==t?.[e]?pi(e):[e],0===n.length)return!1;let i=t;for(let o=0;o<n.length;o++){const t=n[o];if(null==i||!Object.hasOwn(i,t)){const e=(Array.isArray(i)||G(i))&&_i(t)&&t<i.length;if(!e)return!1}i=i[t]}return!0}function kk(t,e){switch(typeof t){case"object":Object.is(t?.valueOf(),-0)&&(t="-0");break;case"number":t=fi(t);break}return e=$(e),function(n){const i=gi(n,t);return void 0===i?yk(n,t):void 0===e?void 0===i:vk(i,e)}}function Ck(t){if(null==t)return ck;switch(typeof t){case"function":return t;case"object":return Array.isArray(t)&&2===t.length?kk(t[0],t[1]):_k(t);case"string":case"symbol":case"number":return dk(t)}}function xk(t,e=ck){return null==t?{}:uk(t,Ck(e))}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class Ek extends ys{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(t){super(t);const e=this.document;function n(t){return(n,i)=>{i.preventDefault();const o=i.dropRange?[i.dropRange]:null,r=new yt(e,t);e.fire(r,{dataTransfer:i.dataTransfer,method:n.name,targetRanges:o,target:i.target,domEvent:i.domEvent}),r.stop.called&&i.stopPropagation()}}this.listenTo(e,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"dragover",n("dragging"),{priority:"low"})}onDomEvent(t){const e="clipboardData"in t?t.clipboardData:t.dataTransfer,n="drop"==t.type||"paste"==t.type,i={dataTransfer:new Is(e,{cacheFiles:n})};if("drop"==t.type||"dragover"==t.type){const e=Oe(t);i.dropRange=e&&this.view.domConverter.domRangeToView(e)}this.fire(t.type,t,i)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Sk(t){return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(t.includes("</p><p>")||t.includes("<br>"))&&(t=`<p>${t}</p>`),t}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Tk(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>1==e.length?" ":e).replace(/<!--[\s\S]*?-->/g,"")}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Ak=["figcaption","li"],Pk=["ol","ul"];function Ik(t,e){if(e.is("$text")||e.is("$textProxy"))return e.data;if(e.is("element","img")&&e.hasAttribute("alt"))return e.getAttribute("alt");if(e.is("element","br"))return"\n";let n="",i=null;for(const o of e.getChildren())n+=Ok(o,i)+Ik(t,o),i=o;if(e.is("rawElement")){const i=document.implementation.createHTMLDocument(""),o=i.createElement("div");e.render(o,t),n+=Rk(o)}return n}function Rk(t){let e="";if(t.nodeType===Node.TEXT_NODE)return t.textContent;if("BR"===t.tagName)return"\n";for(const n of t.childNodes)e+=Rk(n);return e}function Ok(t,e){return e?t.is("element","li")&&!t.isEmpty&&t.getChild(0).is("containerElement")||Pk.includes(t.name)&&Pk.includes(e.name)?"\n\n":t.is("containerElement")||e.is("containerElement")?Ak.includes(t.name)||Ak.includes(e.name)?"\n":t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":"\n\n":"":""}class Mk extends Gh{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(t,e){this._markersToCopy.set(t,e)}_copySelectedFragmentWithMarkers(t,e,n=t=>t.model.getSelectedContent(t.model.document.selection)){return this.editor.model.change(i=>{const o=i.model.document.selection;i.setSelection(e);const r=this._insertFakeMarkersIntoSelection(i,i.model.document.selection,t),s=n(i),a=this._removeFakeMarkersInsideElement(i,s);for(const[t,e]of Object.entries(r)){a[t]||=i.createRangeIn(s);for(const t of e)i.remove(t)}s.markers.clear();for(const[t,e]of Object.entries(a))s.markers.set(t,e);return i.setSelection(o),s})}_pasteMarkersIntoTransformedElement(t,e){const n=this._getPasteMarkersFromRangeMap(t);return this.editor.model.change(t=>{const i=this._insertFakeMarkersElements(t,n),o=e(t),r=this._removeFakeMarkersInsideElement(t,o);for(const e of Object.values(i).flat())t.remove(e);for(const[e,n]of Object.entries(r))t.model.markers.has(e)||t.addMarker(e,{usingOperation:!0,affectsData:!0,range:n});return o})}_pasteFragmentWithMarkers(t){const e=this._getPasteMarkersFromRangeMap(t.markers);t.markers.clear();for(const n of e)t.markers.set(n.name,n.range);return this.editor.model.insertContent(t)}_forceMarkersCopy(t,e,n={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const i=this._markersToCopy.get(t);this._markersToCopy.set(t,n),e(),i?this._markersToCopy.set(t,i):this._markersToCopy.delete(t)}_isMarkerCopyable(t,e){const n=this._getMarkerClipboardConfig(t);if(!n)return!1;if(!e)return!0;const{allowedActions:i}=n;return"all"===i||i.includes(e)}_hasMarkerConfiguration(t){return!!this._getMarkerClipboardConfig(t)}_getMarkerClipboardConfig(t){const[e]=t.split(":");return this._markersToCopy.get(e)||null}_insertFakeMarkersIntoSelection(t,e,n){const i=this._getCopyableMarkersFromSelection(t,e,n);return this._insertFakeMarkersElements(t,i)}_getCopyableMarkersFromSelection(t,e,n){const i=Array.from(e.getRanges()),o=new Set(i.flatMap(e=>Array.from(t.model.markers.getMarkersIntersectingRange(e)))),r=t=>{const e=this._isMarkerCopyable(t.name,n);if(!e)return!1;const{copyPartiallySelected:o}=this._getMarkerClipboardConfig(t.name);if(!o){const e=t.getRange();return i.some(t=>t.containsRange(e,!0))}return!0};return Array.from(o).filter(r).map(t=>{const e="dragstart"===n?this._getUniqueMarkerName(t.name):t.name;return{name:e,range:t.getRange()}})}_getPasteMarkersFromRangeMap(t,e=null){const{model:n}=this.editor,i=t instanceof Map?Array.from(t.entries()):Object.entries(t);return i.flatMap(([t,i])=>{if(!this._hasMarkerConfiguration(t))return[{name:t,range:i}];if(this._isMarkerCopyable(t,e)){const e=this._getMarkerClipboardConfig(t),o=n.markers.has(t)&&"$graveyard"===n.markers.get(t).getRange().root.rootName;return(e.duplicateOnPaste||o)&&(t=this._getUniqueMarkerName(t)),[{name:t,range:i}]}return[]})}_insertFakeMarkersElements(t,e){const n={},i=e.flatMap(t=>{const{start:e,end:n}=t.range;return[{position:e,marker:t,type:"start"},{position:n,marker:t,type:"end"}]}).sort(({position:t},{position:e})=>t.isBefore(e)?1:-1);for(const{position:o,marker:r,type:s}of i){const e=t.createElement("$marker",{"data-name":r.name,"data-type":s});n[r.name]||(n[r.name]=[]),n[r.name].push(e),t.insert(e,o)}return n}_removeFakeMarkersInsideElement(t,e){const n=this._getAllFakeMarkersFromElement(t,e),i=n.reduce((e,n)=>{const i=n.markerElement&&t.createPositionBefore(n.markerElement);let o=e[n.name],r=!1;if(o?.start&&o?.end){const t=this._getMarkerClipboardConfig(n.name);t.duplicateOnPaste?e[this._getUniqueMarkerName(n.name)]=e[n.name]:r=!0,o=null}return r||(e[n.name]={...o,[n.type]:i}),n.markerElement&&t.remove(n.markerElement),e},{});return xk(i,n=>new Ks(n.start||t.createPositionFromPath(e,[0]),n.end||t.createPositionAt(e,"end")))}_getAllFakeMarkersFromElement(t,e){const n=Array.from(t.createRangeIn(e)).flatMap(({item:t})=>{if(!t.is("element","$marker"))return[];const e=t.getAttribute("data-name"),n=t.getAttribute("data-type");return[{markerElement:t,name:e,type:n}]}),i=[],o=[];for(const r of n){if("end"===r.type){const t=n.some(t=>t.name===r.name&&"start"===t.type);t||i.push({markerElement:null,name:r.name,type:"start"})}if("start"===r.type){const t=n.some(t=>t.name===r.name&&"end"===t.type);t||o.unshift({markerElement:null,name:r.name,type:"end"})}}return[...i,...n,...o]}_getUniqueMarkerName(t){const e=t.split(":"),n=Ct().substring(1,6);return 3===e.length?`${e.slice(0,2).join(":")}:${n}`:`${e.join(":")}:${n}`}}class Dk extends Gh{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[Mk]}init(){const t=this.editor,e=t.editing.view;e.addObserver(Ek),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const i=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:"cut"===n},()=>{const o=i._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:o,method:n})})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,i=n.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(i,"clipboardInput",(e,n)=>{"paste"!=n.method||t.model.canEditAt(t.model.document.selection)||e.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(t,e)=>{const i=e.dataTransfer;let o;if(e.content)o=e.content;else{let t="";i.getData("text/html")?t=Tk(i.getData("text/html")):i.getData("text/plain")&&(t=Sk(i.getData("text/plain"))),o=this.editor.data.htmlProcessor.toView(t)}const r=new yt(this,"inputTransformation"),s=i.getData("application/ckeditor5-editor-id")||null;this.fire(r,{content:o,dataTransfer:i,sourceEditorId:s,targetRanges:e.targetRanges,method:e.method}),r.stop.called&&t.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(t,n)=>{if(n.content.isEmpty)return;const i=this.editor.data,o=i.toModel(n.content,"$clipboardHolder");0!=o.childCount&&(t.stop(),e.change(()=>{this.fire("contentInsertion",{content:o,method:n.method,sourceEditorId:n.sourceEditorId,dataTransfer:n.dataTransfer,targetRanges:n.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(t,e)=>{e.resultRange=o._pasteFragmentWithMarkers(e.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,n=t.editing.view,i=n.document,o=(t,n)=>{const i=n.dataTransfer;n.preventDefault(),this._fireOutputTransformationEvent(i,e.selection,t.name)};this.listenTo(i,"copy",o,{priority:"low"}),this.listenTo(i,"cut",(e,n)=>{t.model.canEditAt(t.model.document.selection)?o(e,n):n.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(e,n)=>{const o=t.data.toView(n.content,{isClipboardPipeline:!0});i.fire("clipboardOutput",{dataTransfer:n.dataTransfer,content:o,method:n.method})},{priority:"low"}),this.listenTo(i,"clipboardOutput",(n,i)=>{i.content.isEmpty||(i.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(i.content)),i.dataTransfer.setData("text/plain",Ik(t.data.htmlProcessor.domConverter,i.content)),i.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),"cut"==i.method&&t.model.deleteContent(e.selection)},{priority:"low"})}}const Vk=qe("px");class Nk extends db{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",t=>!t)],style:{left:t.to("left",t=>Vk(t)),top:t.to("top",t=>Vk(t)),width:t.to("width",t=>Vk(t))}}})}}class Lk extends Gh{removeDropMarkerDelayed=Jn(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=Vh(t=>this._updateDropMarker(t),40);_reconvertMarkerThrottled=Vh(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new Nk;_domEmitter=new(Ee());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:t}of this._scrollables.values())t.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(t,e,n,i,o,r){this.removeDropMarkerDelayed.cancel();const s=Bk(this.editor,t,e,n,i,o,r);
/* istanbul ignore next -- @preserve */return s?r&&r.containsRange(s)||s&&!this.editor.model.canEditAt(s)?(this.removeDropMarker(),null):(this._updateDropMarkerThrottled(s),s):null}getFinalDropRange(t,e,n,i,o,r){const s=Bk(this.editor,t,e,n,i,o,r);return this.removeDropMarker(),s}removeDropMarker(){const t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const t=this.editor;t.ui.view.body.add(this._dropTargetLineView),t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(e,{writer:n})=>{if(t.model.schema.checkChild(e.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(n);e.markerRange.isCollapsed?this._updateDropTargetLine(e.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(t){const e=this.editor,n=e.model.markers;e.model.change(e=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const e=this.toDomElement(t);return e.append("â ",t.createElement("span"),"â "),e})}_updateDropTargetLine(t){const e=this.editor.editing,n=t.start.nodeBefore,i=t.start.nodeAfter,o=t.start.parent,r=n?e.mapper.toViewElement(n):null,s=r?e.view.domConverter.mapViewToDom(r):null,a=i?e.mapper.toViewElement(i):null,l=a?e.view.domConverter.mapViewToDom(a):null,c=e.mapper.toViewElement(o);if(!c)return;const u=e.view.domConverter.mapViewToDom(c),d=this._getScrollableRect(c),{scrollX:h,scrollY:f}=Q.window,p=s?new Le(s):null,g=l?new Le(l):null,m=new Le(u).excludeScrollbarsAndBorders(),b=p?p.bottom:m.top,v=g?g.top:m.bottom,w=Q.window.getComputedStyle(u),_=b<=v?(b+v)/2:v;if(d.top<_&&_<d.bottom){const t=m.left+parseFloat(w.paddingLeft),e=m.right-parseFloat(w.paddingRight),n=Math.max(t+h,d.left),i=Math.min(e+h,d.right);this._dropTargetLineView.set({isVisible:!0,left:n,top:_+f,width:i-n})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(t){const e=t.root.rootName;let n;if(this._scrollables.has(e))n=this._scrollables.get(e).domElement;else{const i=this.editor.editing.view.domConverter.mapViewToDom(t);n=jk(i),this._domEmitter.listenTo(n,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new $e(n,this._reconvertMarkerThrottled);this._scrollables.set(e,{domElement:n,resizeObserver:o})}return new Le(n).excludeScrollbarsAndBorders()}}function Bk(t,e,n,i,o,r,s){const a=t.model,l=t.editing.mapper,c=Wk(t,e);let u=c;while(u){if(!r)if(a.schema.checkChild(u,"$text")){if(n){const e=n[0].start,r=l.toModelPosition(e),c=!s||Array.from(s.getItems({shallow:!0})).some(t=>a.schema.checkChild(r,t));if(c){if(a.schema.checkChild(r,"$text"))return a.createRange(r);if(e)return zk(t,Wk(t,e.parent),i,o)}}}else if(a.schema.isInline(u))return zk(t,u,i,o);if(a.schema.isBlock(u))return zk(t,u,i,o);if(a.schema.checkChild(u,"$block")){const e=Array.from(u.getChildren()).filter(e=>e.is("element")&&!Fk(t,e));let n=0,r=e.length;if(0==r)return a.createRange(a.createPositionAt(u,"end"));while(n<r-1){const s=Math.floor((n+r)/2),a=Hk(t,e[s],i,o);"before"==a?r=s:n=s}return zk(t,e[n],i,o)}u=u.parent}return null}function Fk(t,e){const n=t.editing.mapper,i=t.editing.view.domConverter,o=n.toViewElement(e);if(!o)return!0;const r=i.mapViewToDom(o);return"none"!=Q.window.getComputedStyle(r).float}function zk(t,e,n,i){const o=t.model;return o.createRange(o.createPositionAt(e,Hk(t,e,n,i)))}function Hk(t,e,n,i){const o=t.editing.mapper,r=t.editing.view.domConverter,s=o.toViewElement(e),a=r.mapViewToDom(s),l=new Le(a);return t.model.schema.isInline(e)?n<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function Wk(t,e){const n=t.editing.mapper,i=t.editing.view,o=n.toModelElement(e);if(o)return o;const r=i.createPositionBefore(e),s=n.findMappedViewAncestor(r);return n.toModelElement(s)}function jk(t){let e=t;do{e=e.parentElement;const t=Q.window.getComputedStyle(e).overflowY;if("auto"==t||"scroll"==t)break}while("BODY"!=e.tagName);return e}class $k extends Gh{_isBlockDragging=!1;_domEmitter=new(Ee());static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),nt.isAndroid&&this.forceDisabled("noAndroidSupport"),t.plugins.has("BlockToolbar")){const e=t.plugins.get("BlockToolbar"),n=e.buttonView.element;this._domEmitter.listenTo(n,"dragstart",(t,e)=>this._handleBlockDragStart(e)),this._domEmitter.listenTo(Q.document,"dragover",(t,e)=>this._handleBlockDragging(e)),this._domEmitter.listenTo(Q.document,"drop",(t,e)=>this._handleBlockDragging(e)),this._domEmitter.listenTo(Q.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&n.setAttribute("draggable","true"),this.on("change:isEnabled",(t,e,i)=>{n.setAttribute("draggable",i?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(t){if(!this.isEnabled)return;const e=this.editor.model,n=e.document.selection,i=this.editor.editing.view,o=Array.from(n.getSelectedBlocks()),r=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));e.change(t=>t.setSelection(r)),this._isBlockDragging=!0,i.focus(),i.getObserver(Ek).onDomEvent(t)}_handleBlockDragging(t){if(!this.isEnabled||!this._isBlockDragging)return;const e=t.clientX+("ltr"==this.editor.locale.contentLanguageDirection?100:-100),n=t.clientY,i=document.elementFromPoint(e,n),o=this.editor.editing.view;i&&i.closest(".ck-editor__editable")&&o.getObserver(Ek).onDomEvent({...t,type:t.type,dataTransfer:t.dataTransfer,target:i,clientX:e,clientY:n,preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class Uk extends Gh{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=Jn(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(Ee());_previewContainer;static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Dk,zy,Lk,$k]}init(){const t=this.editor,e=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,e.addObserver(Ek),e.addObserver(md),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(t,e,n)=>{n||this._finalizeDragging(!1)}),nt.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,e=t.model,n=t.editing.view,i=n.document,o=t.plugins.get(Lk);this.listenTo(i,"dragstart",(n,i)=>{if(i.target?.is("editableElement"))return void i.preventDefault();if(this._prepareDraggedRange(i.target),!this._draggedRange)return void i.preventDefault();this._draggingUid=Ct();const o=this.isEnabled&&t.model.canEditAt(this._draggedRange);i.dataTransfer.effectAllowed=o?"copyMove":"copy",i.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const r=e.createSelection(this._draggedRange.toRange()),s=this.editor.plugins.get("ClipboardPipeline");s._fireOutputTransformationEvent(i.dataTransfer,r,"dragstart");const{dataTransfer:a,domTarget:l,domEvent:c}=i,{clientX:u}=c;this._updatePreview({dataTransfer:a,domTarget:l,clientX:u}),i.stopPropagation(),o||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(i,"dragend",(t,e)=>{this._finalizeDragging(!e.dataTransfer.isCanceled&&"move"==e.dataTransfer.dropEffect)},{priority:"low"}),this._domEmitter.listenTo(Q.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(i,"dragenter",()=>{this.isEnabled&&n.focus()}),this.listenTo(i,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(i,"dragging",(t,e)=>{if(!this.isEnabled)return void(e.dataTransfer.dropEffect="none");const{clientX:n,clientY:i}=e.domEvent,r=o.updateDropMarker(e.target,e.targetRanges,n,i,this._blockMode,this._draggedRange);r?(this._draggedRange||(e.dataTransfer.dropEffect="copy"),nt.isGecko||("copy"==e.dataTransfer.effectAllowed?e.dataTransfer.dropEffect="copy":["all","copyMove"].includes(e.dataTransfer.effectAllowed)&&(e.dataTransfer.dropEffect="move")),t.stop()):e.dataTransfer.dropEffect="none"},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,e=t.editing.view,n=e.document,i=t.plugins.get(Lk);this.listenTo(n,"clipboardInput",(e,n)=>{if("drop"!=n.method)return;const{clientX:o,clientY:r}=n.domEvent,s=i.getFinalDropRange(n.target,n.targetRanges,o,r,this._blockMode,this._draggedRange);if(!s)return this._finalizeDragging(!1),void e.stop();this._draggedRange&&this._draggingUid!=n.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="");const a="move"==qk(n.dataTransfer);if(a&&this._draggedRange&&this._draggedRange.containsRange(s,!0))return this._finalizeDragging(!1),void e.stop();n.targetRanges=[t.editing.mapper.toViewRange(s)]},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(Dk);t.on("contentInsertion",(t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n=e.targetRanges.map(t=>this.editor.editing.mapper.toModelRange(t));this.editor.model.change(t=>t.setSelection(n))},{priority:"high"}),t.on("contentInsertion",(t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n="move"==qk(e.dataTransfer),i=!e.resultRange||!e.resultRange.isCollapsed;this._finalizeDragging(i&&n)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,e=t.editing.view,n=e.document;this.listenTo(n,"pointerdown",(i,o)=>{if(nt.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let r=Gk(o.target);if(nt.isBlink&&!t.isReadOnly&&!r&&!n.selection.isCollapsed){const t=n.selection.getSelectedElement();t&&ly(t)||(r=n.selection.editableElement)}r&&(e.change(t=>{t.setAttribute("draggable","true",r)}),this._draggableElement=t.editing.mapper.toModelElement(r))}),this.listenTo(n,"pointerup",()=>{nt.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(e=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&e.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(t){const e=this.editor,n=e.model,i=e.plugins.get(Lk);if(i.removeDropMarker(),this._clearDraggableAttributes(),e.plugins.has("WidgetToolbarRepository")){const t=e.plugins.get("WidgetToolbarRepository");t.clearForceDisabled("dragDrop")}this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&n.change(t=>{const e=n.createSelection(this._draggedRange);n.deleteContent(e,{doNotAutoparagraph:!0});const i=e.getFirstPosition().parent;i.isEmpty&&!n.schema.checkChild(i,"$text")&&n.schema.checkChild(i,"paragraph")&&t.insertElement("paragraph",i,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(t){const e=this.editor,n=e.model,i=n.document.selection,o=t?Gk(t):null;if(o){const t=e.editing.mapper.toModelElement(o);if(this._draggedRange=ha.fromRange(n.createRangeOn(t)),this._blockMode=n.schema.isBlock(t),e.plugins.has("WidgetToolbarRepository")){const t=e.plugins.get("WidgetToolbarRepository");t.forceDisabled("dragDrop")}return}if(i.isCollapsed&&!i.getFirstPosition().parent.isEmpty)return;const r=Array.from(i.getSelectedBlocks()),s=i.getFirstRange();if(0==r.length)return void(this._draggedRange=ha.fromRange(s));const a=Kk(n,r);if(r.length>1)this._draggedRange=ha.fromRange(a),this._blockMode=!0;else if(1==r.length){const t=s.start.isTouching(a.start)&&s.end.isTouching(a.end);this._draggedRange=ha.fromRange(t?a:s),this._blockMode=t}n.change(t=>t.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:t,domTarget:e,clientX:n}){const i=this.editor.editing.view,o=i.document.selection.editableElement,r=i.domConverter.mapViewToDom(o),s=Q.window.getComputedStyle(r);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=ve(Q.document,"div",{style:"position: fixed; left: -999999px;"}),Q.document.body.appendChild(this._previewContainer));const a=ve(Q.document,"div");a.className="ck ck-content ck-clipboard-preview";const l=new Le(r),c=parseFloat(s.paddingLeft),u=parseFloat(s.paddingRight),d=parseFloat(s.width)-c-u;if(r.contains(e)){if(!nt.isiOS)return;a.style.maxWidth=`${d}px`,a.style.padding="10px",a.style.minWidth="200px",a.style.minHeight="20px",a.style.boxSizing="border-box",a.style.backgroundColor="var(--ck-color-base-background)"}else if(nt.isiOS)a.style.width=`${d}px`,a.style.backgroundColor="var(--ck-color-base-background)";else{const t=l.left-n+c;a.style.width=`${d+t}px`,a.style.paddingLeft=`${t}px`}i.domConverter.setContentOf(a,t.getData("text/html")),t.setDragImage(a,0,0),this._previewContainer.appendChild(a)}}function qk(t){return nt.isGecko?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function Gk(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(ly);if(ly(t))return t;const e=t.findAncestor(t=>ly(t)||t.is("editableElement"));return ly(e)?e:null}function Kk(t,e){const n=e[0],i=e[e.length-1],o=n.getCommonAncestor(i),r=t.createPositionBefore(n),s=t.createPositionAfter(i);if(o&&o.is("element")&&!t.schema.isLimit(o)){const e=t.createRangeOn(o),n=r.isTouching(e.start),i=s.isTouching(e.end);if(n&&i)return Kk(t,[o])}return t.createRange(r,s)}class Yk extends Gh{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Dk]}init(){const t=this.editor,e=t.model,n=t.editing.view,i=e.document.selection;n.addObserver(Ek),t.plugins.get(Dk).on("contentInsertion",(t,n)=>{Xk(n.content,e)&&e.change(t=>{const o=Array.from(i.getAttributes()).filter(([t])=>e.schema.getAttributeProperties(t).isFormatting);i.isCollapsed||e.deleteContent(i,{doNotAutoparagraph:!0}),o.push(...i.getAttributes());const r=t.createRangeIn(n.content);for(const n of r.getItems())for(const i of o)e.schema.checkAttribute(n,i[0])&&t.setAttribute(i[0],i[1],n)})})}}function Xk(t,e){let n=e.createRangeIn(t);if(1==t.childCount){const i=t.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(n=e.createRangeIn(i))}for(const i of n.getItems()){if(!e.schema.isInline(i))return!1;const t=Array.from(i.getAttributeKeys());if(t.find(t=>e.schema.getAttributeProperties(t).isFormatting))return!1}return!0}class Jk extends Gh{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Mk,Dk,Uk,Yk]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class Zk extends Zw{view;_toolbarConfig;_elementReplacer;constructor(t,e){super(t),this.view=e,this._toolbarConfig=Lv(t.config.get("toolbar")),this._elementReplacer=new pe,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const e=this.editor,n=this.view,i=e.editing.view,o=n.editable,r=i.document.getRoot();o.name=r.rootName,n.render();const s=o.element;this.setEditableElement(o.name,s),n.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(s),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),n.menuBarView&&this.initMenuBar(n.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.getDomRoot(t.editable.name)&&e.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:t})=>t||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,e=t.editing.view,n=e.document.getRoot(),i=t.sourceElement;let o;const r=t.config.get("placeholder");r&&(o="string"===typeof r?r:r[this.view.editable.name]),!o&&i&&"textarea"===i.tagName.toLowerCase()&&(o=i.getAttribute("placeholder")),o&&(n.placeholder=o),ro({view:e,element:n,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,e=this.editor.plugins.get("ContextualBalloon");e.on("getPositionOptions",e=>{const n=e.return;if(!n||!t.isSticky||!t.element)return;const i=new Le(t.element).height,o="function"===typeof n.target?n.target():n.target,r="function"===typeof n.limiter?n.limiter():n.limiter;if(o&&r&&new Le(o).height>=new Le(r).height-i)return;const s={...n.viewportOffsetConfig},a=(s.top||0)+i;e.return={...n,viewportOffsetConfig:{...s,top:a}}},{priority:"low"});const n=()=>{e.visibleView&&e.updatePosition()};this.listenTo(t,"change:isSticky",n),this.listenTo(this.editor.ui,"change:viewportOffset",n)}_handleScrollToTheSelectionWithStickyPanel(t,e,n){const i=this.view.stickyPanel;if(i.isSticky){const t=new Le(i.element).height;e.viewportOffset.top+=t}else{const t=()=>{this.editor.editing.view.scrollToTheSelection(n)};this.listenTo(i,"change:isSticky",t),setTimeout(()=>{this.stopListening(i,"change:isSticky",t)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,e=this.editor.plugins.get("Dialog");e.on("show",()=>{const n=e.view;n.on("moveTo",(e,i)=>{if(!t.isSticky||n.wasMoved||n.isModal)return;const o=new Le(t.contentPanelElement);i[1]<o.bottom+Bb.defaultOffset&&(i[1]=o.bottom+Bb.defaultOffset)},{priority:"high"})},{priority:"low"})}}class Qk extends e_{stickyPanel;toolbar;editable;constructor(t,e,n={}){super(t),this.stickyPanel=new h_(t),this.toolbar=new Fv(t,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),n.useMenuBar&&(this.menuBarView=new y_(t)),this.editable=new i_(t,e,void 0,{label:n.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class tC extends(vf(pf)){static get editorName(){return"ClassicEditor"}ui;constructor(t,e={}){if(!nC(t)&&void 0!==e.initialData)throw new Tt("editor-create-initial-data",null);super(e),this.config.define("menuBar.isVisible",!1),void 0===this.config.get("initialData")&&this.config.set("initialData",eC(t)),nC(t)&&(this.sourceElement=t),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),i=this.config.get("menuBar"),o=new Qk(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n,useMenuBar:i.isVisible,label:this.config.get("label")});this.ui=new Zk(this,o),mf(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,e={}){return new Promise(n=>{const i=new this(t,e);n(i.initPlugins().then(()=>i.ui.init(nC(t)?t:null)).then(()=>i.data.init(i.config.get("initialData"))).then(()=>i.fire("ready")).then(()=>i))})}}function eC(t){return nC(t)?Ie(t):t}function nC(t){return W(t)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class iC extends Yh{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!oC(t.schema,n))do{if(n=n.parent,!n)return}while(!oC(t.schema,n));t.change(t=>{t.setSelection(n,"in")})}}function oC(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"))}const rC=Cn("Ctrl+A");class sC extends Gh{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=t.editing.view,i=n.document;t.commands.add("selectAll",new iC(t)),this.listenTo(i,"keydown",(e,n)=>{kn(n)===rC&&(t.execute("selectAll"),n.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}class aC extends Gh{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(Tb);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Wb))}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("selectAll"),o=new t(e.locale),r=n.t;return o.set({label:r("Select all"),icon:ug,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),o}}class lC extends Gh{static get requires(){return[sC,aC]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class cC extends Yh{_stack=[];_createdBatches=new WeakSet;constructor(t){super(t),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(t.data,"set",(t,e)=>{e[1]={...e[1]};const n=e[1];n.batchType||(n.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(t.data,"set",(t,e)=>{const n=e[1];n.batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(t){const e=this.editor.model.document.selection,n={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,e,n){const i=this.editor.model,o=i.document,r=[],s=t.map(t=>t.getTransformedByOperations(n)),a=s.flat();for(const l of s){const t=l.filter(t=>t.root!=o.graveyard).filter(t=>!dC(t,a));t.length&&(uC(t),r.push(t[0]))}r.length&&i.change(t=>{t.setSelection(r,{backward:e})})}_undo(t,e){const n=this.editor.model,i=n.document;this._createdBatches.add(e);const o=t.operations.slice().filter(t=>t.isDocumentOperation);o.reverse();for(const r of o){const t=r.baseVersion+1,o=Array.from(i.history.getOperations(t)),s=Gc([r.getReversed()],o,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}),a=s.operationsA;for(let l of a){const t=l.affectedSelectable;t&&!n.canEditAt(t)&&(l=new Nc(l.baseVersion)),e.addOperation(l),n.applyOperation(l),i.history.setOperationAsUndone(r,l)}}}}function uC(t){t.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let e=1;e<t.length;e++){const n=t[e-1],i=n.getJoined(t[e],!0);i&&(e--,t.splice(e,2,i))}}function dC(t,e){return e.some(e=>e!==t&&e.containsRange(t,!0))}class hC extends cC{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],i=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(i,()=>{this._undo(n.batch,i);const t=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,t)}),this.fire("revert",n.batch,i),this.refresh()}}class fC extends cC{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const n=t.batch.operations[t.batch.operations.length-1],i=n.baseVersion+1,o=this.editor.model.document.history.getOperations(i);this._restoreSelection(t.selection.ranges,t.selection.isBackward,o),this._undo(t.batch,e)}),this.fire("revert",t.batch,e),this.refresh()}}class pC extends Gh{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;this._undoCommand=new hC(t),this._redoCommand=new fC(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(t,e)=>{const n=e[0];if(!n.isDocumentOperation)return;const i=n.batch,o=this._redoCommand.createdBatches.has(i),r=this._undoCommand.createdBatches.has(i),s=this._batchRegistry.has(i);s||(this._batchRegistry.add(i),i.isUndoable&&(o?this._undoCommand.addBatch(i):r||(this._undoCommand.addBatch(i),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,e,n)=>{this._redoCommand.addBatch(n)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Undo"),keystroke:"CTRL+Z"},{label:e("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class gC extends Gh{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,i="ltr"==e.uiLanguageDirection?xg:lg,o="ltr"==e.uiLanguageDirection?lg:xg;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",i),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",o)}_addButtonsToFactory(t,e,n,i){const o=this.editor;o.ui.componentFactory.add(t,()=>{const o=this._createButton(Tb,t,e,n,i);return o.set({tooltip:!0}),o}),o.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Wb,t,e,n,i))}_createButton(t,e,n,i,o){const r=this.editor,s=r.locale,a=r.commands.get(e),l=new t(s);return l.set({label:n,icon:o,keystroke:i}),l.bind("isEnabled").to(a,"isEnabled"),this.listenTo(l,"execute",()=>{r.execute(e),r.editing.view.focus()}),l}}class mC extends Gh{static get requires(){return[pC,gC]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class bC extends Gh{static get requires(){return[jb,Jk,Y_,lC,ey,qf,mC]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}function vC(t){return t.map(t=>_C(t)).filter(t=>void 0!==t)}const wC={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function _C(t){if("number"===typeof t&&(t=String(t)),"object"===typeof t&&xC(t))return kC(t);const e=CC(t);return e?kC(e):"default"===t?{model:void 0,title:"Default"}:EC(t)?void 0:yC(t)}function yC(t){return"string"===typeof t&&(t={title:t,model:`${parseFloat(t)}px`}),t.view={name:"span",styles:{"font-size":t.model}},kC(t)}function kC(t){return t.view&&"string"!==typeof t.view&&!t.view.priority&&(t.view.priority=7),t}function CC(t){return"string"===typeof t?wC[t]:wC[t.model]}function xC(t){return t.title&&t.model&&t.view}function EC(t){let e;if("object"===typeof t){if(!t.model)throw new Tt("font-size-invalid-definition",null,t);e=parseFloat(t.model)}else e=parseFloat(t);return isNaN(e)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class SC extends Yh{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,n=Hn(e.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&TC(n,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,i=t.selection||n.selection;e.canEditAt(i)&&e.change(t=>{const n=i.getSelectedBlocks();for(const i of n)!i.is("element","paragraph")&&TC(i,e.schema)&&t.rename(i,"paragraph")})}}function TC(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class AC extends Yh{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let i=t.position;return e.canEditAt(i)?e.change(t=>{if(i=this._findPositionToInsertParagraph(i,t),!i)return null;const o=t.createElement("paragraph");return n&&e.schema.setAllowedAttributes(o,n,t),e.insertContent(o,i),t.setSelection(o,"in"),t.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const i=n.schema.findAllowedParent(t,"paragraph");if(!i)return null;const o=t.parent,r=n.schema.checkChild(o,"$text");return o.isEmpty||r&&t.isAtEnd?n.createPositionAfter(o):!o.isEmpty&&r&&t.isAtStart?n.createPositionBefore(o):e.split(t,i).position}}class PC extends Gh{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new SC(t)),t.commands.add("insertParagraph",new AC(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(t,{writer:e})=>PC.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class IC extends Yh{modelElements;constructor(t,e){super(t),this.modelElements=e}refresh(){const t=Hn(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(e=>RC(t,e,this.editor.model.schema))}execute(t){const e=this.editor.model,n=e.document,i=t.value;e.change(t=>{const o=Array.from(n.selection.getSelectedBlocks()).filter(t=>RC(t,i,e.schema));for(const e of o)e.is("element",i)||t.rename(e,i)})}}function RC(t,e,n){return n.checkChild(t.parent,e)&&!n.isObject(t)}const OC="paragraph";class MC extends Gh{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[PC]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const i of e)"paragraph"!==i.model&&(t.model.schema.register(i.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(i),n.push(i.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new IC(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(e,i)=>{const o=t.model.document.selection.getFirstPosition().parent,r=n.some(t=>o.is("element",t.model));r&&!o.is("element",OC)&&0===o.childCount&&i.writer.rename(o,OC)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:xt.low+1})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function DC(t){const e=t.t,n={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return t.config.get("heading.options").map(t=>{const e=n[t.title];return e&&e!=t.title&&(t.title=e),t})}class VC extends Gh{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=DC(t),i=e("Choose heading"),o=e("Heading");t.ui.componentFactory.add("heading",e=>{const r={},s=new zn,a=t.commands.get("heading"),l=t.commands.get("paragraph"),c=[a];for(const t of n){const e={type:"button",model:new s_({label:t.title,class:t.class,role:"menuitemradio",withText:!0})};"paragraph"===t.model?(e.model.bind("isOn").to(l,"value"),e.model.set("commandName","paragraph"),c.push(l)):(e.model.bind("isOn").to(a,"value",e=>e===t.model),e.model.set({commandName:"heading",commandValue:t.model})),s.add(e),r[t.model]=t.title}const u=$v(e);return Gv(u,s,{ariaLabel:o,role:"menu"}),u.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),u.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),u.bind("isEnabled").toMany(c,"isEnabled",(...t)=>t.some(t=>t)),u.buttonView.bind("label").to(a,"value",l,"value",(t,e)=>{const n=e?"paragraph":t;return"boolean"===typeof n?i:r[n]?r[n]:i}),u.buttonView.bind("ariaLabel").to(a,"value",l,"value",(t,e)=>{const n=e?"paragraph":t;return"boolean"===typeof n?o:r[n]?`${r[n]}, ${o}`:o}),this.listenTo(u,"execute",e=>{const{commandName:n,commandValue:i}=e.source;t.execute(n,i?{value:i}:void 0),t.editing.view.focus()}),u}),t.ui.componentFactory.add("menuBar:heading",i=>{const o=new g_(i),r=t.commands.get("heading"),s=t.commands.get("paragraph"),a=[r],l=new m_(i);o.set({class:"ck-heading-dropdown"}),l.set({ariaLabel:e("Heading"),role:"menu"}),o.buttonView.set({label:e("Heading")}),o.panelView.children.add(l);for(const e of n){const n=new Iw(i,o),c=new Wb(i);n.children.add(c),l.items.add(n),c.set({isToggleable:!0,label:e.title,role:"menuitemradio",class:e.class}),c.delegate("execute").to(o),c.on("execute",()=>{const n="paragraph"===e.model?"paragraph":"heading";t.execute(n,{value:e.model}),t.editing.view.focus()}),"paragraph"===e.model?(c.bind("isOn").to(s,"value"),a.push(s)):c.bind("isOn").to(r,"value",t=>t===e.model)}return o.bind("isEnabled").toMany(a,"isEnabled",(...t)=>t.some(t=>t)),o})}}class NC extends Gh{static get requires(){return[MC,VC]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class LC extends Yh{refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute("highlight"),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"highlight")}execute(t={}){const e=this.editor.model,n=e.document,i=n.selection,o=t.value;e.change(t=>{if(i.isCollapsed){const e=i.getFirstPosition();if(i.hasAttribute("highlight")){const n=t=>t.item.hasAttribute("highlight")&&t.item.getAttribute("highlight")===this.value,i=e.getLastMatchingPosition(n,{direction:"backward"}),r=e.getLastMatchingPosition(n),s=t.createRange(i,r);o&&this.value!==o?(e.isEqual(r)||t.setAttribute("highlight",o,s),t.setSelectionAttribute("highlight",o)):(e.isEqual(r)||t.removeAttribute("highlight",s),t.removeSelectionAttribute("highlight"))}else o&&t.setSelectionAttribute("highlight",o)}else{const n=e.schema.getValidRanges(i.getRanges(),"highlight");for(const e of n)o?t.setAttribute("highlight",o,e):t.removeAttribute("highlight",e)}})}}class BC extends Gh{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-content-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-content-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-content-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-content-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-content-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-content-highlight-pen-green)",type:"pen"}]})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:"highlight"});const e=t.config.get("highlight.options");t.conversion.attributeToElement(FC(e)),t.commands.add("highlight",new LC(t))}}function FC(t){const e={model:{key:"highlight",values:[]},view:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]={name:"mark",classes:n.class};return e}class zC extends Gh{get localizedOptionTitles(){const t=this.editor.t;return{"Yellow marker":t("Yellow marker"),"Green marker":t("Green marker"),"Pink marker":t("Pink marker"),"Blue marker":t("Blue marker"),"Red pen":t("Red pen"),"Green pen":t("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.config.get("highlight.options");for(const e of t)this._addHighlighterButton(e);this._addRemoveHighlightButton(),this._addDropdown(t),this._addMenuBarButton(t)}_addRemoveHighlightButton(){const t=this.editor.t,e=this.editor.commands.get("highlight");this._addButton("removeHighlight",t("Remove highlight"),xp,null,t=>{t.bind("isEnabled").to(e,"isEnabled")})}_addHighlighterButton(t){const e=this.editor.commands.get("highlight");function n(n){n.bind("isEnabled").to(e,"isEnabled"),n.bind("isOn").to(e,"value",e=>e===t.model),n.iconView.fillColor=t.color,n.isToggleable=!0}this._addButton("highlight:"+t.model,t.title,WC(t.type),t.model,n)}_addButton(t,e,n,i,o){const r=this.editor;r.ui.componentFactory.add(t,t=>{const s=new Tb(t),a=this.localizedOptionTitles[e]?this.localizedOptionTitles[e]:e;return s.set({label:a,icon:n,tooltip:!0}),s.on("execute",()=>{r.execute("highlight",{value:i}),r.editing.view.focus()}),o(s),s})}_addDropdown(t){const e=this.editor,n=e.t,i=e.ui.componentFactory,o=t[0],r=t.reduce((t,e)=>(t[e.model]=e,t),{});i.add("highlight",s=>{const a=e.commands.get("highlight"),l=$v(s,jv),c=l.buttonView;c.set({label:n("Highlight"),tooltip:!0,lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),c.bind("icon").to(a,"value",t=>WC(d(t,"type"))),c.bind("color").to(a,"value",t=>d(t,"color")),c.bind("commandValue").to(a,"value",t=>d(t,"model")),c.bind("isOn").to(a,"value",t=>!!t),c.delegate("execute").to(l);const u=()=>{const e=t.map(t=>{const e=i.create("highlight:"+t.model);return this.listenTo(e,"execute",()=>{l.buttonView.set({lastExecuted:t.model})}),e});return e.push(new Dv),e.push(i.create("removeHighlight")),e};function d(t,e){const n=t&&t!==c.lastExecuted?t:c.lastExecuted;return r[n][e]}return l.bind("isEnabled").to(a,"isEnabled"),Uv(l,u,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:n("Text highlight toolbar")}),HC(l),c.on("execute",()=>{e.execute("highlight",{value:c.commandValue})}),this.listenTo(l,"execute",()=>{e.editing.view.focus()}),l})}_addMenuBarButton(t){const e=this.editor,n=e.t,i=e.commands.get("highlight");e.ui.componentFactory.add("menuBar:highlight",o=>{const r=new g_(o);r.buttonView.set({label:n("Highlight"),icon:WC("marker")}),r.bind("isEnabled").to(i),r.buttonView.iconView.fillColor="transparent";const s=new m_(o);for(const n of t){const t=new Iw(o,r),a=new Wb(o);a.set({label:n.title,icon:WC(n.type),role:"menuitemradio",isToggleable:!0}),a.iconView.fillColor=n.color,a.delegate("execute").to(r),a.bind("isOn").to(i,"value",t=>t===n.model),a.on("execute",()=>{e.execute("highlight",{value:n.model}),e.editing.view.focus()}),t.children.add(a),s.items.add(t)}s.items.add(new Rv(o));const a=new Iw(o,r),l=new Wb(o);return l.set({label:n("Remove highlight"),icon:xp}),l.delegate("execute").to(r),l.on("execute",()=>{e.execute("highlight",{value:null}),e.editing.view.focus()}),a.children.add(l),s.items.add(a),r.panelView.children.add(s),r})}}function HC(t){const e=t.buttonView.actionView;e.iconView.bind("fillColor").to(t.buttonView,"color")}function WC(t){return"marker"===t?zp:ig}class jC extends Gh{static get requires(){return[BC,zC]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}function $C(t){return t}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function UC(t){return t.createContainerElement("span",{class:"image-inline"},t.createEmptyElement("img"))}function qC(t){return t.createContainerElement("figure",{class:"image"},[t.createEmptyElement("img"),t.createSlot("children")])}function GC(t,e){const n=t.plugins.get("ImageUtils"),i=t.plugins.has("ImageInlineEditing")&&t.plugins.has("ImageBlockEditing");return t=>{if(!n.isInlineImageView(t))return null;if(!i)return o(t);const r="block"==t.getStyle("display")||t.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline";return r!==e?null:o(t)};function o(t){const e={name:!0};return t.hasAttribute("src")&&(e.attributes=["src"]),e}}function KC(t,e){const n=Hn(e.getSelectedBlocks());return!n||t.isObject(n)||n.isEmpty&&"listItem"!=n.name?"imageBlock":"imageInline"}function YC(t){return t&&t.endsWith("px")?parseInt(t):null}function XC(t){const e=YC(t.getStyle("width")),n=YC(t.getStyle("height"));return!(!e||!n)}const JC=/^(image|image-inline)$/;class ZC extends Gh{_domEmitter=new(Ee());static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},e=null,n=null,i={}){const o=this.editor,r=o.model,s=r.document.selection,a=nx(o,e||s,n);t={...Object.fromEntries(s.getAttributes()),...t};for(const l in t)r.schema.checkAttribute(a,l)||delete t[l];return r.change(n=>{const{setImageSizes:o=!0}=i,s=n.createElement(a,t);return r.insertObject(s,e,null,{setSelection:"on",findOptimalPosition:e||"imageInline"==a?void 0:"auto"}),s.parent?(o&&this.setImageNaturalSizeAttributes(s),s):null})}setImageNaturalSizeAttributes(t){const e=t.getAttribute("src");e&&(t.getAttribute("width")||t.getAttribute("height")||this.editor.model.change(n=>{const i=new Q.window.Image;this._domEmitter.listenTo(i,"load",()=>{t.getAttribute("width")||t.getAttribute("height")||this.editor.model.enqueueChange(n.batch,e=>{e.setAttribute("width",i.naturalWidth,t),e.setAttribute("height",i.naturalHeight,t)}),this._domEmitter.stopListening(i,"load")}),i.src=e}))}getClosestSelectedImageWidget(t){const e=t.getFirstPosition();if(!e)return null;const n=t.getSelectedElement();if(n&&this.isImageWidget(n))return n;let i=e.parent;while(i){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(t){const e=t.getSelectedElement();return this.isImage(e)?e:t.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(t){return t.findAncestor({classes:JC})}isImageAllowed(){const t=this.editor.model,e=t.document.selection;return QC(this.editor,e)&&tx(e)}toImageWidget(t,e,n){e.setCustomProperty("image",!0,t);const i=()=>{const e=this.findViewImgElement(t),i=e.getAttribute("alt");return i?`${i} ${n}`:n};return cy(t,e,{label:i})}isImageWidget(t){return!!t.getCustomProperty("image")&&ly(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const e=this.editor.editing.view;for(const{item:n}of e.createRangeIn(t))if(this.isInlineImageView(n))return n}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function QC(t,e){const n=nx(t,e,null);if("imageBlock"==n){const n=ex(e,t.model);if(t.model.schema.checkChild(n,"imageBlock"))return!0}else if(t.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function tx(t){return[...t.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function ex(t,e){const n=my(t,e),i=n.start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function nx(t,e,n){const i=t.model.schema,o=t.config.get("image.insert.type");return t.plugins.has("ImageBlockEditing")?t.plugins.has("ImageInlineEditing")?n||("inline"===o?"imageInline":"auto"!==o?"imageBlock":e.is("selection")?KC(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class ix extends Yh{refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=e.getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),i=e.model,o=n.getClosestSelectedImageElement(i.document.selection);i.change(e=>{e.setAttribute("alt",t.newValue,o)})}}class ox extends Gh{static get requires(){return[ZC]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new ix(this.editor))}}class rx extends db{focusTracker;keystrokes;labeledInput;backButtonView;saveButtonView;children;_focusables;_focusCycler;constructor(t){super(t),this.focusTracker=new Wn,this.keystrokes=new Gn,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new o_(t,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Dm,this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()}),this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),wb({view:this});const t=[this.backButtonView,this.labeledInput,this.saveButtonView];t.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:sg,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createSaveButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({label:t("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),e}_createHeaderView(){const t=this.locale.t,e=new Pb(this.locale,{label:t("Text Alternative")});return e.children.add(this.backButtonView,0),e}_createLabeledInputView(){const t=this.locale.t,e=new yv(this.locale,sw);return e.label=t("Text alternative"),e.class="ck-labeled-field-view_full-width",e}}function sx(t){const e=t.plugins.get("ContextualBalloon"),n=t.plugins.get("ImageUtils");if(n.getClosestSelectedImageWidget(t.editing.view.document.selection)){const n=ax(t);e.updatePosition(n)}}function ax(t){const e=t.editing.view,n=Gb.defaultPositions,i=t.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}class lx extends Gh{_balloon;_form;static get requires(){return[l_]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("imageTextAlternative",n=>{const i=t.commands.get("imageTextAlternative"),o=new Tb(n);return o.set({label:e("Change image text alternative"),icon:wg,tooltip:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",t=>!!t),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const t=this.editor,e=t.editing.view,n=e.document,i=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(bb(rx))(t.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(t.ui,"update",()=>{i.getClosestSelectedImageWidget(n.selection)?this._isVisible&&sx(t):this._hideForm(!0)}),mb({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const t=this.editor,e=t.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:ax(t)}),n.fieldView.value=n.fieldView.element.value=e.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class cx extends Gh{static get requires(){return[ox,lx]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function ux(t){const e=(e,n,i)=>{if(!i.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=t.findViewImgElement(n.viewItem);if(!o||!i.consumable.test(o,{name:!0}))return;i.consumable.consume(n.viewItem,{name:!0,classes:"image"});const r=i.convertItem(o,n.modelCursor),s=Hn(r.modelRange.getItems());s?(i.convertChildren(n.viewItem,s),i.updateConversionResult(s,n)):i.consumable.revert(n.viewItem,{name:!0,classes:"image"})};return t=>{t.on("element:figure",e)}}function dx(t,e){const n=(e,n,i)=>{if(!i.consumable.consume(n.item,e.name))return;const o=i.writer,r=i.mapper.toViewElement(n.item),s=t.findViewImgElement(r);null===n.attributeNewValue?(o.removeAttribute("srcset",s),o.removeAttribute("sizes",s)):n.attributeNewValue&&(o.setAttribute("srcset",n.attributeNewValue,s),o.setAttribute("sizes","100vw",s))};return t=>{t.on(`attribute:srcset:${e}`,n)}}function hx(t,e,n){const i=(e,n,i)=>{if(!i.consumable.consume(n.item,e.name))return;const o=i.writer,r=i.mapper.toViewElement(n.item),s=t.findViewImgElement(r);o.setAttribute(n.attributeKey,n.attributeNewValue||"",s)};return t=>{t.on(`attribute:${n}:${e}`,i)}}class fx extends ws{observe(t){this.listenTo(t,"load",(t,e)=>{const n=e.target;this.checkShouldIgnoreEventFromTarget(n)||"IMG"==n.tagName&&this._fireEvents(e)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class px extends Yh{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||"block"===e&&At("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||"inline"===e&&At("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=Mn(t.source),n=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((e,r)=>{const s=n.getSelectedElement();if("string"===typeof e&&(e={src:e}),r&&s&&i.isImage(s)){const n=this.editor.model.createPositionAfter(s);i.insertImage({...e,...o},n,t.imageType)}else t.breakBlock?i.insertImage({...e,...o},n.getFirstPosition(),t.imageType):i.insertImage({...e,...o},null,t.imageType)})}}class gx extends Yh{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(i=>{i.setAttribute("src",t.source,e),this.cleanupImage(i,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class mx extends Gh{static get requires(){return[ZC]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(fx),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new px(t),i=new gx(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",i),t.commands.add("imageInsert",n)}}class bx extends Gh{static get requires(){return[ZC]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&t.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),i="imageBlock"===t?"figure":"img";function o(e,i,o,r,s=!1){e.on(`attribute:${i}:${t}`,(e,i,a)=>{if(!a.consumable.consume(i.item,e.name))return;const l=a.writer,c=a.mapper.toViewElement(i.item),u=n.findViewImgElement(c);null!==i.attributeNewValue?l.setAttribute(o,i.attributeNewValue,u):l.removeAttribute(o,u);const d=i.item.getAttribute("width"),h=i.item.getAttribute("height"),f=d&&h;if(f&&s&&l.setAttribute("loading","lazy",u),i.item.hasAttribute("sources"))return;const p=i.item.hasAttribute("resizedWidth");("imageInline"!==t||p||r)&&f&&l.setStyle("aspect-ratio",`${d}/${h}`,u)})}e.conversion.for("upcast").attributeToAttribute({view:{name:i,styles:{width:/.+/}},model:{key:"width",value:t=>XC(t)?YC(t.getStyle("width")):null}}).attributeToAttribute({view:{name:i,key:"width"},model:"width"}).attributeToAttribute({view:{name:i,styles:{height:/.+/}},model:{key:"height",value:t=>XC(t)?YC(t.getStyle("height")):null}}).attributeToAttribute({view:{name:i,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(t=>{o(t,"width","width",!0,!0),o(t,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(t=>{o(t,"width","width",!1),o(t,"height","height",!1)}),e.conversion.for("upcast").add(t=>{t.on("element:img",(t,e,n)=>{const i=e.viewItem.getAttribute("width"),o=e.viewItem.getAttribute("height");i&&o&&n.consumable.consume(e.viewItem,{styles:["aspect-ratio"]})})})}}class vx extends Yh{_modelElementName;constructor(t,e){super(t),this._modelElementName=e}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=e.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=e.isInlineImage(n):this.isEnabled=e.isBlockImage(n)}execute(t={}){const e=this.editor,n=this.editor.model,i=e.plugins.get("ImageUtils"),o=i.getClosestSelectedImageElement(n.document.selection),r=Object.fromEntries(o.getAttributes());return r.src||r.uploadId?n.change(e=>{const{setImageSizes:s=!0}=t,a=Array.from(n.markers).filter(t=>t.getRange().containsItem(o)),l=i.insertImage(r,n.createSelection(o,"on"),this._modelElementName,{setImageSizes:s});if(!l)return null;const c=e.createRangeOn(l);for(const t of a){const n=t.getRange(),i="$graveyard"!=n.root.rootName?n.getJoined(c,!0):c;e.updateMarker(t,{range:i})}return{oldElement:o,newElement:l}}):null}}class wx extends Gh{static get requires(){return[ZC]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(t=>{t.on("attribute:placeholder",(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;if(!e.item.is("element","imageBlock")&&!e.item.is("element","imageInline"))return;i.consumable.consume(e.item,t.name);const o=i.writer,r=i.mapper.toViewElement(e.item),s=n.findViewImgElement(r);e.attributeNewValue?(o.addClass("image_placeholder",s),o.setStyle("background-image",`url(${e.attributeNewValue})`,s),o.setCustomProperty("editingPipeline:doNotReuseOnce",!0,s)):(o.removeClass("image_placeholder",s),o.removeStyle("background-image",s))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,i=n.view,o=t.plugins.get("ImageUtils");i.addObserver(fx),this.listenTo(i.document,"imageLoaded",(t,r)=>{const s=i.domConverter.mapDomToView(r.target);if(!s)return;const a=o.getImageWidgetFromImageView(s);if(!a)return;const l=n.mapper.toModelElement(a);l&&l.hasAttribute("placeholder")&&e.enqueueChange({isUndoable:!1},t=>{t.removeAttribute("placeholder",l)})})}}class _x extends Gh{static get requires(){return[mx,bx,ZC,wx,Dk]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema;e.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new vx(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,i=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(t,{writer:e})=>qC(e)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(t,{writer:n})=>i.toImageWidget(qC(n),n,e("image widget"))}),n.for("downcast").add(hx(i,"imageBlock","src")).add(hx(i,"imageBlock","alt")).add(dx(i,"imageBlock")),n.for("upcast").elementToElement({view:GC(t,"imageBlock"),model:(t,{writer:e})=>e.createElement("imageBlock",t.hasAttribute("src")?{src:t.getAttribute("src")}:void 0)}).add(ux(i))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,i=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(o,r)=>{const s=Array.from(r.content.getChildren());let a;if(!s.every(i.isInlineImageView))return;a=r.targetRanges?t.editing.mapper.toModelRange(r.targetRanges[0]):e.document.selection.getFirstRange();const l=e.createSelection(a);if("imageBlock"===KC(e.schema,l)){const t=new bd(n.document),e=s.map(e=>t.createElement("figure",{class:"image"},e));r.content=t.createDocumentFragment(e)}}),this.listenTo(o,"contentInsertion",(t,n)=>{"paste"===n.method&&e.change(t=>{const e=t.createRangeIn(n.content);for(const n of e.getItems())n.is("element","imageBlock")&&i.setImageNaturalSizeAttributes(n)})})}}class yx extends db{focusTracker;keystrokes;_focusables;_focusCycler;children;constructor(t,e=[]){super(t),this.focusTracker=new Wn,this.keystrokes=new Gn,this._focusables=new Dm,this.children=this.createCollection(),this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const n of e)this.children.add(n),this._focusables.add(n),n instanceof cv&&this._focusables.addMany(n.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),wb({view:this});for(const e of this._focusables)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element);const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class kx extends Gh{static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ZC]}dropdownView;_integrations=new Map;constructor(t){super(t),t.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(t.model.document,"change",()=>{this.isImageSelected=n.isImage(e.getSelectedElement())});const i=t=>this._createToolbarComponent(t),o=t=>this._createMenuBarComponent(t);t.ui.componentFactory.add("insertImage",i),t.ui.componentFactory.add("imageInsert",i),t.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:t,observable:e,buttonViewCreator:n,formViewCreator:i,menuBarButtonViewCreator:o,requiresForm:r=!1,override:s=!1}){this._integrations.has(t)&&!s&&At("image-insert-integration-exists",{name:t}),this._integrations.set(t,{observable:e,buttonViewCreator:n,menuBarButtonViewCreator:o,formViewCreator:i,requiresForm:r})}_createToolbarComponent(t){const e=this.editor,n=t.t,i=this._prepareIntegrations();if(!i.length)return null;let o;const r=i[0];if(1==i.length){if(!r.requiresForm)return r.buttonViewCreator(!0);o=r.buttonViewCreator(!0)}else{const e=r.buttonViewCreator(!1);o=new jv(t,e),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",t=>n(t?"Replace image":"Insert image"))}const s=this.dropdownView=$v(t,o),a=i.map(({observable:t})=>"function"==typeof t?t():t);return s.bind("isEnabled").toMany(a,"isEnabled",(...t)=>t.some(t=>t)),s.once("change:isOpen",()=>{const t=i.flatMap(({formViewCreator:t})=>t(1==i.length)),n=new yx(e.locale,t);s.panelView.children.add(n)}),s}_createMenuBarComponent(t){const e=t.t,n=this._prepareIntegrations();if(!n.length)return null;const i=n.flatMap(({menuBarButtonViewCreator:t})=>t(1==n.length)),o=new g_(t),r=new m_(t);o.panelView.children.add(r),o.buttonView.set({icon:Ep,label:e("Image")});for(const s of i){const e=new Iw(t,o);e.children.add(s),r.items.add(e),s.delegate("execute").to(o)}return o}_prepareIntegrations(){const t=this.editor,e=t.config.get("image.insert.integrations"),n=[];if(!e.length)return At("image-insert-integrations-not-specified"),n;for(const i of e)this._integrations.has(i)?n.push(this._integrations.get(i)):["upload","assetManager","url"].includes(i)||At("image-insert-unknown-integration",{item:i});return n.length||At("image-insert-integrations-not-registered"),n}}class Cx extends Gh{static get requires(){return[_x,zy,cx,kx]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class xx extends Gh{static get requires(){return[mx,bx,ZC,wx,Dk]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema;e.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new vx(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,i=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(t,{writer:e})=>e.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(t,{writer:n})=>i.toImageWidget(UC(n),n,e("image widget"))}),n.for("downcast").add(hx(i,"imageInline","src")).add(hx(i,"imageInline","alt")).add(dx(i,"imageInline")),n.for("upcast").elementToElement({view:GC(t,"imageInline"),model:(t,{writer:e})=>e.createElement("imageInline",t.hasAttribute("src")?{src:t.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,i=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(o,r)=>{const s=Array.from(r.content.getChildren());let a;if(!s.every(i.isBlockImageView))return;a=r.targetRanges?t.editing.mapper.toModelRange(r.targetRanges[0]):e.document.selection.getFirstRange();const l=e.createSelection(a);if("imageInline"===KC(e.schema,l)){const t=new bd(n.document),e=s.map(e=>1===e.childCount?(Array.from(e.getAttributes()).forEach(n=>t.setAttribute(...n,i.findViewImgElement(e))),e.getChild(0)):e);r.content=t.createDocumentFragment(e)}}),this.listenTo(o,"contentInsertion",(t,n)=>{"paste"===n.method&&e.change(t=>{const e=t.createRangeIn(n.content);for(const n of e.getItems())n.is("element","imageInline")&&i.setImageNaturalSizeAttributes(n)})})}}class Ex extends Gh{static get requires(){return[xx,zy,cx,kx]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class Sx extends Gh{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[ZC]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null}}class Tx extends Yh{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),n=t.plugins.get("ImageUtils");if(!t.plugins.has(_x))return this.isEnabled=!1,void(this.value=!1);const i=t.model.document.selection,o=i.getSelectedElement();if(!o){const t=e.getCaptionFromModelSelection(i);return this.isEnabled=!!t,void(this.value=!!t)}this.isEnabled=n.isImage(o),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(o):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(t=>{this.value?this._hideImageCaption(t):this._showImageCaption(t,e)})}_showImageCaption(t,e){const n=this.editor.model,i=n.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),r=this.editor.plugins.get("ImageUtils");let s=i.getSelectedElement();const a=o._getSavedCaption(s);r.isInlineImage(s)&&(this.editor.execute("imageTypeBlock"),s=i.getSelectedElement());const l=a||t.createElement("caption");t.append(l,s),e&&t.setSelection(l,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,i=e.plugins.get("ImageCaptionEditing"),o=e.plugins.get("ImageCaptionUtils");let r,s=n.getSelectedElement();s?r=o.getCaptionFromImageModelElement(s):(r=o.getCaptionFromModelSelection(n),s=r.parent),i._saveCaption(s,r),t.setSelection(s,"on"),t.remove(r)}}class Ax extends Gh{static get requires(){return[ZC,Sx]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}_savedCaptionsMap;constructor(t){super(t),this._savedCaptionsMap=new WeakMap}init(){const t=this.editor,e=t.model.schema;e.isRegistered("caption")?e.extend("caption",{allowIn:"imageBlock"}):e.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleImageCaption",new Tx(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils"),i=t.plugins.get("ImageCaptionUtils"),o=t.t;t.conversion.for("upcast").elementToElement({view:t=>i.matchImageCaptionViewElement(t),model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>n.isBlockImage(t.parent)?e.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(t,{writer:i})=>{if(!n.isBlockImage(t.parent))return null;const r=i.createEditableElement("figcaption");i.setCustomProperty("imageCaption",!0,r),r.placeholder=o("Enter image caption"),ro({view:e,element:r,keepOnFocus:!0});const s=t.parent.getAttribute("alt"),a=s?o("Caption for image: %0",[s]):o("Caption for the image");return gy(r,i,{label:a})}})}_setupImageTypeCommandsIntegration(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.plugins.get("ImageCaptionUtils"),i=t.commands.get("imageTypeInline"),o=t.commands.get("imageTypeBlock"),r=t=>{if(!t.return)return;const{oldElement:i,newElement:o}=t.return;
/* istanbul ignore if: paranoid check -- @preserve */if(!i)return;if(e.isBlockImage(i)){const t=n.getCaptionFromImageModelElement(i);if(t)return void this._saveCaption(o,t)}const r=this._getSavedCaption(i);r&&this._saveCaption(o,r)};i&&this.listenTo(i,"execute",r,{priority:"low"}),o&&this.listenTo(o,"execute",r,{priority:"low"})}_getSavedCaption(t){const e=this._savedCaptionsMap.get(t);return e?xa.fromJSON(e):null}_saveCaption(t,e){this._savedCaptionsMap.set(t,e.toJSON())}_registerCaptionReconversion(){const t=this.editor,e=t.model,n=t.plugins.get("ImageUtils"),i=t.plugins.get("ImageCaptionUtils");e.document.on("change:data",()=>{const o=e.document.differ.getChanges();for(const e of o){if("alt"!==e.attributeKey)continue;const o=e.range.start.nodeAfter;if(n.isBlockImage(o)){const e=i.getCaptionFromImageModelElement(o);if(!e)return;t.editing.reconvertItem(e)}}})}}class Px extends Gh{static get requires(){return[Sx]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),i=t.t;t.ui.componentFactory.add("toggleImageCaption",o=>{const r=t.commands.get("toggleImageCaption"),s=new Tb(o);return s.set({icon:bp,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.bind("label").to(r,"value",t=>i(t?"Toggle caption off":"Toggle caption on")),this.listenTo(s,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const i=n.getCaptionFromModelSelection(t.model.document.selection);if(i){const n=t.editing.mapper.toViewElement(i);e.scrollToTheSelection(),e.change(t=>{t.addClass("image__caption_highlighted",n)})}t.editing.view.focus()}),s})}}class Ix extends Gh{static get requires(){return[Ax,Px]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function Rx(t){const e=t.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function Ox(t){return new Promise((e,n)=>{const i=t.getAttribute("src");fetch(i).then(t=>t.blob()).then(t=>{const n=Dx(t,i),o=n.replace("image/",""),r=`image.${o}`,s=new File([t],r,{type:n});e(s)}).catch(t=>t&&"TypeError"===t.name?Vx(i).then(e).catch(n):n(t))})}function Mx(t,e){return!(!t.isInlineImageView(e)||!e.getAttribute("src"))&&(!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g))}function Dx(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function Vx(t){return Nx(t).then(e=>{const n=Dx(e,t),i=n.replace("image/",""),o=`image.${i}`;return new File([e],o,{type:n})})}function Nx(t){return new Promise((e,n)=>{const i=Q.document.createElement("img");i.addEventListener("load",()=>{const t=Q.document.createElement("canvas");t.width=i.width,t.height=i.height;const o=t.getContext("2d");o.drawImage(i,0,0),t.toBlob(t=>t?e(t):n())}),i.addEventListener("error",()=>n()),i.src=t})}class Lx extends Gh{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),r=Rx(o),s=new t(e.locale),a=n.t;return s.set({acceptedType:o.map(t=>`image/${t}`).join(","),allowMultipleFiles:!0,label:a("Upload from computer"),icon:Sp}),s.bind("isEnabled").to(i),s.on("done",(t,n)=>{const i=Array.from(n).filter(t=>r.test(t.type));i.length&&(e.execute("uploadImage",{file:i}),e.editing.view.focus())}),s}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),i=this._createButton(rv);return i.tooltip=!0,i.bind("label").to(e,"isImageSelected",n,"isAccessAllowed",(e,n)=>t(n?e?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),i}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(rv);return n.withText=!0,n.bind("label").to(e,"isImageSelected",e=>t(e?"Replace from computer":"Upload from computer")),n.on("execute",()=>{e.dropdownView.isOpen=!1}),n}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createButton(w_);switch(n.withText=!0,t){case"standalone":n.label=e("Image from computer");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("From computer");break}return n}}class Bx extends Gh{static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}placeholder;constructor(t){super(t),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}uploadStatusChange=(t,e,n)=>{const i=this.editor,o=e.item,r=o.getAttribute("uploadId");if(!n.consumable.consume(e.item,t.name))return;const s=i.plugins.get("ImageUtils"),a=i.plugins.get(yf),l=r?e.attributeNewValue:null,c=this.placeholder,u=i.editing.mapper.toViewElement(o),d=n.writer;if("reading"==l)return Fx(u,d),void Hx(s,c,u,d);if("uploading"==l){const t=a.loaders.get(r);return Fx(u,d),void(t?(Wx(u,d),jx(u,d,t,i.editing.view),Xx(s,u,d,t)):Hx(s,c,u,d))}"complete"==l&&a.loaders.get(r)&&Ux(u,d,i.editing.view),$x(u,d),Wx(u,d),zx(u,d)}}function Fx(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t)}function zx(t,e){e.removeClass("ck-appear",t)}function Hx(t,e,n,i){n.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",n);const o=t.findViewImgElement(n);o.getAttribute("src")!==e&&i.setAttribute("src",e,o),Kx(n,"placeholder")||i.insert(i.createPositionAfter(o),Gx(i))}function Wx(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),Yx(t,e,"placeholder")}function jx(t,e,n,i){const o=qx(e);e.insert(e.createPositionAt(t,"end"),o),n.on("change:uploadedPercent",(t,e,n)=>{i.change(t=>{t.setStyle("width",n+"%",o)})})}function $x(t,e){Yx(t,e,"progressBar")}function Ux(t,e,n){const i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),i),setTimeout(()=>{n.change(t=>t.remove(t.createRangeOn(i)))},3e3)}function qx(t){const e=t.createUIElement("div",{class:"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e}function Gx(t){const e=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e}function Kx(t,e){for(const n of t.getChildren())if(n.getCustomProperty(e))return n}function Yx(t,e,n){const i=Kx(t,n);i&&e.remove(e.createRangeOn(i))}function Xx(t,e,n,i){if(i.data){const o=t.findViewImgElement(e);n.setAttribute("src",i.data,o)}}class Jx extends Yh{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=Mn(t.file),n=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((t,e)=>{const r=n.getSelectedElement();if(e&&r&&i.isImage(r)){const e=this.editor.model.createPositionAfter(r);this._uploadImage(t,o,e)}else this._uploadImage(t,o)})}_uploadImage(t,e,n){const i=this.editor,o=i.plugins.get(yf),r=o.createLoader(t),s=i.plugins.get("ImageUtils");r&&s.insertImage({...e,uploadId:r.id},n)}}class Zx extends Gh{static get requires(){return[yf,r_,Dk,ZC]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}_uploadImageElements;_uploadedImages=new Map;constructor(t){super(t),t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const t=this.editor,e=t.model.document,n=t.conversion,i=t.plugins.get(yf),o=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline"),s=Rx(t.config.get("image.upload.types")),a=new Jx(t);t.commands.add("uploadImage",a),t.commands.add("imageUpload",a),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(t=>t.on("element:img",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{attributes:["data-ck-upload-id"]}))return;const o=e.viewItem.getAttribute("data-ck-upload-id");if(!o)return;const[r]=Array.from(e.modelRange.getItems({shallow:!0})),s=i.loaders.get(o);r&&(n.writer.setAttribute("uploadId",o,r),n.consumable.consume(e.viewItem,{attributes:["data-ck-upload-id"]}),s&&s.data&&n.writer.setAttribute("uploadStatus",s.status,r))},{priority:"low"})),this.listenTo(t.editing.view.document,"clipboardInput",(e,n)=>{if(Qx(n.dataTransfer))return;const i=Array.from(n.dataTransfer.files).filter(t=>!!t&&s.test(t.type));if(!i.length)return;e.stop(),t.model.change(e=>{n.targetRanges&&e.setSelection(n.targetRanges.map(e=>t.editing.mapper.toModelRange(e))),t.execute("uploadImage",{file:i})});const o=t.commands.get("uploadImage");if(!o.isAccessAllowed){const e=t.plugins.get("Notification"),n=t.locale.t;e.showWarning(n("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(r,"inputTransformation",(e,n)=>{const r=Array.from(t.editing.view.createRangeIn(n.content)).map(t=>t.item).filter(t=>Mx(o,t)&&!t.getAttribute("uploadProcessed")).map(t=>({promise:Ox(t),imageElement:t}));if(!r.length)return;const s=new bd(t.editing.view.document);for(const t of r){s.setAttribute("uploadProcessed",!0,t.imageElement);const e=i.createLoader(t.promise);e&&(s.setAttribute("src","",t.imageElement),s.setAttribute("uploadId",e.id,t.imageElement))}}),t.editing.view.document.on("dragover",(t,e)=>{e.preventDefault()}),e.on("change",()=>{const n=e.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),o=new Set;for(const e of n)if("insert"==e.type&&"$text"!=e.name){const n=e.position.nodeAfter,r="$graveyard"==e.position.root.rootName;for(const e of tE(t,n)){const n=e.getAttribute("uploadId"),s=e.getAttribute("uploadStatus");if(!n||"complete"==s)continue;const a=i.loaders.get(n);if(a)if(r){if(!o.has(n)){const t=Array.from(this._uploadImageElements.get(n)).every(t=>"$graveyard"==t.root.rootName);t&&a.abort()}}else o.add(n),this._uploadImageElements.has(n)?this._uploadImageElements.get(n).add(e):this._uploadImageElements.set(n,new Set([e])),"idle"==a.status&&this._readAndUpload(a);else!r&&this._uploadedImages.has(n)&&t.model.enqueueChange({isUndoable:!1},t=>{t.setAttribute("uploadStatus","complete",e),this.fire("uploadComplete",{data:this._uploadedImages.get(n),imageElement:e})})}}}),this.on("uploadComplete",(t,{imageElement:e,data:n})=>{const i=n.urls?n.urls:n;this.editor.model.change(t=>{t.setAttribute("src",i.default,e),this._parseAndSetSrcsetAttributeOnImage(i,e,t),o.setImageNaturalSizeAttributes(e)})},{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(t){const e=this.editor,n=e.model,i=e.locale.t,o=e.plugins.get(yf),r=e.plugins.get(r_),s=e.plugins.get("ImageUtils"),a=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},e=>{const n=a.get(t.id);for(const t of n)e.setAttribute("uploadStatus","reading",t)}),t.read().then(()=>{const o=t.upload();e.ui&&e.ui.ariaLiveAnnouncer.announce(i("Uploading image"));for(const i of a.get(t.id)){
/* istanbul ignore next -- @preserve */if(nt.isSafari){const t=e.editing.mapper.toViewElement(i),n=s.findViewImgElement(t);e.editing.view.once("render",()=>{if(!n.parent)return;const t=e.editing.view.domConverter.mapViewToDom(n.parent);if(!t)return;const i=t.style.display;t.style.display="none",t._ckHack=t.offsetHeight,t.style.display=i})}n.enqueueChange({isUndoable:!1},t=>{t.setAttribute("uploadStatus","uploading",i)})}return o}).then(o=>{n.enqueueChange({isUndoable:!1},n=>{for(const e of a.get(t.id))n.setAttribute("uploadStatus","complete",e),this.fire("uploadComplete",{data:o,imageElement:e});e.ui&&e.ui.ariaLiveAnnouncer.announce(i("Image upload complete")),this._uploadedImages.set(t.id,o)}),l()}).catch(o=>{if(e.ui&&e.ui.ariaLiveAnnouncer.announce(i("Error during image upload")),"error"!==t.status&&"aborted"!==t.status)throw o;"error"==t.status&&o&&r.showWarning(o,{title:i("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},e=>{for(const n of a.get(t.id))"$graveyard"!==n.root.rootName&&e.remove(n)}),l()});function l(){n.enqueueChange({isUndoable:!1},e=>{for(const n of a.get(t.id))e.removeAttribute("uploadId",n),e.removeAttribute("uploadStatus",n);a.delete(t.id)}),o.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,e,n){let i=0;const o=Object.keys(t).filter(t=>{const e=parseInt(t,10);if(!isNaN(e))return i=Math.max(i,e),!0}).map(e=>`${t[e]} ${e}w`).join(", ");if(""!=o){const t={srcset:o};e.hasAttribute("width")||e.hasAttribute("height")||(t.width=i),n.setAttributes(t,e)}}_registerConverters(t){const{conversion:e,plugins:n}=this.editor,i=n.get(yf),o=n.get(ZC);e.for("dataDowncast").add(e=>{e.on(`attribute:uploadId:${t}`,(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const r=i.loaders.get(e.attributeNewValue);if(!r||!r.data)return null;const s=n.mapper.toViewElement(e.item),a=o.findViewImgElement(s);a&&(n.consumable.consume(e.item,t.name),n.writer.setAttribute("data-ck-upload-id",r.id,a))})})}}function Qx(t){return Array.from(t.types).includes("text/html")&&""!==t.getData("text/html")}function tE(t,e){const n=t.plugins.get("ImageUtils");return Array.from(t.model.createRangeOn(e)).filter(t=>n.isImage(t.item)).map(t=>t.item)}class eE extends Gh{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[Zx,Lx,Bx]}}class nE extends db{urlInputView;keystrokes;constructor(t){super(t),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new Gn,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),wb({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const t=this.locale,e=t.t,n=new yv(t,sw);return n.bind("label").to(this,"isImageSelected",t=>e(t?"Update image URL":"Insert image via URL")),n.bind("isEnabled").to(this),n.fieldView.inputMode="url",n.fieldView.placeholder="https://example.com/image.png",n.fieldView.bind("value").to(this,"imageURLInputValue",t=>t||""),n.fieldView.on("input",()=>{this.imageURLInputValue=n.fieldView.element.value.trim()}),n}focus(){this.urlInputView.focus()}}class iE extends Gh{_imageInsertUI;_formView;static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[kx,Fb]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createInsertUrlButton(t){const e=new t(this.editor.locale);return e.icon=Tp,e.on("execute",()=>{this._showModal()}),e}_createToolbarButton(){const t=this.editor.locale.t,e=this._createInsertUrlButton(Tb);return e.tooltip=!0,e.bind("label").to(this._imageInsertUI,"isImageSelected",e=>t(e?"Update image URL":"Insert image via URL")),e}_createDropdownButton(){const t=this.editor.locale.t,e=this._createInsertUrlButton(Tb);return e.withText=!0,e.bind("label").to(this._imageInsertUI,"isImageSelected",e=>t(e?"Update image URL":"Insert via URL")),e}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createInsertUrlButton(Wb);switch(n.withText=!0,t){case"standalone":n.label=e("Image via URL");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("Via URL");break}return n}_createInsertUrlView(){const t=this.editor,e=t.locale,n=t.commands.get("replaceImageSource"),i=t.commands.get("insertImage"),o=new nE(e);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([i,n],"isEnabled",(...t)=>t.some(t=>t)),o}_showModal(){const t=this.editor,e=t.locale,n=e.t,i=t.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=t.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",i.show({id:"insertImageViaUrl",title:n("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:n("Cancel"),withText:!0,onExecute:()=>i.hide()},{label:this._imageInsertUI.isImageSelected?n("Save"):n("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){const t=this.editor.commands.get("replaceImageSource");t.isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class oE extends Gh{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[iE,kx]}}class rE extends Gh{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[eE,oE,kx]}}class sE extends Yh{refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=e.getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!n,n&&n.hasAttribute("resizedWidth")?this.value={width:n.getAttribute("resizedWidth"),height:null}:this.value=null}execute(t){const e=this.editor,n=e.model,i=e.plugins.get("ImageUtils"),o=i.getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},o&&n.change(e=>{e.setAttribute("resizedWidth",t.width,o),e.removeAttribute("resizedHeight",o),i.setImageNaturalSizeAttributes(o)})}}class aE extends Gh{static get requires(){return[ZC]}static get pluginName(){return"ImageResizeEditing"}static get licenseFeatureCode(){return"IR"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new sE(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),t.setAttributeProperties("resizedWidth",{isFormatting:!0}),t.setAttributeProperties("resizedHeight",{isFormatting:!0})),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]}),t.setAttributeProperties("resizedWidth",{isFormatting:!0}),t.setAttributeProperties("resizedHeight",{isFormatting:!0}))}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(e=>e.on(`attribute:resizedWidth:${t}`,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const i=n.writer,o=n.mapper.toViewElement(e.item);null!==e.attributeNewValue?(i.setStyle("width",e.attributeNewValue,o),i.addClass("image_resized",o)):(i.removeStyle("width",o),i.removeClass("image_resized",o))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:t=>({key:"style",value:{height:t}})}),e.conversion.for("editingDowncast").add(e=>e.on(`attribute:resizedHeight:${t}`,(e,i,o)=>{if(!o.consumable.consume(i.item,e.name))return;const r=o.writer,s=o.mapper.toViewElement(i.item),a="imageInline"===t?n.findViewImgElement(s):s;null!==i.attributeNewValue?r.setStyle("height",i.attributeNewValue,a):r.removeStyle("height",a)})),e.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===t?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:t=>XC(t)?null:t.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===t?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:t=>XC(t)?null:t.getStyle("height")}}),e.conversion.for("upcast").add(e=>{e.on("element:"+("imageBlock"===t?"figure":"img"),(t,e,n)=>{n.consumable.consume(e.viewItem,{classes:["image_resized"]})})})}}const lE=(()=>({small:tg,medium:Qp,large:Zp,custom:Xp,original:Jp}))();class cE extends Gh{static get requires(){return[aE]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}_resizeUnit;constructor(t){super(t),this._resizeUnit=t.config.get("image.resizeUnit")}init(){const t=this.editor,e=t.config.get("image.resizeOptions"),n=t.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const i of e)this._registerImageResizeButton(i);this._registerImageResizeDropdown(e)}_registerImageResizeButton(t){const e=this.editor,{name:n,value:i,icon:o}=t;e.ui.componentFactory.add(n,n=>{const r=new Tb(n),s=e.commands.get("resizeImage"),a=this._getOptionLabelValue(t,!0);if(!lE[o])throw new Tt("imageresizebuttons-missing-icon",e,t);if(r.set({label:a,icon:lE[o],tooltip:a,isToggleable:!0}),r.bind("isEnabled").to(this),e.plugins.has("ImageCustomResizeUI")&&uE(t)){const t=e.plugins.get("ImageCustomResizeUI");this.listenTo(r,"execute",()=>{t._showForm(this._resizeUnit)})}else{const t=i?i+this._resizeUnit:null;r.bind("isOn").to(s,"value",s,"isEnabled",dE(t)),this.listenTo(r,"execute",()=>{e.execute("resizeImage",{width:t})})}return r})}_registerImageResizeDropdown(t){const e=this.editor,n=e.t,i=t.find(t=>!t.value),o=o=>{const r=e.commands.get("resizeImage"),s=$v(o,Pv),a=s.buttonView,l=n("Resize image");return a.set({tooltip:l,commandValue:i.value,icon:lE.medium,isToggleable:!0,label:this._getOptionLabelValue(i),withText:!0,class:"ck-resize-image-button",ariaLabel:l,ariaLabelledBy:void 0}),a.bind("label").to(r,"value",t=>t&&t.width?t.width:this._getOptionLabelValue(i)),s.bind("isEnabled").to(this),Gv(s,()=>this._getResizeDropdownListItemDefinitions(t,r),{ariaLabel:n("Image resize list"),role:"menu"}),this.listenTo(s,"execute",t=>{"onClick"in t.source?t.source.onClick():(e.execute(t.source.commandName,{width:t.source.commandValue}),e.editing.view.focus())}),s};e.ui.componentFactory.add("resizeImage",o),e.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(t,e=!1){const n=this.editor.t;return t.label?t.label:e?uE(t)?n("Custom image size"):t.value?n("Resize image to %0",t.value+this._resizeUnit):n("Resize image to the original size"):uE(t)?n("Custom"):t.value?t.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(t,e){const{editor:n}=this,i=new zn,o=t.map(t=>uE(t)?{...t,valueWithUnits:"custom"}:t.value?{...t,valueWithUnits:`${t.value}${this._resizeUnit}`}:{...t,valueWithUnits:null});for(const r of o){let t=null;if(n.plugins.has("ImageCustomResizeUI")&&uE(r)){const i=n.plugins.get("ImageCustomResizeUI");t={type:"button",model:new s_({label:this._getOptionLabelValue(r),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{i._showForm(this._resizeUnit)}})};const s=Object.values(o).map(t=>t.valueWithUnits);t.model.bind("isOn").to(e,"value",e,"isEnabled",hE(s))}else t={type:"button",model:new s_({commandName:"resizeImage",commandValue:r.valueWithUnits,label:this._getOptionLabelValue(r),role:"menuitemradio",withText:!0,icon:null})},t.model.bind("isOn").to(e,"value",e,"isEnabled",dE(r.valueWithUnits));t.model.bind("isEnabled").to(e,"isEnabled"),i.add(t)}return i}}function uE(t){return"custom"===t.value}function dE(t){return(e,n)=>{const i=e;return!(void 0===i||!n)&&(null===t&&i===t||null!==i&&i.width===t)}}function hE(t){return(e,n)=>!t.some(t=>dE(t)(e,n))}const fE="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",pE="image_resized";class gE extends Gh{static get requires(){return[lk,ZC]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils");e.addObserver(fx),this.listenTo(e.document,"imageLoaded",(i,o)=>{if(!o.target.matches(fE))return;const r=t.editing.view.domConverter,s=r.domToView(o.target),a=n.getImageWidgetFromImageView(s);let l=this.editor.plugins.get(lk).getResizerByViewElement(a);if(l)return void l.redraw();const c=t.editing.mapper,u=c.toModelElement(a);l=t.plugins.get(lk).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:u,viewElement:a,editor:t,getHandleHost(t){return t.querySelector("img")},getResizeHost(){return r.mapViewToDom(c.toViewElement(u))},isCentered(){const t=u.getAttribute("imageStyle");return"alignCenter"==t},onCommit(n){e.change(t=>{t.removeClass(pE,a)}),t.execute("resizeImage",{width:n})}}),l.on("updateSize",()=>{a.hasClass(pE)||e.change(t=>{t.addClass(pE,a)});const t="imageInline"===u.name?s:a;t.getStyle("height")&&e.change(e=>{e.removeStyle("height",t)})}),l.bind("isEnabled").to(this)})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mE(t){if(!t)return null;const[,e,n]=t.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(e);return Number.isNaN(i)?null:{value:i,unit:n}}function bE(t,e,n){return"px"===n?{value:e.value,unit:"px"}:{value:e.value/t*100,unit:"%"}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function vE(t){const{editing:e}=t,n=t.plugins.get("ImageUtils"),i=n.getClosestSelectedImageElement(t.model.document.selection);if(!i)return null;const o=e.mapper.toViewElement(i),r=e.view.domConverter.mapViewToDom(o);return{model:i,view:o,dom:r}}function wE(t,e){const n=vE(t);if(!n)return null;const i=mE(n.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===e)return i;const o=wy(n.dom),r={value:new Le(n.dom).width};return bE(o,r,e)}class _E extends db{focusTracker;keystrokes;unit;backButtonView;saveButtonView;labeledInput;children;_focusables;_focusCycler;_validators;constructor(t,e,n){super(t),this.focusTracker=new Wn,this.keystrokes=new Gn,this.unit=e,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new o_(t,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Dm,this._validators=n,this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()}),this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),wb({view:this});const t=[this.backButtonView,this.labeledInput,this.saveButtonView];t.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:sg,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createSaveButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({label:t("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),e}_createHeaderView(){const t=this.locale.t,e=new Pb(this.locale,{label:t("Image Resize")});return e.children.add(this.backButtonView,0),e}_createLabeledInputView(){const t=this.locale.t,e=new yv(this.locale,aw);return e.label=t("Resize image (in %0)",this.unit),e.class="ck-labeled-field-view_full-width",e.fieldView.set({step:.1}),e}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.labeledInput.errorText=e,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:t}=this.labeledInput.fieldView;return t?t.value:null}get parsedSize(){const{rawSize:t}=this;if(null===t)return null;const e=Number.parseFloat(t);return Number.isNaN(e)?null:e}get sizeWithUnits(){const{parsedSize:t,unit:e}=this;return null===t?null:`${t}${e}`}}function yE(t,e){const n=vE(t);if(!n)return null;const i=wy(n.dom),o=mE(window.getComputedStyle(n.dom).minWidth)||{value:1},r=Math.max(.1,bE(i,o,e).value),s="px"===e?i:100;return{unit:e,lower:r,upper:s}}class kE extends Gh{_balloon;_form;static get requires(){return[l_]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(t){const e=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(bb(_E))(e.locale,t,CE(e)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(e.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{e.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),mb({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(t){if(this._isVisible)return;this._form||this._createForm(t);const e=this.editor,n=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:ax(e)});const i=wE(e,t),o=i?i.value.toFixed(1):"",r=yE(e,t);n.fieldView.value=n.fieldView.element.value=o,r&&Object.assign(n.fieldView,{min:r.lower.toFixed(1),max:Math.ceil(r.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function CE(t){const e=t.t;return[t=>""===t.rawSize.trim()?e("The value must not be empty."):null===t.parsedSize?e("The value should be a plain number."):void 0]}class xE extends Gh{static get requires(){return[aE,gE,kE,cE]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class EE extends Yh{_defaultStyles;_styles;constructor(t,e){super(t),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(e.map(t=>{if(t.isDefault)for(const e of t.modelElements)this._defaultStyles[e]=t.name;return[t.name,t]}))}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=e.getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled?n.hasAttribute("imageStyle")?this.value=n.getAttribute("imageStyle"):this.value=this._defaultStyles[n.name]:this.value=!1}execute(t={}){const e=this.editor,n=e.model,i=e.plugins.get("ImageUtils");n.change(e=>{const o=t.value,{setImageSizes:r=!0}=t;let s=i.getClosestSelectedImageElement(n.document.selection);o&&this.shouldConvertImageType(o,s)&&(this.editor.execute(i.isBlockImage(s)?"imageTypeInline":"imageTypeBlock",{setImageSizes:r}),s=i.getClosestSelectedImageElement(n.document.selection)),!o||this._styles.get(o).isDefault?e.removeAttribute("imageStyle",s):e.setAttribute("imageStyle",o,s),r&&i.setImageNaturalSizeAttributes(s)})}shouldConvertImageType(t,e){const n=this._styles.get(t).modelElements;return!n.includes(e.name)}}const SE={get inline(){return{name:"inline",title:"In line",icon:Gp,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:Up,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:Kp,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:jp,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:qp,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:Yp,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:jp,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:qp,modelElements:["imageBlock"],className:"image-style-side"}}},TE=(()=>({full:$p,left:Kp,right:Yp,center:jp,inlineLeft:Up,inlineRight:qp,inline:Gp}))(),AE=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function PE(t){const e=t.configuredStyles.options||[],n=e.map(t=>OE(t)).filter(e=>ME(e,t));return n}function IE(t,e){return t&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:t?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function RE(t){return t.has("ImageBlockEditing")&&t.has("ImageInlineEditing")?[...AE]:[]}function OE(t){return t="string"===typeof t?SE[t]?{...SE[t]}:{name:t}:DE(SE[t.name],t),"string"===typeof t.icon&&(t.icon=TE[t.icon]||t.icon),t}function ME(t,{isBlockPluginLoaded:e,isInlinePluginLoaded:n}){const{modelElements:i,name:o}=t;if(!(i&&i.length&&o))return VE({style:t}),!1;{const o=[e?"imageBlock":null,n?"imageInline":null];if(!i.some(t=>o.includes(t)))return At("image-style-missing-dependency",{style:t,missingPlugins:i.map(t=>"imageBlock"===t?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function DE(t,e){const n={...e};for(const i in t)Object.prototype.hasOwnProperty.call(e,i)||(n[i]=t[i]);return n}function VE(t){At("image-style-configuration-definition-invalid",t)}const NE={normalizeStyles:PE,getDefaultStylesConfiguration:IE,getDefaultDropdownDefinitions:RE,warnInvalidStyle:VE};function LE(t){return(e,n,i)=>{if(!i.consumable.consume(n.item,e.name))return;const o=FE(n.attributeNewValue,t),r=FE(n.attributeOldValue,t),s=i.mapper.toViewElement(n.item),a=i.writer;r&&a.removeClass(r.className,s),o&&a.addClass(o.className,s)}}function BE(t){const e={imageInline:t.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:t.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,n,i)=>{if(!n.modelRange)return;const o=n.viewItem,r=Hn(n.modelRange.getItems());if(r&&i.schema.checkAttribute(r,"imageStyle"))for(const s of e[r.name])i.consumable.consume(o,{classes:s.className})&&i.writer.setAttribute("imageStyle",s.name,r)}}function FE(t,e){for(const n of e)if(n.name===t)return n}class zE extends Gh{static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ZC]}normalizedStyles;init(){const t=this.editor,e=t.plugins.has("ImageBlockEditing"),n=t.plugins.has("ImageInlineEditing");t.config.define("image.styles",NE.getDefaultStylesConfiguration(e,n)),this.normalizedStyles=NE.normalizeStyles({configuredStyles:t.config.get("image.styles"),isBlockPluginLoaded:e,isInlinePluginLoaded:n}),this._setupConversion(e,n),this._setupPostFixer(),t.commands.add("imageStyle",new EE(t,this.normalizedStyles))}_setupConversion(t,e){const n=this.editor,i=n.model.schema,o=LE(this.normalizedStyles),r=BE(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",o),n.data.downcastDispatcher.on("attribute:imageStyle",o),t&&(i.extend("imageBlock",{allowAttributes:"imageStyle"}),i.setAttributeProperties("imageStyle",{isFormatting:!0}),n.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),e&&(i.extend("imageInline",{allowAttributes:"imageStyle"}),i.setAttributeProperties("imageStyle",{isFormatting:!0}),n.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const t=this.editor,e=t.model.document,n=t.plugins.get(ZC),i=new Map(this.normalizedStyles.map(t=>[t.name,t]));e.registerPostFixer(t=>{let o=!1;for(const r of e.differ.getChanges())if("insert"==r.type||"attribute"==r.type&&"imageStyle"==r.attributeKey){let e="insert"==r.type?r.position.nodeAfter:r.range.start.nodeAfter;if(e&&e.is("element","paragraph")&&e.childCount>0&&(e=e.getChild(0)),!n.isImage(e))continue;const s=e.getAttribute("imageStyle");if(!s)continue;const a=i.get(s);a&&a.modelElements.includes(e.name)||(t.removeAttribute("imageStyle",e),o=!0)}return o})}}class HE extends Gh{static get requires(){return[zE]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=t.get("ImageStyleEditing"),o=WE(n.normalizedStyles,this.localizedDefaultStylesTitles);for(const i of o)this._createButton(i);const r=WE([...e.filter(i),...NE.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const i of r)this._createDropdown(i,o)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,i=>{let o;const{defaultItem:r,items:s,title:a}=t,l=s.filter(t=>e.find(({name:e})=>jE(e)===t)).map(t=>{const e=n.create(t);return t===r&&(o=e),e});s.length!==l.length&&NE.warnInvalidStyle({dropdown:t});const c=$v(i,jv),u=c.buttonView,d=u.arrowView;return Uv(c,l,{enableActiveItemFocusOnDropdownOpen:!0}),u.set({label:$E(a,o.label),class:null,tooltip:!0}),d.unbind("label"),d.set({label:a}),u.bind("icon").toMany(l,"isOn",(...t)=>{const e=t.findIndex($C);return e<0?o.icon:l[e].icon}),u.bind("label").toMany(l,"isOn",(...t)=>{const e=t.findIndex($C);return $E(a,e<0?o.label:l[e].label)}),u.bind("isOn").toMany(l,"isOn",(...t)=>t.some($C)),u.bind("class").toMany(l,"isOn",(...t)=>t.some($C)?"ck-splitbutton_flatten":void 0),u.on("execute",()=>{l.some(({isOn:t})=>t)?c.isOpen=!c.isOpen:o.fire("execute")}),c.bind("isEnabled").toMany(l,"isEnabled",(...t)=>t.some($C)),this.listenTo(c,"execute",()=>{this.editor.editing.view.focus()}),c})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(jE(e),n=>{const i=this.editor.commands.get("imageStyle"),o=new Tb(n);return o.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",t=>t===e),o.on("execute",this._executeCommand.bind(this,e)),o})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function WE(t,e){for(const n of t)e[n.title]&&(n.title=e[n.title]);return t}function jE(t){return`imageStyle:${t}`}function $E(t,e){return(t?t+": ":"")+e}class UE extends Gh{static get requires(){return[zE,HE]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class qE extends Gh{static get requires(){return[Ky,ZC]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Ky),i=t.plugins.get("ImageUtils");n.register("image",{ariaLabel:e("Image toolbar"),items:GE(t.config.get("image.toolbar")||[]),getRelatedElement:t=>i.getClosestSelectedImageWidget(t)})}}function GE(t){return t.map(t=>i(t)?t.name:t)}function KE(t){return t.substring(0,1).toUpperCase()+t.substring(1)}function YE(t){return KE(Cf(t))}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class XE{_definitions=new Set;get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(t=>this._definitions.add(t)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(t,e,n)=>{if(!n.consumable.test(e.item,"attribute:linkHref"))return;if(!e.item.is("selection")&&!n.schema.isInline(e.item))return;const i=n.writer,o=i.document.selection;for(const r of this._definitions){const t=i.createAttributeElement("a",r.attributes,{priority:5});r.classes&&i.addClass(r.classes,t);for(const e in r.styles)i.setStyle(e,r.styles[e],t);i.setCustomProperty("link",!0,t),r.callback(e.attributeNewValue)?e.item.is("selection")?i.wrap(o.getFirstRange(),t):i.wrap(n.mapper.toViewRange(e.range),t):i.unwrap(n.mapper.toViewRange(e.range),t)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(t,e,{writer:n,mapper:i})=>{const o=i.toViewElement(e.item),r=Array.from(o.getChildren()).find(t=>t.is("element","a"));if(r)for(const s of this._definitions){const t=Yn(s.attributes);if(s.callback(e.attributeNewValue)){for(const[e,i]of t)"class"===e?n.addClass(i,r):n.setAttribute(e,i,r);s.classes&&n.addClass(s.classes,r);for(const t in s.styles)n.setStyle(t,s.styles[t],r)}else{for(const[e,i]of t)"class"===e?n.removeClass(i,r):n.removeAttribute(e,r);s.classes&&n.removeClass(s.classes,r);for(const t in s.styles)n.removeStyle(t,r)}}})}}}const JE=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ZE="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",QE=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,tS=/^((\w+:(\/{2,})?)|(\W))/i,eS=["https?","ftps?","mailto"],nS="Ctrl+K";function iS(t){return t.is("attributeElement")&&!!t.getCustomProperty("link")}function oS(t,{writer:e}){const n=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,n),n}function rS(t,e=eS){const n=String(t),i=e.join("|"),o=new RegExp(`${ZE.replace("<protocols>",i)}`,"i");return sS(n,o)?n:"#"}function sS(t,e){const n=t.replace(JE,"");return!!n.match(e)}function aS(t,e){const n={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")};return e.forEach(t=>("label"in t&&n[t.label]&&(t.label=n[t.label]),t)),e}function lS(t){const e=[];if(t)for(const[n,i]of Object.entries(t)){const t=Object.assign({},i,{id:`link${YE(n)}`});e.push(t)}return e}function cS(t,e){return!!t&&e.checkAttribute(t.name,"linkHref")}function uS(t){return QE.test(t)}function dS(t,e){const n=uS(t)?"mailto:":e,i=!!n&&!hS(t);return t&&i?n+t:t}function hS(t){return tS.test(t)}function fS(t){window.open(t,"_blank","noopener")}function pS(t){let e="";for(const n of t.getItems()){if(!n.is("$text")&&!n.is("$textProxy"))return;e+=n.data}return e}class gS extends Yh{manualDecorators=new zn;automaticDecorators=new XE;restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement()||Hn(e.getSelectedBlocks());cS(n,t.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(n,"linkHref")):(this.value=e.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref"));for(const i of this.manualDecorators)i.value=this._getDecoratorStateFromModel(i.id)}execute(t,e={},n){const i=this.editor.model,o=i.document.selection,r=[],s=[];for(const a in e)e[a]?r.push(a):s.push(a);i.change(e=>{const a=n=>{e.setAttribute("linkHref",t,n),r.forEach(t=>e.setAttribute(t,!0,n)),s.forEach(t=>e.removeAttribute(t,n))},l=(o,r)=>{const s=pS(o);if(!s)return o;let l=n;if(l||(l=r&&r==s?t:s),l!=s){const t=e.createDocumentFragment();for(const i of o.getItems()){const n=i;e.append(e.createText(n.data,n.getAttributes()),t)}const n=e.createRangeIn(t),r=mS(s,l);let c=0;for(const{offset:o,actual:s,expected:l}of r){const t=o+c,r=e.createRange(n.start.getShiftedBy(t),n.start.getShiftedBy(t+s.length)),u=bS(r,n),d=u.getAttributes(),h=Array.from(d).filter(([t])=>i.schema.getAttributeProperties(t).isFormatting),f=e.createText(l,h);a(f),e.remove(r),e.insert(f,r.start),c+=l.length}return i.insertContent(t,o),e.createRange(o.start,o.start.getShiftedBy(l.length))}},c=t=>{const{plugins:n}=this.editor;if(e.setSelection(t.end),n.has("TwoStepCaretMovement"))n.get("TwoStepCaretMovement")._handleForwardMovement();else for(const i of["linkHref",...r,...s])e.removeSelectionAttribute(i)};if(o.isCollapsed){const s=o.getFirstPosition();if(o.hasAttribute("linkHref")){const t=o.getAttribute("linkHref"),e=ip(s,"linkHref",t,i),n=l(e,t);a(n||e),n&&c(n)}else if(""!==t){const a=Yn(o.getAttributes());a.set("linkHref",t),r.forEach(t=>{a.set(t,!0)});const l=i.insertContent(e.createText(n||t,a),s);c(l)}}else{const t=Array.from(o.getRanges()),n=i.schema.getValidRanges(t,"linkHref"),r=[];for(const a of o.getSelectedBlocks())i.schema.checkAttribute(a,"linkHref")&&r.push(e.createRangeOn(a));const s=r.slice();for(const e of n)this._isRangeToUpdate(e,r)&&s.push(e);const c=t.map(t=>({start:nu.fromPosition(t.start,"toPrevious"),end:nu.fromPosition(t.end,"toNext")}));for(let e of s){const t=(e.start.textNode||e.start.nodeAfter).getAttribute("linkHref");e=l(e,t)||e,a(e)}e.setSelection(c.map(t=>{const e=t.start.toPosition(),n=t.end.toPosition();return t.start.detach(),t.end.detach(),i.createRange(e,n)}))}})}_getDecoratorStateFromModel(t){const e=this.editor.model,n=e.document.selection,i=n.getSelectedElement();return cS(i,e.schema)?i.getAttribute(t):n.getAttribute(t)}_isRangeToUpdate(t,e){for(const n of e)if(n.containsRange(t))return!1;return!0}}function mS(t,e){const n=wt(t,e),i={equal:0,insert:0,delete:0},o=[];let r="",s="";for(const a of[...n,null])"insert"==a?s+=e[i.equal+i.insert]:"delete"==a?r+=t[i.equal+i.delete]:(r.length||s.length)&&(o.push({offset:i.equal,actual:r,expected:s}),r="",s=""),a&&i[a]++;return o}function bS(t,e){if(!t.isCollapsed)return Hn(t.getItems());const n=t.start;return n.textNode?n.textNode:!n.nodeBefore||n.isEqual(e.start)?n.nodeAfter:n.nodeBefore}class vS extends Yh{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();cS(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,i=t.commands.get("link");e.change(t=>{const o=n.isCollapsed?[ip(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const e of o)if(t.removeAttribute("linkHref",e),i)for(const n of i.manualDecorators)t.removeAttribute(n.id,e)})}}class wS extends(ie()){id;defaultValue;label;attributes;classes;styles;constructor({id:t,label:e,attributes:n,classes:i,styles:o,defaultValue:r}){super(),this.id=t,this.set("value",void 0),this.defaultValue=r,this.label=e,this.attributes=n,this.classes=i,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const _S="ck-link_selected",yS="automatic",kS="manual",CS=/^(https?:)?\/\//;class xS extends Gh{_linkOpeners=[];static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Yf,Pf,Dk]}constructor(t){super(t),t.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}init(){const t=this.editor,e=this.editor.config.get("link.allowedProtocols");t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:oS}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(t,n)=>oS(rS(t,e),n)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:t=>t.getAttribute("href")}}),t.commands.add("link",new gS(t)),t.commands.add("unlink",new vS(t));const n=aS(t.t,lS(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(t=>t.mode===yS)),this._enableManualDecorators(n.filter(t=>t.mode===kS));const i=t.plugins.get(Yf);i.registerAttribute("linkHref"),rp(t,"linkHref","a",_S),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(t){this._linkOpeners.push(t)}_enableAutomaticDecorators(t){const e=this.editor,n=e.commands.get("link"),i=n.automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:yS,callback:t=>!!t&&CS.test(t),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(t),i.length&&e.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,n=e.commands.get("link"),i=n.manualDecorators;t.forEach(t=>{e.model.schema.extend("$text",{allowAttributes:t.id});const n=new wS(t);i.add(n),e.conversion.for("downcast").attributeToElement({model:n.id,view:(t,{writer:e,schema:i},{item:o})=>{if((o.is("selection")||i.isInline(o))&&t){const t=e.createAttributeElement("a",n.attributes,{priority:5});n.classes&&e.addClass(n.classes,t);for(const i in n.styles)e.setStyle(i,n.styles[i],t);return e.setCustomProperty("link",!0,t),t}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...n._createPattern()},model:{key:n.id}})})}_enableLinkOpen(){const t=this.editor,e=t.editing.view,n=e.document,i=t=>{this._linkOpeners.some(e=>e(t))||fS(t)};this.listenTo(n,"click",(t,e)=>{const n=nt.isMac?e.domEvent.metaKey:e.domEvent.ctrlKey;if(!n)return;let o=e.domTarget;if("a"!=o.tagName.toLowerCase()&&(o=o.closest("a")),!o)return;const r=o.getAttribute("href");r&&(t.stop(),e.preventDefault(),i(r))},{context:"$capture"}),this.listenTo(n,"keydown",(e,n)=>{const o=t.commands.get("link"),r=o.value,s=!!r&&n.keyCode===_n.enter&&n.altKey;s&&(e.stop(),i(r))})}_enableSelectionAttributesFixer(){const t=this.editor,e=t.model,n=e.document.selection;this.listenTo(n,"change:attribute",(t,{attributeKeys:i})=>{i.includes("linkHref")&&!n.hasAttribute("linkHref")&&e.change(t=>{ES(t,SS(e.schema))})})}_enableClipboardIntegration(){const t=this.editor,e=t.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(t.plugins.get("ClipboardPipeline"),"contentInsertion",(t,i)=>{e.change(t=>{const e=t.createRangeIn(i.content);for(const i of e.getItems())if(i.hasAttribute("linkHref")){const e=dS(i.getAttribute("linkHref"),n);t.setAttribute("linkHref",e,i)}})})}}function ES(t,e){t.removeSelectionAttribute("linkHref");for(const n of e)t.removeSelectionAttribute(n)}function SS(t){const e=t.getDefinition("$text").allowAttributes;return e.filter(t=>t.startsWith("link"))}class TS extends Tb{constructor(t){super(t);const e=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:e.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:e.to(t=>{if(this.href){const e=()=>t.preventDefault();this.fire("navigate",this.href,e)}})}}),this.template.tag="a"}}class AS extends db{focusTracker=new Wn;keystrokes=new Gn;backButtonView;saveButtonView;displayedTextInputView;urlInputView;children;providersListChildren;_validators;_focusables=new Dm;_focusCycler;constructor(t,e){super(t),this._validators=e,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),wb({view:this});const t=[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView];t.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:sg,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createSaveButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({label:t("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),e}_createHeaderView(){const t=this.locale.t,e=new Pb(this.locale,{label:t("Link")});return e.children.add(this.backButtonView,0),e}_createProvidersListView(){const t=new Mv(this.locale);return t.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),t.items.bindTo(this.providersListChildren).using(t=>{const e=new Iv(this.locale);return e.children.add(t),e}),t}_createDisplayedTextInput(){const t=this.locale.t,e=new yv(this.locale,sw);return e.label=t("Displayed text"),e.class="ck-labeled-field-view_full-width",e}_createUrlInput(){const t=this.locale.t,e=new yv(this.locale,sw);return e.fieldView.inputMode="url",e.label=t("Link URL"),e.class="ck-labeled-field-view_full-width",e}_createFormChildren(){this.children.add(new o_(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new o_(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:t}=this.urlInputView.fieldView;return t?t.value.trim():null}}class PS extends db{focusTracker=new Wn;keystrokes=new Gn;backButtonView;listView;listChildren;emptyListInformation;children;_focusables=new Dm;_focusCycler;constructor(t){super(t),this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(t,e,n)=>{n?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()}),this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render();const t=[this.listView,this.backButtonView];t.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const t=new Mv(this.locale);return t.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),t.items.bindTo(this.listChildren).using(t=>{const e=new Iv(this.locale);return e.children.add(t),e}),t}_createBackButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:sg,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createHeaderView(){const t=new Pb(this.locale);return t.bind("label").to(this,"title"),t.children.add(this.backButtonView,0),t}_createEmptyLinksListItemView(){const t=new db(this.locale);return t.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),t}}class IS extends db{focusTracker=new Wn;keystrokes=new Gn;backButtonView;children;listChildren;_focusables=new Dm;_focusCycler;constructor(t){super(t),this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(t,e)=>{this.fire("back"),e()})}render(){super.render();const t=[...this.listChildren,this.backButtonView];t.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const t=this.locale.t,e=new Tb(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:sg,tooltip:!0}),e.delegate("execute").to(this,"back"),e}_createHeaderView(){const t=this.locale.t,e=new Pb(this.locale,{label:t("Link properties")});return e.children.add(this.backButtonView,0),e}_createListView(){const t=new Mv(this.locale);return t.extendTemplate({attributes:{class:["ck-link__list"]}}),t.items.bindTo(this.listChildren).using(t=>{const e=new Iv(this.locale);return e.children.add(t),e}),t}}class RS extends Tb{arrowView;constructor(t){super(t),this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Eb;return t.content=Hp,t}}const OS="link-ui";class MS extends Gh{toolbarView=null;formView=null;linkProviderItemsView=null;propertiesView=null;_balloon;_linksProviders=new zn;static get requires(){return[l_,xS]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;this.set("selectedLinkableText",void 0),t.editing.view.addObserver(fd),this._balloon=t.plugins.get(l_),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:OS,view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:OS,view:(t,{writer:e})=>{if(!t.markerRange.isCollapsed)return null;const n=e.createUIElement("span");return e.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],n),n}}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Create link"),keystroke:nS},{label:e("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(t){const e=this._linksProviders.filter(e=>(e.order||0)<=(t.order||0)).length;this._linksProviders.add(t,e)}_createViews(){const t=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),t.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const t=this.editor,e=new Fv(t.locale),n=t.commands.get("link");e.class="ck-link-toolbar";let i=t.config.get("link.toolbar");return n.manualDecorators.length||(i=i.filter(t=>"linkProperties"!==t)),e.fillFromConfig(i,t.ui.componentFactory),e.keystrokes.set("Esc",(t,e)=>{this._hideUI(),e()}),e.keystrokes.set(nS,(t,e)=>{this._addFormView(),e()}),t.ui.addToolbar(e,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),e}_createFormView(){const t=this.editor,e=t.locale.t,n=t.commands.get("link"),i=t.config.get("link.defaultProtocol"),o=new(bb(AS))(t.locale,VS(t));return o.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",t=>void 0!==t),o.urlInputView.bind("isEnabled").to(n,"isEnabled"),o.saveButtonView.bind("isEnabled").to(n,"isEnabled"),o.saveButtonView.bind("label").to(n,"value",t=>e(t?"Update":"Insert")),this.listenTo(o,"submit",()=>{if(o.isValid()){const e=o.urlInputView.fieldView.element.value,n=dS(e,i),r=o.displayedTextInputView.fieldView.element.value;t.execute("link",n,this._getDecoratorSwitchesState(),r!==this.selectedLinkableText?r:void 0),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{t.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(t,e)=>{this._closeFormView(),e()}),o.providersListChildren.bindTo(this._linksProviders).using(t=>this._createLinksListProviderButton(t)),o}_createLinkProviderListView(t){return t.getListItems().map(({href:t,label:e,icon:n})=>{const i=new Tb;return i.set({label:e,icon:n,tooltip:!1,withText:!0}),i.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=t,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),i})}_createLinkProviderItemsView(t){const e=this.editor,n=e.locale.t,i=new PS(e.locale),{emptyListPlaceholder:o,label:r}=t;return i.emptyListPlaceholder=o||n("No links available"),i.title=r,this.listenTo(i,"cancel",()=>{e.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),i}_createPropertiesView(){const t=this.editor,e=this.editor.commands.get("link"),n=new(bb(IS))(t.locale);return this.listenTo(n,"back",()=>{t.editing.view.focus(),this._removePropertiesView()}),n.listChildren.bindTo(e.manualDecorators).using(n=>{const i=new ov(t.locale);return i.set({label:n.label,withText:!0}),i.bind("isOn").toMany([n,e],"value",(t,e)=>void 0===e&&void 0===t?!!n.defaultValue:!!t),i.on("execute",()=>{n.set("value",!i.isOn),t.execute("link",e.value,this._getDecoratorSwitchesState())}),i}),n}_getDecoratorSwitchesState(){const t=this.editor.commands.get("link");return Array.from(t.manualDecorators).reduce((e,n)=>{const i=void 0===t.value&&void 0===n.value?n.defaultValue:n.value;return{...e,[n.id]:!!i}},{})}_registerEditingOpeners(){const t=this.editor.plugins.get(xS);t._registerLinkOpener(t=>{const e=this._getLinkProviderLinkByHref(t);if(!e)return!1;const{item:n,provider:i}=e;return!!i.navigate&&i.navigate(n)})}_registerComponents(){const t=this.editor;t.ui.componentFactory.add("link",()=>{const t=this._createButton(Tb);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(Wb);return t.set({role:"menuitemcheckbox"}),t}),t.ui.componentFactory.add("linkPreview",e=>{const n=new TS(e),i=t.config.get("link.allowedProtocols"),o=t.commands.get("link"),r=e.t;n.bind("isEnabled").to(o,"value",t=>!!t),n.bind("href").to(o,"value",t=>t&&rS(t,i));const s=t=>{if(!t)return n.label=void 0,n.icon=void 0,void(n.tooltip=r("Open link in new tab"));const e=this._getLinkProviderLinkByHref(t);if(e){const{label:t,tooltip:i,icon:o}=e.item;n.label=t,n.tooltip=i||!1,n.icon=o}else n.label=t,n.icon=void 0,n.tooltip=r("Open link in new tab")};return s(o.value),this.listenTo(o,"change:value",(t,e,n)=>{s(n)}),this.listenTo(n,"navigate",(t,e,n)=>{const i=this._getLinkProviderLinkByHref(e);if(!i)return;const{provider:o,item:r}=i,{navigate:s}=o;s&&s(r)&&(t.stop(),n())}),n}),t.ui.componentFactory.add("unlink",e=>{const n=t.commands.get("unlink"),i=new Tb(e),o=e.t;return i.set({label:o("Unlink"),icon:Eg,tooltip:!0}),i.bind("isEnabled").to(n),this.listenTo(i,"execute",()=>{t.execute("unlink"),this._hideUI()}),i}),t.ui.componentFactory.add("editLink",e=>{const n=t.commands.get("link"),i=new Tb(e),o=e.t;return i.set({label:o("Edit link"),icon:ng,tooltip:!0}),i.bind("isEnabled").to(n),this.listenTo(i,"execute",()=>{this._addFormView()}),i}),t.ui.componentFactory.add("linkProperties",e=>{const n=t.commands.get("link"),i=new Tb(e),o=e.t;return i.set({label:o("Link properties"),icon:dg,tooltip:!0}),i.bind("isEnabled").to(n,"isEnabled",n,"value",n,"manualDecorators",(t,e,n)=>t&&!!e&&n.length>0),this.listenTo(i,"execute",()=>{this._addPropertiesView()}),i})}_createLinksListProviderButton(t){const e=this.editor.locale,n=new RS(e);return n.set({label:t.label}),this.listenTo(n,"execute",()=>{this._showLinksProviderView(t)}),n}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("link"),o=new t(e.locale),r=n.t;return o.set({label:r("Link"),icon:Ip,keystroke:nS,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",t=>!!t),this.listenTo(o,"execute",()=>{e.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),o}_enableBalloonActivators(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",()=>{const t=this._getSelectedLinkElement();t&&this._showUI()}),t.keystrokes.set(nS,(e,n)=>{n(),t.commands.get("link").isEnabled&&(t.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,e)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),e())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,e)=>{this._isUIVisible&&(this._hideUI(),e())}),mb({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),this._isToolbarInPanel||this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=t.isEnabled&&!!t.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),this._arePropertiesInPanel||(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(t){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(t),this._addLinkProviderItemsView(t)}_addLinkProviderItemsView(t){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(t)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const t=this.editor.commands.get("link");this.selectedLinkableText=void 0,void 0!==t.value?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(t=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),t&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(t=!0){const e=this.editor;this._isUIInPanel&&(this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t&&e.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(t),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const t=this.editor,e=t.editing.view.document;let n=this._getSelectedLinkElement(),i=r();const o=()=>{const t=this._getSelectedLinkElement(),e=r();n&&!t||!n&&e!==i?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=t,i=e};function r(){return e.selection.focus.getAncestors().reverse().find(t=>t.is("element"))}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document,n=this.editor.model;if(n.markers.has(OS)){const e=this.editor.editing.mapper.markerNameToElements(OS);if(e){const n=Array.from(e),i=t.createRange(t.createPositionBefore(n[0]),t.createPositionAfter(n[n.length-1]));return{target:t.domConverter.viewRangeToDom(i)}}}return{target:()=>{const n=this._getSelectedLinkElement();return n?t.domConverter.mapViewToDom(n):t.domConverter.viewRangeToDom(e.selection.getFirstRange())}}}_getSelectedLinkElement(){const t=this.editor.editing.view,e=t.document.selection,n=e.getSelectedElement();if(e.isCollapsed||n&&ly(n))return DS(e.getFirstPosition());{const n=e.getFirstRange().getTrimmed(),i=DS(n.start),o=DS(n.end);return i&&i==o&&t.createRangeIn(i).getTrimmed().isEqual(n)?i:null}}_getSelectedLinkableText(){const t=this.editor.model,e=this.editor.editing,n=this._getSelectedLinkElement();if(!n)return pS(t.document.selection.getFirstRange());const i=e.view.createRangeOn(n),o=e.mapper.toModelRange(i);return pS(o)}_getLinkProviderLinkByHref(t){if(!t)return null;for(const e of this._linksProviders){const n=e.getItem?e.getItem(t):e.getListItems().find(e=>e.href===t);if(n)return{provider:e,item:n}}return null}_showFakeVisualSelection(){const t=this.editor.model;t.change(e=>{const n=t.document.selection.getFirstRange();if(t.markers.has(OS))e.updateMarker(OS,{range:n});else if(n.start.isAtEnd){const i=n.start.getLastMatchingPosition(({item:e})=>!t.schema.isContent(e),{boundaries:n});e.addMarker(OS,{usingOperation:!1,affectsData:!1,range:e.createRange(i,n.end)})}else e.addMarker(OS,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(OS)&&t.change(t=>{t.removeMarker(OS)})}}function DS(t){return t.getAncestors().find(t=>iS(t))||null}function VS(t){const e=t.t,n=t.config.get("link.allowCreatingEmptyLinks");return[t=>{if(!n&&!t.url.length)return e("Link URL must not be empty.")}]}const NS=4,LS=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),BS=2;class FS extends Gh{static get requires(){return[Uf,xS]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?ip(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const n=this.editor,i=n.model,o=i.document.selection,r=o.getFirstPosition(),s=o.getLastPosition();let a=e.getJoined(this._expandLinkRange(i,r)||e);a&&(a=a.getJoined(this._expandLinkRange(i,s)||e)),a&&(a.start.isBefore(r)||a.end.isAfter(s))&&t.setSelection(a)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,i=t.plugins.get("ClipboardPipeline"),o=t.commands.get("link");i.on("inputTransformation",(t,i)=>{if(!this.isEnabled||!o.isEnabled||n.isCollapsed||"paste"!==i.method)return;if(n.rangeCount>1)return;const r=n.getFirstRange(),s=i.dataTransfer.getData("text/plain");if(!s)return;const a=s.match(LS);a&&a[2]===s&&(e.change(t=>{this._selectEntireLinks(t,r),o.execute(s)}),t.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new Kf(t.model,t=>{let e=t;if(!zS(e))return;e=e.slice(0,-1),"!.:,;?".includes(e[e.length-1])&&(e=e.slice(0,-1));const n=HS(e);return n?{url:n,removedTrailingCharacters:t.length-e.length}:void 0});e.on("matched:data",(e,n)=>{const{batch:i,range:o,url:r,removedTrailingCharacters:s}=n;if(!i.isTyping)return;const a=o.end.getShiftedBy(-s),l=a.getShiftedBy(-r.length),c=t.model.createRange(l,a);this._applyAutoLink(r,c)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{const t=e.document.selection.getFirstPosition();let n;n=t.parent.previousSibling?.is("element")?e.createRangeIn(t.parent.previousSibling):e.createRange(e.createPositionAt(t.parent,0),t),this._checkAndApplyAutoLinkOnRange(n)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const t=e.document.selection.getFirstPosition(),n=e.createRange(e.createPositionAt(t.parent,0),t.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(n)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:i}=Gf(t,e),o=HS(n);if(o){const t=e.createRange(i.end.getShiftedBy(-o.length),i.end);this._applyAutoLink(o,t)}}_applyAutoLink(t,e){const n=this.editor.model,i=this.editor.config.get("link.defaultProtocol"),o=dS(t,i);this.isEnabled&&WS(e,n)&&hS(o)&&!jS(e)&&this._persistAutoLink(o,e)}_persistAutoLink(t,e){const n=this.editor.model,i=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",t,e),n.enqueueChange(()=>{i.requestUndoOnBackspace()})})}}function zS(t){return t.length>NS&&" "===t[t.length-1]&&" "!==t[t.length-2]}function HS(t){const e=LS.exec(t);return e?e[BS]:null}function WS(t,e){return e.schema.checkAttributeInSelection(e.createSelection(t),"linkHref")}function jS(t){const e=t.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}class $S extends Gh{static get requires(){return[xS,MS,FS]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class US extends Gh{static get requires(){return["ImageEditing","ImageUtils",xS]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(qS(t)),t.conversion.for("downcast").add(GS(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,e=t.commands.get("link"),n=e.automaticDecorators;n.length&&t.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add(KS(n)),t.conversion.for("upcast").add(YS(t,n))}}function qS(t){const e=t.plugins.has("ImageInlineEditing"),n=t.plugins.get("ImageUtils");return t=>{t.on("element:a",(t,i,o)=>{const r=i.viewItem,s=n.findViewImgElement(r);if(!s)return;const a=s.findAncestor(t=>n.isBlockImageView(t));if(e&&!a)return;const l={attributes:["href"]};if(!o.consumable.consume(r,l))return;const c=r.getAttribute("href");if(!c)return;let u=i.modelCursor.parent;if(!u.is("element","imageBlock")){const t=o.convertItem(s,i.modelCursor);i.modelRange=t.modelRange,i.modelCursor=t.modelCursor,u=i.modelCursor.nodeBefore}u&&u.is("element","imageBlock")&&o.writer.setAttribute("linkHref",c,u)},{priority:"high"})}}function GS(t){const e=t.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(t,n,i)=>{if(!i.consumable.consume(n.item,t.name))return;const o=i.mapper.toViewElement(n.item),r=i.writer,s=Array.from(o.getChildren()).find(t=>t.is("element","a")),a=e.findViewImgElement(o),l=a.parent.is("element","picture")?a.parent:a;if(s)n.attributeNewValue?r.setAttribute("href",n.attributeNewValue,s):(r.move(r.createRangeOn(l),r.createPositionAt(o,0)),r.remove(s));else{const t=r.createContainerElement("a",{href:n.attributeNewValue});r.insert(r.createPositionAt(o,0),t),r.move(r.createRangeOn(l),r.createPositionAt(t,0))}},{priority:"high"})}}function KS(t){return e=>{e.on(`attribute:${t.id}:imageBlock`,(e,n,i)=>{const o=i.mapper.toViewElement(n.item),r=Array.from(o.getChildren()).find(t=>t.is("element","a"));if(r){if(n.attributeOldValue){for(const e in t.attributes)i.writer.removeAttribute(e,r);t.classes&&i.writer.removeClass(t.classes,r);for(const e in t.styles)i.writer.removeStyle(e,r)}if(n.attributeNewValue){for(const[e,n]of Yn(t.attributes))i.writer.setAttribute(e,n,r);t.classes&&i.writer.addClass(t.classes,r);for(const e in t.styles)i.writer.setStyle(e,t.styles[e],r)}}})}}function YS(t,e){const n=t.plugins.has("ImageInlineEditing"),i=t.plugins.get("ImageUtils");return t=>{t.on("element:a",(t,o,r)=>{const s=o.viewItem,a=i.findViewImgElement(s);if(!a)return;const l=a.findAncestor(t=>i.isBlockImageView(t));if(n&&!l)return;const c=new Co(e._createPattern()),u=c.match(s);if(!u)return;if(!r.consumable.consume(s,u.match))return;const d=o.modelCursor.nodeBefore||o.modelCursor.parent;r.writer.setAttribute(e.id,!0,d)},{priority:"high"})}}class XS extends Gh{static get requires(){return[xS,MS,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(e,n)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(n.preventDefault(),e.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",n=>{const i=new Tb(n),o=t.plugins.get("LinkUI"),r=t.commands.get("link");return i.set({isEnabled:!0,label:e("Link image"),icon:Ip,keystroke:nS,tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(r,"isEnabled"),i.bind("isOn").to(r,"value",t=>!!t),this.listenTo(i,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?o._addToolbarView():o._showUI(!0)}),i})}_isSelectedLinkedImage(t){const e=t.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");return n.isImage(e)&&e.hasAttribute("linkHref")}}class JS extends Gh{static get requires(){return[US,XS]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
class ZS{_startElement;_referenceIndent;_isForward;_includeSelf;_sameAttributes;_sameIndent;_lowerIndent;_higherIndent;constructor(t,e){this._startElement=t,this._referenceIndent=t.getAttribute("listIndent"),this._isForward="forward"==e.direction,this._includeSelf=!!e.includeSelf,this._sameAttributes=Mn(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(t,e){const n=new this(t,e),i=n[Symbol.iterator]();return Hn(i)}*[Symbol.iterator](){const t=[];for(const{node:e}of new QS(this._getStartNode(),this._isForward?"forward":"backward")){const n=e.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){t.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){t.length&&(yield*t,t.length=0);break}continue}if(this._sameAttributes.some(t=>e.getAttribute(t)!==this._startElement.getAttribute(t)))break}t.length&&(yield*t,t.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class QS{_node;_isForward;_previousNodesByIndent=[];_previous=null;_previousNodeIndent=null;constructor(t,e="forward"){this._node=t,this._isForward="forward"===e}[Symbol.iterator](){return this}next(){if(!nT(this._node))return{done:!0,value:void 0};const t=this._node.getAttribute("listIndent");let e=null;if(this._previous){const n=this._previousNodeIndent;t>n?this._previousNodesByIndent[n]=this._previous:t<n?(e=this._previousNodesByIndent[t]||null,this._previousNodesByIndent.length=t):e=this._previous}const n={node:this._node,previous:this._previous,previousNodeInList:e};return this._previous=this._node,this._previousNodeIndent=t,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:n,done:!1}}}class tT{_listHead;constructor(t){this._listHead=t}[Symbol.iterator](){return new QS(this._listHead)}}class eT{
/* istanbul ignore next: static function definition -- @preserve */static next(){return Ct()}}function nT(t){return!!t&&t.is("element")&&t.hasAttribute("listItemId")}function iT(t,e={}){return[...oT(t,{...e,direction:"backward"}),...oT(t,{...e,direction:"forward"})]}function oT(t,e={}){const n="forward"==e.direction,i=Array.from(new ZS(t,{...e,includeSelf:n,sameIndent:!0,sameAttributes:"listItemId"}));return n?i:i.reverse()}function rT(t){return Array.from(new ZS(t,{direction:"forward",higherIndent:!0}))}function sT(t,e){const n=new ZS(t,{sameIndent:!0,sameAttributes:"listType",...e}),i=new ZS(t,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(n).reverse(),...i]}function aT(t){const e=ZS.first(t,{sameIndent:!0,sameAttributes:"listItemId"});return!e}function lT(t){const e=ZS.first(t,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"});return!e}function cT(t,e={}){t=Mn(t);const n=!1!==e.withNested,i=new Set;for(const o of t)for(const t of iT(o,{higherIndent:n}))i.add(t);return vT(i)}function uT(t){t=Mn(t);const e=new Set;for(const n of t)for(const t of sT(n))e.add(t);return vT(e)}function dT(t,e){const n=oT(t,{direction:"forward"}),i=eT.next();for(const o of n)e.setAttribute("listItemId",i,o);return n}function hT(t,e,n){const i={};for(const[r,s]of e.getAttributes())r.startsWith("list")&&(i[r]=s);const o=oT(t,{direction:"forward"});for(const r of o)n.setAttributes(i,r);return o}function fT(t,e,{expand:n,indentBy:i=1}={}){t=Mn(t);const o=n?cT(t):t;for(const r of o){const t=r.getAttribute("listIndent")+i;t<0?gT(r,e):e.setAttribute("listIndent",t,r)}return o}function pT(t,e){t=Mn(t);const n=cT(t),i=new Set,o=Math.min(...n.map(t=>t.getAttribute("listIndent"))),r=new Map;for(const s of n)r.set(s,ZS.first(s,{lowerIndent:!0}));for(const s of n){if(i.has(s))continue;i.add(s);const t=s.getAttribute("listIndent")-1;if(t<0)gT(s,e);else{if(s.getAttribute("listIndent")==o){const t=kT(s,r.get(s),e);for(const e of t)i.add(e);if(t.length)continue}e.setAttribute("listIndent",t,s)}}return vT(i)}function gT(t,e){t=Mn(t);for(const n of t)n.is("element","listItem")&&e.rename(n,"paragraph");for(const n of t)for(const t of n.getAttributeKeys())t.startsWith("list")&&e.removeAttribute(t,n);return t}function mT(t){if(!t.length)return!1;const e=t[0].getAttribute("listItemId");return!!e&&!t.some(t=>t.getAttribute("listItemId")!=e)}function bT(t,e){const n=[];let i=Number.POSITIVE_INFINITY;for(const{node:o}of new QS(t.nextSibling)){const t=o.getAttribute("listIndent");if(0==t)break;t<i&&(i=t);const r=t-i;e.setAttribute("listIndent",r,o),n.push(o)}return n}function vT(t){return Array.from(t).filter(t=>"$graveyard"!==t.root.rootName).sort((t,e)=>t.index-e.index)}function wT(t){const e=t.document.selection.getSelectedElement();return e&&t.schema.isObject(e)&&t.schema.isBlock(e)?e:null}function _T(t,e){return e.checkChild(t.parent,"listItem")&&e.checkChild(t,"$text")&&!e.isObject(t)}function yT(t){return"numbered"==t||"customNumbered"==t}function kT(t,e,n){const i=oT(e,{direction:"forward"});return i.pop().index>t.index?hT(t,e,n):[]}class CT extends Yh{_direction;constructor(t,e){super(t),this._direction=e}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,e=xT(t.document.selection);t.change(t=>{const n=[];mT(e)&&!aT(e[0])?("forward"==this._direction&&n.push(...fT(e,t)),n.push(...dT(e[0],t))):"forward"==this._direction?n.push(...fT(e,t,{expand:!0})):n.push(...pT(e,t));for(const e of n){if(!e.hasAttribute("listType"))continue;const n=ZS.first(e,{sameIndent:!0});n&&t.setAttribute("listType",n.getAttribute("listType"),e)}this._fireAfterExecute(n)})}_fireAfterExecute(t){this.fire("afterExecute",vT(new Set(t)))}_checkEnabled(){let t=xT(this.editor.model.document.selection),e=t[0];if(!e)return!1;if("backward"==this._direction)return!0;if(mT(t)&&!aT(t[0]))return!0;t=cT(t),e=t[0];const n=ZS.first(e,{sameIndent:!0});return!!n&&n.getAttribute("listType")==e.getAttribute("listType")}}function xT(t){const e=Array.from(t.getSelectedBlocks()),n=e.findIndex(t=>!nT(t));return-1!=n&&(e.length=n),e}class ET extends Yh{type;_listWalkerOptions;constructor(t,e,n={}){super(t),this.type=e,this._listWalkerOptions=n.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.document,i=wT(e),o=Array.from(n.selection.getSelectedBlocks()).filter(t=>e.schema.checkAttribute(t,"listType")||_T(t,e.schema)),r=void 0!==t.forceValue?!t.forceValue:this.value;e.change(s=>{if(r){const t=o[o.length-1],e=oT(t,{direction:"forward"}),n=[];e.length>1&&n.push(...dT(e[1],s)),n.push(...gT(o,s)),n.push(...bT(t,s)),this._fireAfterExecute(n)}else if((i||n.selection.isCollapsed)&&nT(o[0])){const e=sT(i||o[0],this._listWalkerOptions);for(const n of e)s.setAttributes({...t.additionalAttributes,listType:this.type},n);this._fireAfterExecute(e)}else{const n=[];for(const i of o)if(i.hasAttribute("listType"))for(const e of cT(i,{withNested:!1}))e.getAttribute("listType")!=this.type&&(s.setAttributes({...t.additionalAttributes,listType:this.type},e),n.push(e));else!i.is("element","listItem")&&_T(i,e.schema)&&s.rename(i,"listItem"),s.setAttributes({...t.additionalAttributes,listIndent:0,listItemId:eT.next(),listType:this.type},i),n.push(i);this._fireAfterExecute(n)}})}_fireAfterExecute(t){this.fire("afterExecute",vT(new Set(t)))}_getValue(){const t=this.editor.model.document.selection,e=Array.from(t.getSelectedBlocks());if(!e.length)return!1;for(const n of e)if(n.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const t=this.editor.model,e=t.schema,n=t.document.selection,i=Array.from(n.getSelectedBlocks());if(!i.length)return!1;if(this.value)return!0;for(const o of i)if(e.checkAttribute(o,"listType")||_T(o,e))return!0;return!1}}class ST extends Yh{_direction;constructor(t,e){super(t),this._direction=e}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:t=!1}={}){const e=this.editor.model,n=e.document.selection,i=[];e.change(o=>{const{firstElement:r,lastElement:s}=this._getMergeSubjectElements(n,t),a=r.getAttribute("listIndent")||0,l=s.getAttribute("listIndent"),c=s.getAttribute("listItemId");if(a!=l){const t=rT(s);i.push(...fT([s,...t],o,{indentBy:a-l,expand:a<l}))}if(t){let t=n;n.isCollapsed&&(t=o.createSelection(o.createRange(o.createPositionAt(r,"end"),o.createPositionAt(s,0)))),e.deleteContent(t,{doNotResetEntireContent:n.isCollapsed});const a=t.getLastPosition().parent,l=a.nextSibling;i.push(a),l&&l!==s&&l.getAttribute("listItemId")==c&&i.push(...hT(l,a,o))}else i.push(...hT(s,r,o));this._fireAfterExecute(i)})}_fireAfterExecute(t){this.fire("afterExecute",vT(new Set(t)))}_checkEnabled(){const t=this.editor.model,e=t.document.selection,n=wT(t);if(e.isCollapsed||n){const t=n||e.getFirstPosition().parent;if(!nT(t))return!1;const i="backward"==this._direction?t.previousSibling:t.nextSibling;if(!i)return!1;if(mT([t,i]))return!1}else{const t=e.getLastPosition(),n=e.getFirstPosition();if(t.parent===n.parent)return!1;if(!nT(t.parent))return!1}return!0}_getMergeSubjectElements(t,e){const n=this.editor.model,i=wT(n);let o,r;if(t.isCollapsed||i){const n=i||t.getFirstPosition().parent,s=aT(n);"backward"==this._direction?(r=n,o=s&&!e?ZS.first(n,{sameIndent:!0,lowerIndent:!0}):n.previousSibling):(o=n,r=n.nextSibling)}else o=t.getFirstPosition().parent,r=t.getLastPosition().parent;return{firstElement:o,lastElement:r}}}class TT extends Yh{_direction;constructor(t,e){super(t),this._direction=e}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor;t.model.change(t=>{const e=dT(this._getStartBlock(),t);this._fireAfterExecute(e)})}_fireAfterExecute(t){this.fire("afterExecute",vT(new Set(t)))}_checkEnabled(){const t=this.editor.model.document.selection,e=this._getStartBlock();return t.isCollapsed&&nT(e)&&!aT(e)}_getStartBlock(){const t=this.editor.model.document,e=t.selection.getFirstPosition().parent;return"before"==this._direction?e:e.nextSibling}}class AT extends Gh{static get pluginName(){return"ListItemBoldIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[uA]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get(uA);t.plugins.has("BoldEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("bold","listItemBold"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemBold",setAttributeOnDowncast(t,e,n,i){e&&(t.addClass("ck-list-marker-bold",n),!nt.isSafari||i&&i.dataPipeline||t.setStyle("--ck-content-list-marker-dummy-bold","0",n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("BoldEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemBold"}),e.schema.setAttributeProperties("listItemBold",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId"))return!1},"listItemBold"),t.conversion.for("upcast").attributeToAttribute({model:"listItemBold",view:{name:"li",classes:"ck-list-marker-bold"}}))}}class PT extends Gh{static get pluginName(){return"ListItemItalicIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[uA]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get(uA);t.plugins.has("ItalicEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("italic","listItemItalic"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemItalic",setAttributeOnDowncast(t,e,n,i){e&&(t.addClass("ck-list-marker-italic",n),!nt.isSafari||i&&i.dataPipeline||t.setStyle("--ck-content-list-marker-dummy-italic","0",n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("ItalicEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemItalic"}),e.schema.setAttributeProperties("listItemItalic",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId"))return!1},"listItemItalic"),t.conversion.for("upcast").attributeToAttribute({model:"listItemItalic",view:{name:"li",classes:"ck-list-marker-italic"}}))}}class IT extends Gh{static get pluginName(){return"ListItemFontSizeIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[uA]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get(uA);if(!t.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;const i=vC(t.config.get("fontSize.options"));e.registerFormatAttribute("fontSize","listItemFontSize"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemFontSize",setAttributeOnDowncast(t,e,n,o){if(e){const r=i.find(t=>t.model==e);r&&r.view&&"string"!=typeof r.view?r.view.styles?(t.addClass("ck-list-marker-font-size",n),t.setStyle("--ck-content-list-marker-font-size",r.view.styles["font-size"],n)):r.view.classes&&(t.addClass(`ck-list-marker-font-size-${e}`,n),!nt.isSafari||o&&o.dataPipeline||t.setStyle("--ck-content-list-marker-dummy-font-size","0",n)):(t.addClass("ck-list-marker-font-size",n),t.setStyle("--ck-content-list-marker-font-size",e,n))}}})}afterInit(){const t=this.editor,e=t.model;if(!t.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;e.schema.extend("$listItem",{allowAttributes:"listItemFontSize"}),e.schema.setAttributeProperties("listItemFontSize",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId"))return!1},"listItemFontSize"),t.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:t=>t.getStyle("--ck-content-list-marker-font-size")},view:{name:"li",classes:"ck-list-marker-font-size",styles:{"--ck-content-list-marker-font-size":/.*/}}});const n=vC(t.config.get("fontSize.options"));for(const i of n)i.model&&i.view&&t.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:i.model},view:{name:"li",classes:`ck-list-marker-font-size-${i.model}`}})}}class RT extends Gh{static get pluginName(){return"ListItemFontColorIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[uA]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get(uA);t.plugins.has("FontColorEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("fontColor","listItemFontColor"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemFontColor",setAttributeOnDowncast(t,e,n){e&&(t.addClass("ck-list-marker-color",n),t.setStyle("--ck-content-list-marker-color",e,n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("FontColorEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemFontColor"}),e.schema.setAttributeProperties("listItemFontColor",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId"))return!1},"listItemFontColor"),t.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontColor",value:t=>t.getStyle("--ck-content-list-marker-color")},view:{name:"li",classes:"ck-list-marker-color",styles:{"--ck-content-list-marker-color":/.*/}}}))}}class OT extends Gh{static get pluginName(){return"ListItemFontFamilyIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[uA]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get(uA);t.plugins.has("FontFamilyEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("fontFamily","listItemFontFamily"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemFontFamily",setAttributeOnDowncast(t,e,n){e&&(t.addClass("ck-list-marker-font-family",n),t.setStyle("--ck-content-list-marker-font-family",e,n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("FontFamilyEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemFontFamily"}),e.schema.setAttributeProperties("listItemFontFamily",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId"))return!1},"listItemFontFamily"),t.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontFamily",value:t=>t.getStyle("--ck-content-list-marker-font-family")},view:{name:"li",classes:"ck-list-marker-font-family",styles:{"--ck-content-list-marker-font-family":/.*/}}}))}}class MT extends Gh{_loadedFormatting={};static get pluginName(){return"ListFormatting"}static get isOfficialPlugin(){return!0}static get requires(){return[AT,PT,IT,RT,OT]}constructor(t){super(t),t.config.define("list.enableListItemMarkerFormatting",!0)}afterInit(){this.editor.config.get("list.enableListItemMarkerFormatting")&&this._registerPostfixerForListItemFormatting()}_registerPostfixerForListItemFormatting(){const t=this.editor.model;t.document.registerPostFixer(e=>{const n=t.document.differ.getChanges(),i=new Set;let o=!1;for(const t of n)if("attribute"===t.type)("listItemId"==t.attributeKey||"listType"==t.attributeKey||this._isInlineOrSelectionFormatting(t.attributeKey)||Object.values(this._loadedFormatting).includes(t.attributeKey))&&(nT(t.range.start.nodeAfter)?i.add(t.range.start.nodeAfter):nT(t.range.start.parent)&&i.add(t.range.start.parent));else if(nT(t.position.nodeAfter)&&i.add(t.position.nodeAfter),nT(t.position.nodeBefore)&&i.add(t.position.nodeBefore),nT(t.position.parent)&&i.add(t.position.parent),"insert"==t.type&&"$text"!=t.name){const n=e.createRangeIn(t.position.nodeAfter);for(const t of n.getItems())nT(t)&&i.add(t)}for(const r of i){const n=DT(t,r,Object.keys(this._loadedFormatting));for(const[t,i]of Object.entries(n)){const n=this._loadedFormatting[t];(i&&NT(e,r,n,i)||!i&&LT(e,r,n))&&(o=!0)}}return o})}registerFormatAttribute(t,e){this._loadedFormatting[t]=e}_isInlineOrSelectionFormatting(t){return t.replace(/^selection:/,"")in this._loadedFormatting}}function DT(t,e,n){if(aT(e))return VT(t,e,n);const i=iT(e);return VT(t,i[0],n)}function VT(t,e,n){if(!BT(e)||t.schema.isLimit(e))return Object.fromEntries(n.map(t=>[t]));if(e.isEmpty)return Object.fromEntries(n.map(t=>[t,e.getAttribute(`selection:${t}`)]));const i=new Set(n),o={},r=t.createRangeIn(e),s=r.getWalker({ignoreElementEnd:!0});for(const{item:a}of s){for(const e of i)if(t.schema.checkAttribute(a,e)){const t=a.getAttribute(e);void 0===t?(i.delete(e),o[e]=void 0):void 0===o[e]?o[e]=t:o[e]!==t&&(i.delete(e),o[e]=void 0)}else e in o||(o[e]=void 0);if(!i.size)break;t.schema.isLimit(a)&&s.jumpTo(t.createPositionAfter(a))}return o}function NT(t,e,n,i){const o=iT(e);let r=!1;for(const s of o)s.hasAttribute(n)&&s.getAttribute(n)===i||(t.setAttribute(n,i,s),r=!0);return r}function LT(t,e,n){const i=iT(e);let o=!1;for(const r of i)r.hasAttribute(n)&&(t.removeAttribute(n,r),o=!0);return o}function BT(t){return["numbered","bulleted","customNumbered","customBulleted"].includes(t.getAttribute("listType"))}class FT extends Gh{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(t){return uT(t)}isFirstBlockOfListItem(t){return aT(t)}isListItemBlock(t){return nT(t)}expandListBlocksToCompleteItems(t,e={}){return cT(t,e)}isNumberedListType(t){return yT(t)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zT(t){return t.is("element","ol")||t.is("element","ul")}function HT(t){return t.is("element","li")}function WT(t){let e=0,n=t.parent;while(n){if(HT(n))e++;else{const t=n.previousSibling;t&&HT(t)&&e++}n=n.parent}return e}function jT(t,e,n,i=qT(n,e)){return t.createAttributeElement(UT(n),null,{priority:2*e/100-100,id:i})}function $T(t,e,n){return t.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:n})}function UT(t){return"numbered"==t||"customNumbered"==t?"ol":"ul"}function qT(t,e){return`list-${t}-${e}`}function GT(t,e,n){const i=t.nodeBefore;if(nT(i)){let t=i;for(const{node:o}of new QS(t,"backward")){if(t=o,n.has(t))return;if(n.add(t),e.has(i))return}e.add(t)}else{const n=t.nodeAfter;nT(n)&&e.add(n)}}function KT(t,e){let n=0,i=-1,o=null,r=!1;for(const{node:s}of t){const t=s.getAttribute("listIndent");if(t>n){let a;null===o?(o=t-n,a=n):(o>t&&(o=t),a=t-o),a>i+1&&(a=i+1),e.setAttribute("listIndent",a,s),r=!0,i=a}else o=null,n=t+1,i=t}return r}function YT(t,e,n){const i=new Set;let o=!1;for(const{node:r}of t){if(i.has(r))continue;let t=r.getAttribute("listType"),s=r.getAttribute("listItemId");if(e.has(s)&&(s=eT.next()),e.add(s),r.is("element","listItem"))r.getAttribute("listItemId")!=s&&(n.setAttribute("listItemId",s,r),o=!0);else for(const e of oT(r,{direction:"forward"}))i.add(e),e.getAttribute("listType")!=t&&(s=eT.next(),t=e.getAttribute("listType")),e.getAttribute("listItemId")!=s&&(n.setAttribute("listItemId",s,e),o=!0)}return o}function XT(){return(t,e,n)=>{const{writer:i,schema:o}=n;if(!e.modelRange)return;const r=Array.from(e.modelRange.getItems({shallow:!0})).filter(t=>o.checkAttribute(t,"listItemId"));if(!r.length)return;const s=e.viewItem.getAttribute("data-list-item-id")||eT.next();n.consumable.consume(e.viewItem,{attributes:"data-list-item-id"});const a=WT(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=r[0].getAttribute("listType");c&&(l=c);const u={listItemId:s,listIndent:a,listType:l};for(const d of r)d.hasAttribute("listItemId")||i.setAttributes(u,d);r.length>1&&r[1].getAttribute("listItemId")!=u.listItemId&&n.keepEmptyElement(r[0])}}function JT(t,e,n,i){return()=>{const i=t.document.differ.getChanges(),s=[],a=new Set,l=new Set,c=new Set;for(const t of i)if("insert"==t.type&&"$text"!=t.name)GT(t.position,a,c),t.attributes.has("listItemId")?l.add(t.position.nodeAfter):GT(t.position.getShiftedBy(t.length),a,c);else if("remove"==t.type&&t.attributes.has("listItemId"))GT(t.position,a,c);else if("attribute"==t.type){const e=t.range.start.nodeAfter;n.includes(t.attributeKey)?(GT(t.range.start,a,c),null===t.attributeNewValue?(GT(t.range.start.getShiftedBy(1),a,c),r(e)&&s.push(e)):l.add(e)):nT(e)&&r(e)&&s.push(e)}for(const t of a.values())s.push(...o(t,l));for(const t of new Set(s))e.reconvertItem(t)};function o(t,e){const i=[],o=new Set,s=[];for(const{node:l,previous:c}of new QS(t)){if(o.has(l))continue;const t=l.getAttribute("listIndent");c&&t<c.getAttribute("listIndent")&&(s.length=t+1),s[t]={modelAttributes:Object.fromEntries(Array.from(l.getAttributes()).filter(([t])=>n.includes(t))),modelElement:l};const u=oT(l,{direction:"forward"});for(const n of u)o.add(n),(r(n,u)||a(n,s,e))&&i.push(n)}return i}function r(t,o){const r=e.mapper.toViewElement(t);if(!r)return!1;if(s(r))return!0;const a=i.fire("checkElement",{modelElement:t,viewElement:r});if(a)return!0;if(!t.is("element","paragraph")&&!t.is("element","listItem"))return!1;const l=lA(t,n,o);return!(!l||!r.is("element","p"))||!(l||!r.is("element","span"))}function s(t){t=t.parent;while(t.is("attributeElement")&&["ol","ul","li"].includes(t.name))t=t.parent;return!(!t.getCustomProperty("$structureSlotParent")||e.mapper.toModelElement(t))}function a(t,n,o){if(o.has(t))return!1;const r=e.mapper.toViewElement(t);let s=n.length-1;for(let e=r.parent;!e.is("editableElement");e=e.parent){const t=HT(e),o=zT(e);if(!o&&!t)continue;const r="checkAttributes:"+(t?"item":"list"),a=i.fire(r,{viewElement:e,modelAttributes:n[s].modelAttributes,modelReferenceElement:n[s].modelElement});if(a)break;if(o&&(s--,s<0))return!1}return!0}}function ZT(t,e,n,{dataPipeline:i}={}){const o=aA(t);return(r,s,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=s.item;if(!t.includes(s.attributeKey))return;if(!o(d,u))return;const h={...a.options,dataPipeline:i},f=eA(d,c,n,l);iA(f,l,c),rA(f,l);const p=oA(d,f,e,l,h);sA(d,p,e,l,h)}}function QT(t){return(e,n,i)=>{const{writer:o,mapper:r}=i,s=e.name.split(":")[1];if(!t.checkAttribute(s,"listItemId"))return;const a=r.toViewPosition(n.position),l=n.position.getShiftedBy(n.length),c=r.toViewPosition(l,{isPhantom:!0}),u=o.createRange(a,c).getTrimmed(),d=u.end.nodeBefore;
/* istanbul ignore next -- @preserve */d&&iA(d,o,r)}}function tA(t,{dataPipeline:e}={}){return(n,{writer:i})=>{if(!lA(n,t))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const o=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,o),o}}function eA(t,e,n,i){const o=n.createRangeOn(t),r=e.toViewRange(o).getTrimmed(),s=r.getWalker();for(const{item:a}of s)if(a.is("element")&&a.getCustomProperty("listItemMarker"))s.jumpTo(i.createPositionAfter(a));else if(a.is("element")&&!a.getCustomProperty("listItemWrapper"))return a}function nA(t,e){return(n,i)=>{if(i.modelPosition.offset>0)return;const o=i.modelPosition.parent;if(!nT(o))return;if(!t.some(t=>"itemMarker"==t.scope&&t.canInjectMarkerIntoElement&&t.canInjectMarkerIntoElement(o)))return;const r=i.mapper.toViewElement(o),s=e.createRangeIn(r),a=s.getWalker();let l=s.start;for(const{item:t}of a){if(t.is("element")&&i.mapper.toModelElement(t)||t.is("$textProxy"))break;t.is("element")&&t.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(t),a.skip(({previousPosition:t})=>!t.isEqual(l)))}i.viewPosition=l}}function iA(t,e,n){while(t.parent.is("attributeElement")&&t.parent.getCustomProperty("listItemWrapper"))e.unwrap(e.createRangeOn(t),t.parent);const i=[];o(e.createPositionBefore(t).getWalker({direction:"backward"})),o(e.createRangeIn(t).getWalker());for(const r of i)e.remove(r);function o(t){for(const{item:e}of t){if(e.is("element")&&n.toModelElement(e))break;e.is("element")&&e.getCustomProperty("listItemMarker")&&i.push(e)}}}function oA(t,e,n,i,{dataPipeline:o}){let r=i.createRangeOn(e);if(!aT(t))return r;for(const s of n){if("itemMarker"!=s.scope)continue;const n=s.createElement(i,t,{dataPipeline:o});if(!n)continue;if(i.setCustomProperty("listItemMarker",!0,n),s.canInjectMarkerIntoElement&&s.canInjectMarkerIntoElement(t)?i.insert(i.createPositionAt(e,0),n):(i.insert(r.start,n),r=i.createRange(i.createPositionBefore(n),i.createPositionAfter(e))),!s.createWrapperElement||!s.canWrapElement)continue;const a=s.createWrapperElement(i,t,{dataPipeline:o});i.setCustomProperty("listItemWrapper",!0,a),s.canWrapElement(t)?r=i.wrap(r,a):(r=i.wrap(i.createRangeOn(n),a),r=i.createRange(r.start,i.createPositionAfter(e)))}return r}function rA(t,e){let n=t.parent;while(n.is("attributeElement")&&["ul","ol","li"].includes(n.name)){const i=n.parent;e.unwrap(e.createRangeOn(t),n),n=i}}function sA(t,e,n,i,o){if(!t.hasAttribute("listIndent"))return;const r=t.getAttribute("listIndent");let s=t;for(let a=r;a>=0;a--){const t=$T(i,a,s.getAttribute("listItemId")),r=jT(i,a,s.getAttribute("listType"));for(const e of n)"list"!=e.scope&&"item"!=e.scope||!s.hasAttribute(e.attributeName)||e.setAttributeOnDowncast(i,s.getAttribute(e.attributeName),"list"==e.scope?r:t,o);if(e=i.wrap(e,t),e=i.wrap(e,r),0==a)break;if(s=ZS.first(s,{lowerIndent:!0}),!s)break}}function aA(t){return(e,n)=>{const i=[];for(const o of t)e.hasAttribute(o)&&i.push(`attribute:${o}`);return!!i.every(t=>!1!==n.test(e,t))&&(i.forEach(t=>n.consume(e,t)),!0)}}function lA(t,e,n=iT(t)){if(!nT(t))return!1;for(const i of t.getAttributeKeys())if(!i.startsWith("selection:")&&"htmlEmptyBlock"!=i&&!e.includes(i))return!1;return n.length<2}const cA=["listType","listIndent","listItemId"];class uA extends Gh{_downcastStrategies=[];static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Y_,Uf,FT,Dk,MT]}constructor(t){super(t),t.config.define("list.multiBlock",!0)}init(){const t=this.editor,e=t.model,n=t.config.get("list.multiBlock");if(t.plugins.has("LegacyListEditing"))throw new Tt("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});e.schema.register("$listItem",{allowAttributes:cA}),n?(e.schema.extend("$container",{allowAttributesOf:"$listItem"}),e.schema.extend("$block",{allowAttributesOf:"$listItem"}),e.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):e.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const i of cA)e.schema.setAttributeProperties(i,{copyOnReplace:!0});t.commands.add("numberedList",new ET(t,"numbered")),t.commands.add("bulletedList",new ET(t,"bulleted")),t.commands.add("customNumberedList",new ET(t,"customNumbered",{multiLevel:!0})),t.commands.add("customBulletedList",new ET(t,"customBulleted",{multiLevel:!0})),t.commands.add("indentList",new CT(t,"forward")),t.commands.add("outdentList",new CT(t,"backward")),t.commands.add("splitListItemBefore",new TT(t,"before")),t.commands.add("splitListItemAfter",new TT(t,"after")),n&&(t.commands.add("mergeListItemBackward",new ST(t,"backward")),t.commands.add("mergeListItemForward",new ST(t,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration(),this._setupListItemIdConversionStrategy()}afterInit(){const t=this.editor,e=t.commands,n=e.get("indent"),i=e.get("outdent");n&&n.registerChildCommand(e.get("indentList"),{priority:"high"}),i&&i.registerChildCommand(e.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(t){this._downcastStrategies.push(t)}getListAttributeNames(){return[...cA,...this._downcastStrategies.map(t=>t.attributeName)]}_setupDeleteIntegration(){const t=this.editor,e=t.commands.get("mergeListItemBackward"),n=t.commands.get("mergeListItemForward");this.listenTo(t.editing.view.document,"delete",(i,o)=>{const r=t.model.document.selection;wT(t.model)||t.model.change(()=>{const s=r.getFirstPosition();if(r.isCollapsed&&"backward"==o.direction){if(!s.isAtStart)return;const n=s.parent;if(!nT(n))return;const r=ZS.first(n,{sameAttributes:"listType",sameIndent:!0});if(r||0!==n.getAttribute("listIndent")){if(!e||!e.isEnabled)return;e.execute({shouldMergeOnBlocksContentLevel:fA(t.model,"backward")})}else lT(n)||t.execute("splitListItemAfter"),t.execute("outdentList");o.preventDefault(),i.stop()}else{if(r.isCollapsed&&!r.getLastPosition().isAtEnd)return;if(!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:fA(t.model,"forward")}),o.preventDefault(),i.stop()}})},{context:"li"})}_setupEnterIntegration(){const t=this.editor,e=t.model,n=t.commands,i=n.get("enter");this.listenTo(t.editing.view.document,"enter",(n,i)=>{const o=e.document,r=o.selection.getFirstPosition().parent;if(o.selection.isCollapsed&&nT(r)&&r.isEmpty&&!i.isSoft){const e=aT(r),o=lT(r);e&&o?(t.execute("outdentList"),i.preventDefault(),n.stop()):e&&!o?(t.execute("splitListItemAfter"),i.preventDefault(),n.stop()):o&&(t.execute("splitListItemBefore"),i.preventDefault(),n.stop())}},{context:"li"}),this.listenTo(i,"afterExecute",()=>{const e=n.get("splitListItemBefore");if(e.refresh(),!e.isEnabled)return;const i=t.model.document,o=i.selection.getLastPosition().parent,r=iT(o);2===r.length&&e.execute()})}_setupTabIntegration(){const t=this.editor;this.listenTo(t.editing.view.document,"tab",(e,n)=>{const i=n.shiftKey?"outdentList":"indentList",o=this.editor.commands.get(i);o.isEnabled&&(t.execute(i),n.stopPropagation(),n.preventDefault(),e.stop())},{context:"li"})}_setupConversion(){const t=this.editor,e=t.model,n=this.getListAttributeNames(),i=t.config.get("list.multiBlock"),o=i?"paragraph":"listItem";t.conversion.for("upcast").elementToElement({view:"li",model:(t,{writer:e})=>e.createElement(o,{listType:""})}).elementToElement({view:"p",model:(t,{writer:e})=>t.parent&&t.parent.is("element","li")?e.createElement(o,{listType:""}):null,converterPriority:"high"}).add(t=>{t.on("element:li",XT())}),i||t.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),t.conversion.for("editingDowncast").elementToElement({model:o,view:tA(n),converterPriority:"high"}).add(t=>{t.on("attribute",ZT(n,this._downcastStrategies,e)),t.on("remove",QT(e.schema))}),t.conversion.for("dataDowncast").elementToElement({model:o,view:tA(n,{dataPipeline:!0}),converterPriority:"high"}).add(t=>{t.on("attribute",ZT(n,this._downcastStrategies,e,{dataPipeline:!0}))});const r=nA(this._downcastStrategies,t.editing.view);t.editing.mapper.on("modelToViewPosition",r),t.data.mapper.on("modelToViewPosition",r),this.listenTo(e.document,"change:data",JT(e,t.editing,n,this),{priority:"high"}),this.on("checkAttributes:item",(t,{viewElement:e,modelAttributes:n})=>{e.id!=n.listItemId&&(t.return=!0,t.stop())}),this.on("checkAttributes:list",(t,{viewElement:e,modelAttributes:n})=>{e.name==UT(n.listType)&&e.id==qT(n.listType,n.listIndent)||(t.return=!0,t.stop())})}_setupModelPostFixing(){const t=this.editor.model,e=this.getListAttributeNames();t.document.registerPostFixer(n=>dA(t,n,e,this)),this.on("postFixer",(t,{listNodes:e,writer:n})=>{t.return=KT(e,n)||t.return},{priority:"high"}),this.on("postFixer",(t,{listNodes:e,writer:n,seenIds:i})=>{t.return=YT(e,i,n)||t.return},{priority:"high"})}_setupClipboardIntegration(){const t=this.editor.model,e=this.editor.plugins.get("ClipboardPipeline");this.listenTo(t,"insertContent",hA(t),{priority:"high"}),this.listenTo(e,"outputTransformation",(e,n)=>{t.change(t=>{const e=Array.from(n.content.getChildren()),i=e[e.length-1];if(e.length>1&&i.is("element")&&i.isEmpty){const n=e.slice(0,-1);n.every(nT)&&t.remove(i)}if("copy"==n.method||"cut"==n.method){const e=Array.from(n.content.getChildren()),i=mT(e);i&&gT(e,t)}})})}_setupAccessibilityIntegration(){const t=this.editor,e=t.t;t.accessibility.addKeystrokeInfoGroup({id:"list",label:e("Keystrokes that can be used in a list"),keystrokes:[{label:e("Increase list item indent"),keystroke:"Tab"},{label:e("Decrease list item indent"),keystroke:"Shift+Tab"}]})}_setupListItemIdConversionStrategy(){this.registerDowncastStrategy({scope:"item",attributeName:"listItemId",setAttributeOnDowncast(t,e,n,i){i&&(i.skipListItemIds||i.isClipboardPipeline)||t.setAttribute("data-list-item-id",e,n)}})}}function dA(t,e,n,i){const o=t.document.differ.getChanges(),r=new Set,s=new Set,a=i.editor.config.get("list.multiBlock");let l=!1;for(const u of o){if("insert"==u.type&&"$text"!=u.name){const i=u.position.nodeAfter;if(!t.schema.checkAttribute(i,"listItemId"))for(const t of Array.from(i.getAttributeKeys()))n.includes(t)&&(e.removeAttribute(t,i),l=!0);GT(u.position,s,r),u.attributes.has("listItemId")||GT(u.position.getShiftedBy(u.length),s,r);for(const{item:e,previousPosition:n}of t.createRangeIn(i))nT(e)&&GT(n,s,r)}else"remove"==u.type?GT(u.position,s,r):"attribute"==u.type&&n.includes(u.attributeKey)&&(GT(u.range.start,s,r),null===u.attributeNewValue&&GT(u.range.start.getShiftedBy(1),s,r));if(!a&&"attribute"==u.type&&cA.includes(u.attributeKey)){const t=u.range.start.nodeAfter;null===u.attributeNewValue&&t&&t.is("element","listItem")?(e.rename(t,"paragraph"),l=!0):null===u.attributeOldValue&&t&&t.is("element")&&"listItem"!=t.name&&(e.rename(t,"listItem"),l=!0)}}const c=new Set;for(const u of s.values())l=i.fire("postFixer",{listNodes:new tT(u),listHead:u,writer:e,seenIds:c})||l;return l}function hA(t){return(e,[n,i])=>{const o=n.is("documentFragment")?Array.from(n.getChildren()):[n];if(!o.length)return;const r=i?t.createSelection(i):t.document.selection,s=r.getFirstPosition();let a;if(nT(s.parent))a=s.parent;else{if(!nT(s.nodeBefore)||!nT(s.nodeAfter))return;a=s.nodeBefore}t.change(t=>{const e=a.getAttribute("listType"),n=a.getAttribute("listIndent"),i=o[0].getAttribute("listIndent")||0,r=Math.max(n-i,0);for(const s of o){const n=nT(s);a.is("element","listItem")&&s.is("element","paragraph")&&t.rename(s,"listItem"),t.setAttributes({listIndent:(n?s.getAttribute("listIndent"):0)+r,listItemId:n?s.getAttribute("listItemId"):eT.next(),listType:e},s)}})}}function fA(t,e){const n=t.document.selection;if(!n.isCollapsed)return!wT(t);if("forward"===e)return!0;const i=n.getFirstPosition(),o=i.parent,r=o.previousSibling;return!t.schema.isObject(r)&&(!!r.isEmpty||mT([o,r]))}function pA(t,e,n,i){t.ui.componentFactory.add(e,()=>{const o=gA(Tb,t,e,n,i);return o.set({tooltip:!0,isToggleable:!0}),o}),t.ui.componentFactory.add(`menuBar:${e}`,()=>{const o=gA(Wb,t,e,n,i);return o.set({role:"menuitemcheckbox",isToggleable:!0}),o})}function gA(t,e,n,i,o){const r=e.commands.get(n),s=new t(e.locale);return s.set({label:i,icon:o}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.on("execute",()=>{e.execute(n),e.editing.view.focus()}),s}class mA extends Gh{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||pA(this.editor,"numberedList",t("Numbered List"),Wp),this.editor.ui.componentFactory.has("bulletedList")||pA(this.editor,"bulletedList",t("Bulleted List"),gp)}}class bA extends Gh{static get requires(){return[uA,mA]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class vA extends Yh{refresh(){const t=this._getValue();this.value=t,this.isEnabled=null!=t}execute({startIndex:t=1}={}){const e=this.editor.model,n=e.document;let i=Array.from(n.selection.getSelectedBlocks()).filter(t=>nT(t)&&yT(t.getAttribute("listType")));i=uT(i),e.change(e=>{for(const n of i)e.setAttribute("listStart",t>=0?t:1,n)})}_getValue(){const t=this.editor.model,e=t.document,n=Hn(e.selection.getSelectedBlocks());return n&&nT(n)&&yT(n.getAttribute("listType"))?n.getAttribute("listStart"):null}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const wA={},_A={},yA={},kA=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:bD,typeAttribute:vD,listType:wD}of kA)wA[bD]=wD,_A[bD]=vD,vD&&(yA[vD]=bD);function CA(){return kA.map(t=>t.listStyle)}function xA(t){return wA[t]||null}function EA(t){return yA[t]||null}function SA(t){return _A[t]||null}function TA(t){switch(t){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return t}}class AA extends Yh{defaultType;_supportedTypes;constructor(t,e,n){super(t),this.defaultType=e,this._supportedTypes=n}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.document;e.change(e=>{this._tryToConvertItemsToList(t);let i=Array.from(n.selection.getSelectedBlocks()).filter(t=>t.hasAttribute("listType"));if(i.length){i=uT(i);for(const n of i)e.setAttribute("listStyle",t.type||this.defaultType,n)}})}isStyleTypeSupported(t){return!this._supportedTypes||this._supportedTypes.includes(t)}_getValue(){const t=Hn(this.editor.model.document.selection.getSelectedBlocks());return nT(t)?t.getAttribute("listStyle"):null}_checkEnabled(){const t=this.editor,e=t.commands.get("numberedList"),n=t.commands.get("bulletedList");return e.isEnabled||n.isEnabled}_tryToConvertItemsToList(t){if(!t.type)return;const e=xA(t.type);if(!e)return;const n=this.editor,i=`${e}List`,o=n.commands.get(i);o.value||n.execute(i)}}class PA extends Yh{refresh(){const t=this._getValue();this.value=t,this.isEnabled=null!=t}execute(t={}){const e=this.editor.model,n=e.document;let i=Array.from(n.selection.getSelectedBlocks()).filter(t=>nT(t)&&"numbered"==t.getAttribute("listType"));i=uT(i),e.change(e=>{for(const n of i)e.setAttribute("listReversed",!!t.reversed,n)})}_getValue(){const t=this.editor.model,e=t.document,n=Hn(e.selection.getSelectedBlocks());return nT(n)&&"numbered"==n.getAttribute("listType")?n.getAttribute("listReversed"):null}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function IA(t){return(e,n,i)=>{const{writer:o,schema:r,consumable:s}=i;if(!1===s.test(n.viewItem,t.viewConsumables))return;n.modelRange||Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor));let a=!1;for(const l of n.modelRange.getItems({shallow:!0}))r.checkAttribute(l,t.attributeName)&&t.appliesToListItem(l)&&(l.hasAttribute(t.attributeName)||(o.setAttribute(t.attributeName,t.getAttributeOnUpcast(n.viewItem),l),a=!0));a&&s.consume(n.viewItem,t.viewConsumables)}}class RA extends Gh{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return CA()}getListTypeFromListStyleType(t){return xA(t)}getListStyleTypeFromTypeAttribute(t){return EA(t)}getTypeAttributeFromListStyleType(t){return SA(t)}}function OA(t){const{startIndex:e,reversed:n,styles:i}=t;return{styles:MA(i),startIndex:e||!1,reversed:n||!1}}function MA(t){const e={listTypes:["bulleted","numbered"],useAttribute:!1};return!0===t||(t?Array.isArray(t)||"string"==typeof t?e.listTypes=Mn(t):(e.listTypes=t.listTypes?Mn(t.listTypes):e.listTypes,e.useAttribute=!!t.useAttribute,t.listStyleTypes&&(e.listStyleTypes=t.listStyleTypes)):e.listTypes=[]),e}const DA="default";class VA extends Gh{static get requires(){return[uA,RA]}static get pluginName(){return"ListPropertiesEditing"}static get licenseFeatureCode(){return"LP"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(t){super(t),t.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const t=this.editor,e=t.model,n=t.plugins.get(uA),i=t.config.get("list.properties"),o=NA(i);for(const r of o)r.addCommand(t),e.schema.extend("$listItem",{allowAttributes:r.attributeName}),n.registerDowncastStrategy({scope:"list",attributeName:r.attributeName,setAttributeOnDowncast(t,e,n){r.setAttributeOnDowncast(t,e,n)}});t.conversion.for("upcast").add(t=>{for(const e of o)t.on("element:ol",IA(e)),t.on("element:ul",IA(e))}),n.on("checkAttributes:list",(t,{viewElement:e,modelAttributes:n,modelReferenceElement:i})=>{for(const r of o)r.appliesToListItem(i)&&r.getAttributeOnUpcast(e)!=n[r.attributeName]&&(t.return=!0,t.stop())}),this.listenTo(t.commands.get("indentList"),"afterExecute",(t,n)=>{e.change(t=>{for(const e of n)for(const n of o)n.appliesToListItem(e)&&t.setAttribute(n.attributeName,n.defaultValue,e)})}),n.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:i}of e)for(const e of o)e.hasValidAttribute(i)||(e.appliesToListItem(i)?n.setAttribute(e.attributeName,e.defaultValue,i):n.removeAttribute(e.attributeName,i),t.return=!0)}),n.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:i,previousNodeInList:r}of e)if(r&&r.getAttribute("listType")==i.getAttribute("listType"))for(const e of o){const{attributeName:o}=e;if(!e.appliesToListItem(i))continue;const s=r.getAttribute(o);i.getAttribute(o)!=s&&(n.setAttribute(o,s,i),t.return=!0)}})}}function NA(t){const e=[],n=OA(t);if(t.styles){const t=n.styles.useAttribute;e.push({attributeName:"listStyle",defaultValue:DA,viewConsumables:{styles:"list-style-type"},addCommand(e){let n=CA();t&&(n=n.filter(t=>!!SA(t))),e.commands.add("listStyle",new AA(e,DA,n))},appliesToListItem(t){return"numbered"==t.getAttribute("listType")||"bulleted"==t.getAttribute("listType")},hasValidAttribute(t){if(!this.appliesToListItem(t))return!t.hasAttribute("listStyle");if(!t.hasAttribute("listStyle"))return!1;const e=t.getAttribute("listStyle");return e==DA||xA(e)==t.getAttribute("listType")},setAttributeOnDowncast(e,n,i){if(n&&n!==DA){if(!t)return void e.setStyle("list-style-type",n,i);{const t=SA(n);if(t)return void e.setAttribute("type",t,i)}}e.removeStyle("list-style-type",i),e.removeAttribute("type",i)},getAttributeOnUpcast(t){const e=t.getStyle("list-style-type");if(e)return TA(e);const n=t.getAttribute("type");return n?EA(n):DA}})}return t.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(t){t.commands.add("listReversed",new PA(t))},appliesToListItem(t){return"numbered"==t.getAttribute("listType")},hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listReversed")},setAttributeOnDowncast(t,e,n){e?t.setAttribute("reversed","reversed",n):t.removeAttribute("reversed",n)},getAttributeOnUpcast(t){return t.hasAttribute("reversed")}}),t.startIndex&&e.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(t){t.commands.add("listStart",new vA(t))},appliesToListItem(t){return yT(t.getAttribute("listType"))},hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listStart")},setAttributeOnDowncast(t,e,n){0==e||e>1?t.setAttribute("start",e,n):t.removeAttribute("start",n)},getAttributeOnUpcast(t){const e=t.getAttribute("start");return e>=0?e:1}}),e}class LA extends db{children;stylesView=null;additionalPropertiesCollapsibleView=null;startIndexFieldView=null;reversedSwitchButtonView=null;focusTracker=new Wn;keystrokes=new Gn;focusables=new Dm;focusCycler;constructor(t,{enabledProperties:e,styleButtonViews:n,styleGridAriaLabel:i}){super(t);const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Ib({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),n&&n.length?(this.stylesView=this._createStylesView(n,i),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(e.startIndex||e.reversed)&&(this._addNumberedListPropertyViews(e),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);_b({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>Q.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,e){const n=new db(this.locale);return n.children=n.createCollection(),n.children.addMany(t),n.setTemplate({tag:"div",attributes:{"aria-label":e,class:["ck","ck-list-styles-list"]},children:n.children}),n.children.delegate("execute").to(this),n.focus=function(){for(const t of this.children)if(t instanceof Tb&&t.isOn)return void t.focus();this.children.first.focus()},n.focusTracker=new Wn,n.keystrokes=new Gn,n.render(),n.keystrokes.listenTo(n.element),n}_addNumberedListPropertyViews(t){const e=this.locale.t,n=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),n.push(this.startIndexFieldView)),t.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),n.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new cv(this.locale,n),this.additionalPropertiesCollapsibleView.set({label:e("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(n,"isEnabled",(...t)=>t.some(t=>t)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(t,e,n)=>{n||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(n)}_createStartIndexField(){const t=this.locale.t,e=new yv(this.locale,aw);return e.set({label:t("Start at"),class:"ck-numbered-list-properties__start-index"}),e.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),e.fieldView.on("input",()=>{const n=e.fieldView.element,i=n.valueAsNumber;Number.isNaN(i)?e.errorText=t("Invalid start index value."):n.checkValidity()?this.fire("listStart",{startIndex:i}):e.errorText=t("Start index must be greater than 0.")}),e}_createReversedSwitchButton(){const t=this.locale.t,e=new ov(this.locale);return e.set({withText:!0,label:t("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),e.delegate("execute").to(this,"listReversed"),e}}class BA extends Gh{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=t.config.get("list.properties"),i=OA(n),o=i.styles.listTypes;if(o.includes("bulleted")){const n=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:Dp},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:Rp},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:Lp}],o=e("Bulleted List"),r=e("Bulleted list styles toolbar"),s="bulletedList";t.ui.componentFactory.add(s,FA({editor:t,normalizedConfig:i,parentCommandName:s,buttonLabel:o,buttonIcon:gp,styleGridAriaLabel:r,styleDefinitions:n})),t.ui.componentFactory.add(`menuBar:${s}`,WA({editor:t,normalizedConfig:i,parentCommandName:s,buttonLabel:o,styleGridAriaLabel:r,styleDefinitions:n}))}if(o.includes("numbered")||n.startIndex||n.reversed){const n=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:Mp},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:Op},{label:e("Toggle the lowerâroman list style"),tooltip:e("Lowerâroman"),type:"lower-roman",icon:Np},{label:e("Toggle the upperâroman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:Fp},{label:e("Toggle the lowerâlatin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:Vp},{label:e("Toggle the upperâlatin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:Bp}],r=e("Numbered List"),s=e("Numbered list styles toolbar"),a="numberedList";t.ui.componentFactory.add(a,FA({editor:t,normalizedConfig:i,parentCommandName:a,buttonLabel:r,buttonIcon:Wp,styleGridAriaLabel:s,styleDefinitions:n})),o.includes("numbered")&&t.ui.componentFactory.add(`menuBar:${a}`,WA({editor:t,normalizedConfig:i,parentCommandName:a,buttonLabel:r,styleGridAriaLabel:s,styleDefinitions:n}))}}}function FA({editor:t,normalizedConfig:e,parentCommandName:n,buttonLabel:i,buttonIcon:o,styleGridAriaLabel:r,styleDefinitions:s}){const a=t.commands.get(n);return l=>{const c=$v(l,jv),u=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",u.on("execute",()=>{t.execute(n),t.editing.view.focus()}),u.set({label:i,icon:o,tooltip:!0,isToggleable:!0}),u.bind("isOn").to(a,"value",t=>!!t),c.once("change:isOpen",()=>{const i=HA({editor:t,normalizedConfig:e,dropdownView:c,parentCommandName:n,styleGridAriaLabel:r,styleDefinitions:s});c.panelView.children.add(i)}),c.on("execute",()=>{t.editing.view.focus()}),c}}function zA({editor:t,listStyleCommand:e,parentCommandName:n}){const i=t.locale,o=t.commands.get(n);return({label:r,type:s,icon:a,tooltip:l})=>{const c=new Tb(i);return c.set({label:r,icon:a,tooltip:l}),c.bind("isOn").to(e,"value",t=>t===s),c.on("execute",()=>{o.value?e.value===s?t.execute(n):e.value!==s&&t.execute("listStyle",{type:s}):t.model.change(()=>{t.execute("listStyle",{type:s})})}),c}}function HA({editor:t,normalizedConfig:e,dropdownView:n,parentCommandName:i,styleDefinitions:o,styleGridAriaLabel:r}){const s=t.locale,a={...e,..."numberedList"!=i?{startIndex:!1,reversed:!1}:null},l=i.replace("List","");let c=null;if(e.styles.listTypes.includes(l)){const n=t.commands.get("listStyle"),r=zA({editor:t,parentCommandName:i,listStyleCommand:n}),s=e.styles.listStyleTypes;let a=o;if(s){const t=s[l];t&&(a=o.filter(e=>t.includes(e.type)))}const u=jA(n);c=a.filter(u).map(r)}const u=new LA(s,{styleGridAriaLabel:r,enabledProperties:a,styleButtonViews:c});if(e.styles.listTypes.includes(l)&&Yv(n,()=>u.stylesView.children.find(t=>t.isOn)),a.startIndex){const e=t.commands.get("listStart");u.startIndexFieldView.bind("isEnabled").to(e),u.startIndexFieldView.fieldView.bind("value").to(e),u.on("listStart",(e,n)=>t.execute("listStart",n))}if(a.reversed){const e=t.commands.get("listReversed");u.reversedSwitchButtonView.bind("isEnabled").to(e),u.reversedSwitchButtonView.bind("isOn").to(e,"value",t=>!!t),u.on("listReversed",()=>{const n=e.value;t.execute("listReversed",{reversed:!n})})}return u.delegate("execute").to(n),u}function WA({editor:t,normalizedConfig:e,parentCommandName:n,buttonLabel:i,styleGridAriaLabel:o,styleDefinitions:r}){return s=>{const a=new g_(s),l=t.commands.get(n),c=t.commands.get("listStyle"),u=jA(c),d=zA({editor:t,parentCommandName:n,listStyleCommand:c}),h=e.styles.listStyleTypes;let f=r;if(h){const t=l.type,e=h[t];e&&(f=r.filter(t=>e.includes(t.type)))}const p=f.filter(u).map(d),g=new LA(s,{styleGridAriaLabel:o,enabledProperties:{...e,startIndex:!1,reversed:!1},styleButtonViews:p});return g.delegate("execute").to(a),a.buttonView.set({label:i,icon:"bulletedList"===n?gp:Wp}),a.panelView.children.add(g),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{t.editing.view.focus()}),a}}function jA(t){return"function"==typeof t.isStyleTypeSupported?e=>t.isStyleTypeSupported(e.type):()=>!0}class $A extends Gh{static get requires(){return[VA,BA]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class UA extends Yh{constructor(t){super(t),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const t=this._getSelectedItems();this.value=this._getValue(t),this.isEnabled=!!t.length}execute(t={}){this.editor.model.change(e=>{const n=this._getSelectedItems(),i=void 0===t.forceValue?!this._getValue(n):t.forceValue;for(const t of n)i?e.setAttribute("todoListChecked",!0,t):e.removeAttribute("todoListChecked",t)})}_getValue(t){return t.every(t=>t.getAttribute("todoListChecked"))}_getSelectedItems(){const t=this.editor.model,e=t.schema,n=t.document.selection.getFirstRange(),i=n.start.parent,o=[];e.checkAttribute(i,"todoListChecked")&&o.push(...iT(i));for(const r of n.getItems({shallow:!0}))e.checkAttribute(r,"todoListChecked")&&!o.includes(r)&&o.push(...iT(r));return o}}class qA extends ys{domEventType=["change"];onDomEvent(t){if(t.target){const e=this.view.domConverter.mapDomToView(t.target);e&&e.is("element","input")&&"checkbox"==e.getAttribute("type")&&e.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",t)}}}const GA=Cn("Ctrl+Enter");class KA extends Gh{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[uA]}init(){const t=this.editor,e=t.model,n=t.editing,i=t.plugins.get(uA),o=t.config.get("list.multiBlock"),r=o?"paragraph":"listItem";t.commands.add("todoList",new ET(t,"todo")),t.commands.add("checkTodoList",new UA(t)),n.view.addObserver(qA),e.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId")||"todo"!=e.getAttribute("listType"))return!1},"todoListChecked"),t.conversion.for("upcast").add(t=>{t.on("element:input",XA()),t.on("element:li",YA(),{priority:"low"}),t.on("element:label",JA({name:"label",classes:"todo-list__label"})),t.on("element:label",JA({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),t.on("element:span",JA({name:"span",classes:"todo-list__label__description"})),t.on("element:ul",ZA({name:"ul",classes:"todo-list"}))}),t.conversion.for("downcast").elementToElement({model:r,view:(t,{writer:e})=>{if(QA(t,i.getListAttributeNames()))return e.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),i.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(t,e,n){"todo"==e?t.addClass("todo-list",n):t.removeClass("todo-list",n)}}),i.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(t,e,{dataPipeline:n}){if("todo"!=e.getAttribute("listType"))return null;const i=t.createUIElement("input",{type:"checkbox",...e.getAttribute("todoListChecked")?{checked:"checked"}:null,...n?{disabled:"disabled"}:{tabindex:"-1"}});if(n)return i;const o=t.createContainerElement("span",{contenteditable:"false"},i);return o.getFillerOffset=()=>null,o},canWrapElement(t){return QA(t,i.getListAttributeNames())},createWrapperElement(t,e,{dataPipeline:n}){const o=["todo-list__label"];return QA(e,i.getListAttributeNames())||o.push("todo-list__label_without-description"),t.createAttributeElement(n?"label":"span",{class:o.join(" ")})}}),i.on("checkElement",(t,{modelElement:e,viewElement:n})=>{const o=QA(e,i.getListAttributeNames()),r=n.hasClass("todo-list__label__description");r!=o&&(t.return=!0,t.stop())}),i.on("checkElement",(e,{modelElement:n,viewElement:i})=>{const o="todo"==n.getAttribute("listType")&&aT(n);let r=!1;const s=t.editing.view.createPositionBefore(i).getWalker({direction:"backward"});for(const{item:a}of s){if(a.is("element")&&t.editing.mapper.toModelElement(a))break;a.is("element","input")&&"checkbox"==a.getAttribute("type")&&(r=!0)}r!=o&&(e.return=!0,e.stop())}),i.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:i,previousNodeInList:o}of e){if(!o)continue;if(o.getAttribute("listItemId")!=i.getAttribute("listItemId"))continue;const e=o.hasAttribute("todoListChecked"),r=i.hasAttribute("todoListChecked");r&&!e?(n.removeAttribute("todoListChecked",i),t.return=!0):!r&&e&&(n.setAttribute("todoListChecked",!0,i),t.return=!0)}}),e.document.registerPostFixer(t=>{const n=e.document.differ.getChanges();let i=!1;for(const e of n)if("attribute"==e.type&&"listType"==e.attributeKey){const n=e.range.start.nodeAfter;"todo"==e.attributeOldValue&&n.hasAttribute("todoListChecked")&&(t.removeAttribute("todoListChecked",n),i=!0)}else if("insert"==e.type&&"$text"!=e.name)for(const{item:n}of t.createRangeOn(e.position.nodeAfter))n.is("element")&&"todo"!=n.getAttribute("listType")&&n.hasAttribute("todoListChecked")&&(t.removeAttribute("todoListChecked",n),i=!0);return i}),this.listenTo(n.view.document,"keydown",(e,n)=>{kn(n)===GA&&(t.execute("checkTodoList"),e.stop())},{priority:"high"}),this.listenTo(n.view.document,"todoCheckboxChange",(t,e)=>{const i=e.target;if(!i||!i.is("element","input"))return;const o=n.view.createPositionAfter(i),r=n.mapper.toModelPosition(o),s=r.parent;s&&nT(s)&&"todo"==s.getAttribute("listType")&&this._handleCheckmarkChange(s)}),this.listenTo(n.view.document,"arrowKey",eP(e,t.locale),{context:"$text"}),this.listenTo(n.mapper,"viewToModelPosition",(t,n)=>{const i=n.viewPosition.parent,o=i.is("attributeElement","li")&&0==n.viewPosition.offset,r=nP(i)&&n.viewPosition.offset<=1,s=i.is("element","span")&&"false"==i.getAttribute("contenteditable")&&nP(i.parent);if(!o&&!r&&!s)return;const a=n.modelPosition.nodeAfter;a&&"todo"==a.getAttribute("listType")&&(n.modelPosition=e.createPositionAt(a,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(t){const e=this.editor,n=e.model,i=Array.from(n.document.selection.getRanges());n.change(n=>{n.setSelection(t,"end"),e.execute("checkTodoList"),n.setSelection(i)})}_initAriaAnnouncements(){const{model:t,ui:e,t:n}=this.editor;let i=null;e&&t.document.selection.on("change:range",()=>{const o=t.document.selection.focus.parent,r=iP(i),s=iP(o);r&&!s?e.ariaLiveAnnouncer.announce(n("Leaving a to-do list")):!r&&s&&e.ariaLiveAnnouncer.announce(n("Entering a to-do list")),i=o})}}function YA(){return(t,e,n)=>{const{writer:i,schema:o}=n;if(!e.modelRange)return;const r=Array.from(e.modelRange.getItems({shallow:!0})).filter(t=>"todo"===t.getAttribute("listType")&&o.checkAttribute(t,"listItemId")).reduce((t,e)=>{const n=e.getAttribute("listItemId");return t.has(n)||t.set(n,iT(e)),t},new Map);for(const[,s]of r.entries())if(s.some(t=>t.getAttribute("todoListChecked")))for(const t of s)i.setAttribute("todoListChecked",!0,t)}}function XA(){return(t,e,n)=>{const i=e.modelCursor,o=i.parent,r=e.viewItem;if(!n.consumable.test(r,{name:!0}))return;if("checkbox"!=r.getAttribute("type")||!i.isAtStart||!o.hasAttribute("listType"))return;n.consumable.consume(r,{name:!0});const s=n.writer;s.setAttribute("listType","todo",o),e.viewItem.hasAttribute("checked")&&s.setAttribute("todoListChecked",!0,o),e.modelRange=s.createRange(i)}}function JA(t){const e=new Co(t);return(t,n,i)=>{const o=e.match(n.viewItem);o&&i.consumable.consume(n.viewItem,o.match)&&Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor))}}function ZA(t){const e=new Co(t);return(t,n,i)=>{const o=e.match(n.viewItem);if(!o)return;const r=o.match;r.name=!1,i.consumable.consume(n.viewItem,r)}}function QA(t,e){return(t.is("element","paragraph")||t.is("element","listItem"))&&"todo"==t.getAttribute("listType")&&aT(t)&&tP(t,e)}function tP(t,e){for(const n of t.getAttributeKeys())if(!n.startsWith("selection:")&&!e.includes(n))return!1;return!0}function eP(t,e){return(n,i)=>{const o=Sn(i.keyCode,e.contentLanguageDirection),r=t.schema,s=t.document.selection;if(!s.isCollapsed)return;const a=s.getFirstPosition(),l=a.parent;if("right"==o&&a.isAtEnd){const e=r.getNearestSelectionRange(t.createPositionAfter(l),"forward");if(!e)return;const o=e.start.parent;o&&nT(o)&&"todo"==o.getAttribute("listType")&&(t.change(t=>t.setSelection(e)),i.preventDefault(),i.stopPropagation(),n.stop())}else if("left"==o&&a.isAtStart&&nT(l)&&"todo"==l.getAttribute("listType")){const e=r.getNearestSelectionRange(t.createPositionBefore(l),"backward");if(!e)return;t.change(t=>t.setSelection(e)),i.preventDefault(),i.stopPropagation(),n.stop()}}}function nP(t){return!!t&&t.is("attributeElement")&&t.hasClass("todo-list__label")}function iP(t){return!!t&&(!(!t.is("element","paragraph")&&!t.is("element","listItem"))&&"todo"==t.getAttribute("listType"))}class oP extends Gh{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;pA(this.editor,"todoList",t("To-do List"),kg)}}class rP extends Gh{static get requires(){return[KA,oP]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}_n.arrowup,_n.arrowdown,_n.esc,_n.enter,_n.tab;
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function sP(t,e){const n=[];for(const i of e.createRangeIn(t)){const t=i.item;t.is("element","a")&&!t.hasAttribute("href")&&(t.hasAttribute("id")||t.hasAttribute("name"))&&n.push(t)}for(const i of n){const t=i.parent.getChildIndex(i)+1,n=i.getChildren();e.insertChild(t,n,i.parent)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aP(t){const e=parseFloat(t);return t.endsWith("pt")?cP(96*e/72):t.endsWith("pc")?cP(12*e*96/72):t.endsWith("in")?cP(96*e):t.endsWith("cm")?cP(96*e/2.54):t.endsWith("mm")?cP(e/10*96/2.54):t}function lP(t){return void 0!==t&&t.endsWith("px")}function cP(t){return Math.round(t)+"px"}function uP(t,e,n){if(!t.childCount)return;const i=new bd(t.document),o=hP(t,i);if(!o.length)return;const r={},s=[];for(const a of o)if(void 0!==a.indent){fP(a)||(s.length=0);const t=`${a.id}:${a.indent}`,o=Math.min(a.indent-1,s.length);if(o<s.length&&s[o].id!==a.id&&(s.length=o),o<s.length-1)s.length=o+1;else{const l=gP(a,e);if(o>s.length-1||s[o].listElement.name!=l.type){0==o&&"ol"==l.type&&void 0!==a.id&&r[t]&&(l.startIndex=r[t]);const e=wP(l,i,n);if(lP(a.marginLeft)&&(0==o||lP(s[o-1].marginLeft))){let t=a.marginLeft;o>0&&(t=cP(parseFloat(t)-parseFloat(s[o-1].marginLeft))),i.setStyle("padding-left",t,e)}if(0==s.length){const t=a.element.parent,n=t.getChildIndex(a.element)+1;i.insertChild(n,e,t)}else{const t=s[o-1].listItemElements;i.appendChild(e,t[t.length-1])}s[o]={...a,listElement:e,listItemElements:[]},0==o&&void 0!==a.id&&(r[t]=l.startIndex||1)}}const l="li"==a.element.name?a.element:i.createElement("li");i.appendChild(l,s[o].listElement),s[o].listItemElements.push(l),0==o&&void 0!==a.id&&r[t]++,a.element!=l&&i.appendChild(a.element,l),yP(a.element,i),i.removeStyle("text-indent",a.element),i.removeStyle("margin-left",a.element)}else{const t=s.find(t=>t.marginLeft==a.marginLeft);if(t){const e=t.listItemElements;i.appendChild(a.element,e[e.length-1]),i.removeStyle("margin-left",a.element)}else s.length=0}}function dP(t,e){for(const n of e.createRangeIn(t)){const t=n.item;if(t.is("element","li")){const n=t.getChild(0);n&&n.is("element","p")&&e.unwrapElement(n)}}}function hP(t,e){const n=e.createRangeIn(t),i=[],o=new Set;for(const r of n.getItems()){if(!r.is("element")||!r.name.match(/^(p|h\d+|li|div)$/))continue;let t=kP(r);if(void 0===t||0!=parseFloat(t)||Array.from(r.getClassNames()).find(t=>t.startsWith("MsoList"))||(t=void 0),r.hasStyle("mso-list")&&"none"!==r.getStyle("mso-list")||void 0!==t&&o.has(t)){const e=_P(r);i.push({element:r,id:e.id,order:e.order,indent:e.indent,marginLeft:t}),void 0!==t&&o.add(t)}else o.clear()}return i}function fP(t){const e=t.element.previousSibling;if(!e){const e=t.element.parent;return pP(e)&&(!e.previousSibling||pP(e.previousSibling))}return pP(e)}function pP(t){return t.is("element","ol")||t.is("element","ul")}function gP(t,e){const n=new RegExp(`@list l${t.id}:level${t.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,o=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,r=new RegExp(`@list\\s+l${t.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),s=new RegExp(`@list l${t.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=r.exec(e),l=s.exec(e),c=a&&!l,u=n.exec(e);let d="decimal",h="ol",f=null;if(u&&u[1]){const e=i.exec(u[1]);if(e&&e[1]&&(d=e[1].trim(),h="bullet"!==d&&"image"!==d?"ol":"ul"),"bullet"===d){const e=mP(t.element);e&&(d=e)}else{const t=o.exec(u[1]);t&&t[1]&&(f=parseInt(t[1]))}c&&(h="ol")}return{type:h,startIndex:f,style:vP(d),isLegalStyleList:c}}function mP(t){if("li"==t.name&&"ul"==t.parent.name&&t.parent.hasAttribute("type"))return t.parent.getAttribute("type");const e=bP(t);if(!e)return null;const n=e._data;return"o"===n?"circle":"Â·"===n?"disc":"Â§"===n?"square":null}function bP(t){if(t.getChild(0).is("$text"))return null;for(const e of t.getChildren()){if(!e.is("element","span"))continue;const t=e.getChild(0);if(t)return t.is("$text")?t:t.getChild(0)}
/* istanbul ignore next -- @preserve */return null}function vP(t){if(t.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(t){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return t;default:return null}}function wP(t,e,n){const i=e.createElement(t.type);return t.style&&e.setStyle("list-style-type",t.style,i),t.startIndex&&t.startIndex>1&&e.setAttribute("start",t.startIndex,i),t.isLegalStyleList&&n&&e.addClass("legal-list",i),i}function _P(t){const e=t.getStyle("mso-list");if(void 0===e)return{};const n=e.match(/(^|\s{1,100})l(\d+)/i),i=e.match(/\s{0,100}lfo(\d+)/i),o=e.match(/\s{0,100}level(\d+)/i);return n&&i&&o?{id:n[2],order:i[1],indent:parseInt(o[1])}:{indent:1}}function yP(t,e){const n=new Co({name:"span",styles:{"mso-list":"Ignore"}}),i=e.createRangeIn(t);for(const o of i)"elementStart"===o.type&&n.match(o.item)&&e.remove(o.item)}function kP(t){const e=t.getStyle("margin-left");return void 0===e||e.endsWith("px")?e:aP(e)}function CP(t,e){if(!t.childCount)return;const n=new bd(t.document),i=EP(t,n);SP(i,t,n),AP(i,t,n),TP(t,n);const o=PP(t,n);o.length&&RP(o,IP(e),n)}function xP(t){return btoa(t.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function EP(t,e){const n=e.createRangeIn(t),i=new Co({name:/v:(.+)/}),o=[];for(const r of n){if("elementStart"!=r.type)continue;const t=r.item,e=t.previousSibling,n=e&&e.is("element")?e.name:null,s=["Chart"],a=i.match(t),l=t.getAttribute("o:gfxdata"),c="v:shapetype"===n,u=l&&s.some(e=>t.getAttribute("id").includes(e));a&&l&&!c&&!u&&o.push(r.item.getAttribute("id"))}return o}function SP(t,e,n){const i=n.createRangeIn(e),o=new Co({name:"img"}),r=[];for(const s of i)if(s.item.is("element")&&o.match(s.item)){const e=s.item,n=e.getAttribute("v:shapes")?e.getAttribute("v:shapes").split(" "):[];n.length&&n.every(e=>t.indexOf(e)>-1)?r.push(e):e.getAttribute("src")||r.push(e)}for(const s of r)n.remove(s)}function TP(t,e){const n=e.createRangeIn(t),i=new Co({name:/v:(.+)/}),o=[];for(const r of n)"elementStart"==r.type&&i.match(r.item)&&o.push(r.item);for(const r of o)e.remove(r)}function AP(t,e,n){const i=n.createRangeIn(e),o=[];for(const a of i)if("elementStart"==a.type&&a.item.is("element","v:shape")){const e=a.item.getAttribute("id");if(t.includes(e))continue;r(a.item.parent.getChildren(),e)||o.push(a.item)}for(const a of o){const t={src:s(a)};a.hasAttribute("alt")&&(t.alt=a.getAttribute("alt"));const e=n.createElement("img",t);n.insertChild(a.index+1,e,a.parent)}function r(t,e){for(const n of t)
/* istanbul ignore else -- @preserve */if(n.is("element")){if("img"==n.name&&n.getAttribute("v:shapes")==e)return!0;if(r(n.getChildren(),e))return!0}return!1}function s(t){for(const e of t.getChildren())
/* istanbul ignore else -- @preserve */if(e.is("element")&&e.getAttribute("src"))return e.getAttribute("src")}}function PP(t,e){const n=e.createRangeIn(t),i=new Co({name:"img"}),o=[];let r=0;for(const s of n)s.item.is("element")&&i.match(s.item)&&(s.item.getAttribute("src").startsWith("file://")&&o.push({element:s.item,imageIndex:r}),r++);return o}function IP(t){if(!t)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),i=t.match(n),o=[];if(i)for(const r of i){let t=!1;r.includes("\\pngblip")?t="image/png":r.includes("\\jpegblip")&&(t="image/jpeg"),t&&o.push({hex:r.replace(e,"").replace(/[^\da-fA-F]/g,""),type:t})}return o}function RP(t,e,n){for(let i=0;i<t.length;i++){const{element:o,imageIndex:r}=t[i],s=e[r];if(s){const t=`data:${s.type};base64,${xP(s.hex)}`;n.setAttribute("src",t,o)}}}function OP(t){const e=[],n=new bd(t.document);for(const{item:i}of n.createRangeIn(t))if(i.is("element")){for(const t of i.getClassNames())/\bmso/gi.exec(t)&&n.removeClass(t,i);for(const t of i.getStyleNames())/\bmso/gi.exec(t)&&n.removeStyle(t,i);(i.is("element","w:sdt")||i.is("element","w:sdtpr")&&i.isEmpty||i.is("element","o:p")&&i.isEmpty)&&e.push(i)}for(const i of e){const t=i.parent,e=t.getChildIndex(i);n.insertChild(e,i.getChildren(),t),n.remove(i)}}function MP(t,e){for(const n of e.createRangeIn(t).getItems()){if(!n.is("element","table")&&!n.is("element","td")&&!n.is("element","th"))continue;const t=["left","top","right","bottom"];if(t.every(t=>!n.hasStyle(`border-${t}-style`)))e.setStyle("border-style","none",n);else for(const o of t)n.hasStyle(`border-${o}-style`)||e.setStyle(`border-${o}-style`,"none",n);const i=["width","height",...t.map(t=>`border-${t}-width`),...t.map(t=>`padding-${t}`)];for(const o of i)n.hasStyle(o)&&e.setStyle(o,aP(n.getStyle(o)),n)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function DP(t,e){for(const n of e.createRangeIn(t).getItems())n.is("element","table")&&("0px"===n.getStyle("width")&&e.removeStyle("width",n),"0"===n.getAttribute("width")&&e.removeAttribute("width",n))}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function VP(t,e){const n=new Map,i=new Map;let o=null;for(const{item:s}of e.createRangeIn(t))if(s.is("element"))if("footnote-list"!==s.getStyle("mso-element")){if(s.hasStyle("mso-footnote-id")){const t=s.findAncestor("element",t=>"footnote"===t.getStyle("mso-element"));if(t){const e=t.getAttribute("id");i.set(e,t)}else{const t=s.getStyle("mso-footnote-id");n.set(t,s)}continue}}else o=s;if(!n.size||!o)return;const r=LP(e);e.replace(o,r);for(const[s,a]of n){const t=i.get(s);if(!t)continue;e.replace(a,BP(e,s));const n=FP(e,s);NP(e,t);for(const i of t.getChildren()){let t=i;i.is("element")&&(t=e.clone(i,!0)),e.appendChild(t,n.content)}e.appendChild(n.listItem,r)}}function NP(t,e){const n=[],i=[];for(const{item:o}of t.createRangeIn(e))if(o.is("element")&&o.getStyle("mso-footnote-id")){n.unshift(o);const{nextSibling:t}=o;t?.is("$text")&&t.data.startsWith(" ")&&i.unshift(t)}for(const o of n)t.remove(o);for(const o of i){const e=o.data.substring(1);if(e.length>0){const n=o.parent,i=n.getChildIndex(o),r=t.createText(e);t.remove(o),t.insertChild(i,r,n)}else t.remove(o)}return e}function LP(t){return t.createElement("ol",{class:"footnotes"})}function BP(t,e){const n=t.createElement("sup",{class:"footnote"}),i=t.createElement("a",{id:`ref-${e}`,href:`#${e}`});return t.appendChild(i,n),n}function FP(t,e){const n=t.createElement("li",{id:e,class:"footnote-definition"}),i=t.createElement("a",{href:`#ref-${e}`,class:"footnote-backlink"}),o=t.createElement("div",{class:"footnote-content"});return t.appendChild(t.createText("^"),i),t.appendChild(i,n),t.appendChild(o,n),{listItem:n,content:o}}const zP=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,HP=/xmlns:o="urn:schemas-microsoft-com/i;class WP{document;hasMultiLevelListPlugin;constructor(t,e=!1){this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return zP.test(t)||HP.test(t)}execute(t){const e=new bd(this.document),{body:n,stylesString:i}=t._parsedData;sP(n,e),uP(n,i,this.hasMultiLevelListPlugin),CP(n,t.dataTransfer.getData("text/rtf")),MP(n,e),DP(n,e),VP(n,e),OP(n),t.content=n}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jP(t,e){for(const n of t.getChildren())if(n.is("element","b")&&"normal"===n.getStyle("font-weight")){const i=t.getChildIndex(n);e.remove(n),e.insertChild(i,n.getChildren(),t)}}function $P(t,e){const n=new dr(e.document.stylesProcessor),i=new ls(n,{renderingMode:"data"}),o=i.blockElements,r=i.inlineObjectElements,s=[];for(const a of e.createRangeIn(t)){const t=a.item;if(t.is("element","br")){const n=UP(t,"forward",e,{blockElements:o,inlineObjectElements:r}),i=UP(t,"backward",e,{blockElements:o,inlineObjectElements:r}),a=qP(n,o),l=qP(i,o);(l||a)&&s.push(t)}}for(const a of s)a.hasClass("Apple-interchange-newline")?e.remove(a):e.replace(a,e.createElement("p"))}function UP(t,e,n,{blockElements:i,inlineObjectElements:o}){let r=n.createPositionAt(t,"forward"==e?"after":"before");return r=r.getLastMatchingPosition(({item:t})=>t.is("element")&&!i.includes(t.name)&&!o.includes(t.name),{direction:e}),"forward"==e?r.nodeAfter:r.nodeBefore}function qP(t,e){return!!t&&t.is("element")&&e.includes(t.name)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function GP(t,e,n){const i=new Set;for(const o of e.createRangeIn(t).getItems())o.is("view:$textProxy")&&o.data.includes("\t")&&KP(o.parent)&&i.add(o.textNode);for(const o of i)YP(o,e,n)}function KP(t){let e=t;while(e){if(e.is("element")){const t=e.getStyle?.("white-space");if("pre-wrap"===t)return!0}e=e.parent}return!1}function YP(t,e,n){const{parent:i,data:o}=t,r=o.replaceAll("\t"," ".repeat(n)),s=i.getChildIndex(t);e.remove(t),e.insertChild(s,e.createText(r),i)}const XP=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class JP{document;constructor(t){this.document=t}isActive(t){return XP.test(t)}execute(t){const e=new bd(this.document),{body:n}=t._parsedData;jP(n,e),dP(n,e),$P(n,e),GP(n,e,8),t.content=n}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ZP(t,e){for(const n of t.getChildren())n.is("element","table")&&n.hasAttribute("xmlns")&&e.removeAttribute("xmlns",n)}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function QP(t,e){for(const n of t.getChildren())if(n.is("element","google-sheets-html-origin")){const i=t.getChildIndex(n);e.remove(n),e.insertChild(i,n.getChildren(),t)}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tI(t,e){for(const n of Array.from(t.getChildren()))n.is("element","style")&&e.remove(n)}const eI=/<google-sheets-html-origin/i;class nI{document;constructor(t){this.document=t}isActive(t){return eI.test(t)}execute(t){const e=new bd(this.document),{body:n}=t._parsedData;QP(n,e),ZP(n,e),DP(n,e),tI(n,e),t.content=n}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function iI(t){return rI(rI(t)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g,"Â </").replace(/ <o:p><\/o:p>/g,"Â <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function oI(t){t.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,n=e.innerText.length||0;e.innerText=Array(n+1).join("Â  ").substr(0,n)})}function rI(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>1===e.length?" ":Array(e.length+1).join("Â  ").substr(0,e.length))}function sI(t,e){const n=new DOMParser;t=t.replace(/<!--\[if gte vml 1]>/g,""),t=t.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const i=iI(cI(t)),o=n.parseFromString(i,"text/html");oI(o);const r=o.body.innerHTML,s=aI(o,e),a=lI(o);return{body:s,bodyString:r,styles:a.styles,stylesString:a.stylesString}}function aI(t,e){const n=new dr(e),i=new ls(n,{renderingMode:"data"}),o=t.createDocumentFragment(),r=t.body.childNodes;while(r.length>0)o.appendChild(r[0]);return i.domToView(o,{skipComments:!0})}function lI(t){const e=[],n=[],i=Array.from(t.getElementsByTagName("style"));for(const o of i)o.sheet&&o.sheet.cssRules&&o.sheet.cssRules.length&&(e.push(o.sheet),n.push(o.innerHTML));return{styles:e,stylesString:n.join(" ")}}function cI(t){const e="</body>",n="</html>",i=t.indexOf(e);if(i<0)return t;const o=t.indexOf(n,i+e.length);return t.substring(0,i+e.length)+(o>=0?t.substring(o):"")}class uI extends Gh{static get pluginName(){return"PasteFromOffice"}static get licenseFeatureCode(){return"PFO"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[Dk]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),n=t.editing.view.document,i=[],o=this.editor.plugins.has("MultiLevelList");i.push(new WP(n,o)),i.push(new JP(n)),i.push(new nI(n)),e.on("inputTransformation",(e,o)=>{if(o._isTransformedWithPasteFromOffice)return;const r=t.model.document.selection.getFirstPosition().parent;if(r.is("element","codeBlock"))return;const s=o.dataTransfer.getData("text/html"),a=i.find(t=>t.isActive(s));a&&(o._parsedData||(o._parsedData=sI(s,n.stylesProcessor)),a.execute(o),o._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function dI(t,e){const{modelAttribute:n,styleName:i,attributeName:o,attributeType:r,viewElement:s,defaultValue:a,shouldUpcast:l=()=>!0,reduceBoxSides:c=!1}=e;t.for("upcast").attributeToAttribute({view:{name:s,styles:{[i]:/[\s\S]+/}},model:{key:n,value:(t,e,n)=>{if(!l(t))return;const o=gI(a,"",n),r=t.getNormalizedStyle(i),s=c?mI(r):r;if(o!==s)return s;e.consumable.consume(t,{styles:i})}}}),o&&t.for("upcast").attributeToAttribute({view:{name:s,attributes:{[o]:/.+/}},model:{key:n,value:(t,e,n)=>{if("figure"==t.name||t.hasStyle(i)||"table"==t.name&&"figure"==t.parent.name&&t.parent.hasStyle(i))return;const s=gI(a,"",n);let l=t.getAttribute(o);if(l&&"length"==r&&!l.endsWith("px")&&(l+="px"),s!==l)return l;e.consumable.consume(t,{attributes:o})}}})}function hI(t,e,n,i){t.for("upcast").add(t=>t.on("element:"+e,(t,e,o)=>{if(!e.modelRange)return;const r=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(t=>e.viewItem.hasStyle(t));if(!r.length)return;const s={styles:r};if(!o.consumable.test(e.viewItem,s))return;const a=[...e.modelRange.getItems({shallow:!0})].pop(),l=a.findAncestor("table",{includeSelf:!0});let c=i;l&&"layout"==l.getAttribute("tableType")&&(c={style:"none",color:"",width:""}),o.consumable.consume(e.viewItem,s);const u={style:e.viewItem.getNormalizedStyle("border-style"),color:e.viewItem.getNormalizedStyle("border-color"),width:e.viewItem.getNormalizedStyle("border-width")},d={style:mI(u.style),color:mI(u.color),width:mI(u.width)};d.style!==c.style&&o.writer.setAttribute(n.style,d.style,a),d.color!==c.color&&o.writer.setAttribute(n.color,d.color,a),d.width!==c.width&&o.writer.setAttribute(n.width,d.width,a)}))}function fI(t,e){const{modelElement:n,modelAttribute:i,styleName:o}=e;t.for("downcast").attributeToAttribute({model:{name:n,key:i},view:t=>({key:"style",value:{[o]:t}})})}function pI(t,e){const{modelAttribute:n,styleName:i}=e;t.for("downcast").add(t=>t.on(`attribute:${n}:table`,(t,e,n)=>{const{item:o,attributeNewValue:r}=e,{mapper:s,writer:a}=n;if(!n.consumable.consume(e.item,t.name))return;const l=[...s.toViewElement(o).getChildren()].find(t=>t.is("element","table"));r?a.setStyle(i,r,l):a.removeStyle(i,l)}))}function gI(t,e,n){const i=n.modelRange&&Hn(n.modelRange.getItems({shallow:!0})),o=i&&i.is("element")&&i.findAncestor("table",{includeSelf:!0});return o&&"layout"===o.getAttribute("tableType")?e:t}function mI(t){if(!t)return;const e=["top","right","bottom","left"],n=e.every(e=>t[e]);if(!n)return t;const i=t.top,o=e.every(e=>t[e]===i);return o?i:t}function bI(t,e,n,i,o=1){void 0!==e&&null!==e&&void 0!==o&&null!==o&&e>o?i.setAttribute(t,e,n):i.removeAttribute(t,n)}function vI(t,e,n={}){const i=t.createElement("tableCell",n);return t.insertElement("paragraph",i),t.insert(i,e),i}function wI(t,e){const n=e.parent.parent,i=parseInt(n.getAttribute("headingColumns")||"0"),{column:o}=t.getCellLocation(e);return!!i&&o<i}function _I(t,e,n){const{modelAttribute:i}=n;t.extend("tableCell",{allowAttributes:[i]}),t.setAttributeProperties(i,{isFormatting:!0}),dI(e,{viewElement:/^(td|th)$/,...n}),fI(e,{modelElement:"tableCell",...n})}function yI(t){const e=t.getSelectedElement();return e&&e.is("element","table")?e:t.getFirstPosition().findAncestor("table")}function kI(){return t=>{t.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const i=SI(e.viewItem);if(!i||!n.consumable.test(i,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const o=n.convertItem(i,e.modelCursor),r=Hn(o.modelRange.getItems());if(!r||!r.is("element","table"))return n.consumable.revert(e.viewItem,{name:!0,classes:"table"}),void(o.modelRange&&!o.modelRange.isCollapsed&&(e.modelRange=o.modelRange,e.modelCursor=o.modelCursor));n.convertChildren(e.viewItem,n.writer.createPositionAt(r,"end")),n.updateConversionResult(r,e)})}}function CI(){return t=>{t.on("element:table",(t,e,n)=>{const i=e.viewItem;if(!n.consumable.test(i,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:s}=TI(i),a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);const l=n.writer.createElement("table",a);if(n.safeInsert(l,e.modelCursor)){if(n.consumable.consume(i,{name:!0}),o.forEach(t=>n.convertItem(t,n.writer.createPositionAt(l,"end"))),n.convertChildren(i,n.writer.createPositionAt(l,"end")),l.isEmpty){const t=n.writer.createElement("tableRow");n.writer.insert(t,n.writer.createPositionAt(l,"end")),vI(n.writer,n.writer.createPositionAt(t,"end"))}n.updateConversionResult(l,e)}})}}function xI(){return t=>{t.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&0==e.modelCursor.index&&t.stop()},{priority:"high"})}}function EI(t){return e=>{e.on(`element:${t}`,(t,e,{writer:n})=>{if(!e.modelRange)return;const i=e.modelRange.start.nodeAfter,o=n.createPositionAt(i,0);if(e.viewItem.isEmpty)return void n.insertElement("paragraph",o);const r=Array.from(i.getChildren());if(r.every(t=>t.is("element","$marker"))){const t=n.createElement("paragraph");n.insert(t,n.createPositionAt(i,0));for(const e of r)n.move(n.createRangeOn(e),n.createPositionAt(t,"end"))}},{priority:"low"})}}function SI(t){for(const e of t.getChildren())if(e.is("element","table"))return e}function TI(t){let e,n=0;const i=[],o=[];let r;for(const s of Array.from(t.getChildren())){if("tbody"!==s.name&&"thead"!==s.name&&"tfoot"!==s.name)continue;"thead"!==s.name||r||(r=s);const t=Array.from(s.getChildren()).filter(t=>t.is("element","tr"));let a=null;for(const l of t){const t=Array.from(l.getChildren()).filter(t=>t.is("element","td")||t.is("element","th"));if(r&&s===r||"tbody"===s.name&&t.length>0&&(null===a||t.length===a)&&t.every(t=>t.is("element","th")))n++,i.push(l);else{o.push(l);const t=AI(l);(!e||t<e)&&(e=t)}a=Math.max(a||0,t.length)}}return{headingRows:n,headingColumns:e||0,rows:[...i,...o]}}function AI(t){let e=0,n=0;const i=Array.from(t.getChildren()).filter(t=>"th"===t.name||"td"===t.name);while(n<i.length&&"th"===i[n].name){const t=i[n],o=parseInt(t.getAttribute("colspan")||"1");e+=o,n++}return e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class PI{_table;_startRow;_endRow;_startColumn;_endColumn;_includeAllSlots;_skipRows;_row;_rowIndex;_column;_cellIndex;_spannedCells;_nextCellAtColumn;_jumpedToStartRow=!1;constructor(t,e={}){this._table=t,this._startRow=void 0!==e.row?e.row:e.startRow||0,this._endRow=void 0!==e.row?e.row:e.endRow,this._startColumn=void 0!==e.column?e.column:e.startColumn||0,this._endColumn=void 0!==e.column?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const n=t.getChild(this._cellIndex);if(!n)return this._advanceToNextRow();const i=parseInt(n.getAttribute("colspan")||"1"),o=parseInt(n.getAttribute("rowspan")||"1");(i>1||o>1)&&this._recordSpans(n,o,i),this._shouldSkipSlot()||(e=this._formatOutValue(n)),this._nextCellAtColumn=this._column+i}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow}_isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new II(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,i=void 0!==this._endColumn&&this._column>this._endColumn;return t||e||n||i}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const i={cell:t,row:this._row,column:this._column};for(let o=this._row;o<this._row+e;o++)for(let t=this._column;t<this._column+n;t++)o==this._row&&t==this._column||this._markSpannedCell(o,t,i)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map);const i=this._spannedCells.get(t);i.set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){const e=this._table.getChild(t);return[...e.getChildren()].reduce((t,e)=>t+parseInt(e.getAttribute("colspan")||"1"),0)}}class II{cell;row;column;cellAnchorRow;cellAnchorColumn;_cellIndex;_rowIndex;_table;constructor(t,e,n,i){this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=i,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){const t=this._table.root.document.model;return t.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function RI(t,e){return(n,{writer:i})=>{const o=n.getAttribute("headingRows")||0,r=i.createContainerElement("table",null,[]),s=i.createContainerElement("figure",{class:"table"},r);o>0&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("thead",null,i.createSlot(t=>t.is("element","tableRow")&&t.index<o))),o<t.getRows(n)&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("tbody",null,i.createSlot(t=>t.is("element","tableRow")&&t.index>=o)));for(const{positionOffset:t,filter:a}of e.additionalSlots)i.insert(i.createPositionAt(r,t),i.createSlot(a));return i.insert(i.createPositionAt(r,"after"),i.createSlot(t=>!t.is("element","tableRow")&&!e.additionalSlots.some(({filter:e})=>e(t)))),e.asWidget?NI(s,i):s}}function OI(){return(t,{writer:e})=>t.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function MI(t={}){return(e,{writer:n})=>{const i=e.parent,o=i.parent,r=o.getChildIndex(i),s=new PI(o,{row:r}),a=o.getAttribute("headingRows")||0,l=o.getAttribute("headingColumns")||0;let c=null;for(const u of s)if(u.cell==e){const e=u.row<a||u.column<l,i=e?"th":"td";c=t.asWidget?gy(n.createEditableElement(i),n,{withAriaRole:!1}):n.createContainerElement(i);break}return c}}function DI(t={}){return(e,{writer:n})=>{if(!e.parent.is("element","tableCell"))return null;if(!VI(e))return null;if(t.asWidget)return n.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const t=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,t),t}}}function VI(t){const e=t.parent,n=1==e.childCount;return n&&!LI(t)}function NI(t,e){return e.setCustomProperty("table",!0,t),cy(t,e,{hasSelectionHandle:!0})}function LI(t){for(const e of t.getAttributeKeys())if(!e.startsWith("selection:")&&"htmlEmptyBlock"!=e)return!0;return!1}class BI extends Yh{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=FI(e,n)}execute(t={}){const e=this.editor,n=e.model,i=e.plugins.get("TableUtils"),o=e.config.get("table.defaultHeadings.rows"),r=e.config.get("table.defaultHeadings.columns");void 0===t.headingRows&&o&&(t.headingRows=o),void 0===t.headingColumns&&r&&(t.headingColumns=r),n.change(e=>{const o=i.createTable(e,t);n.insertObject(o,null,null,{findOptimalPosition:"auto"}),e.setSelection(e.createPositionAt(o.getNodeByPath([0,0,0]),0))})}}function FI(t,e){const n=t.getFirstPosition().parent,i=n===n.root?n:n.parent;return e.checkChild(i,"table")}class zI extends Yh{order;constructor(t,e={}){super(t),this.order=e.order||"below"}refresh(){const t=this.editor.model.document.selection,e=this.editor.plugins.get("TableUtils"),n=!!e.getSelectionAffectedTableCells(t).length;this.isEnabled=n}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i="above"===this.order,o=n.getSelectionAffectedTableCells(e),r=n.getRowIndexes(o),s=i?r.first:r.last,a=o[0].findAncestor("table");n.insertRows(a,{at:i?s:s+1,copyStructureFromAbove:!i})}}class HI extends Yh{order;constructor(t,e={}){super(t),this.order=e.order||"right"}refresh(){const t=this.editor.model.document.selection,e=this.editor.plugins.get("TableUtils"),n=!!e.getSelectionAffectedTableCells(t).length;this.isEnabled=n}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i="left"===this.order,o=n.getSelectionAffectedTableCells(e),r=n.getColumnIndexes(o),s=i?r.first:r.last,a=o[0].findAncestor("table");n.insertColumns(a,{columns:1,at:i?s:s+1})}}class WI extends Yh{direction;constructor(t,e={}){super(t),this.direction=e.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=1===e.length}execute(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection)[0],n="horizontally"===this.direction;n?t.splitCellHorizontally(e,2):t.splitCellVertically(e,2)}}function jI(t,e,n){const{startRow:i,startColumn:o,endRow:r,endColumn:s}=e,a=n.createElement("table"),l=t.getAttribute("tableType");l&&n.setAttribute("tableType",l,a);const c=r-i+1;for(let d=0;d<c;d++)n.insertElement("tableRow",a,"end");const u=[...new PI(t,{startRow:i,endRow:r,startColumn:o,endColumn:s,includeAllSlots:!0})];for(const{row:d,column:h,cell:f,isAnchor:p,cellAnchorRow:g,cellAnchorColumn:m}of u){const t=d-i,e=a.getChild(t);if(p){const t=n.cloneElement(f);n.append(t,e),KI(t,d,h,r,s,n)}else(g<i||m<o)&&vI(n,n.createPositionAt(e,"end"))}return YI(a,t,i,o,n),a}function $I(t,e,n=0){const i=[],o=new PI(t,{startRow:n,endRow:e-1});for(const r of o){const{row:t,cellHeight:n}=r,o=t+n-1;t<e&&e<=o&&i.push(r)}return i}function UI(t,e,n){const i=t.parent,o=i.parent,r=i.index,s=parseInt(t.getAttribute("rowspan")),a=e-r,l={},c=s-a;c>1&&(l.rowspan=c);const u=parseInt(t.getAttribute("colspan")||"1");u>1&&(l.colspan=u);const d=r,h=d+a,f=[...new PI(o,{startRow:d,endRow:h,includeAllSlots:!0})];let p,g=null;for(const m of f){const{row:e,column:i,cell:o}=m;o===t&&void 0===p&&(p=i),void 0!==p&&p===i&&e===h&&(g=vI(n,m.getPositionBefore(),l))}return bI("rowspan",a,t,n),g}function qI(t,e){const n=[],i=new PI(t);for(const o of i){const{column:t,cellWidth:i}=o,r=t+i-1;t<e&&e<=r&&n.push(o)}return n}function GI(t,e,n,i){const o=parseInt(t.getAttribute("colspan")),r=n-e,s={},a=o-r;a>1&&(s.colspan=a);const l=parseInt(t.getAttribute("rowspan")||"1");l>1&&(s.rowspan=l);const c=vI(i,i.createPositionAfter(t),s);return bI("colspan",r,t,i),c}function KI(t,e,n,i,o,r){const s=parseInt(t.getAttribute("colspan")||"1"),a=parseInt(t.getAttribute("rowspan")||"1"),l=n+s-1;if(l>o){const e=o-n+1;bI("colspan",e,t,r,1)}const c=e+a-1;if(c>i){const n=i-e+1;bI("rowspan",n,t,r,1)}}function YI(t,e,n,i,o){const r=parseInt(e.getAttribute("headingRows")||"0");if(r>0){const e=r-n;bI("headingRows",e,t,o,0)}const s=parseInt(e.getAttribute("headingColumns")||"0");if(s>0){const e=s-i;bI("headingColumns",e,t,o,0)}}function XI(t,e){const n=e.getColumns(t),i=new Array(n).fill(0);for(const{column:r}of new PI(t))i[r]++;const o=i.reduce((t,e,n)=>e?t:[...t,n],[]);if(o.length>0){const n=o[o.length-1];return e.removeColumns(t,{at:n}),!0}return!1}function JI(t,e){const n=[],i=e.getRows(t);for(let o=0;o<i;o++){const e=t.getChild(o);e.isEmpty&&n.push(o)}if(n.length>0){const i=n[n.length-1];return e.removeRows(t,{at:i}),!0}return!1}function ZI(t,e){const n=XI(t,e);n||JI(t,e)}function QI(t,e){const n=Array.from(new PI(t,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow})),i=n.every(({cellHeight:t})=>1===t);if(i)return e.lastRow;const o=n[0].cellHeight-1;return e.lastRow+o}function tR(t,e){const n=Array.from(new PI(t,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn})),i=n.every(({cellWidth:t})=>1===t);if(i)return e.lastColumn;const o=n[0].cellWidth-1;return e.lastColumn+o}class eR extends Yh{direction;isHorizontal;constructor(t,e){super(t),this.direction=e.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}execute(){const t=this.editor.model,e=t.document,n=this.editor.plugins.get("TableUtils"),i=n.getTableCellsContainingSelection(e.selection)[0],o=this.value,r=this.direction;t.change(t=>{const e="right"==r||"down"==r,n=e?i:o,s=e?o:i,a=s.parent;oR(s,n,t);const l=this.isHorizontal?"colspan":"rowspan",c=parseInt(i.getAttribute(l)||"1"),u=parseInt(o.getAttribute(l)||"1");t.setAttribute(l,c+u,n),t.setSelection(t.createRangeIn(n));const d=this.editor.plugins.get("TableUtils"),h=a.findAncestor("table");ZI(h,d)})}_getMergeableCell(){const t=this.editor.model,e=t.document,n=this.editor.plugins.get("TableUtils"),i=n.getTableCellsContainingSelection(e.selection)[0];if(!i)return;const o=this.isHorizontal?nR(i,this.direction,n):iR(i,this.direction,n);if(!o)return;const r=this.isHorizontal?"rowspan":"colspan",s=parseInt(i.getAttribute(r)||"1"),a=parseInt(o.getAttribute(r)||"1");return a===s?o:void 0}}function nR(t,e,n){const i=t.parent,o=i.parent,r="right"==e?t.nextSibling:t.previousSibling,s=(o.getAttribute("headingColumns")||0)>0;if(!r)return;const a="right"==e?t:r,l="right"==e?r:t,{column:c}=n.getCellLocation(a),{column:u}=n.getCellLocation(l),d=parseInt(a.getAttribute("colspan")||"1"),h=wI(n,a),f=wI(n,l);if(s&&h!=f)return;const p=c+d===u;return p?r:void 0}function iR(t,e,n){const i=t.parent,o=i.parent,r=o.getChildIndex(i);if("down"==e&&r===n.getRows(o)-1||"up"==e&&0===r)return null;const s=parseInt(t.getAttribute("rowspan")||"1"),a=o.getAttribute("headingRows")||0,l="down"==e&&r+s===a,c="up"==e&&r===a;if(a&&(l||c))return null;const u=parseInt(t.getAttribute("rowspan")||"1"),d="down"==e?r+u:r,h=[...new PI(o,{endRow:d})],f=h.find(e=>e.cell===t),p=f.column,g=h.find(({row:t,cellHeight:n,column:i})=>i===p&&("down"==e?t===d:d===t+n));return g&&g.cell?g.cell:null}function oR(t,e,n){rR(t)||(rR(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end"))),n.remove(t)}function rR(t){const e=t.getChild(0);return 1==t.childCount&&e.is("element","paragraph")&&e.isEmpty}class sR extends Yh{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const i=n.findAncestor("table"),o=t.getRows(i),r=o-1,s=t.getRowIndexes(e),a=0===s.first&&s.last===r;this.isEnabled=!a}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),i=e.getRowIndexes(n),o=n[0],r=o.findAncestor("table"),s=e.getCellLocation(o).column;t.change(t=>{const n=i.last-i.first+1;e.removeRows(r,{at:i.first,rows:n});const o=aR(r,i.first,s,e.getRows(r));t.setSelection(t.createPositionAt(o,0))})}}function aR(t,e,n,i){const o=t.getChild(Math.min(e,i-1));let r=o.getChild(0),s=0;for(const a of o.getChildren()){if(s>n)return r;r=a,s+=parseInt(a.getAttribute("colspan")||"1")}return r}class lR extends Yh{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const i=n.findAncestor("table"),o=t.getColumns(i),{first:r,last:s}=t.getColumnIndexes(e);this.isEnabled=s-r<o-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=uR(this.editor.model.document.selection,t),i=e.parent.parent,o=[...new PI(i)],r={first:o.find(t=>t.cell===e).column,last:o.find(t=>t.cell===n).column},s=cR(o,e,n,r);this.editor.model.change(e=>{const n=r.last-r.first+1;t.removeColumns(i,{at:r.first,columns:n}),e.setSelection(e.createPositionAt(s,0))})}}function cR(t,e,n,i){const o=parseInt(n.getAttribute("colspan")||"1");return o>1?n:e.previousSibling||n.nextSibling?n.nextSibling||e.previousSibling:i.first?t.reverse().find(({column:t})=>t<i.first).cell:t.reverse().find(({column:t})=>t>i.last).cell}function uR(t,e){const n=e.getSelectionAffectedTableCells(t),i=n[0],o=n.pop(),r=[i,o];return i.isBefore(o)?r:r.reverse()}class dR extends Yh{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(0===n.length)return this.isEnabled=!1,void(this.value=!1);const i=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(i,"headingRows"),this.value=n.every(t=>this._isInHeading(t,t.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,i=e.getSelectionAffectedTableCells(n.document.selection),o=i[0].findAncestor("table"),{first:r,last:s}=e.getRowIndexes(i),a=this.value?r:s+1,l=o.getAttribute("headingRows")||0;n.change(t=>{if(a){const e=a>l?l:0,n=$I(o,a,e);for(const{cell:i}of n)UI(i,a,t)}bI("headingRows",a,o,t,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class hR extends Yh{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(0===n.length)return this.isEnabled=!1,void(this.value=!1);const i=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(i,"headingColumns"),this.value=n.every(e=>wI(t,e))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,i=e.getSelectionAffectedTableCells(n.document.selection),o=i[0].findAncestor("table"),{first:r,last:s}=e.getColumnIndexes(i),a=this.value?r:s+1;n.change(t=>{if(a){const e=qI(o,a);for(const{cell:n,column:i}of e)GI(n,i,a,t)}bI("headingColumns",a,o,t,0)})}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const fR=5,pR=40,gR=2,mR=3;function bR(t){const e=new Set;for(const n of t.document.differ.getChanges()){let i=null;switch(n.type){case"insert":i=["table","tableRow","tableCell"].includes(n.name)?n.position:null;break;case"remove":i=["tableRow","tableCell"].includes(n.name)?n.position:null;break;case"attribute":n.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(n.range.start.nodeAfter.name)?n.range.start:null);break}if(!i)continue;const o=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const n of t.createRangeOn(o).getItems())n.is("element","table")&&RR(n)&&e.add(n)}return e}function vR(t,e){return 100*pR/wR(t,e)}function wR(t,e){const n=_R(t,"tbody",e)||_R(t,"thead",e),i=e.editing.view.domConverter.mapViewToDom(n);return yR(i)}function _R(t,e,n){const i=n.editing.mapper.toViewElement(t),o=[...i.getChildren()].find(t=>t.is("element","table"));return[...o.getChildren()].find(t=>t.is("element",e))}function yR(t){const e=Q.window.getComputedStyle(t);return"border-box"===e.boxSizing?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function kR(t,e){const n=e.getCellLocation(t).column,i=t.getAttribute("colspan")||1;return{leftEdge:n,rightEdge:n+i-1}}function CR(t){const e=Math.pow(10,gR),n="number"===typeof t?t:parseFloat(t);return Math.round(n*e)/e}function xR(t,e,n){return CR(t<=e?e:t>=n?n:t)}function ER(t,e){return Array(t).fill(e)}function SR(t){return t.map(t=>"number"===typeof t?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function TR(t){const e=t.map(t=>"auto"===t||void 0===t?"auto":parseFloat(t.replace("%","")));let n=AR(e);const i=SR(n);return 100!==i&&(n=n.map(t=>CR(100*t/i)).map((t,e,n)=>{const i=e===n.length-1;if(!i)return t;const o=SR(n);return CR(t+100-o)})),n.map(t=>t+"%")}function AR(t){const e=t.filter(t=>"auto"===t).length;if(0===e)return t.map(t=>CR(t));const n=SR(t),i=Math.max((100-n)/e,fR);return t.map(t=>"auto"===t?i:t).map(t=>CR(t))}function PR(t){const e=Q.window.getComputedStyle(t);return"border-box"===e.boxSizing?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function IR(t,e,n,i){for(let o=0;o<Math.max(n.length,t.length);o++){const r=t[o],s=n[o];s?r?i.setAttribute("columnWidth",s,r):i.appendElement("tableColumn",{columnWidth:s},e):i.remove(r)}}function RR(t){if(t.is("element","tableColumnGroup"))return t;const e=t.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function OR(t){const e=RR(t);return e?Array.from(e.getChildren()):[]}function MR(t){return OR(t).map(t=>t.getAttribute("columnWidth"))}function DR(t,e){const n=OR(t);return n.reduce((t,n)=>{const i=n.getAttribute("columnWidth"),o=n.getAttribute("colSpan");if(!o)return t.push(i),t;for(let e=0;e<o;e++)t.push(i);return e.removeAttribute("colSpan",n),t},[])}class VR extends Gh{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,i=n.getChildIndex(e),o=new PI(n,{row:i});for(const{cell:r,row:s,column:a}of o)if(r===t)return{row:s,column:a};
/* istanbul ignore next -- @preserve */}createTable(t,e){const n=t.createElement("table"),i=e.rows||2,o=e.columns||2;return NR(t,n,0,i,o),e.headingRows&&bI("headingRows",Math.min(e.headingRows,i),n,t,0),e.headingColumns&&bI("headingColumns",Math.min(e.headingColumns,o),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,i=e.at||0,o=e.rows||1,r=void 0!==e.copyStructureFromAbove,s=e.copyStructureFromAbove?i-1:i,a=this.getRows(t),l=this.getColumns(t);if(i>a)throw new Tt("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(e=>{const n=t.getAttribute("headingRows")||0;if(n>i&&bI("headingRows",n+o,t,e,0),!r&&(0===i||i===a))return void NR(e,t,i,o,l);const c=r?Math.max(i,s):i,u=new PI(t,{endRow:c}),d=new Array(l).fill(1);for(const{row:t,column:a,cellHeight:l,cellWidth:h,cell:f}of u){const n=t+l-1,c=t<i&&i<=n,u=t<=s&&s<=n;c?(e.setAttribute("rowspan",l+o,f),d[a]=-h):r&&u&&(d[a]=h)}for(let r=0;r<o;r++){const n=e.createElement("tableRow");e.insert(n,t,i);for(let t=0;t<d.length;t++){const i=d[t],o=e.createPositionAt(n,"end");i>0&&vI(e,o,i>1?{colspan:i}:void 0),t+=Math.abs(i)-1}}})}insertColumns(t,e={}){const n=this.editor.model,i=e.at||0,o=e.columns||1;n.change(e=>{const n=t.getAttribute("headingColumns");i<n&&e.setAttribute("headingColumns",n+o,t);const r=this.getColumns(t);if(0===i||r===i){for(const n of t.getChildren())n.is("element","tableRow")&&LR(o,e,e.createPositionAt(n,i?"end":0));return}const s=new PI(t,{column:i,includeAllSlots:!0});for(const t of s){const{row:n,cell:r,cellAnchorColumn:a,cellAnchorRow:l,cellWidth:c,cellHeight:u}=t;if(a<i){e.setAttribute("colspan",c+o,r);const t=l+u-1;for(let e=n;e<=t;e++)s.skipRow(e)}else LR(o,e,t.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,i=e.rows||1,o=this.getRows(t),r=e.at,s=r+i-1;if(s>o-1)throw new Tt("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(e=>{const n={first:r,last:s},{cellsToMove:i,cellsToTrim:o}=HR(t,n);if(i.size){const n=s+1;WR(t,n,i,e)}for(let a=s;a>=r;a--)e.remove(t.getChild(a));for(const{rowspan:t,cell:r}of o)bI("rowspan",t,r,e);zR(t,n,e),XI(t,this)||JI(t,this)})}removeColumns(t,e){const n=this.editor.model,i=e.at,o=e.columns||1,r=e.at+o-1;n.change(e=>{FR(t,{first:i,last:r},e);const n=OR(t);for(let o=r;o>=i;o--){for(const{cell:n,column:i,cellWidth:r}of[...new PI(t)])i<=o&&r>1&&i+r>o?bI("colspan",r-1,n,e):i===o&&e.remove(n);if(n[o]){const t=0===o?n[1]:n[o-1],i=parseFloat(n[o].getAttribute("columnWidth")),r=parseFloat(t.getAttribute("columnWidth"));e.remove(n[o]),e.setAttribute("columnWidth",i+r+"%",t)}}JI(t,this)||XI(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,i=t.parent,o=i.parent,r=parseInt(t.getAttribute("rowspan")||"1"),s=parseInt(t.getAttribute("colspan")||"1");n.change(n=>{if(s>1){const{newCellsSpan:i,updatedSpan:o}=BR(s,e);bI("colspan",o,t,n);const a={};i>1&&(a.colspan=i),r>1&&(a.rowspan=r);const l=s>e?e-1:s-1;LR(l,n,n.createPositionAfter(t),a)}if(s<e){const i=e-s,a=[...new PI(o)],{column:l}=a.find(({cell:e})=>e===t),c=a.filter(({cell:e,cellWidth:n,column:i})=>{const o=e!==t&&i===l,r=i<l&&i+n>l;return o||r});for(const{cell:t,cellWidth:e}of c)n.setAttribute("colspan",e+i,t);const u={};r>1&&(u.rowspan=r),LR(i,n,n.createPositionAfter(t),u);const d=o.getAttribute("headingColumns")||0;d>l&&bI("headingColumns",d+i,o,n)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,i=t.parent,o=i.parent,r=o.getChildIndex(i),s=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(n=>{if(s>1){const i=[...new PI(o,{startRow:r,endRow:r+s-1,includeAllSlots:!0})],{newCellsSpan:l,updatedSpan:c}=BR(s,e);bI("rowspan",c,t,n);const{column:u}=i.find(({cell:e})=>e===t),d={};l>1&&(d.rowspan=l),a>1&&(d.colspan=a);let h=0;for(const t of i){const{column:e,row:i}=t,o=i>=r+c,s=e===u;h>=l&&s&&(h=0),o&&s&&(h||LR(1,n,t.getPositionBefore(),d),h++)}}if(s<e){const i=e-s,l=[...new PI(o,{startRow:0,endRow:r})];for(const{cell:e,cellHeight:o,row:s}of l)if(e!==t&&s+o>r){const t=o+i;n.setAttribute("rowspan",t,e)}const c={};a>1&&(c.colspan=a),NR(n,o,r+1,i,1,c);const u=o.getAttribute("headingRows")||0;u>r&&bI("headingRows",u+i,o,n)}})}getColumns(t){const e=t.getChild(0);return[...e.getChildren()].filter(t=>t.is("element","tableCell")).reduce((t,e)=>{const n=parseInt(e.getAttribute("colspan")||"1");return t+n},0)}getRows(t){return Array.from(t.getChildren()).reduce((t,e)=>e.is("element","tableRow")?t+1:t,0)}createTableWalker(t,e={}){return new PI(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const t=n.getContainedElement();t&&t.is("element","tableCell")&&e.push(t)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const t=n.start.findAncestor("tableCell");t&&e.push(t)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(t=>t.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),n=[...new PI(e)],i=n.filter(e=>t.includes(e.cell)).map(t=>t.column);return this._getFirstLastIndexesObject(i)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let i=0;for(const r of t){const{row:t,column:o}=this.getCellLocation(r),s=parseInt(r.getAttribute("rowspan"))||1,a=parseInt(r.getAttribute("colspan"))||1;e.add(t),n.add(o),s>1&&e.add(t+s-1),a>1&&n.add(o+a-1),i+=s*a}const o=$R(e,n);return o==i}sortRanges(t){return Array.from(t).sort(jR)}_getFirstLastIndexesObject(t){const e=t.sort((t,e)=>t-e),n=e[0],i=e[e.length-1];return{first:n,last:i}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),i=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,i))return!1;const o=this.getColumnIndexes(t),r=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,r)}_areIndexesInSameSection({first:t,last:e},n){const i=t<n,o=e<n;return i===o}}function NR(t,e,n,i,o,r={}){for(let s=0;s<i;s++){const i=t.createElement("tableRow");t.insert(i,e,n),LR(o,t,t.createPositionAt(i,"end"),r)}}function LR(t,e,n,i={}){for(let o=0;o<t;o++)vI(e,n,i)}function BR(t,e){if(t<e)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(t/e),i=t-n*e+n;return{newCellsSpan:n,updatedSpan:i}}function FR(t,e,n){const i=t.getAttribute("headingColumns")||0;if(i&&e.first<i){const o=Math.min(i-1,e.last)-e.first+1;n.setAttribute("headingColumns",i-o,t)}}function zR(t,{first:e,last:n},i){const o=t.getAttribute("headingRows")||0;if(e<o){const r=n<o?o-(n-e+1):e;bI("headingRows",r,t,i,0)}}function HR(t,{first:e,last:n}){const i=new Map,o=[];for(const{row:r,column:s,cellHeight:a,cell:l}of new PI(t,{endRow:n})){const t=r+a-1,c=r>=e&&r<=n&&t>n;if(c){const t=n-r+1,e=a-t;i.set(s,{cell:l,rowspan:e})}const u=r<e&&t>=e;if(u){let i;i=t>=n?n-e+1:t-e+1,o.push({cell:l,rowspan:a-i})}}return{cellsToMove:i,cellsToTrim:o}}function WR(t,e,n,i){const o=new PI(t,{includeAllSlots:!0,row:e}),r=[...o],s=t.getChild(e);let a;for(const{column:l,cell:c,isAnchor:u}of r)if(n.has(l)){const{cell:t,rowspan:e}=n.get(l),o=a?i.createPositionAfter(a):i.createPositionAt(s,0);i.move(i.createRangeOn(t),o),bI("rowspan",e,t,i),a=t}else u&&(a=c)}function jR(t,e){const n=t.start,i=e.start;return n.isBefore(i)?-1:1}function $R(t,e){const n=Array.from(t.values()),i=Array.from(e.values()),o=Math.max(...n),r=Math.min(...n),s=Math.max(...i),a=Math.min(...i);return(o-r+1)*(s-a+1)}class UR extends Yh{refresh(){const t=this.editor.plugins.get(VR),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(VR);t.change(n=>{const i=e.getSelectedTableCells(t.document.selection),o=i.shift(),{mergeWidth:r,mergeHeight:s}=KR(o,i,e);bI("colspan",r,o,n),bI("rowspan",s,o,n);for(const t of i)qR(t,o,n);const a=o.findAncestor("table");ZI(a,e),n.setSelection(o,"in")})}}function qR(t,e,n){GR(t)||(GR(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end"))),n.remove(t)}function GR(t){const e=t.getChild(0);return 1==t.childCount&&e.is("element","paragraph")&&e.isEmpty}function KR(t,e,n){let i=0,o=0;for(const c of e){const{row:t,column:e}=n.getCellLocation(c);i=YR(c,e,i,"colspan"),o=YR(c,t,o,"rowspan")}const{row:r,column:s}=n.getCellLocation(t),a=i-s,l=o-r;return{mergeWidth:a,mergeHeight:l}}function YR(t,e,n,i){const o=parseInt(t.getAttribute(i)||"1");return Math.max(n,e+o)}class XR extends Yh{constructor(t){super(t),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),i=e.getRowIndexes(n),o=n[0].findAncestor("table"),r=[];for(let s=i.first;s<=i.last;s++)for(const e of o.getChild(s).getChildren())r.push(t.createRangeOn(e));t.change(t=>{t.setSelection(r)})}}class JR extends Yh{constructor(t){super(t),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),i=n[0],o=n.pop(),r=i.findAncestor("table"),s=t.getCellLocation(i),a=t.getCellLocation(o),l=Math.min(s.column,a.column),c=Math.max(s.column,a.column),u=[];for(const d of new PI(r,{startColumn:l,endColumn:c}))u.push(e.createRangeOn(d.cell));e.change(t=>{t.setSelection(u)})}}function ZR(t){t.document.registerPostFixer(e=>QR(e,t))}function QR(t,e){const n=e.document.differ.getChanges();let i=!1;const o=new Set;for(const r of n){let e=null;"insert"==r.type&&"table"==r.name&&(e=r.position.nodeAfter),"insert"!=r.type&&"remove"!=r.type||"tableRow"!=r.name&&"tableCell"!=r.name||(e=r.position.findAncestor("table")),oO(r)&&(e=r.range.start.findAncestor("table")),e&&!o.has(e)&&(i=tO(e,t)||i,i=eO(e,t)||i,o.add(e))}return i}function tO(t,e){let n=!1;const i=nO(t);if(i.length){n=!0;for(const t of i)bI("rowspan",t.rowspan,t.cell,e,1)}return n}function eO(t,e){let n=!1;const i=iO(t),o=[];for(const[l,c]of i.entries())!c&&t.getChild(l).is("element","tableRow")&&o.push(l);if(o.length){n=!0;for(const n of o.reverse())e.remove(t.getChild(n)),i.splice(n,1)}const r=i.filter((e,n)=>t.getChild(n).is("element","tableRow")),s=r[0],a=r.every(t=>t===s);if(!a){const i=r.reduce((t,e)=>e>t?e:t,0);for(const[o,s]of r.entries()){const r=i-s;if(r){for(let n=0;n<r;n++)vI(e,e.createPositionAt(t.getChild(o),"end"));n=!0}}}return n}function nO(t){const e=parseInt(t.getAttribute("headingRows")||"0"),n=Array.from(t.getChildren()).reduce((t,e)=>e.is("element","tableRow")?t+1:t,0),i=[];for(const{row:o,cell:r,cellHeight:s}of new PI(t)){if(s<2)continue;const t=o<e,a=t?e:n;if(o+s>a){const t=a-o;i.push({cell:r,rowspan:t})}}return i}function iO(t){const e=new Array(t.childCount).fill(0);for(const{rowIndex:n}of new PI(t,{includeAllSlots:!0}))e[n]++;return e}function oO(t){if("attribute"!==t.type)return!1;const e=t.attributeKey;return"headingRows"===e||"colspan"===e||"rowspan"===e}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rO(t){t.document.registerPostFixer(e=>sO(e,t))}function sO(t,e){const n=e.document.differ.getChanges();let i=!1;for(const o of n)"insert"==o.type&&"table"==o.name&&(i=aO(o.position.nodeAfter,t)||i),"insert"==o.type&&"tableRow"==o.name&&(i=lO(o.position.nodeAfter,t)||i),"insert"==o.type&&"tableCell"==o.name&&(i=cO(o.position.nodeAfter,t)||i),"remove"!=o.type&&"insert"!=o.type||!uO(o)||(i=cO(o.position.parent,t)||i);return i}function aO(t,e){let n=!1;for(const i of t.getChildren())i.is("element","tableRow")&&(n=lO(i,e)||n);return n}function lO(t,e){let n=!1;for(const i of t.getChildren())n=cO(i,e)||n;return n}function cO(t,e){if(0==t.childCount)return e.insertElement("paragraph",t),!0;const n=Array.from(t.getChildren()).filter(t=>t.is("$text"));for(const i of n)e.wrap(e.createRangeOn(i),"paragraph");return!!n.length}function uO(t){return!!t.position.parent.is("element","tableCell")&&("insert"==t.type&&"$text"==t.name||"remove"==t.type)}function dO(t,e){const n=t.document.differ;for(const i of n.getChanges()){let t,n=!1;if("attribute"==i.type){const e=i.range.start.nodeAfter;if(!e||!e.is("element","table"))continue;if("headingRows"!=i.attributeKey&&"headingColumns"!=i.attributeKey)continue;t=e,n="headingRows"==i.attributeKey}else"tableRow"!=i.name&&"tableCell"!=i.name||(t=i.position.findAncestor("table"),n="tableRow"==i.name);if(!t)continue;const o=t.getAttribute("headingRows")||0,r=t.getAttribute("headingColumns")||0,s=new PI(t);for(const i of s){const t=i.row<o||i.column<r,s=t?"th":"td",a=e.mapper.toViewElement(i.cell);a&&a.is("element")&&a.name!=s&&e.reconvertItem(n?i.cell.parent:i.cell)}}}function hO(t,e){const n=t.document.differ,i=new Set;for(const o of n.getChanges()){const t="attribute"==o.type?o.range.start.parent:o.position.parent;t.is("element","tableCell")&&i.add(t)}for(const o of i.values()){const t=Array.from(o.getChildren()).filter(t=>fO(t,e.mapper));for(const n of t)e.reconvertItem(n)}}function fO(t,e){if(!t.is("element","paragraph"))return!1;const n=e.toViewElement(t);return!!n&&VI(t)!==n.is("element","span")}class pO extends Gh{_additionalSlots;static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[VR]}constructor(t){super(t),this._additionalSlots=[]}init(){const t=this.editor,e=t.model,n=e.schema,i=t.conversion,o=t.plugins.get(VR);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),i.for("upcast").add(kI()),i.for("upcast").add(CI()),i.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:RI(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),i.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:RI(o,{additionalSlots:this._additionalSlots})}),i.for("upcast").elementToElement({model:"tableRow",view:"tr"}),i.for("upcast").add(xI()),i.for("downcast").elementToElement({model:"tableRow",view:OI()}),i.for("upcast").elementToElement({model:"tableCell",view:"td"}),i.for("upcast").elementToElement({model:"tableCell",view:"th"}),i.for("upcast").add(EI("td")),i.for("upcast").add(EI("th")),i.for("editingDowncast").elementToElement({model:"tableCell",view:MI({asWidget:!0})}),i.for("dataDowncast").elementToElement({model:"tableCell",view:MI()}),i.for("editingDowncast").elementToElement({model:"paragraph",view:DI({asWidget:!0}),converterPriority:"high"}),i.for("dataDowncast").elementToElement({model:"paragraph",view:DI(),converterPriority:"high"}),i.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),i.for("upcast").attributeToAttribute({model:{key:"colspan",value:gO("colspan")},view:"colspan"}),i.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),i.for("upcast").attributeToAttribute({model:{key:"rowspan",value:gO("rowspan")},view:"rowspan"}),t.config.define("table.defaultHeadings.rows",0),t.config.define("table.defaultHeadings.columns",0),t.commands.add("insertTable",new BI(t)),t.commands.add("insertTableRowAbove",new zI(t,{order:"above"})),t.commands.add("insertTableRowBelow",new zI(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new HI(t,{order:"left"})),t.commands.add("insertTableColumnRight",new HI(t,{order:"right"})),t.commands.add("removeTableRow",new sR(t)),t.commands.add("removeTableColumn",new lR(t)),t.commands.add("splitTableCellVertically",new WI(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new WI(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new UR(t)),t.commands.add("mergeTableCellRight",new eR(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new eR(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new eR(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new eR(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new hR(t)),t.commands.add("setTableRowHeader",new dR(t)),t.commands.add("selectTableRow",new XR(t)),t.commands.add("selectTableColumn",new JR(t)),ZR(e),rO(e),this.listenTo(e.document,"change:data",()=>{dO(e,t.editing),hO(e,t.editing)})}registerAdditionalSlot(t){this._additionalSlots.push(t)}}function gO(t){return e=>{const n=parseInt(e.getAttribute(t));return Number.isNaN(n)||n<=0?null:n}}class mO extends db{items;keystrokes;focusTracker;constructor(t){super(t);const e=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Gn,this.focusTracker=new Wn,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(t,e)=>`${e} Ã ${t}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":e.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:e.to("label")}]}],on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(()=>{this.fire("execute")})}}),this.on("boxover",(t,e)=>{const{row:n,column:i}=e.target.dataset;this.items.get(10*(parseInt(n,10)-1)+(parseInt(i,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(t,e,n)=>{if(!n)return;const{row:i,column:o}=n.dataset;this.set({rows:parseInt(i),columns:parseInt(o)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),_b({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const t of this.items)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const t=this.rows,e=this.columns;this.items.map((n,i)=>{const o=Math.floor(i/10),r=i%10,s=o<t&&r<e;n.set("isOn",s)})}_createGridButton(t,e,n,i){const o=new Tb(t);return o.set({label:i,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":e,"data-column":n}}),o}_createGridCollection(){const t=[];for(let e=0;e<100;e++){const n=Math.floor(e/10),i=e%10,o=`${n+1} Ã ${i+1}`;t.push(this._createGridButton(this.locale,n+1,i+1,o))}return this.createCollection(t)}}class bO extends Gh{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,n=t.locale.contentLanguageDirection,i="ltr"===n;t.ui.componentFactory.add("insertTable",n=>{const i=t.commands.get("insertTable"),o=$v(n);let r;return o.bind("isEnabled").to(i),o.buttonView.set({icon:vg,label:e("Insert table"),tooltip:!0}),o.on("change:isOpen",()=>{r||(r=new mO(n),o.panelView.children.add(r),r.delegate("execute").to(o),o.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()}))}),o}),t.ui.componentFactory.add("menuBar:insertTable",n=>{const i=t.commands.get("insertTable"),o=new g_(n),r=new mO(n);return r.delegate("execute").to(o),o.on("change:isOpen",(t,e,n)=>{n||r.reset()}),r.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()}),o.buttonView.set({label:e("Table"),icon:vg}),o.panelView.children.add(r),o.bind("isEnabled").to(i),o}),t.ui.componentFactory.add("tableColumn",t=>{const n=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),pg,n,t)}),t.ui.componentFactory.add("tableRow",t=>{const n=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),bg,n,t)}),t.ui.componentFactory.add("mergeTableCells",t=>{const n=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),gg,n,t)})}_prepareDropdown(t,e,n,i){const o=this.editor,r=$v(i),s=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",(...t)=>t.some(t=>t)),this.listenTo(r,"execute",t=>{o.execute(t.source.commandName),t.source instanceof ov||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(t,e,n,i){const o=this.editor,r=$v(i,jv),s="mergeTableCells",a=o.commands.get(s),l=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([a,...l],"isEnabled",(...t)=>t.some(t=>t)),this.listenTo(r.buttonView,"execute",()=>{o.execute(s),o.editing.view.focus()}),this.listenTo(r,"execute",t=>{o.execute(t.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(t,e){const n=this.editor,i=[],o=new zn;for(const r of e)vO(r,n,i,o);return Gv(t,o),i}}function vO(t,e,n,i){if("button"===t.type||"switchbutton"===t.type){const i=t.model=new s_(t.model),{commandName:o,bindIsOn:r}=t.model,s=e.commands.get(o);n.push(s),i.set({commandName:o}),i.bind("isEnabled").to(s),r&&i.bind("isOn").to(s,"value"),i.set({withText:!0})}i.add(t)}class wO extends Gh{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[VR,VR]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(t,e)=>this._handleDeleteContent(t,e),{priority:"high"}),this.listenTo(n.document,"insertText",(t,e)=>this._handleInsertTextEvent(t,e),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(VR),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return 0==n.length?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(VR),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const i=n.createDocumentFragment(),{first:o,last:r}=t.getColumnIndexes(e),{first:s,last:a}=t.getRowIndexes(e),l=e[0].findAncestor("table");let c=a,u=r;if(t.isSelectionRectangular(e)){const t={firstColumn:o,lastColumn:r,firstRow:s,lastRow:a};c=QI(l,t),u=tR(l,t)}const d={startRow:s,startColumn:o,endRow:c,endColumn:u},h=jI(l,d,n);return n.insert(h,i,0),i}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(t=>{t.setSelection(n.cells.map(e=>t.createRangeOn(e)),{backward:n.backward})})}getFocusCell(){const t=this.editor.model.document.selection,e=[...t.getRanges()].pop(),n=e.getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const t=this.editor.model.document.selection,e=Hn(t.getRanges()),n=e.getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const t=this.editor,e=new Set;function n(t){for(const n of e)t.removeClass("ck-editor__editable_selected",n);e.clear()}t.conversion.for("editingDowncast").add(t=>t.on("selection",(t,i,o)=>{const r=o.writer;n(r);const s=this.getSelectedTableCells();if(!s)return;for(const n of s){const t=o.mapper.toViewElement(n);r.addClass("ck-editor__editable_selected",t),e.add(t)}const a=o.mapper.toViewElement(s[s.length-1]);r.setSelection(a,0)},{priority:"lowest"}))}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const i=n.createPositionAt(e[0],0),o=t.model.schema.getNearestSelectionRange(i);n.setSelection(o)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(VR),i=e[0],o=e[1],r=this.editor.model,s=!o||"backward"==o.direction,a=n.getSelectedTableCells(i);a.length&&(t.stop(),r.change(t=>{const e=a[s?a.length-1:0];r.change(t=>{for(const e of a)r.deleteContent(t.createSelection(e,"in"))});const n=r.schema.getNearestSelectionRange(t.createPositionAt(e,0));i.is("documentSelection")?t.setSelection(n):i.setTo(n)}))}_handleInsertTextEvent(t,e){const n=this.editor,i=this.getSelectedTableCells();if(!i)return;const o=n.editing.view,r=n.editing.mapper,s=i.map(t=>o.createRangeOn(r.toViewElement(t)));e.selection=o.createSelection(s),e.preventDefault()}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),i=n.getCellLocation(t),o=n.getCellLocation(e),r=Math.min(i.row,o.row),s=Math.max(i.row,o.row),a=Math.min(i.column,o.column),l=parseInt(e.getAttribute("colspan")||"1")-1,c=Math.max(i.column,o.column+l),u=new Array(s-r+1).fill(null).map(()=>[]),d={startRow:r,endRow:s,startColumn:a,endColumn:c};for(const{row:p,cell:g}of new PI(t.findAncestor("table"),d))u[p-r].push(g);const h=o.row<i.row,f=o.column<i.column;return h&&u.reverse(),f&&u.forEach(t=>t.reverse()),{cells:u.flat(),backward:h||f}}}class _O extends Gh{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Mk,Dk,wO,VR]}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"copy",(t,e)=>this._onCopyCut(t,e)),this.listenTo(e,"cut",(t,e)=>this._onCopyCut(t,e)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:t}=this,e=t.plugins.get(Dk),n=t.plugins.get(wO);let i=!1;e.on("contentInsertion",(t,e)=>{i="paste"===e.method}),this.listenTo(t.model,"insertContent",(t,[e,o])=>{(i||null!==n.getSelectedTableCells())&&this._onInsertContent(t,e,o)},{priority:"high"}),e.on("contentInsertion",()=>{i=!1},{priority:"lowest"})}_onCopyCut(t,e){const n=this.editor.editing.view,i=this.editor.plugins.get(wO),o=this.editor.plugins.get(Mk);i.getSelectedTableCells()&&("cut"!=t.name||this.editor.model.canEditAt(this.editor.model.document.selection))&&(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:"cut"===t.name},()=>{const r=o._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>i.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(r),method:t.name})}))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const i=this.editor.model,o=this.editor.plugins.get(VR),r=this.editor.plugins.get(Mk),s=this.getTableIfOnlyTableInContent(e,i);if(!s)return;const a=o.getSelectionAffectedTableCells(i.document.selection);a.length?(t.stop(),e.is("documentFragment")?r._pasteMarkersIntoTransformedElement(e.markers,t=>this._replaceSelectedCells(s,a,t)):this.editor.model.change(t=>{this._replaceSelectedCells(s,a,t)})):ZI(s,o)}_replaceSelectedCells(t,e,n){const i=this.editor.plugins.get(VR),o={width:i.getColumns(t),height:i.getRows(t)},r=yO(e,o,n,i),s=r.lastRow-r.firstRow+1,a=r.lastColumn-r.firstColumn+1,l={startRow:0,startColumn:0,endRow:Math.min(s,o.height)-1,endColumn:Math.min(a,o.width)-1};t=jI(t,l,n);const c=e[0].findAncestor("table"),u=this._replaceSelectedCellsWithPasted(t,o,c,r,n);if(this.editor.plugins.get("TableSelection").isEnabled){const t=i.sortRanges(u.map(t=>n.createRangeOn(t)));n.setSelection(t)}else n.setSelection(u[0],0);return c}_replaceSelectedCellsWithPasted(t,e,n,i,o){const{width:r,height:s}=e,a=CO(t,r,s),l=[...new PI(n,{startRow:i.firstRow,endRow:i.lastRow,startColumn:i.firstColumn,endColumn:i.lastColumn,includeAllSlots:!0})],c=[];let u;for(const g of l){const{row:t,column:e}=g;e===i.firstColumn&&(u=g.getPositionBefore());const n=t-i.firstRow,l=e-i.firstColumn,d=a[n%s][l%r],h=d?o.cloneElement(d):null,f=this._replaceTableSlotCell(g,h,u,o);f&&(KI(f,t,e,i.lastRow,i.lastColumn,o),c.push(f),u=o.createPositionAfter(f))}const d=parseInt(n.getAttribute("headingRows")||"0"),h=parseInt(n.getAttribute("headingColumns")||"0"),f=i.firstRow<d&&d<=i.lastRow,p=i.firstColumn<h&&h<=i.lastColumn;if(f){const t={first:i.firstColumn,last:i.lastColumn},e=EO(n,d,t,o,i.firstRow);c.push(...e)}if(p){const t={first:i.firstRow,last:i.lastRow},e=SO(n,h,t,o);c.push(...e)}return c}_replaceTableSlotCell(t,e,n,i){const{cell:o,isAnchor:r}=t;return r&&i.remove(o),e?(i.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(1==t.childCount&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const i of n.getItems())if(i.is("element","table")){const t=e.createRange(n.start,e.createPositionBefore(i));if(e.hasContent(t,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(i),n.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:i}return null}}function yO(t,e,n,i){const o=t[0].findAncestor("table"),r=i.getColumnIndexes(t),s=i.getRowIndexes(t),a={firstColumn:r.first,lastColumn:r.last,firstRow:s.first,lastRow:s.last},l=1===t.length;return l&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,kO(o,a.lastRow+1,a.lastColumn+1,i)),l||!i.isSelectionRectangular(t)?xO(o,a,n):(a.lastRow=QI(o,a),a.lastColumn=tR(o,a)),a}function kO(t,e,n,i){const o=i.getColumns(t),r=i.getRows(t);n>o&&i.insertColumns(t,{at:o,columns:n-o}),e>r&&i.insertRows(t,{at:r,rows:e-r})}function CO(t,e,n){const i=new Array(n).fill(null).map(()=>new Array(e).fill(null));for(const{column:o,row:r,cell:s}of new PI(t))i[r][o]=s;return i}function xO(t,e,n){const{firstRow:i,lastRow:o,firstColumn:r,lastColumn:s}=e,a={first:i,last:o},l={first:r,last:s};SO(t,r,a,n),SO(t,s+1,a,n),EO(t,i,l,n),EO(t,o+1,l,n,i)}function EO(t,e,n,i,o=0){if(e<1)return;const r=$I(t,e,o),s=r.filter(({column:t,cellWidth:e})=>TO(t,e,n));return s.map(({cell:t})=>UI(t,e,i))}function SO(t,e,n,i){if(e<1)return;const o=qI(t,e),r=o.filter(({row:t,cellHeight:e})=>TO(t,e,n));return r.map(({cell:t,column:n})=>GI(t,n,e,i))}function TO(t,e,n){const i=t+e-1,{first:o,last:r}=n,s=t>=o&&t<=r,a=t<o&&i>=o;return s||a}class AO extends Gh{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[wO,VR]}init(){const t=this.editor,e=t.editing.view,n=e.document,i=t.t;this.listenTo(n,"arrowKey",(...t)=>this._onArrowKey(...t),{context:"table"}),this.listenTo(n,"tab",(...t)=>this._handleTabOnSelectedTable(...t),{context:"figure"}),this.listenTo(n,"tab",(...t)=>this._handleTab(...t),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:i("Keystrokes that can be used in a table cell"),keystrokes:[{label:i("Move the selection to the next cell"),keystroke:"Tab"},{label:i("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:i("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:i("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,i=n.model.document.selection,o=i.getSelectedElement();o&&o.is("element","table")&&e.stopPropagation()}_handleTab(t,e){const n=this.editor,i=this.editor.plugins.get(VR),o=this.editor.plugins.get("TableSelection"),r=n.model.document.selection,s=!e.shiftKey;let a=i.getTableCellsContainingSelection(r)[0];if(a||(a=o.getFocusCell()),!a)return;e.stopPropagation();const l=a.parent,c=l.parent,u=c.getChildIndex(l),d=l.getChildIndex(a),h=d===l.childCount-1,f=u===i.getRows(c)-1;s&&f&&h&&n.execute("insertTableRowBelow")}_onArrowKey(t,e){const n=this.editor,i=e.keyCode,o=Sn(i,n.locale.contentLanguageDirection),r=this._handleArrowKeys(o,e.shiftKey);r&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(VR),i=this.editor.plugins.get("TableSelection"),o=this.editor.model,r=o.document.selection,s=["right","down"].includes(t),a=n.getSelectedTableCells(r);if(a.length){let n;return n=e?i.getFocusCell():s?a[a.length-1]:a[0],this._navigateFromCellInDirection(n,t,e),!0}const l=r.focus.findAncestor("tableCell");
/* istanbul ignore if: paranoid check -- @preserve */if(!l)return!1;if(!r.isCollapsed)if(e){if(r.isBackward==s&&!r.containsEntireContent(l))return!1}else{const t=r.getSelectedElement();if(!t||!o.schema.isObject(t))return!1}return!!this._isSelectionAtCellEdge(r,l,s)&&(this._navigateFromCellInDirection(l,t,e),!0)}_isSelectionAtCellEdge(t,e,n){const i=this.editor.model,o=this.editor.model.schema,r=n?t.getLastPosition():t.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell")){const t=i.createPositionAt(e,n?"end":0);return t.isTouching(r)}const s=i.createSelection(r);return i.modifySelection(s,{direction:n?"forward":"backward"}),r.isEqual(s.focus)}_navigateFromCellInDirection(t,e,n=!1){const i=this.editor.model,o=t.findAncestor("table"),r=[...new PI(o,{includeAllSlots:!0})],{row:s,column:a}=r[r.length-1],l=r.find(({cell:e})=>e==t);let{row:c,column:u}=l;switch(e){case"left":u--;break;case"up":c--;break;case"right":u+=l.cellWidth;break;case"down":c+=l.cellHeight;break}const d=c<0||c>s,h=u<0&&c<=0,f=u>a&&c>=s;if(d||h||f)return void i.change(t=>{t.setSelection(t.createRangeOn(o))});u<0?(u=n?0:a,c--):u>a&&(u=n?a:0,c++);const p=r.find(t=>t.row==c&&t.column==u).cell,g=["right","down"].includes(e),m=this.editor.plugins.get("TableSelection");if(n&&m.isEnabled){const e=m.getAnchorCell()||t;m.setCellSelection(e,p)}else{const t=i.createPositionAt(p,g?0:"end");i.change(e=>{e.setSelection(t)})}}}class PO extends ys{domEventType=["mousemove","mouseleave"];onDomEvent(t){this.fire(t.type,t)}}class IO extends Gh{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[wO,VR]}init(){const t=this.editor;t.editing.view.addObserver(PO),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(VR);let n=!1;const i=t.plugins.get(wO);this.listenTo(t.editing.view.document,"mousedown",(o,r)=>{const s=t.model.document.selection;if(!this.isEnabled||!i.isEnabled)return;if(!r.domEvent.shiftKey)return;const a=i.getAnchorCell()||e.getTableCellsContainingSelection(s)[0];if(!a)return;const l=this._getModelTableCellFromDomEvent(r);l&&RO(a,l)&&(n=!0,i.setCellSelection(a,l),r.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",t=>{n&&t.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,i=!1,o=!1;const r=t.plugins.get(wO);this.listenTo(t.editing.view.document,"mousedown",(t,n)=>{this.isEnabled&&r.isEnabled&&(n.domEvent.shiftKey||n.domEvent.ctrlKey||n.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(n)))}),this.listenTo(t.editing.view.document,"mousemove",(t,s)=>{if(!s.domEvent.buttons)return;if(!e)return;const a=this._getModelTableCellFromDomEvent(s);a&&RO(e,a)&&(n=a,i||n==e||(i=!0)),i&&(o=!0,r.setCellSelection(e,n),s.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{i=!1,o=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",t=>{o&&t.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0),i=this.editor.editing.mapper.toModelPosition(n),o=i.parent;return o.findAncestor("tableCell",{includeSelf:!0})}}function RO(t,e){return t.parent.parent==e.parent.parent}class OO extends Gh{static get requires(){return[pO,bO,wO,IO,AO,_O,zy]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function MO(t){const e=DO(t);return e||VO(t)}function DO(t){const e=t.getSelectedElement();return e&&NO(e)?e:null}function VO(t){const e=t.getFirstPosition();if(!e)return null;let n=e.parent;while(n){if(n.is("element")&&NO(n))return n;n=n.parent}return null}function NO(t){return t.is("element")&&!!t.getCustomProperty("table")&&ly(t)}class LO extends Gh{static get requires(){return[Ky]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(Ky),i=t.config.get("table.contentToolbar"),o=t.config.get("table.tableToolbar");i&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:i,getRelatedElement:VO}),o&&n.register("table",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:DO})}}class BO extends db{options;focusTracker;focusCycler;_focusables;dropdownView;inputView;keystrokes;_stillTyping;constructor(t,e){super(t),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=e,this.focusTracker=new Wn,this._focusables=new Dm,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Gn,this._stillTyping=!1,this.focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(t,e,n)=>this._setInputValue(n))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(t=>{this.focusTracker.add(t.element),this._focusables.add(t)}),this.keystrokes.listenTo(this.element)}focus(t){-1===t?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const t=this.locale,e=t.t,n=this.bindTemplate,i=this._createColorSelector(t),o=$v(t),r=new db;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:n.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",n.if("value","ck-hidden",t=>""!=t)]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(r),o.buttonView.label=e("Color picker"),o.buttonView.tooltip=!0,o.panelPosition="rtl"===t.uiLanguageDirection?"se":"sw",o.panelView.children.add(i),o.bind("isEnabled").to(this,"isReadOnly",t=>!t),o.on("change:isOpen",(t,e,n)=>{n&&(i.updateSelectedColors(),i.showColorGridsFragment())}),o}_createInputTextView(){const t=this.locale,e=new Ev(t);return e.extendTemplate({on:{blur:e.bindTemplate.to("blur")}}),e.value=this.value,e.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(e),e.on("input",()=>{const t=e.element.value,n=this.options.colorDefinitions.find(e=>t===e.label);this._stillTyping=!0,this.value=n&&n.color||t}),e.on("blur",()=>{this._stillTyping=!1,this._setInputValue(e.element.value)}),e.delegate("input").to(this),e}_createColorSelector(t){const e=t.t,n=this.options.defaultColorValue||"",i=e(n?"Restore default":"Remove color"),o=new ww(t,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:i,colorPickerLabel:e("Color picker"),colorPickerViewConfig:!1!==this.options.colorPickerConfig&&{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(t,e)=>{"colorPickerSaveButton"!==e.source?(this.value=e.value||n,this.fire("input"),"colorPicker"!==e.source&&(this.dropdownView.isOpen=!1)):this.dropdownView.isOpen=!1});let r=this.value;return o.on("colorPicker:cancel",()=>{this.value=r,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{r=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(t){if(!this._stillTyping){const e=FO(t),n=this.options.colorDefinitions.find(t=>e===FO(t.color));this.inputView.value=n?n.label:t||""}}}function FO(t){return t.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const zO=t=>""===t;function HO(t){return{none:t("None"),solid:t("Solid"),dotted:t("Dotted"),dashed:t("Dashed"),double:t("Double"),groove:t("Groove"),ridge:t("Ridge"),inset:t("Inset"),outset:t("Outset")}}function WO(t){return t('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function jO(t){return t('The value is invalid. Try "10px" or "2em" or simply "2".')}function $O(t){return t=t.trim().toLowerCase(),zO(t)||Ed(t)}function UO(t){return t=t.trim(),zO(t)||JO(t)||Pd(t)||Rd(t)}function qO(t){return t=t.trim(),zO(t)||JO(t)||Pd(t)}function GO(t,e){const n=new zn,i=HO(t.t);for(const o in i){const r={type:"button",model:new s_({_borderStyleValue:o,label:i[o],role:"menuitemradio",withText:!0})};"none"===o?r.model.bind("isOn").to(t,"borderStyle",t=>"none"===e?!t:t===o):r.model.bind("isOn").to(t,"borderStyle",t=>t===o),n.add(r)}return n}function KO(t){const{view:e,icons:n,toolbar:i,labels:o,propertyName:r,nameToValue:s,defaultValue:a}=t;for(const l in o){const t=new Tb(e.locale);t.set({role:"radio",isToggleable:!0,label:o[l],icon:n[l],tooltip:o[l]});const c=s?s(l):l;t.bind("isOn").to(e,r,t=>{let e=t;return""===t&&a&&(e=a),c===e}),t.on("execute",()=>{!a&&c&&e[r]===c?e[r]=void 0:e[r]=c}),i.items.add(t)}}const YO=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function XO(t){return(e,n,i)=>{const o=new BO(e.locale,{colorDefinitions:ZO(t.colorConfig),columns:t.columns,defaultColorValue:t.defaultColorValue,colorPickerConfig:t.colorPickerConfig});return o.inputView.set({id:n,ariaDescribedById:i}),o.bind("isReadOnly").to(e,"isEnabled",t=>!t),o.bind("hasError").to(e,"errorText",t=>!!t),o.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(o),o}}function JO(t){const e=parseFloat(t);return!Number.isNaN(e)&&t===String(e)}function ZO(t){return t.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class QO extends db{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;paddingInput;widthInput;heightInput;horizontalAlignmentToolbar;verticalAlignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(t,e){super(t),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=e;const{borderStyleDropdown:n,borderWidthInput:i,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:l,operatorLabel:c,heightInput:u,dimensionsLabel:d}=this._createDimensionFields(),{horizontalAlignmentToolbar:h,verticalAlignmentToolbar:f,alignmentLabel:p}=this._createAlignmentFields();this.focusTracker=new Wn,this.keystrokes=new Gn,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=i,this.borderColorInput=o,this.backgroundInput=a,this.paddingInput=this._createPaddingField(),this.widthInput=l,this.heightInput=u,this.horizontalAlignmentToolbar=h,this.verticalAlignmentToolbar=f;const{saveButtonView:g,cancelButtonView:m}=this._createActionButtons();this.saveButtonView=g,this.cancelButtonView=m,this._focusables=new Dm,this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Pb(t,{label:this.t("Cell properties")})),this.children.add(new o_(t,{labelView:r,children:[r,n,o,i],class:"ck-table-form__border-row"})),this.children.add(new o_(t,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new o_(t,{children:[new o_(t,{labelView:d,children:[d,l,c,u],class:"ck-table-form__dimensions-row"}),new o_(t,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new o_(t,{labelView:p,children:[p,h,f],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new o_(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),wb({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableCellProperties,e={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},n=XO({colorConfig:this.options.borderColors,columns:5,defaultColorValue:e.color,colorPickerConfig:this.options.colorPickerConfig}),i=this.locale,o=this.t,r=o("Style"),s=new yb(i);s.text=o("Border");const a=HO(o),l=new yv(i,lw);l.set({label:r,class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",t=>a[t||"none"]),l.fieldView.on("execute",t=>{this.borderStyle=t.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",t=>!t),Gv(l.fieldView,GO(this,e.style),{role:"menu",ariaLabel:r});const c=new yv(i,sw);c.set({label:o("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",tM),c.fieldView.on("input",()=>{this.borderWidth=c.fieldView.element.value});const u=new yv(i,n);return u.set({label:o("Color"),class:"ck-table-form__border-color"}),u.fieldView.bind("value").to(this,"borderColor"),u.bind("isEnabled").to(this,"borderStyle",tM),u.fieldView.on("input",()=>{this.borderColor=u.fieldView.value}),this.on("change:borderStyle",(t,n,i,o)=>{tM(i)||(this.borderColor="",this.borderWidth=""),tM(o)||(this.borderColor=e.color,this.borderWidth=e.width)}),{borderRowLabel:s,borderStyleDropdown:l,borderColorInput:u,borderWidthInput:c}}_createBackgroundFields(){const t=this.locale,e=this.t,n=new yb(t);n.text=e("Background");const i=XO({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new yv(t,i);return o.set({label:e("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const t=this.locale,e=this.t,n=new yb(t);n.text=e("Dimensions");const i=new yv(t,sw);i.set({label:e("Width"),class:"ck-table-form__dimensions-row__width"}),i.fieldView.bind("value").to(this,"width"),i.fieldView.on("input",()=>{this.width=i.fieldView.element.value});const o=new db(t);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"Ã"}]});const r=new yv(t,sw);return r.set({label:e("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:n,widthInput:i,operatorLabel:o,heightInput:r}}_createPaddingField(){const t=this.locale,e=this.t,n=new yv(t,sw);return n.set({label:e("Padding"),class:"ck-table-cell-properties-form__padding"}),n.fieldView.bind("value").to(this,"padding"),n.fieldView.on("input",()=>{this.padding=n.fieldView.element.value}),n}_createAlignmentFields(){const t=this.locale,e=this.t,n=new yb(t),i={left:up,center:lp,right:hp,justify:cp,top:fp,middle:dp,bottom:ap};n.text=e("Table cell text alignment");const o=new Fv(t),r="rtl"===t.contentLanguageDirection;o.set({isCompact:!0,role:"radiogroup",ariaLabel:e("Horizontal text alignment toolbar")}),KO({view:this,icons:i,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:t=>{if(r){if("left"===t)return"right";if("right"===t)return"left"}return t},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const s=new Fv(t);return s.set({isCompact:!0,role:"radiogroup",ariaLabel:e("Vertical text alignment toolbar")}),KO({view:this,icons:i,toolbar:s,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:s,alignmentLabel:n}}_createActionButtons(){const t=this.locale,e=this.t,n=new Tb(t),i=new Tb(t),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return n.set({label:e("Save"),icon:vp,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...t)=>t.every(t=>!t)),i.set({label:e("Cancel"),icon:mp,class:"ck-button-cancel",withText:!0}),i.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:i}}get _horizontalAlignmentLabels(){const t=this.locale,e=this.t,n=e("Align cell text to the left"),i=e("Align cell text to the center"),o=e("Align cell text to the right"),r=e("Justify cell text");return"rtl"===t.uiLanguageDirection?{right:o,center:i,left:n,justify:r}:{left:n,center:i,right:o,justify:r}}get _verticalAlignmentLabels(){const t=this.t;return{top:t("Align cell text to the top"),middle:t("Align cell text to the middle"),bottom:t("Align cell text to the bottom")}}}function tM(t){return"none"!==t}const eM=(()=>[Gb.defaultPositions.northArrowSouth,Gb.defaultPositions.northArrowSouthWest,Gb.defaultPositions.northArrowSouthEast,Gb.defaultPositions.southArrowNorth,Gb.defaultPositions.southArrowNorthWest,Gb.defaultPositions.southArrowNorthEast,Gb.defaultPositions.viewportStickyNorth])();function nM(t,e){const n=t.plugins.get("ContextualBalloon"),i=t.editing.view.document.selection;let o;"cell"===e?VO(i)&&(o=oM(t)):MO(i)&&(o=iM(t)),o&&n.updatePosition(o)}function iM(t){const e=t.model.document.selection,n=yI(e),i=t.editing.mapper.toViewElement(n);return{target:t.editing.view.domConverter.mapViewToDom(i),positions:eM}}function oM(t){const e=t.editing.mapper,n=t.editing.view.domConverter,i=t.model.document.selection;if(i.rangeCount>1)return{target:()=>sM(i.getRanges(),t),positions:eM};const o=rM(i.getFirstPosition()),r=e.toViewElement(o);return{target:n.mapViewToDom(r),positions:eM}}function rM(t){const e=t.nodeAfter&&t.nodeAfter.is("element","tableCell");return e?t.nodeAfter:t.findAncestor("tableCell")}function sM(t,e){const n=e.editing.mapper,i=e.editing.view.domConverter,o=Array.from(t).map(t=>{const e=rM(t.start),o=n.toViewElement(e);return new Le(i.mapViewToDom(o))});return Le.getBoundingRect(o)}function aM(t){if(!t||!i(t))return t;const{top:e,right:n,bottom:o,left:r}=t;return e==n&&n==o&&o==r?e:void 0}function lM(t,e){const n=parseFloat(t);return Number.isNaN(n)||String(n)!==String(t)?t:`${n}${e}`}function cM(t,e={}){const n={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...t};return e.includeAlignmentProperty&&!n.alignment&&(n.alignment="center"),e.includePaddingProperty&&!n.padding&&(n.padding=""),e.includeVerticalAlignmentProperty&&!n.verticalAlignment&&(n.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!n.horizontalAlignment&&(n.horizontalAlignment=e.isRightToLeftContent?"right":"left"),n}function uM(t,e){return cM({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...t},e)}function dM(t,e){return cM({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...t},e)}const hM=500,fM={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class pM extends Gh{_defaultContentTableCellProperties;_defaultLayoutTableCellProperties;_balloon;view;_viewWithContentTableDefaults;_viewWithLayoutTableDefaults;_undoStepBatch;_isReady;static get requires(){return[l_]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("table.tableCellProperties",{borderColors:YO,backgroundColors:YO})}init(){const t=this.editor,e=t.t;this._defaultContentTableCellProperties=dM(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection}),this._defaultLayoutTableCellProperties=cM(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection}),this._balloon=t.plugins.get(l_),this.view=null,this._isReady=!1,t.ui.componentFactory.add("tableCellProperties",n=>{const i=new Tb(n);i.set({label:e("Cell properties"),icon:fg,tooltip:!0}),this.listenTo(i,"execute",()=>this._showView());const o=Object.values(fM).map(e=>t.commands.get(e));return i.bind("isEnabled").toMany(o,"isEnabled",(...t)=>t.some(t=>t)),i})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(t){const e=this.editor,n=e.config.get("table.tableCellProperties"),i=dv(n.borderColors),o=uv(e.locale,i),r=dv(n.backgroundColors),s=uv(e.locale,r),a=!1!==n.colorPicker,l=new QO(e.locale,{borderColors:o,backgroundColors:s,defaultTableCellProperties:t,colorPickerConfig:!!a&&(n.colorPicker||{})}),c=e.t;l.render(),this.listenTo(l,"submit",()=>{this._hideView()}),this.listenTo(l,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),l.keystrokes.set("Esc",(t,e)=>{this._hideView(),e()}),mb({emitter:l,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const u=WO(c),d=jO(c);return l.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),l.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:l.borderColorInput,commandName:"tableCellBorderColor",errorText:u,validator:$O})),l.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:l.borderWidthInput,commandName:"tableCellBorderWidth",errorText:d,validator:qO})),l.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:l.paddingInput,commandName:"tableCellPadding",errorText:d,validator:UO})),l.on("change:width",this._getValidatedPropertyChangeCallback({viewField:l.widthInput,commandName:"tableCellWidth",errorText:d,validator:UO})),l.on("change:height",this._getValidatedPropertyChangeCallback({viewField:l.heightInput,commandName:"tableCellHeight",errorText:d,validator:UO})),l.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:l.backgroundInput,commandName:"tableCellBackgroundColor",errorText:u,validator:$O})),l.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),l.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),l}_fillViewFormFromCommandValues(){const t=this.editor.commands,e=t.get("tableCellBorderStyle");Object.entries(fM).map(([e,n])=>{const i=e,o=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[i]||"":this._defaultLayoutTableCellProperties[i]||"";return[e,t.get(n).value||o]}).forEach(([t,n])=>{("borderColor"!==t&&"borderWidth"!==t||"none"!==e.value)&&this.view.set(t,n)}),this._isReady=!0}_showView(){const t=this.editor,e=MO(t.editing.view.document.selection),n=e&&t.editing.mapper.toModelElement(e),i=!n||"layout"!==n.getAttribute("tableType");i&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):i||this._viewWithLayoutTableDefaults||(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=i?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:oM(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor,e=t.editing.view.document;VO(e.selection)?this._isViewVisible&&nM(t,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(e,n,i)=>{this._isReady&&this.editor.execute(t,{value:i,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:e,viewField:n,validator:i,errorText:o}=t,r=Wi(()=>{n.errorText=o},hM);return(t,o,s)=>{r.cancel(),this._isReady&&(i(s)?(this.editor.execute(e,{value:s,batch:this._undoStepBatch}),n.errorText=null):r())}}}class gM extends Yh{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(t,e,n){switch(super(t),this.attributeName=e,this._defaultContentTableValue=n,e){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const t=this.editor,e=t.model.document.selection,n=this.editor.plugins.get("TableUtils"),i=n.getSelectionAffectedTableCells(e),o=yI(e);this._defaultValue=o&&"layout"===o.getAttribute("tableType")?this._defaultLayoutTableValue:this._defaultContentTableValue,this.isEnabled=!!i.length,this.value=this._getSingleValue(i)}execute(t={}){const{value:e,batch:n}=t,i=this.editor.model,o=this.editor.plugins.get("TableUtils"),r=o.getSelectionAffectedTableCells(i.document.selection),s=this._getValueToSet(e);i.enqueueChange(n,t=>{s?r.forEach(e=>t.setAttribute(this.attributeName,s,e)):r.forEach(e=>t.removeAttribute(this.attributeName,e))})}_getAttribute(t){if(!t)return;const e=t.getAttribute(this.attributeName);return e!==this._defaultValue?e:void 0}_getValueToSet(t){if(t!==this._defaultValue)return t}_getSingleValue(t){const e=this._getAttribute(t[0]),n=t.every(t=>this._getAttribute(t)===e);return n?e:void 0}}class mM extends gM{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=lM(t,"px"),t!==this._defaultValue)return t}}class bM extends Gh{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[pO]}init(){const t=this.editor,e=dM(t.config.get("table.tableCellProperties.defaultProperties"));_I(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",attributeName:"width",attributeType:"length",defaultValue:e.width}),t.commands.add("tableCellWidth",new mM(t,e.width))}}class vM extends gM{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){const e=lM(t,"px");if(e!==this._defaultValue)return e}}class wM extends gM{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=lM(t,"px");if(e!==this._defaultValue)return e}}class _M extends gM{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class yM extends gM{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class kM extends gM{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class CM extends gM{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class xM extends gM{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class EM extends gM{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){const e=lM(t,"px");if(e!==this._defaultValue)return e}}const SM=/^(top|middle|bottom)$/,TM=/^(left|center|right|justify)$/;class AM extends Gh{static get pluginName(){return"TableCellPropertiesEditing"}static get licenseFeatureCode(){return"TCP"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[pO,bM]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const i=dM(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection});t.data.addStyleProcessorRules(Yd),PM(e,n,{color:i.borderColor,style:i.borderStyle,width:i.borderWidth}),t.commands.add("tableCellBorderStyle",new CM(t,i.borderStyle)),t.commands.add("tableCellBorderColor",new xM(t,i.borderColor)),t.commands.add("tableCellBorderWidth",new EM(t,i.borderWidth)),_I(e,n,{modelAttribute:"tableCellHeight",styleName:"height",attributeName:"height",attributeType:"length",defaultValue:i.height}),t.commands.add("tableCellHeight",new wM(t,i.height)),t.data.addStyleProcessorRules(ah),_I(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:i.padding}),t.commands.add("tableCellPadding",new vM(t,i.padding)),t.data.addStyleProcessorRules(Ud),_I(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",attributeName:"bgcolor",attributeType:"color",defaultValue:i.backgroundColor}),t.commands.add("tableCellBackgroundColor",new _M(t,i.backgroundColor)),IM(e,n,i.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new kM(t,i.horizontalAlignment)),RM(e,n,i.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new yM(t,i.verticalAlignment))}}function PM(t,e,n){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};t.extend("tableCell",{allowAttributes:Object.values(i)});for(const o of Object.values(i))t.setAttributeProperties(o,{isFormatting:!0});hI(e,"td",i,n),hI(e,"th",i,n),fI(e,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),fI(e,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),fI(e,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}function IM(t,e,n){t.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.setAttributeProperties("tableCellHorizontalAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:t=>({key:"style",value:{"text-align":t}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":TM}},model:{key:"tableCellHorizontalAlignment",value:(t,e,i)=>{const o=gI(n,"left",i),r=t.getStyle("text-align");if(r!==o)return r;e.consumable.consume(t,{styles:"text-align"})}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:TM}},model:{key:"tableCellHorizontalAlignment",value:(t,e,i)=>{const o=gI(n,"left",i),r=t.getAttribute("align");if(r!==o)return r;e.consumable.consume(t,{attributes:"align"})}}})}function RM(t,e,n){t.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.setAttributeProperties("tableCellVerticalAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:t=>({key:"style",value:{"vertical-align":t}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":SM}},model:{key:"tableCellVerticalAlignment",value:(t,e,i)=>{const o=gI(n,"middle",i),r=t.getStyle("vertical-align");if(r!==o)return r;e.consumable.consume(t,{styles:"vertical-align"})}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:SM}},model:{key:"tableCellVerticalAlignment",value:(t,e,i)=>{const o=gI(n,"middle",i),r=t.getAttribute("valign");if(r!==o)return r;e.consumable.consume(t,{attributes:"valign"})}}})}class OM extends Gh{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[AM,pM]}}class MM extends Yh{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:n}=this.editor;let{table:i=e.document.selection.getSelectedElement(),columnWidths:o,tableWidth:r}=t;o&&(o=Array.isArray(o)?o:o.split(",")),e.change(t=>{r?t.setAttribute("tableWidth",r,i):t.removeAttribute("tableWidth",i);const e=n.get("TableColumnResizeEditing").getColumnGroupElement(i);if(!o&&!e)return;if(!o)return t.remove(e);const s=TR(o);if(e)Array.from(e.getChildren()).forEach((e,n)=>t.setAttribute("columnWidth",s[n],e));else{const e=t.createElement("tableColumnGroup");s.forEach(n=>t.appendElement("tableColumn",{columnWidth:n},e)),t.append(e,i)}})}}function DM(t){return e=>e.on("element:colgroup",(e,n,i)=>{const o=n.modelCursor.findAncestor("table"),r=RR(o);if(!r)return;const s=OR(r),a=t.getColumns(o);let l=DR(r,i.writer);l=Array.from({length:a},(t,e)=>l[e]||"auto"),(l.length!=s.length||l.includes("auto"))&&IR(s,r,TR(l),i.writer)},{priority:"low"})}function VM(){return t=>t.on("insert:table",(t,e,n)=>{const i=n.writer,o=e.item,r=n.mapper.toViewElement(o),s=r.is("element","table")?r:Array.from(r.getChildren()).find(t=>t.is("element","table")),a=RR(o);a?i.addClass("ck-table-resized",s):i.removeClass("ck-table-resized",s)},{priority:"low"})}function NM(){return t=>{t.on("element:table",(t,e,n)=>{n.consumable.consume(e.viewItem,{classes:"ck-table-resized"})})}}const LM=qe("px");class BM extends Gh{_isResizingActive;_resizingData;_domEmitter;_tableUtilsPlugin;_initialMouseEventData=null;static get requires(){return[pO,VR]}static get pluginName(){return"TableColumnResizeEditing"}static get licenseFeatureCode(){return"TCR"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(t){super(t),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Ee()),this._tableUtilsPlugin=t.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(e,n,i)=>{const o=i?"removeClass":"addClass";t.editing.view.change(e=>{for(const n of t.editing.view.document.roots)e[o]("ck-column-resize_disabled",t.editing.view.document.getRoot(n.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const t=this.editor,e=t.plugins.get("TableColumnResize"),n=t.plugins.get("TableEditing");n.registerAdditionalSlot({filter:t=>t.is("element","tableColumnGroup"),positionOffset:0});const i=new MM(t);t.commands.add("resizeTableWidth",i),t.commands.add("resizeColumnWidths",i),this.bind("_isResizingAllowed").to(t,"isReadOnly",e,"isEnabled",i,"isEnabled",(t,e,n)=>!t&&e&&n)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(t){return RR(t)}getTableColumnElements(t){return OR(t)}getTableColumnsWidths(t){return MR(t)}_extendSchema(){const t=this.editor.model.schema;t.extend("table",{allowAttributes:["tableWidth"]}),t.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),t.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0}),t.setAttributeProperties("columnWidth",{isFormatting:!0})}_registerPostFixer(){const t=this.editor,e=t.model;function n(t,e,n){const o=n._tableUtilsPlugin.getColumns(e),r=o-t.length;if(0===r)return t;const s=t.map(t=>Number(t.replace("%",""))),a=i(n.editor.model.document.differ,e);for(const i of a){const t=o-s.length;if(0===t)continue;const r=t>0,a=n._tableUtilsPlugin.getCellLocation(i).column;if(r){const i=vR(e,n.editor),o=ER(t,i);s.splice(a,0,...o)}else{const e=s.splice(a,Math.abs(t));s[a]+=SR(e)}}return s.map(t=>t+"%")}function i(t,e){const n=new Set;for(const i of t.getChanges())if("insert"==i.type&&i.position.nodeAfter&&"tableCell"==i.position.nodeAfter.name&&i.position.nodeAfter.getAncestors().includes(e))n.add(i.position.nodeAfter);else if("remove"==i.type){const t=i.position.nodeBefore||i.position.nodeAfter;"tableCell"==t.name&&t.getAncestors().includes(e)&&n.add(t)}return n}e.document.registerPostFixer(t=>{let i=!1;for(const o of bR(e)){const e=this.getColumnGroupElement(o),r=this.getTableColumnElements(e),s=this.getTableColumnsWidths(e);let a=TR(s);a=n(a,o,this),Yi(s,a)||(IR(r,e,a,t),i=!0)}return i})}_registerConverters(){const t=this.editor,e=t.conversion;e.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{key:"tableWidth",value:t=>{const e=t.parent;if(!e.is("element","figure"))return t.getStyle("width")}}}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:t=>({name:"figure",key:"style",value:{width:t}})}),e.elementToElement({model:"tableColumnGroup",view:"colgroup"}),e.elementToElement({model:"tableColumn",view:"col"}),e.for("downcast").add(VM()),e.for("upcast").add(NM()),e.for("upcast").add(DM(this._tableUtilsPlugin)),e.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:t=>{const e=t.getStyle("width");return e&&(e.endsWith("%")||e.endsWith("pt"))?e:"auto"}}}),e.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),e.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:t=>({key:"style",value:{width:t}})})}_registerResizingListeners(){const t=this.editor.editing.view;t.addObserver(PO),t.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),t.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),t.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(Q.window.document,"mousemove",Vh(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(Q.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(t){const e=this.editor,n=e.editing.view.domConverter,i=n.mapViewToDom(t.findAncestor("table")),o=n.mapViewToDom(t.findAncestor(t=>["td","th"].includes(t.name))),r=new Le(i),s=new Le(o),a=LM(Number((r.top-s.top).toFixed(4))),l=LM(Number((s.bottom-r.bottom).toFixed(4)));e.editing.view.change(e=>{e.setStyle("top",a,t),e.setStyle("bottom",l,t)})}_resetResizerStyles(t){this.editor.editing.view.change(e=>{e.removeStyle("top",t),e.removeStyle("bottom",t)})}_onMouseOverHandler(t,e){const n=e.target;n.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(n)}_onMouseOutHandler(t,e){const n=e.target;n.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(n))}_onMouseDownHandler(t,e){const n=e.target;if(!n.hasClass("ck-table-column-resizer"))return;if(!this._isResizingAllowed)return;const i=this.editor,o=i.editing.mapper.toModelElement(n.findAncestor("figure"));i.model.canEditAt(o)&&(e.preventDefault(),t.stop(),this._initialMouseEventData=e)}_startResizingAfterThreshold(){const t=this._initialMouseEventData,{target:e}=t,n=this.editor.editing.mapper.toModelElement(e.findAncestor("figure")),i=e.findAncestor("table"),o=r(n,this._tableUtilsPlugin,this.editor);function r(t,e,n){const i=Array(e.getColumns(t)),o=new PI(t);for(const r of o){const t=n.editing.mapper.toViewElement(r.cell),e=n.editing.view.domConverter.mapViewToDom(t),o=PR(e);(!i[r.column]||o<i[r.column])&&(i[r.column]=CR(o))}return i}function s(t,e,n){const i=t.createContainerElement("colgroup");for(let o=0;o<e.length;o++){const n=t.createEmptyElement("col"),r=`${CR(e[o]/SR(e)*100)}%`;t.setStyle("width",r,n),t.insert(t.createPositionAt(i,"end"),n)}t.insert(t.createPositionAt(n,0),i)}function a(t,e,n){const i=n.widths.viewFigureWidth/n.widths.viewFigureParentWidth;t.addClass("ck-table-resized",e),t.addClass("ck-table-column-resizer__active",n.elements.viewResizer),t.setStyle("width",`${CR(100*i)}%`,e.findAncestor("figure"))}Array.from(i.getChildren()).find(t=>t.is("element","colgroup"))||this.editor.editing.view.change(t=>{s(t,o,i)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,o),this.editor.editing.view.change(t=>a(t,i,this._resizingData))}_onMouseMoveHandler(t,e){if(this._initialMouseEventData){const t=this._initialMouseEventData.domEvent,n=Math.abs(e.clientX-t.clientX);if(!(n>=mR))return;this._startResizingAfterThreshold(),this._initialMouseEventData=null}if(!this._isResizingActive)return;if(!this._isResizingAllowed)return void this._onMouseUpHandler();const{columnPosition:n,flags:{isRightEdge:i,isTableCentered:o,isLtrContent:r},elements:{viewFigure:s,viewLeftColumn:a,viewRightColumn:l,viewResizer:c},widths:{viewFigureParentWidth:u,tableWidth:d,leftColumnWidth:h,rightColumnWidth:f}}=this._resizingData,p=-h+pR,g=i?u-d:f-pR,m=(r?1:-1)*(i&&o?2:1),b=xR((e.clientX-n)*m,Math.min(p,0),Math.max(g,0));0!==b&&(this.editor.editing.view.change(t=>{const e=CR(100*(h+b)/d);if(t.setStyle("width",`${e}%`,a),i){const e=CR(100*(d+b)/u);t.setStyle("width",`${e}%`,s)}else{const e=CR(100*(f-b)/d);t.setStyle("width",`${e}%`,l)}}),this._recalculateResizerElement(c))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:t,modelTable:e,viewFigure:n,viewColgroup:i}=this._resizingData.elements,o=this.editor,r=o.editing.view,s=this.getColumnGroupElement(e),a=Array.from(i.getChildren()).filter(t=>t.is("view:element")),l=s?this.getTableColumnsWidths(s):null,c=a.map(t=>t.getStyle("width")),u=!Yi(l,c),d=e.getAttribute("tableWidth"),h=n.getStyle("width"),f=d!==h;(u||f)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:e,tableWidth:`${CR(h)}%`,columnWidths:c}):r.change(t=>{if(l)for(const e of a)t.setStyle("width",l.shift(),e);else t.remove(i);f&&(d?t.setStyle("width",d,n):t.removeStyle("width",n)),l||d||t.removeClass("ck-table-resized",[...n.getChildren()].find(t=>"table"===t.name))})),r.change(e=>{e.removeClass("ck-table-column-resizer__active",t)});const p=r.domConverter.mapViewToDom(t);p.matches(":hover")||this._resetResizerStyles(t),this._isResizingActive=!1,this._resizingData=null}_getResizingData(t,e){const n=this.editor,i=t.domEvent.clientX,o=t.target,r=o.findAncestor("td")||o.findAncestor("th"),s=n.editing.mapper.toModelElement(r),a=s.findAncestor("table"),l=kR(s,this._tableUtilsPlugin).rightEdge,c=this._tableUtilsPlugin.getColumns(a)-1,u=l===c,d=!a.hasAttribute("tableAlignment"),h="rtl"!==n.locale.contentLanguageDirection,f=r.findAncestor("table"),p=f.findAncestor("figure"),g=[...f.getChildren()].find(t=>t.is("element","colgroup")),m=g.getChild(l),b=u?void 0:g.getChild(l+1),v=yR(n.editing.view.domConverter.mapViewToDom(p.parent)),w=yR(n.editing.view.domConverter.mapViewToDom(p)),_=wR(a,n),y=e[l],k=u?void 0:e[l+1];return{columnPosition:i,flags:{isRightEdge:u,isTableCentered:d,isLtrContent:h},elements:{viewResizer:o,modelTable:a,viewFigure:p,viewColgroup:g,viewLeftColumn:m,viewRightColumn:b},widths:{viewFigureParentWidth:v,viewFigureWidth:w,tableWidth:_,leftColumnWidth:y,rightColumnWidth:k}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(t=>{t.on("insert:tableCell",(t,e,n)=>{const i=e.item,o=n.mapper.toViewElement(i),r=n.writer;r.insert(r.createPositionAt(o,"end"),r.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class FM extends Gh{static get requires(){return[BM,bM]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class zM extends Yh{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(t,e,n){super(t),this.attributeName=e,this._defaultContentTableValue=n,this._defaultLayoutTableValue="tableBorderStyle"===e?"none":void 0}refresh(){const t=this.editor,e=t.model.document.selection,n=yI(e);this._defaultValue=n&&"layout"===n.getAttribute("tableType")?this._defaultLayoutTableValue:this._defaultContentTableValue,this.isEnabled=!!n,this.value=this._getValue(n)}execute(t={}){const e=this.editor.model,n=e.document.selection,{value:i,batch:o}=t,r=yI(n),s=this._getValueToSet(i);e.enqueueChange(o,t=>{s?t.setAttribute(this.attributeName,s,r):t.removeAttribute(this.attributeName,r)})}_getValue(t){if(!t)return;const e=t.getAttribute(this.attributeName);return e!==this._defaultValue?e:void 0}_getValueToSet(t){if(t!==this._defaultValue)return t}}class HM extends zM{constructor(t,e){super(t,"tableBackgroundColor",e)}}class WM extends zM{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class jM extends zM{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class $M extends zM{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=aM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){const e=lM(t,"px");if(e!==this._defaultValue)return e}}class UM extends zM{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=lM(t,"px"),t!==this._defaultValue)return t}}class qM extends zM{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=lM(t,"px"),t!==this._defaultValue)return t}}class GM extends zM{constructor(t,e){super(t,"tableAlignment",e)}}const KM=/^(left|center|right)$/,YM=/^(left|none|right)$/;class XM extends Gh{static get pluginName(){return"TablePropertiesEditing"}static get licenseFeatureCode(){return"TCP"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[pO]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const i=uM(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(Yd),JM(e,n,{color:i.borderColor,style:i.borderStyle,width:i.borderWidth}),t.commands.add("tableBorderColor",new WM(t,i.borderColor)),t.commands.add("tableBorderStyle",new jM(t,i.borderStyle)),t.commands.add("tableBorderWidth",new $M(t,i.borderWidth)),ZM(e,n,i.alignment),t.commands.add("tableAlignment",new GM(t,i.alignment)),tD(e,n,{modelAttribute:"tableWidth",styleName:"width",attributeName:"width",attributeType:"length",defaultValue:i.width}),t.commands.add("tableWidth",new UM(t,i.width)),tD(e,n,{modelAttribute:"tableHeight",styleName:"height",attributeName:"height",attributeType:"length",defaultValue:i.height}),t.commands.add("tableHeight",new qM(t,i.height)),t.data.addStyleProcessorRules(Ud),QM(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",attributeName:"bgcolor",attributeType:"color",defaultValue:i.backgroundColor}),t.commands.add("tableBackgroundColor",new HM(t,i.backgroundColor))}}function JM(t,e,n){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};t.extend("table",{allowAttributes:Object.values(i)});for(const o of Object.values(i))t.setAttributeProperties(o,{isFormatting:!0});hI(e,"table",i,n),pI(e,{modelAttribute:i.color,styleName:"border-color"}),pI(e,{modelAttribute:i.style,styleName:"border-style"}),pI(e,{modelAttribute:i.width,styleName:"border-width"})}function ZM(t,e,n){t.extend("table",{allowAttributes:["tableAlignment"]}),t.setAttributeProperties("tableAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(t,e,n)=>{const i="layout"!==n.item.getAttribute("tableType")?{float:"none"}:{"margin-left":"auto","margin-right":"auto"};return{key:"style",value:i}}},converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:YM}},model:{key:"tableAlignment",value:(t,e,i)=>{if("figure"==t.name&&!t.hasClass("table"))return;const o=gI(n,"",i);let r=t.getStyle("float");if("none"===r&&(r="center"),r!==o)return r;e.consumable.consume(t,{styles:"float"})}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(t,e,i)=>{if("figure"==t.name&&!t.hasClass("table"))return;const o=gI(n,"",i),r="center";if(r!==o)return r;e.consumable.consume(t,{styles:["margin-left","margin-right"]})}}}).attributeToAttribute({view:{name:"table",attributes:{align:KM}},model:{key:"tableAlignment",value:(t,e,i)=>{const o=gI(n,"",i),r=t.getAttribute("align");if(r!==o)return r;e.consumable.consume(t,{attributes:"align"})}}})}function QM(t,e,n){const{modelAttribute:i}=n;t.extend("table",{allowAttributes:[i]}),t.setAttributeProperties(i,{isFormatting:!0}),dI(e,{viewElement:"table",...n}),pI(e,n)}function tD(t,e,n){const{modelAttribute:i}=n;t.extend("table",{allowAttributes:[i]}),t.setAttributeProperties(i,{isFormatting:!0}),dI(e,{viewElement:/^(table|figure)$/,shouldUpcast:t=>!("table"==t.name&&"figure"==t.parent.name||"figure"==t.name&&!t.hasClass("table")),...n}),fI(e,{modelElement:"table",...n})}class eD extends db{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;widthInput;heightInput;alignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(t,e){super(t),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=e;const{borderStyleDropdown:n,borderWidthInput:i,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:l,operatorLabel:c,heightInput:u,dimensionsLabel:d}=this._createDimensionFields(),{alignmentToolbar:h,alignmentLabel:f}=this._createAlignmentFields();this.focusTracker=new Wn,this.keystrokes=new Gn,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=i,this.borderColorInput=o,this.backgroundInput=a,this.widthInput=l,this.heightInput=u,this.alignmentToolbar=h;const{saveButtonView:p,cancelButtonView:g}=this._createActionButtons();this.saveButtonView=p,this.cancelButtonView=g,this._focusables=new Dm,this._focusCycler=new Ib({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Pb(t,{label:this.t("Table properties")})),this.children.add(new o_(t,{labelView:r,children:[r,n,o,i],class:"ck-table-form__border-row"})),this.children.add(new o_(t,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new o_(t,{children:[new o_(t,{labelView:d,children:[d,l,c,u],class:"ck-table-form__dimensions-row"}),new o_(t,{labelView:f,children:[f,h],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new o_(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),wb({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableProperties,e={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},n=XO({colorConfig:this.options.borderColors,columns:5,defaultColorValue:e.color,colorPickerConfig:this.options.colorPickerConfig}),i=this.locale,o=this.t,r=o("Style"),s=new yb(i);s.text=o("Border");const a=HO(o),l=new yv(i,lw);l.set({label:r,class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",t=>a[t||"none"]),l.fieldView.on("execute",t=>{this.borderStyle=t.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",t=>!t),Gv(l.fieldView,GO(this,e.style),{role:"menu",ariaLabel:r});const c=new yv(i,sw);c.set({label:o("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",nD),c.fieldView.on("input",()=>{this.borderWidth=c.fieldView.element.value});const u=new yv(i,n);return u.set({label:o("Color"),class:"ck-table-form__border-color"}),u.fieldView.bind("value").to(this,"borderColor"),u.bind("isEnabled").to(this,"borderStyle",nD),u.fieldView.on("input",()=>{this.borderColor=u.fieldView.value}),this.on("change:borderStyle",(t,n,i,o)=>{nD(i)||(this.borderColor="",this.borderWidth=""),nD(o)||(this.borderColor=e.color,this.borderWidth=e.width)}),{borderRowLabel:s,borderStyleDropdown:l,borderColorInput:u,borderWidthInput:c}}_createBackgroundFields(){const t=this.locale,e=this.t,n=new yb(t);n.text=e("Background");const i=XO({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new yv(t,i);return o.set({label:e("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const t=this.locale,e=this.t,n=new yb(t);n.text=e("Dimensions");const i=new yv(t,sw);i.set({label:e("Width"),class:"ck-table-form__dimensions-row__width"}),i.fieldView.bind("value").to(this,"width"),i.fieldView.on("input",()=>{this.width=i.fieldView.element.value});const o=new db(t);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"Ã"}]});const r=new yv(t,sw);return r.set({label:e("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:n,widthInput:i,operatorLabel:o,heightInput:r}}_createAlignmentFields(){const t=this.locale,e=this.t,n=new yb(t);n.text=e("Alignment");const i=new Fv(t);return i.set({role:"radiogroup",isCompact:!0,ariaLabel:e("Table alignment toolbar")}),KO({view:this,icons:{left:Up,center:jp,right:qp},toolbar:i,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:n,alignmentToolbar:i}}_createActionButtons(){const t=this.locale,e=this.t,n=new Tb(t),i=new Tb(t),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return n.set({label:e("Save"),icon:vp,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...t)=>t.every(t=>!t)),i.set({label:e("Cancel"),icon:mp,class:"ck-button-cancel",withText:!0}),i.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:i}}get _alignmentLabels(){const t=this.locale,e=this.t,n=e("Align table to the left"),i=e("Center table"),o=e("Align table to the right");return"rtl"===t.uiLanguageDirection?{right:o,center:i,left:n}:{left:n,center:i,right:o}}}function nD(t){return"none"!==t}const iD=500,oD={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class rD extends Gh{_defaultContentTableProperties;_defaultLayoutTableProperties;_balloon;view=null;_viewWithContentTableDefaults=null;_viewWithLayoutTableDefaults=null;_undoStepBatch;_isReady;static get requires(){return[l_]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("table.tableProperties",{borderColors:YO,backgroundColors:YO})}init(){const t=this.editor;this._defaultContentTableProperties=uM(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=cM(),this._balloon=t.plugins.get(l_),t.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const t=this.editor,e=t.t,n=new Tb(t.locale);n.set({label:e("Table properties"),icon:mg,tooltip:!0}),this.listenTo(n,"execute",()=>this._showView());const i=Object.values(oD).map(e=>t.commands.get(e));return n.bind("isEnabled").toMany(i,"isEnabled",(...t)=>t.some(t=>t)),n}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(t){const e=this.editor,n=e.config.get("table.tableProperties"),i=dv(n.borderColors),o=uv(e.locale,i),r=dv(n.backgroundColors),s=uv(e.locale,r),a=!1!==n.colorPicker,l=new eD(e.locale,{borderColors:o,backgroundColors:s,defaultTableProperties:t,colorPickerConfig:!!a&&(n.colorPicker||{})}),c=e.t;l.render(),this.listenTo(l,"submit",()=>{this._hideView()}),this.listenTo(l,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),l.keystrokes.set("Esc",(t,e)=>{this._hideView(),e()}),mb({emitter:l,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const u=WO(c),d=jO(c);return l.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),l.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:l.borderColorInput,commandName:"tableBorderColor",errorText:u,validator:$O})),l.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:l.borderWidthInput,commandName:"tableBorderWidth",errorText:d,validator:qO})),l.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:l.backgroundInput,commandName:"tableBackgroundColor",errorText:u,validator:$O})),l.on("change:width",this._getValidatedPropertyChangeCallback({viewField:l.widthInput,commandName:"tableWidth",errorText:d,validator:UO})),l.on("change:height",this._getValidatedPropertyChangeCallback({viewField:l.heightInput,commandName:"tableHeight",errorText:d,validator:UO})),l.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),l}_fillViewFormFromCommandValues(){const t=this.editor.commands,e=t.get("tableBorderStyle");Object.entries(oD).map(([e,n])=>{const i=e,o=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[i]||"":this._defaultLayoutTableProperties[i]||"";return[i,t.get(n).value||o]}).forEach(([t,n])=>{("borderColor"!==t&&"borderWidth"!==t||"none"!==e.value)&&this.view.set(t,n)}),this._isReady=!0}_showView(){const t=this.editor,e=MO(t.editing.view.document.selection),n=e&&t.editing.mapper.toModelElement(e),i=!n||"layout"!==n.getAttribute("tableType");i&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):i||this._viewWithLayoutTableDefaults||(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=i?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:iM(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor,e=t.editing.view.document;MO(e.selection)?this._isViewVisible&&nM(t,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(e,n,i)=>{this._isReady&&this.editor.execute(t,{value:i,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:e,viewField:n,validator:i,errorText:o}=t,r=Wi(()=>{n.errorText=o},iD);return(t,o,s)=>{r.cancel(),this._isReady&&(i(s)?(this.editor.execute(e,{value:s,batch:this._undoStepBatch}),n.errorText=null):r())}}}class sD extends Gh{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[XM,rD]}}
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aD(t){t.document.registerPostFixer(e=>lD(e,t))}function lD(t,e){const n=e.document.differ.getChanges();let i=!1;for(const o of n){if("insert"!=o.type)continue;const e=o.position.parent;if(e.is("element","table")||"table"==o.name){const n="table"==o.name?o.position.nodeAfter:e,r=Array.from(n.getChildren()).filter(t=>t.is("element","caption")),s=r.shift();if(!s)continue;for(const e of r)t.move(t.createRangeIn(e),s,"end"),t.remove(e);s.nextSibling&&(t.move(t.createRangeOn(s),n,"end"),i=!0),i=!!r.length||i}}return i}function cD(t){return!!t&&t.is("element","table")}function uD(t){for(const e of t.getChildren())if(e.is("element","caption"))return e;return null}function dD(t){const e=yI(t);return e?uD(e):null}function hD(t){const e=t.parent;return"figcaption"==t.name&&e&&e.is("element","figure")&&e.hasClass("table")||"caption"==t.name&&e&&e.is("element","table")?{name:!0}:null}class fD extends Yh{refresh(){const t=this.editor,e=yI(t.model.document.selection);this.isEnabled=!!e&&t.model.schema.checkChild(e,"caption"),this.isEnabled?this.value=!!uD(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const n=this.editor.model,i=yI(n.document.selection),o=this.editor.plugins.get("TableCaptionEditing"),r=o._getSavedCaption(i),s=r||t.createElement("caption");n.insertContent(s,i,"end"),e&&t.setSelection(s,"in")}_hideTableCaption(t){const e=this.editor.model,n=yI(e.document.selection),i=this.editor.plugins.get("TableCaptionEditing"),o=uD(n);i._saveCaption(n,o),e.deleteContent(t.createSelection(o,"on"))}}class pD extends Gh{_savedCaptionsMap=new WeakMap;static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.editing.view,i=t.t,o=t.config.get("table.tableCaption.useCaptionElement");if(e.isRegistered("caption")?e.extend("caption",{allowIn:"table"}):e.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleTableCaption",new fD(this.editor)),o){const e=t.plugins.get("TableEditing");e.registerAdditionalSlot({filter:t=>t.is("element","caption"),positionOffset:"end"})}t.conversion.for("upcast").elementToElement({view:hD,model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>cD(t.parent)?e.createContainerElement(o?"caption":"figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>{if(!cD(t.parent))return null;const r=e.createEditableElement(o?"caption":"figcaption");return e.setCustomProperty("tableCaption",!0,r),r.placeholder=i("Enter table caption"),ro({view:n,element:r,keepOnFocus:!0}),gy(r,e)}}),aD(t.model)}_getSavedCaption(t){const e=this._savedCaptionsMap.get(t);return e?xa.fromJSON(e):null}_saveCaption(t,e){this._savedCaptionsMap.set(t,e.toJSON())}}class gD extends Gh{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",i=>{const o=t.commands.get("toggleTableCaption"),r=new Tb(i);return r.set({icon:bp,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",t=>n(t?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),o.value){const n=dD(t.model.document.selection),i=t.editing.mapper.toViewElement(n);if(!i)return;e.scrollToTheSelection(),e.change(t=>{t.addClass("table__caption_highlighted",i)})}t.editing.view.focus()}),r})}}class mD extends Gh{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[pD,gD]}}},4335:function(t,e,n){"use strict";n.d(e,{A:function(){return vn}});var i={};function o(t,e){return function(){return t.apply(e,arguments)}}n.r(i),n.d(i,{hasBrowserEnv:function(){return Bt},hasStandardBrowserEnv:function(){return zt},hasStandardBrowserWebWorkerEnv:function(){return Ht},navigator:function(){return Ft},origin:function(){return Wt}});const{toString:r}=Object.prototype,{getPrototypeOf:s}=Object,{iterator:a,toStringTag:l}=Symbol,c=(t=>e=>{const n=r.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),u=t=>(t=t.toLowerCase(),e=>c(e)===t),d=t=>e=>typeof e===t,{isArray:h}=Array,f=d("undefined");function p(t){return null!==t&&!f(t)&&null!==t.constructor&&!f(t.constructor)&&v(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const g=u("ArrayBuffer");function m(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&g(t.buffer),e}const b=d("string"),v=d("function"),w=d("number"),_=t=>null!==t&&"object"===typeof t,y=t=>!0===t||!1===t,k=t=>{if("object"!==c(t))return!1;const e=s(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(l in t)&&!(a in t)},C=t=>{if(!_(t)||p(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},x=u("Date"),E=u("File"),S=u("Blob"),T=u("FileList"),A=t=>_(t)&&v(t.pipe),P=t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||v(t.append)&&("formdata"===(e=c(t))||"object"===e&&v(t.toString)&&"[object FormData]"===t.toString()))},I=u("URLSearchParams"),[R,O,M,D]=["ReadableStream","Request","Response","Headers"].map(u),V=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function N(t,e,{allOwnKeys:n=!1}={}){if(null===t||"undefined"===typeof t)return;let i,o;if("object"!==typeof t&&(t=[t]),h(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{if(p(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),r=o.length;let s;for(i=0;i<r;i++)s=o[i],e.call(null,t[s],s,t)}}function L(t,e){if(p(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i,o=n.length;while(o-- >0)if(i=n[o],e===i.toLowerCase())return i;return null}const B=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),F=t=>!f(t)&&t!==B;function z(){const{caseless:t,skipUndefined:e}=F(this)&&this||{},n={},i=(i,o)=>{const r=t&&L(n,o)||o;k(n[r])&&k(i)?n[r]=z(n[r],i):k(i)?n[r]=z({},i):h(i)?n[r]=i.slice():e&&f(i)||(n[r]=i)};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&N(arguments[o],i);return n}const H=(t,e,n,{allOwnKeys:i}={})=>(N(e,(e,i)=>{n&&v(e)?t[i]=o(e,n):t[i]=e},{allOwnKeys:i}),t),W=t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),j=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$=(t,e,n,i)=>{let o,r,a;const l={};if(e=e||{},null==t)return e;do{o=Object.getOwnPropertyNames(t),r=o.length;while(r-- >0)a=o[r],i&&!i(a,t,e)||l[a]||(e[a]=t[a],l[a]=!0);t=!1!==n&&s(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},U=(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},q=t=>{if(!t)return null;if(h(t))return t;let e=t.length;if(!w(e))return null;const n=new Array(e);while(e-- >0)n[e]=t[e];return n},G=(t=>e=>t&&e instanceof t)("undefined"!==typeof Uint8Array&&s(Uint8Array)),K=(t,e)=>{const n=t&&t[a],i=n.call(t);let o;while((o=i.next())&&!o.done){const n=o.value;e.call(t,n[0],n[1])}},Y=(t,e)=>{let n;const i=[];while(null!==(n=t.exec(e)))i.push(n);return i},X=u("HTMLFormElement"),J=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),Z=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Q=u("RegExp"),tt=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};N(n,(n,o)=>{let r;!1!==(r=e(n,o,t))&&(i[o]=r||n)}),Object.defineProperties(t,i)},et=t=>{tt(t,(e,n)=>{if(v(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];v(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},nt=(t,e)=>{const n={},i=t=>{t.forEach(t=>{n[t]=!0})};return h(t)?i(t):i(String(t).split(e)),n},it=()=>{},ot=(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e;function rt(t){return!!(t&&v(t.append)&&"FormData"===t[l]&&t[a])}const st=t=>{const e=new Array(10),n=(t,i)=>{if(_(t)){if(e.indexOf(t)>=0)return;if(p(t))return t;if(!("toJSON"in t)){e[i]=t;const o=h(t)?[]:{};return N(t,(t,e)=>{const r=n(t,i+1);!f(r)&&(o[e]=r)}),e[i]=void 0,o}}return t};return n(t,0)},at=u("AsyncFunction"),lt=t=>t&&(_(t)||v(t))&&v(t.then)&&v(t.catch),ct=((t,e)=>t?setImmediate:e?((t,e)=>(B.addEventListener("message",({source:n,data:i})=>{n===B&&i===t&&e.length&&e.shift()()},!1),n=>{e.push(n),B.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))("function"===typeof setImmediate,v(B.postMessage)),ut="undefined"!==typeof queueMicrotask?queueMicrotask.bind(B):"undefined"!==typeof process&&process.nextTick||ct,dt=t=>null!=t&&v(t[a]);var ht={isArray:h,isArrayBuffer:g,isBuffer:p,isFormData:P,isArrayBufferView:m,isString:b,isNumber:w,isBoolean:y,isObject:_,isPlainObject:k,isEmptyObject:C,isReadableStream:R,isRequest:O,isResponse:M,isHeaders:D,isUndefined:f,isDate:x,isFile:E,isBlob:S,isRegExp:Q,isFunction:v,isStream:A,isURLSearchParams:I,isTypedArray:G,isFileList:T,forEach:N,merge:z,extend:H,trim:V,stripBOM:W,inherits:j,toFlatObject:$,kindOf:c,kindOfTest:u,endsWith:U,toArray:q,forEachEntry:K,matchAll:Y,isHTMLForm:X,hasOwnProperty:Z,hasOwnProp:Z,reduceDescriptors:tt,freezeMethods:et,toObjectSet:nt,toCamelCase:J,noop:it,toFiniteNumber:ot,findKey:L,global:B,isContextDefined:F,isSpecCompliantForm:rt,toJSONObject:st,isAsyncFn:at,isThenable:lt,setImmediate:ct,asap:ut,isIterable:dt};function ft(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}ht.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.status}}});const pt=ft.prototype,gt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{gt[t]={value:t}}),Object.defineProperties(ft,gt),Object.defineProperty(pt,"isAxiosError",{value:!0}),ft.from=(t,e,n,i,o,r)=>{const s=Object.create(pt);ht.toFlatObject(t,s,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t);const a=t&&t.message?t.message:"Error",l=null==e&&t?t.code:e;return ft.call(s,a,l,n,i,o),t&&null==s.cause&&Object.defineProperty(s,"cause",{value:t,configurable:!0}),s.name=t&&t.name||"Error",r&&Object.assign(s,r),s};var mt=ft,bt=null;function vt(t){return ht.isPlainObject(t)||ht.isArray(t)}function wt(t){return ht.endsWith(t,"[]")?t.slice(0,-2):t}function _t(t,e,n){return t?t.concat(e).map(function(t,e){return t=wt(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}function yt(t){return ht.isArray(t)&&!t.some(vt)}const kt=ht.toFlatObject(ht,{},null,function(t){return/^is[A-Z]/.test(t)});function Ct(t,e,n){if(!ht.isObject(t))throw new TypeError("target must be an object");e=e||new(bt||FormData),n=ht.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!ht.isUndefined(e[t])});const i=n.metaTokens,o=n.visitor||u,r=n.dots,s=n.indexes,a=n.Blob||"undefined"!==typeof Blob&&Blob,l=a&&ht.isSpecCompliantForm(e);if(!ht.isFunction(o))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(ht.isDate(t))return t.toISOString();if(ht.isBoolean(t))return t.toString();if(!l&&ht.isBlob(t))throw new mt("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(t)||ht.isTypedArray(t)?l&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,o){let a=t;if(t&&!o&&"object"===typeof t)if(ht.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(ht.isArray(t)&&yt(t)||(ht.isFileList(t)||ht.endsWith(n,"[]"))&&(a=ht.toArray(t)))return n=wt(n),a.forEach(function(t,i){!ht.isUndefined(t)&&null!==t&&e.append(!0===s?_t([n],i,r):null===s?n:n+"[]",c(t))}),!1;return!!vt(t)||(e.append(_t(o,n,r),c(t)),!1)}const d=[],h=Object.assign(kt,{defaultVisitor:u,convertValue:c,isVisitable:vt});function f(t,n){if(!ht.isUndefined(t)){if(-1!==d.indexOf(t))throw Error("Circular reference detected in "+n.join("."));d.push(t),ht.forEach(t,function(t,i){const r=!(ht.isUndefined(t)||null===t)&&o.call(e,t,ht.isString(i)?i.trim():i,n,h);!0===r&&f(t,n?n.concat(i):[i])}),d.pop()}}if(!ht.isObject(t))throw new TypeError("data must be an object");return f(t),e}var xt=Ct;function Et(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function St(t,e){this._pairs=[],t&&xt(t,this,e)}const Tt=St.prototype;Tt.append=function(t,e){this._pairs.push([t,e])},Tt.toString=function(t){const e=t?function(e){return t.call(this,e,Et)}:Et;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};var At=St;function Pt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function It(t,e,n){if(!e)return t;const i=n&&n.encode||Pt;ht.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let r;if(r=o?o(e,n):ht.isURLSearchParams(e)?e.toString():new At(e,n).toString(i),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}class Rt{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ht.forEach(this.handlers,function(e){null!==e&&t(e)})}}var Ot=Rt,Mt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dt="undefined"!==typeof URLSearchParams?URLSearchParams:At,Vt="undefined"!==typeof FormData?FormData:null,Nt="undefined"!==typeof Blob?Blob:null,Lt={isBrowser:!0,classes:{URLSearchParams:Dt,FormData:Vt,Blob:Nt},protocols:["http","https","file","blob","url","data"]};const Bt="undefined"!==typeof window&&"undefined"!==typeof document,Ft="object"===typeof navigator&&navigator||void 0,zt=Bt&&(!Ft||["ReactNative","NativeScript","NS"].indexOf(Ft.product)<0),Ht=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)(),Wt=Bt&&window.location.href||"http://localhost";var jt={...i,...Lt};function $t(t,e){return xt(t,new jt.classes.URLSearchParams,{visitor:function(t,e,n,i){return jt.isNode&&ht.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Ut(t){return ht.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}function qt(t){const e={},n=Object.keys(t);let i;const o=n.length;let r;for(i=0;i<o;i++)r=n[i],e[r]=t[r];return e}function Gt(t){function e(t,n,i,o){let r=t[o++];if("__proto__"===r)return!0;const s=Number.isFinite(+r),a=o>=t.length;if(r=!r&&ht.isArray(i)?i.length:r,a)return ht.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!s;i[r]&&ht.isObject(i[r])||(i[r]=[]);const l=e(t,n,i[r],o);return l&&ht.isArray(i[r])&&(i[r]=qt(i[r])),!s}if(ht.isFormData(t)&&ht.isFunction(t.entries)){const n={};return ht.forEachEntry(t,(t,i)=>{e(Ut(t),i,n,0)}),n}return null}var Kt=Gt;function Yt(t,e,n){if(ht.isString(t))try{return(e||JSON.parse)(t),ht.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}const Xt={transitional:Mt,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,o=ht.isObject(t);o&&ht.isHTMLForm(t)&&(t=new FormData(t));const r=ht.isFormData(t);if(r)return i?JSON.stringify(Kt(t)):t;if(ht.isArrayBuffer(t)||ht.isBuffer(t)||ht.isStream(t)||ht.isFile(t)||ht.isBlob(t)||ht.isReadableStream(t))return t;if(ht.isArrayBufferView(t))return t.buffer;if(ht.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return $t(t,this.formSerializer).toString();if((s=ht.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return xt(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return o||i?(e.setContentType("application/json",!1),Yt(t)):t}],transformResponse:[function(t){const e=this.transitional||Xt.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(ht.isResponse(t)||ht.isReadableStream(t))return t;if(t&&ht.isString(t)&&(n&&!this.responseType||i)){const n=e&&e.silentJSONParsing,r=!n&&i;try{return JSON.parse(t,this.parseReviver)}catch(o){if(r){if("SyntaxError"===o.name)throw mt.from(o,mt.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],t=>{Xt.headers[t]={}});var Jt=Xt;const Zt=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Qt=t=>{const e={};let n,i,o;return t&&t.split("\n").forEach(function(t){o=t.indexOf(":"),n=t.substring(0,o).trim().toLowerCase(),i=t.substring(o+1).trim(),!n||e[n]&&Zt[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e};const te=Symbol("internals");function ee(t){return t&&String(t).trim().toLowerCase()}function ne(t){return!1===t||null==t?t:ht.isArray(t)?t.map(ne):String(t)}function ie(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;while(i=n.exec(t))e[i[1]]=i[2];return e}const oe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function re(t,e,n,i,o){return ht.isFunction(i)?i.call(this,e,n):(o&&(e=n),ht.isString(e)?ht.isString(i)?-1!==e.indexOf(i):ht.isRegExp(i)?i.test(e):void 0:void 0)}function se(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function ae(t,e){const n=ht.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(t,n,o){return this[i].call(this,e,t,n,o)},configurable:!0})})}class le{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function o(t,e,n){const o=ee(e);if(!o)throw new Error("header name must be a non-empty string");const r=ht.findKey(i,o);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||e]=ne(t))}const r=(t,e)=>ht.forEach(t,(t,n)=>o(t,n,e));if(ht.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(ht.isString(t)&&(t=t.trim())&&!oe(t))r(Qt(t),e);else if(ht.isObject(t)&&ht.isIterable(t)){let n,i,o={};for(const e of t){if(!ht.isArray(e))throw TypeError("Object iterator must return a key-value pair");o[i=e[0]]=(n=o[i])?ht.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}r(o,e)}else null!=t&&o(e,t,n);return this}get(t,e){if(t=ee(t),t){const n=ht.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return ie(t);if(ht.isFunction(e))return e.call(this,t,n);if(ht.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=ee(t),t){const n=ht.findKey(this,t);return!(!n||void 0===this[n]||e&&!re(this,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function o(t){if(t=ee(t),t){const o=ht.findKey(n,t);!o||e&&!re(n,n[o],o,e)||(delete n[o],i=!0)}}return ht.isArray(t)?t.forEach(o):o(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;while(n--){const o=e[n];t&&!re(this,this[o],o,t,!0)||(delete this[o],i=!0)}return i}normalize(t){const e=this,n={};return ht.forEach(this,(i,o)=>{const r=ht.findKey(n,o);if(r)return e[r]=ne(i),void delete e[o];const s=t?se(o):String(o).trim();s!==o&&delete e[o],e[s]=ne(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ht.forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&ht.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(t=>n.set(t)),n}static accessor(t){const e=this[te]=this[te]={accessors:{}},n=e.accessors,i=this.prototype;function o(t){const e=ee(t);n[e]||(ae(i,t),n[e]=!0)}return ht.isArray(t)?t.forEach(o):o(t),this}}le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ht.reduceDescriptors(le.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}}),ht.freezeMethods(le);var ce=le;function ue(t,e){const n=this||Jt,i=e||n,o=ce.from(i.headers);let r=i.data;return ht.forEach(t,function(t){r=t.call(n,r,o.normalize(),e?e.status:void 0)}),o.normalize(),r}function de(t){return!(!t||!t.__CANCEL__)}function he(t,e,n){mt.call(this,null==t?"canceled":t,mt.ERR_CANCELED,e,n),this.name="CanceledError"}ht.inherits(he,mt,{__CANCEL__:!0});var fe=he;function pe(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new mt("Request failed with status code "+n.status,[mt.ERR_BAD_REQUEST,mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}function ge(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function me(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o,r=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=i[s];o||(o=l),n[r]=a,i[r]=l;let u=s,d=0;while(u!==r)d+=n[u++],u%=t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),l-o<e)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}var be=me;function ve(t,e){let n,i,o=0,r=1e3/e;const s=(e,r=Date.now())=>{o=r,n=null,i&&(clearTimeout(i),i=null),t(...e)},a=(...t)=>{const e=Date.now(),a=e-o;a>=r?s(t,e):(n=t,i||(i=setTimeout(()=>{i=null,s(n)},r-a)))},l=()=>n&&s(n);return[a,l]}var we=ve;const _e=(t,e,n=3)=>{let i=0;const o=be(50,250);return we(n=>{const r=n.loaded,s=n.lengthComputable?n.total:void 0,a=r-i,l=o(a),c=r<=s;i=r;const u={loaded:r,total:s,progress:s?r/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&c?(s-r)/l:void 0,event:n,lengthComputable:null!=s,[e?"download":"upload"]:!0};t(u)},n)},ye=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},ke=t=>(...e)=>ht.asap(()=>t(...e));var Ce=jt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,jt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,xe=jt.hasStandardBrowserEnv?{write(t,e,n,i,o,r,s){if("undefined"===typeof document)return;const a=[`${t}=${encodeURIComponent(e)}`];ht.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),ht.isString(i)&&a.push(`path=${i}`),ht.isString(o)&&a.push(`domain=${o}`),!0===r&&a.push("secure"),ht.isString(s)&&a.push(`SameSite=${s}`),document.cookie=a.join("; ")},read(t){if("undefined"===typeof document)return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ee(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Se(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Te(t,e,n){let i=!Ee(e);return t&&(i||0==n)?Se(t,e):e}const Ae=t=>t instanceof ce?{...t}:t;function Pe(t,e){e=e||{};const n={};function i(t,e,n,i){return ht.isPlainObject(t)&&ht.isPlainObject(e)?ht.merge.call({caseless:i},t,e):ht.isPlainObject(e)?ht.merge({},e):ht.isArray(e)?e.slice():e}function o(t,e,n,o){return ht.isUndefined(e)?ht.isUndefined(t)?void 0:i(void 0,t,n,o):i(t,e,n,o)}function r(t,e){if(!ht.isUndefined(e))return i(void 0,e)}function s(t,e){return ht.isUndefined(e)?ht.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function a(n,o,r){return r in e?i(n,o):r in t?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e,n)=>o(Ae(t),Ae(e),n,!0)};return ht.forEach(Object.keys({...t,...e}),function(i){const r=l[i]||o,s=r(t[i],e[i],i);ht.isUndefined(s)&&r!==a||(n[i]=s)}),n}var Ie=t=>{const e=Pe({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:r,headers:s,auth:a}=e;if(e.headers=s=ce.from(s),e.url=It(Te(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),ht.isFormData(n))if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(ht.isFunction(n.getHeaders)){const t=n.getHeaders(),e=["content-type","content-length"];Object.entries(t).forEach(([t,n])=>{e.includes(t.toLowerCase())&&s.set(t,n)})}if(jt.hasStandardBrowserEnv&&(i&&ht.isFunction(i)&&(i=i(e)),i||!1!==i&&Ce(e.url))){const t=o&&r&&xe.read(r);t&&s.set(o,t)}return e};const Re="undefined"!==typeof XMLHttpRequest;var Oe=Re&&function(t){return new Promise(function(e,n){const i=Ie(t);let o=i.data;const r=ce.from(i.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=i;function p(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(s),i.signal&&i.signal.removeEventListener("abort",s)}let g=new XMLHttpRequest;function m(){if(!g)return;const i=ce.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),o=d&&"text"!==d&&"json"!==d?g.response:g.responseText,r={data:o,status:g.status,statusText:g.statusText,headers:i,config:t,request:g};pe(function(t){e(t),p()},function(t){n(t),p()},r),g=null}g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new mt("Request aborted",mt.ECONNABORTED,t,g)),g=null)},g.onerror=function(e){const i=e&&e.message?e.message:"Network Error",o=new mt(i,mt.ERR_NETWORK,t,g);o.event=e||null,n(o),g=null},g.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const o=i.transitional||Mt;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new mt(e,o.clarifyTimeoutError?mt.ETIMEDOUT:mt.ECONNABORTED,t,g)),g=null},void 0===o&&r.setContentType(null),"setRequestHeader"in g&&ht.forEach(r.toJSON(),function(t,e){g.setRequestHeader(e,t)}),ht.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),d&&"json"!==d&&(g.responseType=i.responseType),f&&([l,u]=_e(f,!0),g.addEventListener("progress",l)),h&&g.upload&&([a,c]=_e(h),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(s=e=>{g&&(n(!e||e.type?new fe(null,t,g):e),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(s),i.signal&&(i.signal.aborted?s():i.signal.addEventListener("abort",s)));const b=ge(i.url);b&&-1===jt.protocols.indexOf(b)?n(new mt("Unsupported protocol "+b+":",mt.ERR_BAD_REQUEST,t)):g.send(o||null)})};const Me=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const o=function(t){if(!n){n=!0,s();const e=t instanceof Error?t:this.reason;i.abort(e instanceof mt?e:new fe(e instanceof Error?e.message:e))}};let r=e&&setTimeout(()=>{r=null,o(new mt(`timeout ${e} of ms exceeded`,mt.ETIMEDOUT))},e);const s=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(o):t.removeEventListener("abort",o)}),t=null)};t.forEach(t=>t.addEventListener("abort",o));const{signal:a}=i;return a.unsubscribe=()=>ht.asap(s),a}};var De=Me;const Ve=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let i,o=0;while(o<n)i=o+e,yield t.slice(o,i),o=i},Ne=async function*(t,e){for await(const n of Le(t))yield*Ve(n,e)},Le=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Be=(t,e,n,i)=>{const o=Ne(t,e);let r,s=0,a=t=>{r||(r=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await o.next();if(e)return a(),void t.close();let r=i.byteLength;if(n){let t=s+=r;n(t)}t.enqueue(new Uint8Array(i))}catch(e){throw a(e),e}},cancel(t){return a(t),o.return()}},{highWaterMark:2})},Fe=65536,{isFunction:ze}=ht,He=(({Request:t,Response:e})=>({Request:t,Response:e}))(ht.global),{ReadableStream:We,TextEncoder:je}=ht.global,$e=(t,...e)=>{try{return!!t(...e)}catch(n){return!1}},Ue=t=>{t=ht.merge.call({skipUndefined:!0},He,t);const{fetch:e,Request:n,Response:i}=t,o=e?ze(e):"function"===typeof fetch,r=ze(n),s=ze(i);if(!o)return!1;const a=o&&ze(We),l=o&&("function"===typeof je?(t=>e=>t.encode(e))(new je):async t=>new Uint8Array(await new n(t).arrayBuffer())),c=r&&a&&$e(()=>{let t=!1;const e=new n(jt.origin,{body:new We,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),u=s&&a&&$e(()=>ht.isReadableStream(new i("").body)),d={stream:u&&(t=>t.body)};o&&(()=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!d[t]&&(d[t]=(e,n)=>{let i=e&&e[t];if(i)return i.call(e);throw new mt(`Response type '${t}' is not supported`,mt.ERR_NOT_SUPPORT,n)})})})();const h=async t=>{if(null==t)return 0;if(ht.isBlob(t))return t.size;if(ht.isSpecCompliantForm(t)){const e=new n(jt.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return ht.isArrayBufferView(t)||ht.isArrayBuffer(t)?t.byteLength:(ht.isURLSearchParams(t)&&(t+=""),ht.isString(t)?(await l(t)).byteLength:void 0)},f=async(t,e)=>{const n=ht.toFiniteNumber(t.getContentLength());return null==n?h(e):n};return async t=>{let{url:o,method:s,data:a,signal:l,cancelToken:h,timeout:p,onDownloadProgress:g,onUploadProgress:m,responseType:b,headers:v,withCredentials:w="same-origin",fetchOptions:_}=Ie(t),y=e||fetch;b=b?(b+"").toLowerCase():"text";let k=De([l,h&&h.toAbortSignal()],p),C=null;const x=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let E;try{if(m&&c&&"get"!==s&&"head"!==s&&0!==(E=await f(v,a))){let t,e=new n(o,{method:"POST",body:a,duplex:"half"});if(ht.isFormData(a)&&(t=e.headers.get("content-type"))&&v.setContentType(t),e.body){const[t,n]=ye(E,_e(ke(m)));a=Be(e.body,Fe,t,n)}}ht.isString(w)||(w=w?"include":"omit");const e=r&&"credentials"in n.prototype,l={..._,signal:k,method:s.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:e?w:void 0};C=r&&new n(o,l);let h=await(r?y(C,_):y(o,l));const p=u&&("stream"===b||"response"===b);if(u&&(g||p&&x)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=h[e]});const e=ht.toFiniteNumber(h.headers.get("content-length")),[n,o]=g&&ye(e,_e(ke(g),!0))||[];h=new i(Be(h.body,Fe,n,()=>{o&&o(),x&&x()}),t)}b=b||"text";let S=await d[ht.findKey(d,b)||"text"](h,t);return!p&&x&&x(),await new Promise((e,n)=>{pe(e,n,{data:S,headers:ce.from(h.headers),status:h.status,statusText:h.statusText,config:t,request:C})})}catch(S){if(x&&x(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new mt("Network Error",mt.ERR_NETWORK,t,C),{cause:S.cause||S});throw mt.from(S,S&&S.code,t,C)}}},qe=new Map,Ge=t=>{let e=t&&t.env||{};const{fetch:n,Request:i,Response:o}=e,r=[i,o,n];let s,a,l=r.length,c=l,u=qe;while(c--)s=r[c],a=u.get(s),void 0===a&&u.set(s,a=c?new Map:Ue(e)),u=a;return a};Ge();const Ke={http:bt,xhr:Oe,fetch:{get:Ge}};ht.forEach(Ke,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});const Ye=t=>`- ${t}`,Xe=t=>ht.isFunction(t)||null===t||!1===t;function Je(t,e){t=ht.isArray(t)?t:[t];const{length:n}=t;let i,o;const r={};for(let s=0;s<n;s++){let n;if(i=t[s],o=i,!Xe(i)&&(o=Ke[(n=String(i)).toLowerCase()],void 0===o))throw new mt(`Unknown adapter '${n}'`);if(o&&(ht.isFunction(o)||(o=o.get(e))))break;r[n||"#"+s]=o}if(!o){const t=Object.entries(r).map(([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build"));let e=n?t.length>1?"since :\n"+t.map(Ye).join("\n"):" "+Ye(t[0]):"as no adapter specified";throw new mt("There is no suitable adapter to dispatch the request "+e,"ERR_NOT_SUPPORT")}return o}var Ze={getAdapter:Je,adapters:Ke};function Qe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fe(null,t)}function tn(t){Qe(t),t.headers=ce.from(t.headers),t.data=ue.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);const e=Ze.getAdapter(t.adapter||Jt.adapter,t);return e(t).then(function(e){return Qe(t),e.data=ue.call(t,t.transformResponse,e),e.headers=ce.from(e.headers),e},function(e){return de(e)||(Qe(t),e&&e.response&&(e.response.data=ue.call(t,t.transformResponse,e.response),e.response.headers=ce.from(e.response.headers))),Promise.reject(e)})}const en="1.13.2",nn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{nn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const on={};function rn(t,e,n){if("object"!==typeof t)throw new mt("options must be an object",mt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;while(o-- >0){const r=i[o],s=e[r];if(s){const e=t[r],n=void 0===e||s(e,r,t);if(!0!==n)throw new mt("option "+r+" must be "+n,mt.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new mt("Unknown option "+r,mt.ERR_BAD_OPTION)}}nn.transitional=function(t,e,n){function i(t,e){return"[Axios v"+en+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,o,r)=>{if(!1===t)throw new mt(i(o," has been removed"+(e?" in "+e:"")),mt.ERR_DEPRECATED);return e&&!on[o]&&(on[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,o,r)}},nn.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};var sn={assertOptions:rn,validators:nn};const an=sn.validators;class ln{constructor(t){this.defaults=t||{},this.interceptors={request:new Ot,response:new Ot}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(i){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{},e.url=t):e=t||{},e=Pe(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:o}=e;void 0!==n&&sn.assertOptions(n,{silentJSONParsing:an.transitional(an.boolean),forcedJSONParsing:an.transitional(an.boolean),clarifyTimeoutError:an.transitional(an.boolean)},!1),null!=i&&(ht.isFunction(i)?e.paramsSerializer={serialize:i}:sn.assertOptions(i,{encode:an.function,serialize:an.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),sn.assertOptions(e,{baseUrl:an.spelling("baseURL"),withXsrfToken:an.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=o&&ht.merge(o.common,o[e.method]);o&&ht.forEach(["delete","get","head","post","put","patch","common"],t=>{delete o[t]}),e.headers=ce.concat(r,o);const s=[];let a=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))});const l=[];let c;this.interceptors.response.forEach(function(t){l.push(t.fulfilled,t.rejected)});let u,d=0;if(!a){const t=[tn.bind(this),void 0];t.unshift(...s),t.push(...l),u=t.length,c=Promise.resolve(e);while(d<u)c=c.then(t[d++],t[d++]);return c}u=s.length;let h=e;while(d<u){const t=s[d++],e=s[d++];try{h=t(h)}catch(f){e.call(this,f);break}}try{c=tn.call(this,h)}catch(f){return Promise.reject(f)}d=0,u=l.length;while(d<u)c=c.then(l[d++],l[d++]);return c}getUri(t){t=Pe(this.defaults,t);const e=Te(t.baseURL,t.url,t.allowAbsoluteUrls);return It(e,t.params,t.paramsSerializer)}}ht.forEach(["delete","get","head","options"],function(t){ln.prototype[t]=function(e,n){return this.request(Pe(n||{},{method:t,url:e,data:(n||{}).data}))}}),ht.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,o){return this.request(Pe(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ln.prototype[t]=e(),ln.prototype[t+"Form"]=e(!0)});var cn=ln;class un{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;while(e-- >0)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const i=new Promise(t=>{n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,i,o){n.reason||(n.reason=new fe(t,i,o),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;const e=new un(function(e){t=e});return{token:e,cancel:t}}}var dn=un;function hn(t){return function(e){return t.apply(null,e)}}function fn(t){return ht.isObject(t)&&!0===t.isAxiosError}const pn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pn).forEach(([t,e])=>{pn[e]=t});var gn=pn;function mn(t){const e=new cn(t),n=o(cn.prototype.request,e);return ht.extend(n,cn.prototype,e,{allOwnKeys:!0}),ht.extend(n,e,null,{allOwnKeys:!0}),n.create=function(e){return mn(Pe(t,e))},n}const bn=mn(Jt);bn.Axios=cn,bn.CanceledError=fe,bn.CancelToken=dn,bn.isCancel=de,bn.VERSION=en,bn.toFormData=xt,bn.AxiosError=mt,bn.Cancel=bn.CanceledError,bn.all=function(t){return Promise.all(t)},bn.spread=hn,bn.isAxiosError=fn,bn.mergeConfig=Pe,bn.AxiosHeaders=ce,bn.formToJSON=t=>Kt(ht.isHTMLForm(t)?new FormData(t):t),bn.getAdapter=Ze.getAdapter,bn.HttpStatusCode=gn,bn.default=bn;var vn=bn},4361:function(t,e,n){"use strict";var i=n(6490),o=n(5816),r=n(7632),s=n(3610);t.exports=function(t,e,n){for(var a=o(e),l=s.f,c=r.f,u=0;u<a.length;u++){var d=a[u];i(t,d)||n&&i(n,d)||l(t,d,c(e,d))}}},4491:function(t,e,n){"use strict";var i=n(5077),o=n(2074);t.exports=i&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4601:function(t,e,n){"use strict";var i=n(8420),o=n(3838),r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(o(t)+" is not a function")}},4789:function(t,e,n){"use strict";var i=n(6347),o=n(290),r=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},4977:function(t,e,n){"use strict";var i=n(2074),o=n(8420),r=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===u||n!==c&&(o(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},5019:function(t,e,n){"use strict";var i=n(1605),o=n(2368),r=n(4601),s=n(3938),a=n(938),l=n(1523),c=n(1332),u=n(6926),d=l(function(){var t,e,n,i=this.iterator,r=this.predicate,a=this.next;while(1){if(t=s(o(a,i)),e=this.done=!!t.done,e)return;if(n=t.value,c(i,r,[n,this.counter++],!0))return n}});i({target:"Iterator",proto:!0,real:!0,forced:u},{filter:function(t){return s(this),r(t),new d(a(this),{predicate:t})}})},5077:function(t,e,n){"use strict";var i=n(2074);t.exports=!i(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},5190:function(t,e,n){"use strict";var i=n(7658),o=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new o("Incorrect invocation")}},5220:function(t,e,n){"use strict";n.d(e,{LA:function(){return F},aE:function(){return ee},lq:function(){return oe},rd:function(){return ie}});var i=n(641),o=n(9841);
/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const r="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function l(t,e){const n={};for(const i in e){const o=e[i];n[i]=u(o)?o.map(t):t(o)}return n}const c=()=>{},u=Array.isArray;const d=/\/$/,h=t=>t.replace(d,"");function f(t,e,n="/"){let i,o={},r="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),o=t(r)),a>-1&&(i=i||e.slice(0,a),s=e.slice(a,e.length)),i=y(null!=i?i:e,n),{fullPath:i+(r&&"?")+r+s,path:i,query:o,hash:s}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function m(t,e,n){const i=e.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&b(e.matched[i],n.matched[o])&&v(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function b(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!w(t[n],e[n]))return!1;return!0}function w(t,e){return u(t)?_(t,e):u(e)?_(e,t):t===e}function _(t,e){return u(e)?t.length===e.length&&t.every((t,n)=>t===e[n]):1===t.length&&t[0]===e}function y(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),o=i[i.length-1];".."!==o&&"."!==o||i.push("");let r,s,a=n.length-1;for(r=0;r<i.length;r++)if(s=i[r],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var k,C;(function(t){t["pop"]="pop",t["push"]="push"})(k||(k={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(C||(C={}));function x(t){if(!t)if(r){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),h(t)}const E=/^[^#]+#/;function S(t,e){return t.replace(E,"#")+e}function T(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function P(t){let e;if("el"in t){const n=t.el,i="string"===typeof n&&n.startsWith("#");0;const o="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=T(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function I(t,e){const n=history.state?history.state.position-e:-1;return n+t}const R=new Map;function O(t,e){R.set(t,e)}function M(t){const e=R.get(t);return R.delete(t),e}let D=()=>location.protocol+"//"+location.host;function V(t,e){const{pathname:n,search:i,hash:o}=e,r=t.indexOf("#");if(r>-1){let e=o.includes(t.slice(r))?t.slice(r).length:1,n=o.slice(e);return"/"!==n[0]&&(n="/"+n),g(n,"")}const s=g(n,t);return s+i+o}function N(t,e,n,i){let o=[],r=[],s=null;const l=({state:r})=>{const a=V(t,location),l=n.value,c=e.value;let u=0;if(r){if(n.value=a,e.value=r,s&&s===l)return void(s=null);u=c?r.position-c.position:0}else i(a);o.forEach(t=>{t(n.value,l,{delta:u,type:k.pop,direction:u?u>0?C.forward:C.back:C.unknown})})};function c(){s=n.value}function u(t){o.push(t);const e=()=>{const e=o.indexOf(t);e>-1&&o.splice(e,1)};return r.push(e),e}function d(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:A()}),"")}function h(){for(const t of r)t();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function L(t,e,n,i=!1,o=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:o?A():null}}function B(t){const{history:e,location:n}=window,i={value:V(t,n)},o={value:e.state};function r(i,r,s){const a=t.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:D()+t+i;try{e[s?"replaceState":"pushState"](r,"",l),o.value=r}catch(c){console.error(c),n[s?"replace":"assign"](l)}}function s(t,n){const s=a({},e.state,L(o.value.back,t,o.value.forward,!0),n,{position:o.value.position});r(t,s,!0),i.value=t}function l(t,n){const s=a({},o.value,e.state,{forward:t,scroll:A()});r(s.current,s,!0);const l=a({},L(i.value,t,null),{position:s.position+1},n);r(t,l,!1),i.value=t}return o.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:o,push:l,replace:s}}function F(t){t=x(t);const e=B(t),n=N(t,e.state,e.location,e.replace);function i(t,e=!0){e||n.pauseListeners(),history.go(t)}const o=a({location:"",base:t,go:i,createHref:S.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function z(t){return"string"===typeof t||t&&"object"===typeof t}function H(t){return"string"===typeof t||"symbol"===typeof t}const W={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},j=Symbol("");var $;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})($||($={}));function U(t,e){return a(new Error,{type:t,[j]:!0},e)}function q(t,e){return t instanceof Error&&j in t&&(null==e||!!(t.type&e))}const G="[^/]+?",K={sensitive:!1,strict:!1,start:!0,end:!0},Y=/[.+*?^${}()[\]/\\]/g;function X(t,e){const n=a({},K,e),i=[];let o=n.start?"^":"";const r=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(o+="/");for(let e=0;e<a.length;e++){const i=a[e];let s=40+(n.sensitive?.25:0);if(0===i.type)e||(o+="/"),o+=i.value.replace(Y,"\\$&"),s+=40;else if(1===i.type){const{value:t,repeatable:n,optional:l,regexp:c}=i;r.push({name:t,repeatable:n,optional:l});const u=c||G;if(u!==G){s+=10;try{new RegExp(`(${u})`)}catch(d){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+d.message)}}let h=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(h=l&&a.length<2?`(?:/${h})`:"/"+h),l&&(h+="?"),o+=h,s+=20,l&&(s+=-8),n&&(s+=-20),".*"===u&&(s+=-50)}t.push(s)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const s=new RegExp(o,n.sensitive?"":"i");function l(t){const e=t.match(s),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",o=r[i-1];n[o.name]=t&&o.repeatable?t.split("/"):t}return n}function c(e){let n="",i=!1;for(const o of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of o)if(0===t.type)n+=t.value;else if(1===t.type){const{value:r,repeatable:s,optional:a}=t,l=r in e?e[r]:"";if(u(l)&&!s)throw new Error(`Provided param "${r}" is an array but it is not repeatable (* or + modifiers)`);const c=u(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${r}"`);o.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n||"/"}return{re:s,score:i,keys:r,parse:l,stringify:c}}function J(t,e){let n=0;while(n<t.length&&n<e.length){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Z(t,e){let n=0;const i=t.score,o=e.score;while(n<i.length&&n<o.length){const t=J(i[n],o[n]);if(t)return t;n++}if(1===Math.abs(o.length-i.length)){if(Q(i))return 1;if(Q(o))return-1}return o.length-i.length}function Q(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,i=n;const o=[];let r;function s(){r&&o.push(r),r=[]}let a,l=0,c="",u="";function d(){c&&(0===n?r.push({type:0,value:c}):1===n||2===n||3===n?(r.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function h(){c+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&d(),s()):":"===a?(d(),n=1):h();break;case 4:h(),n=i;break;case 1:"("===a?n=2:et.test(a)?h():(d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:e("Unknown state");break}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),d(),s(),o}function it(t,e,n){const i=X(nt(t.path),n);const o=a(i,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf===!e.record.aliasOf&&e.children.push(o),o}function ot(t,e){const n=[],i=new Map;function o(t){return i.get(t)}function r(t,n,i){const o=!i,l=st(t);l.aliasOf=i&&i.record;const d=ut(e,t),h=[l];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)h.push(a({},l,{components:i?i.record.components:l.components,path:t,aliasOf:i?i.record:l}))}let f,p;for(const e of h){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&i+a)}if(f=it(e,n,d),i?i.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),o&&t.name&&!lt(f)&&s(t.name)),l.children){const t=l.children;for(let e=0;e<t.length;e++)r(t[e],f,i&&i.children[e])}i=i||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{s(p)}:c}function s(t){if(H(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function l(){return n}function u(t){let e=0;while(e<n.length&&Z(t,n[e])>=0&&(t.record.path!==n[e].record.path||!dt(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!lt(t)&&i.set(t.record.name,t)}function d(t,e){let o,r,s,l={};if("name"in t&&t.name){if(o=i.get(t.name),!o)throw U(1,{location:t});0,s=o.record.name,l=a(rt(e.params,o.keys.filter(t=>!t.optional).map(t=>t.name)),t.params&&rt(t.params,o.keys.map(t=>t.name))),r=o.stringify(l)}else if("path"in t)r=t.path,o=n.find(t=>t.re.test(r)),o&&(l=o.parse(r),s=o.record.name);else{if(o=e.name?i.get(e.name):n.find(t=>t.re.test(e.path)),!o)throw U(1,{location:t,currentLocation:e});s=o.record.name,l=a({},e.params,t.params),r=o.stringify(l)}const c=[];let u=o;while(u)c.unshift(u.record),u=u.parent;return{name:s,path:r,params:l,matched:c,meta:ct(c)}}return e=ut({strict:!1,end:!0,sensitive:!1},e),t.forEach(t=>r(t)),{addRoute:r,resolve:d,removeRoute:s,getRoutes:l,getRecordMatcher:o}}function rt(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="object"===typeof n?n[i]:n;return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ct(t){return t.reduce((t,e)=>a(t,e.meta),{})}function ut(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function dt(t,e){return e.children.some(e=>e===t||dt(t,e))}const ht=/#/g,ft=/&/g,pt=/\//g,gt=/=/g,mt=/\?/g,bt=/\+/g,vt=/%5B/g,wt=/%5D/g,_t=/%5E/g,yt=/%60/g,kt=/%7B/g,Ct=/%7C/g,xt=/%7D/g,Et=/%20/g;function St(t){return encodeURI(""+t).replace(Ct,"|").replace(vt,"[").replace(wt,"]")}function Tt(t){return St(t).replace(kt,"{").replace(xt,"}").replace(_t,"^")}function At(t){return St(t).replace(bt,"%2B").replace(Et,"+").replace(ht,"%23").replace(ft,"%26").replace(yt,"`").replace(kt,"{").replace(xt,"}").replace(_t,"^")}function Pt(t){return At(t).replace(gt,"%3D")}function It(t){return St(t).replace(ht,"%23").replace(mt,"%3F")}function Rt(t){return null==t?"":It(t).replace(pt,"%2F")}function Ot(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Mt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],i=(n?t.slice(1):t).split("&");for(let o=0;o<i.length;++o){const t=i[o].replace(bt," "),n=t.indexOf("="),r=Ot(n<0?t:t.slice(0,n)),s=n<0?null:Ot(t.slice(n+1));if(r in e){let t=e[r];u(t)||(t=e[r]=[t]),t.push(s)}else e[r]=s}return e}function Dt(t){let e="";for(let n in t){const i=t[n];if(n=Pt(n),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}const o=u(i)?i.map(t=>t&&At(t)):[i&&At(i)];o.forEach(t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))})}return e}function Vt(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=u(i)?i.map(t=>null==t?null:""+t):null==i?i:""+i)}return e}const Nt=Symbol(""),Lt=Symbol(""),Bt=Symbol(""),Ft=Symbol(""),zt=Symbol("");function Ht(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Wt(t,e,n,i,o){const r=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((s,a)=>{const l=t=>{!1===t?a(U(4,{from:n,to:e})):t instanceof Error?a(t):z(t)?a(U(2,{from:e,to:t})):(r&&i.enterCallbacks[o]===r&&"function"===typeof t&&r.push(t),s())},c=t.call(i&&i.instances[o],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(t=>a(t))})}function jt(t,e,n,i){const o=[];for(const r of t){0;for(const t in r.components){let a=r.components[t];if("beforeRouteEnter"===e||r.instances[t])if($t(a)){const s=a.__vccOpts||a,l=s[e];l&&o.push(Wt(l,n,i,r,t))}else{let l=a();0,o.push(()=>l.then(o=>{if(!o)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${r.path}"`));const a=s(o)?o.default:o;r.components[t]=a;const l=a.__vccOpts||a,c=l[e];return c&&Wt(c,n,i,r,t)()}))}}}return o}function $t(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Ut(t){const e=(0,i.WQ)(Bt),n=(0,i.WQ)(Ft),r=(0,i.EW)(()=>e.resolve((0,o.R1)(t.to))),s=(0,i.EW)(()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],o=n.matched;if(!i||!o.length)return-1;const s=o.findIndex(b.bind(null,i));if(s>-1)return s;const a=Xt(t[e-2]);return e>1&&Xt(i)===a&&o[o.length-1].path!==a?o.findIndex(b.bind(null,t[e-2])):s}),a=(0,i.EW)(()=>s.value>-1&&Yt(n.params,r.value.params)),l=(0,i.EW)(()=>s.value>-1&&s.value===n.matched.length-1&&v(n.params,r.value.params));function u(n={}){return Kt(n)?e[(0,o.R1)(t.replace)?"replace":"push"]((0,o.R1)(t.to)).catch(c):Promise.resolve()}return{route:r,href:(0,i.EW)(()=>r.value.href),isActive:a,isExactActive:l,navigate:u}}const qt=(0,i.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ut,setup(t,{slots:e}){const n=(0,o.Kh)(Ut(t)),{options:r}=(0,i.WQ)(Bt),s=(0,i.EW)(()=>({[Jt(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Jt(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&e.default(n);return t.custom?o:(0,i.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),Gt=qt;function Kt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Yt(t,e){for(const n in e){const i=e[n],o=t[n];if("string"===typeof i){if(i!==o)return!1}else if(!u(o)||o.length!==i.length||i.some((t,e)=>t!==o[e]))return!1}return!0}function Xt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,i.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=(0,i.WQ)(zt),s=(0,i.EW)(()=>t.route||r.value),l=(0,i.WQ)(Lt,0),c=(0,i.EW)(()=>{let t=(0,o.R1)(l);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t}),u=(0,i.EW)(()=>s.value.matched[c.value]);(0,i.Gt)(Lt,(0,i.EW)(()=>c.value+1)),(0,i.Gt)(Nt,u),(0,i.Gt)(zt,s);const d=(0,o.KR)();return(0,i.wB)(()=>[d.value,u.value,t.name],([t,e,n],[i,o,r])=>{e&&(e.instances[n]=t,o&&o!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=o.leaveGuards),e.updateGuards.size||(e.updateGuards=o.updateGuards))),!t||!e||o&&b(e,o)&&i||(e.enterCallbacks[n]||[]).forEach(e=>e(t))},{flush:"post"}),()=>{const o=s.value,r=t.name,l=u.value,c=l&&l.components[r];if(!c)return Qt(n.default,{Component:c,route:o});const h=l.props[r],f=h?!0===h?o.params:"function"===typeof h?h(o):h:null,p=t=>{t.component.isUnmounted&&(l.instances[r]=null)},g=(0,i.h)(c,a({},f,e,{onVnodeUnmounted:p,ref:d}));return Qt(n.default,{Component:g,route:o})||g}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Zt;function ee(t){const e=ot(t.routes,t),n=t.parseQuery||Mt,s=t.stringifyQuery||Dt,d=t.history;const h=Ht(),g=Ht(),b=Ht(),v=(0,o.IJ)(W);let w=W;r&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=l.bind(null,t=>""+t),y=l.bind(null,Rt),C=l.bind(null,Ot);function x(t,n){let i,o;return H(t)?(i=e.getRecordMatcher(t),o=n):o=t,e.addRoute(o,i)}function E(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function S(){return e.getRoutes().map(t=>t.record)}function T(t){return!!e.getRecordMatcher(t)}function R(t,i){if(i=a({},i||v.value),"string"===typeof t){const o=f(n,t,i.path),r=e.resolve({path:o.path},i),s=d.createHref(o.fullPath);return a(o,r,{params:C(r.params),hash:Ot(o.hash),redirectedFrom:void 0,href:s})}let o;if("path"in t)o=a({},t,{path:f(n,t.path,i.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];o=a({},t,{params:y(e)}),i.params=y(i.params)}const r=e.resolve(o,i),l=t.hash||"";r.params=_(C(r.params));const c=p(s,a({},t,{hash:Tt(l),path:r.path})),u=d.createHref(c);return a({fullPath:c,hash:l,query:s===Dt?Vt(t.query):t.query||{}},r,{redirectedFrom:void 0,href:u})}function D(t){return"string"===typeof t?f(n,t,v.value.path):a({},t)}function V(t,e){if(w!==t)return U(8,{from:e,to:t})}function N(t){return F(t)}function L(t){return N(a(D(t),{replace:!0}))}function B(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"===typeof n?n(t):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=D(i):{path:i},i.params={}),a({query:t.query,hash:t.hash,params:"path"in i?{}:t.params},i)}}function F(t,e){const n=w=R(t),i=v.value,o=t.state,r=t.force,l=!0===t.replace,c=B(n);if(c)return F(a(D(c),{state:"object"===typeof c?a({},o,c.state):o,force:r,replace:l}),e||n);const u=n;let d;return u.redirectedFrom=e,!r&&m(s,i,n)&&(d=U(16,{to:u,from:i}),it(i,i,!0,!1)),(d?Promise.resolve(d):$(u,i)).catch(t=>q(t)?q(t,2)?t:nt(t):tt(t,u,i)).then(t=>{if(t){if(q(t,2))return F(a({replace:l},D(t.to),{state:"object"===typeof t.to?a({},o,t.to.state):o,force:r}),e||u)}else t=K(u,i,!0,l,o);return G(u,i,t),t})}function z(t,e){const n=V(t,e);return n?Promise.reject(n):Promise.resolve()}function j(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function $(t,e){let n;const[i,o,r]=ne(t,e);n=jt(i.reverse(),"beforeRouteLeave",t,e);for(const a of i)a.leaveGuards.forEach(i=>{n.push(Wt(i,t,e))});const s=z.bind(null,t,e);return n.push(s),ct(n).then(()=>{n=[];for(const i of h.list())n.push(Wt(i,t,e));return n.push(s),ct(n)}).then(()=>{n=jt(o,"beforeRouteUpdate",t,e);for(const i of o)i.updateGuards.forEach(i=>{n.push(Wt(i,t,e))});return n.push(s),ct(n)}).then(()=>{n=[];for(const i of r)if(i.beforeEnter)if(u(i.beforeEnter))for(const o of i.beforeEnter)n.push(Wt(o,t,e));else n.push(Wt(i.beforeEnter,t,e));return n.push(s),ct(n)}).then(()=>(t.matched.forEach(t=>t.enterCallbacks={}),n=jt(r,"beforeRouteEnter",t,e),n.push(s),ct(n))).then(()=>{n=[];for(const i of g.list())n.push(Wt(i,t,e));return n.push(s),ct(n)}).catch(t=>q(t,8)?t:Promise.reject(t))}function G(t,e,n){b.list().forEach(i=>j(()=>i(t,e,n)))}function K(t,e,n,i,o){const s=V(t,e);if(s)return s;const l=e===W,c=r?history.state:{};n&&(i||l?d.replace(t.fullPath,a({scroll:l&&c&&c.scroll},o)):d.push(t.fullPath,o)),v.value=t,it(t,e,n,l),nt()}let Y;function X(){Y||(Y=d.listen((t,e,n)=>{if(!lt.listening)return;const i=R(t),o=B(i);if(o)return void F(a(o,{replace:!0}),i).catch(c);w=i;const s=v.value;r&&O(I(s.fullPath,n.delta),A()),$(i,s).catch(t=>q(t,12)?t:q(t,2)?(F(t.to,i).then(t=>{q(t,20)&&!n.delta&&n.type===k.pop&&d.go(-1,!1)}).catch(c),Promise.reject()):(n.delta&&d.go(-n.delta,!1),tt(t,i,s))).then(t=>{t=t||K(i,s,!1),t&&(n.delta&&!q(t,8)?d.go(-n.delta,!1):n.type===k.pop&&q(t,20)&&d.go(-1,!1)),G(i,s,t)}).catch(c)}))}let J,Z=Ht(),Q=Ht();function tt(t,e,n){nt(t);const i=Q.list();return i.length?i.forEach(i=>i(t,e,n)):console.error(t),Promise.reject(t)}function et(){return J&&v.value!==W?Promise.resolve():new Promise((t,e)=>{Z.add([t,e])})}function nt(t){return J||(J=!t,X(),Z.list().forEach(([e,n])=>t?n(t):e()),Z.reset()),t}function it(e,n,o,s){const{scrollBehavior:a}=t;if(!r||!a)return Promise.resolve();const l=!o&&M(I(e.fullPath,0))||(s||!o)&&history.state&&history.state.scroll||null;return(0,i.dY)().then(()=>a(e,n,l)).then(t=>t&&P(t)).catch(t=>tt(t,e,n))}const rt=t=>d.go(t);let st;const at=new Set,lt={currentRoute:v,listening:!0,addRoute:x,removeRoute:E,hasRoute:T,getRoutes:S,resolve:R,options:t,push:N,replace:L,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:h.add,beforeResolve:g.add,afterEach:b.add,onError:Q.add,isReady:et,install(t){const e=this;t.component("RouterLink",Gt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,o.R1)(v)}),r&&!st&&v.value===W&&(st=!0,N(d.location).catch(t=>{0}));const n={};for(const o in W)Object.defineProperty(n,o,{get:()=>v.value[o],enumerable:!0});t.provide(Bt,e),t.provide(Ft,(0,o.Gc)(n)),t.provide(zt,v);const i=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(w=W,Y&&Y(),Y=null,v.value=W,st=!1,J=!1),i()}}};function ct(t){return t.reduce((t,e)=>t.then(()=>j(e)),Promise.resolve())}return lt}function ne(t,e){const n=[],i=[],o=[],r=Math.max(e.matched.length,t.matched.length);for(let s=0;s<r;s++){const r=e.matched[s];r&&(t.matched.find(t=>b(t,r))?i.push(r):n.push(r));const a=t.matched[s];a&&(e.matched.find(t=>b(t,a))||o.push(a))}return[n,i,o]}function ie(){return(0,i.WQ)(Bt)}function oe(){return(0,i.WQ)(Ft)}},5225:function(t,e,n){"use strict";var i=n(2072);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5318:function(t,e,n){"use strict";var i=n(5077),o=n(4491),r=n(3610),s=n(3938),a=n(5476),l=n(1641);e.f=i&&!o?Object.defineProperties:function(t,e){s(t);var n,i=a(e),o=l(e),c=o.length,u=0;while(c>u)r.f(t,n=o[u++],i[n]);return t}},5335:function(t,e,n){"use strict";var i=n(8420),o=n(6568),r=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===r}:function(t){return"object"==typeof t?null!==t:i(t)}},5362:function(t,e,n){"use strict";var i=n(3062),o=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},5476:function(t,e,n){"use strict";var i=n(8664),o=n(1229);t.exports=function(t){return i(o(t))}},5816:function(t,e,n){"use strict";var i=n(6492),o=n(281),r=n(4789),s=n(8916),a=n(3938),l=o([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(a(t)),n=s.f;return n?l(e,n(t)):e}},5904:function(t,e,n){"use strict";var i=n(2),o=n(665),r=i("keys");t.exports=function(t){return r[t]||(r[t]=o(t))}},6032:function(t,e,n){"use strict";var i=n(874),o=n(2328);t.exports=function(t){var e=i(t,"string");return o(e)?e:e+""}},6262:function(t,e){"use strict";e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[i,o]of e)n[i]=o;return n}},6278:function(t,e,n){"use strict";n.d(e,{y$:function(){return tt},i0:function(){return rt},PY:function(){return ot},aH:function(){return it}});var i=n(641),o=n(9841);function r(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof globalThis?globalThis:{}}const a="function"===typeof Proxy,l="devtools-plugin:setup",c="plugin:settings:set";let u,d;function h(){var t;return void 0!==u||("undefined"!==typeof window&&window.performance?(u=!0,d=window.performance):"undefined"!==typeof globalThis&&(null===(t=globalThis.perf_hooks)||void 0===t?void 0:t.performance)?(u=!0,d=globalThis.perf_hooks.performance):u=!1),u}function f(){return h()?d.now():Date.now()}class p{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const s in t.settings){const e=t.settings[s];n[s]=e.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const t=localStorage.getItem(i),e=JSON.parse(t);Object.assign(o,e)}catch(r){}this.fallbacks={getSettings(){return o},setSettings(t){try{localStorage.setItem(i,JSON.stringify(t))}catch(r){}o=t},now(){return f()}},e&&e.on(c,(t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)}),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise(n=>{this.targetQueue.push({method:e,args:t,resolve:n})})})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function g(t,e){const n=t,i=s(),o=r(),c=a&&n.enableEarlyProxy;if(!o||!i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const t=c?new p(n,o):null,r=i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[];r.push({pluginDescriptor:n,setupFn:e,proxy:t}),t&&e(t.proxiedTarget)}else o.emit(l,t,e)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var m="store";function b(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function v(t){return null!==t&&"object"===typeof t}function w(t){return t&&"function"===typeof t.then}function _(t,e){return function(){return t(e)}}function y(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function k(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;x(t,n,[],t._modules.root,!0),C(t,n,e)}function C(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,l={},c={},u=(0,o.uY)(!0);u.run(function(){b(a,function(e,n){l[n]=_(e,t),c[n]=(0,i.EW)(function(){return l[n]()}),Object.defineProperty(t.getters,n,{get:function(){return c[n].value},enumerable:!0})})}),t._state=(0,o.Kh)({data:e}),t._scope=u,t.strict&&I(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function x(t,e,n,i,o){var r=!n.length,s=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=i),!r&&!o){var a=R(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=i.state})}var c=i.context=E(t,s,n);i.forEachMutation(function(e,n){var i=s+n;T(t,i,e,c)}),i.forEachAction(function(e,n){var i=e.root?n:s+n,o=e.handler||e;A(t,i,o,c)}),i.forEachGetter(function(e,n){var i=s+n;P(t,i,e,c)}),i.forEachChild(function(i,r){x(t,e,n.concat(r),i,o)})}function E(t,e,n){var i=""===e,o={dispatch:i?t.dispatch:function(n,i,o){var r=O(n,i,o),s=r.payload,a=r.options,l=r.type;return a&&a.root||(l=e+l),t.dispatch(l,s)},commit:i?t.commit:function(n,i,o){var r=O(n,i,o),s=r.payload,a=r.options,l=r.type;a&&a.root||(l=e+l),t.commit(l,s,a)}};return Object.defineProperties(o,{getters:{get:i?function(){return t.getters}:function(){return S(t,e)}},state:{get:function(){return R(t.state,n)}}}),o}function S(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(o){if(o.slice(0,i)===e){var r=o.slice(i);Object.defineProperty(n,r,{get:function(){return t.getters[o]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function T(t,e,n,i){var o=t._mutations[e]||(t._mutations[e]=[]);o.push(function(e){n.call(t,i.state,e)})}function A(t,e,n,i){var o=t._actions[e]||(t._actions[e]=[]);o.push(function(e){var o=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e);return w(o)||(o=Promise.resolve(o)),t._devtoolHook?o.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):o})}function P(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(i.state,i.getters,t.state,t.getters)})}function I(t){(0,i.wB)(function(){return t._state.data},function(){0},{deep:!0,flush:"sync"})}function R(t,e){return e.reduce(function(t,e){return t[e]},t)}function O(t,e,n){return v(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var M="vuex bindings",D="vuex:mutations",V="vuex:actions",N="vuex",L=0;function B(t,e){g({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[M]},function(n){n.addTimelineLayer({id:D,label:"Vuex Mutations",color:F}),n.addTimelineLayer({id:V,label:"Vuex Actions",color:F}),n.addInspector({id:N,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(n){if(n.app===t&&n.inspectorId===N)if(n.filter){var i=[];U(i,e._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[$(e._modules.root,"")]}),n.on.getInspectorState(function(n){if(n.app===t&&n.inspectorId===N){var i=n.nodeId;S(e,i),n.state=q(K(e._modules,i),"root"===i?e.getters:e._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(n){if(n.app===t&&n.inspectorId===N){var i=n.nodeId,o=n.path;"root"!==i&&(o=i.split("/").filter(Boolean).concat(o)),e._withCommit(function(){n.set(e._state.data,o,n.state.value)})}}),e.subscribe(function(t,e){var i={};t.payload&&(i.payload=t.payload),i.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(N),n.sendInspectorState(N),n.addTimelineEvent({layerId:D,event:{time:Date.now(),title:t.type,data:i}})}),e.subscribeAction({before:function(t,e){var i={};t.payload&&(i.payload=t.payload),t._id=L++,t._time=Date.now(),i.state=e,n.addTimelineEvent({layerId:V,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:i}})},after:function(t,e){var i={},o=Date.now()-t._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},t.payload&&(i.payload=t.payload),i.state=e,n.addTimelineEvent({layerId:V,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:i}})}})})}var F=8702998,z=6710886,H=16777215,W={label:"namespaced",textColor:H,backgroundColor:z};function j(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function $(t,e){return{id:e||"root",label:j(e),tags:t.namespaced?[W]:[],children:Object.keys(t._children).map(function(n){return $(t._children[n],e+n+"/")})}}function U(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[W]:[]}),Object.keys(e._children).forEach(function(o){U(t,e._children[o],n,i+o+"/")})}function q(t,e,n){e="root"===n?e:e[n];var i=Object.keys(e),o={state:Object.keys(t.state).map(function(e){return{key:e,editable:!0,value:t.state[e]}})};if(i.length){var r=G(e);o.getters=Object.keys(r).map(function(t){return{key:t.endsWith("/")?j(t):t,editable:!1,value:Y(function(){return r[t]})}})}return o}function G(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var o=e,r=i.pop();i.forEach(function(t){o[t]||(o[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),o=o[t]._custom.value}),o[r]=Y(function(){return t[n]})}else e[n]=Y(function(){return t[n]})}),e}function K(t,e){var n=e.split("/").filter(function(t){return t});return n.reduce(function(t,i,o){var r=t[i];if(!r)throw new Error('Missing module "'+i+'" for path "'+e+'".');return o===n.length-1?r:r._children},"root"===e?t:t.root._children)}function Y(t){try{return t()}catch(e){return e}}var X=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},J={namespaced:{configurable:!0}};J.namespaced.get=function(){return!!this._rawModule.namespaced},X.prototype.addChild=function(t,e){this._children[t]=e},X.prototype.removeChild=function(t){delete this._children[t]},X.prototype.getChild=function(t){return this._children[t]},X.prototype.hasChild=function(t){return t in this._children},X.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},X.prototype.forEachChild=function(t){b(this._children,t)},X.prototype.forEachGetter=function(t){this._rawModule.getters&&b(this._rawModule.getters,t)},X.prototype.forEachAction=function(t){this._rawModule.actions&&b(this._rawModule.actions,t)},X.prototype.forEachMutation=function(t){this._rawModule.mutations&&b(this._rawModule.mutations,t)},Object.defineProperties(X.prototype,J);var Z=function(t){this.register([],t,!1)};function Q(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return void 0;Q(t.concat(i),e.getChild(i),n.modules[i])}}Z.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},Z.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")},"")},Z.prototype.update=function(t){Q([],this.root,t)},Z.prototype.register=function(t,e,n){var i=this;void 0===n&&(n=!0);var o=new X(e,n);if(0===t.length)this.root=o;else{var r=this.get(t.slice(0,-1));r.addChild(t[t.length-1],o)}e.modules&&b(e.modules,function(e,o){i.register(t.concat(o),e,n)})},Z.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],i=e.getChild(n);i&&i.runtime&&e.removeChild(n)},Z.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};function tt(t){return new et(t)}var et=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var i=t.strict;void 0===i&&(i=!1);var o=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Z(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=o;var r=this,s=this,a=s.dispatch,l=s.commit;this.dispatch=function(t,e){return a.call(r,t,e)},this.commit=function(t,e,n){return l.call(r,t,e,n)},this.strict=i;var c=this._modules.root.state;x(this,c,[],this._modules.root),C(this,c),n.forEach(function(t){return t(e)})},nt={state:{configurable:!0}};et.prototype.install=function(t,e){t.provide(e||m,this),t.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&B(t,this)},nt.state.get=function(){return this._state.data},nt.state.set=function(t){0},et.prototype.commit=function(t,e,n){var i=this,o=O(t,e,n),r=o.type,s=o.payload,a=(o.options,{type:r,payload:s}),l=this._mutations[r];l&&(this._withCommit(function(){l.forEach(function(t){t(s)})}),this._subscribers.slice().forEach(function(t){return t(a,i.state)}))},et.prototype.dispatch=function(t,e){var n=this,i=O(t,e),o=i.type,r=i.payload,s={type:o,payload:r},a=this._actions[o];if(a){try{this._actionSubscribers.slice().filter(function(t){return t.before}).forEach(function(t){return t.before(s,n.state)})}catch(c){0}var l=a.length>1?Promise.all(a.map(function(t){return t(r)})):a[0](r);return new Promise(function(t,e){l.then(function(e){try{n._actionSubscribers.filter(function(t){return t.after}).forEach(function(t){return t.after(s,n.state)})}catch(c){0}t(e)},function(t){try{n._actionSubscribers.filter(function(t){return t.error}).forEach(function(e){return e.error(s,n.state,t)})}catch(c){0}e(t)})})}},et.prototype.subscribe=function(t,e){return y(t,this._subscribers,e)},et.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return y(n,this._actionSubscribers,e)},et.prototype.watch=function(t,e,n){var o=this;return(0,i.wB)(function(){return t(o.state,o.getters)},e,Object.assign({},n))},et.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._state.data=t})},et.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),x(this,this.state,t,this._modules.get(t),n.preserveState),C(this,this.state)},et.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=R(e.state,t.slice(0,-1));delete n[t[t.length-1]]}),k(this)},et.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},et.prototype.hotUpdate=function(t){this._modules.update(t),k(this,!0)},et.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(et.prototype,nt);var it=lt(function(t,e){var n={};return st(e).forEach(function(e){var i=e.key,o=e.val;n[i]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var i=ct(this.$store,"mapState",t);if(!i)return;e=i.context.state,n=i.context.getters}return"function"===typeof o?o.call(this,e,n):e[o]},n[i].vuex=!0}),n}),ot=lt(function(t,e){var n={};return st(e).forEach(function(e){var i=e.key,o=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.commit;if(t){var r=ct(this.$store,"mapMutations",t);if(!r)return;i=r.context.commit}return"function"===typeof o?o.apply(this,[i].concat(e)):i.apply(this.$store,[o].concat(e))}}),n}),rt=(lt(function(t,e){var n={};return st(e).forEach(function(e){var i=e.key,o=e.val;o=t+o,n[i]=function(){if(!t||ct(this.$store,"mapGetters",t))return this.$store.getters[o]},n[i].vuex=!0}),n}),lt(function(t,e){var n={};return st(e).forEach(function(e){var i=e.key,o=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.dispatch;if(t){var r=ct(this.$store,"mapActions",t);if(!r)return;i=r.context.dispatch}return"function"===typeof o?o.apply(this,[i].concat(e)):i.apply(this.$store,[o].concat(e))}}),n}));function st(t){return at(t)?Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function at(t){return Array.isArray(t)||v(t)}function lt(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function ct(t,e,n){var i=t._modulesNamespaceMap[n];return i}},6347:function(t,e,n){"use strict";var i=n(281),o=n(6490),r=n(5476),s=n(8186).indexOf,a=n(7708),l=i([].push);t.exports=function(t,e){var n,i=r(t),c=0,u=[];for(n in i)!o(a,n)&&o(i,n)&&l(u,n);while(e.length>c)o(i,n=e[c++])&&(~s(u,n)||l(u,n));return u}},6380:function(t,e,n){"use strict";var i=n(7485),o=n(281),r=n(5362),s=n(6589),a=URLSearchParams,l=a.prototype,c=o(l.append),u=o(l["delete"]),d=o(l.forEach),h=o([].push),f=new a("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&i(l,"delete",function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return u(this,t);var i=[];d(this,function(t,e){h(i,{key:e,value:t})}),s(e,1);var o,a=r(t),l=r(n),f=0,p=0,g=!1,m=i.length;while(f<m)o=i[f++],g||o.key===a?(g=!0,u(this,o.key)):p++;while(p<m)o=i[p++],o.key===a&&o.value===l||c(this,o.key,o.value)},{enumerable:!0,unsafe:!0})},6457:function(t,e,n){"use strict";var i=n(4601),o=n(8406);t.exports=function(t,e){var n=t[e];return o(n)?void 0:i(n)}},6477:function(t,e,n){"use strict";var i=n(8218),o=n(3610);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),o.f(t,e,n)}},6490:function(t,e,n){"use strict";var i=n(281),o=n(2612),r=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(o(t),e)}},6492:function(t,e,n){"use strict";var i=n(200),o=n(8420),r=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(i[t]):i[t]&&i[t][e]}},6539:function(t,e,n){"use strict";var i=n(9328),o=Math.max,r=Math.min;t.exports=function(t,e){var n=i(t);return n<0?o(n+e,0):r(n,e)}},6568:function(t){"use strict";var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},6589:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},6648:function(t,e,n){"use strict";var i=n(5077),o=n(8679),r=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(o(t)&&!s(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},6794:function(t,e,n){"use strict";n.d(e,{p3z:function(){return Te},$GR:function(){return go},s_G:function(){return Aa},fhD:function(){return ri},o3v:function(){return Ts},KXp:function(){return Yr},xRE:function(){return Is},avU:function(){return Po},gzh:function(){return wo},rou:function(){return $o},ux1:function(){return xa},rrN:function(){return Sa},A1b:function(){return Fs},NC_:function(){return Hs},mql:function(){return Ws},p91:function(){return Ur},WDw:function(){return vs},_n8:function(){return ao},vli:function(){return no},fhX:function(){return si},Nty:function(){return wa},FK:function(){return l},N3M:function(){return ps},knM:function(){return Va},qc:function(){return ka},O6g:function(){return Ls},Qnh:function(){return ro},kFN:function(){return ia},iT7:function(){return Ao},w1c:function(){return so},XpW:function(){return ss},en1:function(){return ba},$He:function(){return js},O3W:function(){return Ni},y8j:function(){return _a},TYi:function(){return ho},q4f:function(){return No},SUi:function(){return Ia},Wkc:function(){return lo},fij:function(){return Z},do1:function(){return Wt},J4u:function(){return J},iDH:function(){return z},_8O:function(){return B},on3:function(){return Kn},AVT:function(){return w},Hfi:function(){return _},Oh8:function(){return Kt},ElE:function(){return fs},qAn:function(){return ls},uEb:function(){return li},N8:function(){return Mn},NIT:function(){return Jt},myk:function(){return Wi},wWN:function(){return In},S$d:function(){return G},aQG:function(){return Ba},Qfg:function(){return Ji},Cc$:function(){return Zi},$WB:function(){return ws},AF1:function(){return Ii},kfp:function(){return R},xCT:function(){return Bt},na4:function(){return r},H8x:function(){return ze},OEO:function(){return yt},xi1:function(){return Ee},i1g:function(){return _o},_3b:function(){return a},FjJ:function(){return cn},z$z:function(){return et},puS:function(){return Oi},Z3F:function(){return tt},tOV:function(){return V},YAv:function(){return g},C4N:function(){return m},q2g:function(){return N},tbu:function(){return Le},qXv:function(){return d},PeH:function(){return Qt},ccu:function(){return to},hax:function(){return Gn},UOc:function(){return k},VVT:function(){return kn},m7H:function(){return as},Mpm:function(){return y},QvU:function(){return Ri},LkY:function(){return Be},tPU:function(){return Dn},F29:function(){return Rn},v2o:function(){return ma},_Dp:function(){return ga},znd:function(){return x},XbD:function(){return cs},CuQ:function(){return _n},D_O:function(){return Ve},BNQ:function(){return bs},qIM:function(){return ms},imr:function(){return fn},B_7:function(){return Pi},RNt:function(){return ds},x0N:function(){return ee},rjW:function(){return qs},U6q:function(){return Bn},lVx:function(){return Us},vA0:function(){return At},d_K:function(){return Et},BjF:function(){return ne},Nay:function(){return $t},PWO:function(){return ys},Rjd:function(){return on},$UH:function(){return Ai},N7h:function(){return F},vFY:function(){return L},$Bw:function(){return bn},wj3:function(){return mn},Zl2:function(){return en},NzY:function(){return p},XXf:function(){return s},aOA:function(){return Ta},bLJ:function(){return pa},cZi:function(){return vo},B4w:function(){return En},ol1:function(){return lt},F5O:function(){return $n},xJs:function(){return h},SH7:function(){return I},Y2k:function(){return Yt}});var i=n(1635);if("undefined"===typeof FullCalendarVDom)throw new Error("Please import the top-level fullcalendar lib before attempting to import a plugin.");var o=FullCalendarVDom.Component,r=FullCalendarVDom.createElement,s=FullCalendarVDom.render,a=FullCalendarVDom.createRef,l=FullCalendarVDom.Fragment,c=FullCalendarVDom.createContext,u=FullCalendarVDom.createPortal,d=FullCalendarVDom.flushSync,h=FullCalendarVDom.unmountComponentAtNode,f=function(){function t(t,e){this.context=t,this.internalEventSource=e}return t.prototype.remove=function(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},t.prototype.refetch=function(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})},Object.defineProperty(t.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this.internalEventSource.meta.format},enumerable:!1,configurable:!0}),t}();function p(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(m(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}function m(t,e){var n=t.matches||t.matchesSelector||t.msMatchesSelector;return n.call(t,e)}function b(t,e){for(var n=t instanceof HTMLElement?[t]:t,i=[],o=0;o<n.length;o+=1)for(var r=n[o].querySelectorAll(e),s=0;s<r.length;s+=1)i.push(r[s]);return i}var v=/(top|left|right|bottom|width|height)$/i;function w(t,e){for(var n in e)_(t,n,e[n])}function _(t,e,n){null==n?t.style[e]="":"number"===typeof n&&v.test(e)?t.style[e]=n+"px":t.style[e]=n}function y(t){var e,n;return null!==(n=null===(e=t.composedPath)||void 0===e?void 0:e.call(t)[0])&&void 0!==n?n:t.target}function k(t){return t.getRootNode?t.getRootNode():document}var C=0;function x(){return C+=1,"fc-dom-"+C}function E(t){t.preventDefault()}function S(t,e){return function(n){var i=g(n.target,t);i&&e.call(i,n,i)}}function T(t,e,n,i){var o=S(n,i);return t.addEventListener(e,o),function(){t.removeEventListener(e,o)}}function A(t,e,n,i){var o;return T(t,"mouseover",e,function(t,e){if(e!==o){o=e,n(t,e);var r=function(t){o=null,i(t,e),e.removeEventListener("mouseleave",r)};e.addEventListener("mouseleave",r)}})}var P=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function I(t,e){var n=function(i){e(i),P.forEach(function(e){t.removeEventListener(e,n)})};P.forEach(function(e){t.addEventListener(e,n)})}function R(t){return(0,i.Cl)({onClick:t},O(t))}function O(t){return{tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(t(e),e.preventDefault())}}}var M=0;function D(){return M+=1,String(M)}function V(){document.body.classList.add("fc-not-allowed")}function N(){document.body.classList.remove("fc-not-allowed")}function L(t){t.classList.add("fc-unselectable"),t.addEventListener("selectstart",E)}function B(t){t.classList.remove("fc-unselectable"),t.removeEventListener("selectstart",E)}function F(t){t.addEventListener("contextmenu",E)}function z(t){t.removeEventListener("contextmenu",E)}function H(t){var e,n,i=[],o=[];for("string"===typeof t?o=t.split(/\s*,\s*/):"function"===typeof t?o=[t]:Array.isArray(t)&&(o=t),e=0;e<o.length;e+=1)n=o[e],"string"===typeof n?i.push("-"===n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"===typeof n&&i.push({func:n});return i}function W(t,e,n){var i,o;for(i=0;i<n.length;i+=1)if(o=j(t,e,n[i]),o)return o;return 0}function j(t,e,n){return n.func?n.func(t,e):$(t[n.field],e[n.field])*(n.order||1)}function $(t,e){return t||e?null==e?-1:null==t?1:"string"===typeof t||"string"===typeof e?String(t).localeCompare(String(e)):t-e:0}function U(t,e){var n=String(t);return"000".substr(0,e-n.length)+n}function q(t,e,n){return"function"===typeof t?t.apply(void 0,e):"string"===typeof t?e.reduce(function(t,e,n){return t.replace("$"+n,e||"")},t):n}function G(t,e){return t-e}function K(t){return t%1===0}function Y(t){var e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}var X=["sun","mon","tue","wed","thu","fri","sat"];function J(t,e){var n=bt(t);return n[2]+=7*e,vt(n)}function Z(t,e){var n=bt(t);return n[2]+=e,vt(n)}function Q(t,e){var n=bt(t);return n[6]+=e,vt(n)}function tt(t,e){return et(t,e)/7}function et(t,e){return(e.valueOf()-t.valueOf())/864e5}function nt(t,e){return(e.valueOf()-t.valueOf())/36e5}function it(t,e){return(e.valueOf()-t.valueOf())/6e4}function ot(t,e){return(e.valueOf()-t.valueOf())/1e3}function rt(t,e){var n=lt(t),i=lt(e);return{years:0,months:0,days:Math.round(et(n,i)),milliseconds:e.valueOf()-i.valueOf()-(t.valueOf()-n.valueOf())}}function st(t,e){var n=at(t,e);return null!==n&&n%7===0?n/7:null}function at(t,e){return _t(t)===_t(e)?Math.round(et(t,e)):null}function lt(t){return vt([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function ct(t){return vt([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function ut(t){return vt([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function dt(t){return vt([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function ht(t,e,n){var i=t.getUTCFullYear(),o=ft(t,i,e,n);if(o<1)return ft(t,i-1,e,n);var r=ft(t,i+1,e,n);return r>=1?Math.min(o,r):o}function ft(t,e,n,i){var o=vt([e,0,1+pt(e,n,i)]),r=lt(t),s=Math.round(et(o,r));return Math.floor(s/7)+1}function pt(t,e,n){var i=7+e-n,o=(7+vt([t,0,i]).getUTCDay()-e)%7;return-o+i-1}function gt(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function mt(t){return new Date(t[0],t[1]||0,null==t[2]?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function bt(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function vt(t){return 1===t.length&&(t=t.concat([0])),new Date(Date.UTC.apply(Date,t))}function wt(t){return!isNaN(t.valueOf())}function _t(t){return 1e3*t.getUTCHours()*60*60+1e3*t.getUTCMinutes()*60+1e3*t.getUTCSeconds()+t.getUTCMilliseconds()}function yt(t,e,n,i){return{instanceId:D(),defId:t,range:e,forcedStartTzo:null==n?null:n,forcedEndTzo:null==i?null:i}}var kt=Object.prototype.hasOwnProperty;function Ct(t,e){var n={};if(e)for(var i in e){for(var o=[],r=t.length-1;r>=0;r-=1){var s=t[r][i];if("object"===typeof s&&s)o.unshift(s);else if(void 0!==s){n[i]=s;break}}o.length&&(n[i]=Ct(o))}for(r=t.length-1;r>=0;r-=1){var a=t[r];for(var l in a)l in n||(n[l]=a[l])}return n}function xt(t,e){var n={};for(var i in t)e(t[i],i)&&(n[i]=t[i]);return n}function Et(t,e){var n={};for(var i in t)n[i]=e(t[i],i);return n}function St(t){for(var e={},n=0,i=t;n<i.length;n++){var o=i[n];e[o]=!0}return e}function Tt(t){var e=[];for(var n in t)e.push(t[n]);return e}function At(t,e){if(t===e)return!0;for(var n in t)if(kt.call(t,n)&&!(n in e))return!1;for(var n in e)if(kt.call(e,n)&&t[n]!==e[n])return!1;return!0}function Pt(t,e){var n=[];for(var i in t)kt.call(t,i)&&(i in e||n.push(i));for(var i in e)kt.call(e,i)&&t[i]!==e[i]&&n.push(i);return n}function It(t,e,n){if(void 0===n&&(n={}),t===e)return!0;for(var i in e)if(!(i in t)||!Rt(t[i],e[i],n[i]))return!1;for(var i in t)if(!(i in e))return!1;return!0}function Rt(t,e,n){return t===e||!0===n||!!n&&n(t,e)}function Ot(t,e,n,i){void 0===e&&(e=0),void 0===i&&(i=1);var o=[];null==n&&(n=Object.keys(t).length);for(var r=e;r<n;r+=i){var s=t[r];void 0!==s&&o.push(s)}return o}function Mt(t,e,n,i){for(var o=0;o<i.length;o+=1){var r=i[o].parse(t,n);if(r){var s=t.allDay;return null==s&&(s=e,null==s&&(s=r.allDayGuess,null==s&&(s=!1))),{allDay:s,duration:r.duration,typeData:r.typeData,typeId:o}}}return null}function Dt(t,e,n){var i=n.dateEnv,o=n.pluginHooks,r=n.options,s=t.defs,a=t.instances;for(var l in a=xt(a,function(t){return!s[t.defId].recurringDef}),s){var c=s[l];if(c.recurringDef){var u=c.recurringDef.duration;u||(u=c.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);for(var d=Vt(c,u,e,i,o.recurringTypes),h=0,f=d;h<f.length;h++){var p=f[h],g=yt(l,{start:p,end:i.add(p,u)});a[g.instanceId]=g}}}return{defs:s,instances:a}}function Vt(t,e,n,i,o){var r=o[t.recurringDef.typeId],s=r.expand(t.recurringDef.typeData,{start:i.subtract(n.start,e),end:n.end},i);return t.allDay&&(s=s.map(lt)),s}var Nt=["years","months","days","milliseconds"],Lt=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Bt(t,e){var n;return"string"===typeof t?Ft(t):"object"===typeof t&&t?zt(t):"number"===typeof t?zt((n={},n[e||"milliseconds"]=t,n)):null}function Ft(t){var e=Lt.exec(t);if(e){var n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*(60*(e[3]?parseInt(e[3],10):0)*60*1e3+60*(e[4]?parseInt(e[4],10):0)*1e3+1e3*(e[5]?parseInt(e[5],10):0)+(e[6]?parseInt(e[6],10):0))}}return null}function zt(t){var e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:60*(t.hours||t.hour||0)*60*1e3+60*(t.minutes||t.minute||0)*1e3+1e3*(t.seconds||t.second||0)+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=7*n,e.specifiedWeeks=!0),e}function Ht(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function Wt(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function jt(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function $t(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function Ut(t){return Gt(t)/365}function qt(t){return Gt(t)/30}function Gt(t){return Kt(t)/864e5}function Kt(t){return 31536e6*t.years+2592e6*t.months+864e5*t.days+t.milliseconds}function Yt(t,e){for(var n=null,i=0;i<Nt.length;i+=1){var o=Nt[i];if(e[o]){var r=t[o]/e[o];if(!K(r)||null!==n&&n!==r)return null;n=r}else if(t[o])return null}return n}function Xt(t){var e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%6e4!==0)return{unit:"second",value:e/1e3};if(e%36e5!==0)return{unit:"minute",value:e/6e4};if(e)return{unit:"hour",value:e/36e5}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Jt(t,e,n){void 0===n&&(n=!1);var i=t.toISOString();return i=i.replace(".000",""),n&&(i=i.replace("T00:00:00Z","")),i.length>10&&(null==e?i=i.replace("Z",""):0!==e&&(i=i.replace("Z",te(e,!0)))),i}function Zt(t){return t.toISOString().replace(/T.*$/,"")}function Qt(t){return U(t.getUTCHours(),2)+":"+U(t.getUTCMinutes(),2)+":"+U(t.getUTCSeconds(),2)}function te(t,e){void 0===e&&(e=!1);var n=t<0?"-":"+",i=Math.abs(t),o=Math.floor(i/60),r=Math.round(i%60);return e?n+U(o,2)+":"+U(r,2):"GMT"+n+o+(r?":"+U(r,2):"")}function ee(t,e,n){if(t===e)return!0;var i,o=t.length;if(o!==e.length)return!1;for(i=0;i<o;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}function ne(t,e,n){var i,o;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(i){if(!ee(i,r)){n&&n(o);var a=t.apply(this,r);e&&e(a,o)||(o=a)}}else o=t.apply(this,r);return i=r,o}}function ie(t,e,n){var i,o,r=this;return function(s){if(i){if(!At(i,s)){n&&n(o);var a=t.call(r,s);e&&e(a,o)||(o=a)}}else o=t.call(r,s);return i=s,o}}var oe={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},re={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},se=/\s*([ap])\.?m\.?/i,ae=/,/g,le=/\s+/g,ce=/\u200e/g,ue=/UTC|GMT/,de=function(){function t(t){var e={},n={},i=0;for(var o in t)o in oe?(n[o]=t[o],i=Math.max(oe[o],i)):(e[o]=t[o],o in re&&(i=Math.max(re[o],i)));this.standardDateProps=e,this.extendedSettings=n,this.severity=i,this.buildFormattingFunc=ne(he)}return t.prototype.format=function(t,e){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,e)(t)},t.prototype.formatRange=function(t,e,n,i){var o=this,r=o.standardDateProps,s=o.extendedSettings,a=ve(t.marker,e.marker,n.calendarSystem);if(!a)return this.format(t,n);var l=a;!(l>1)||"numeric"!==r.year&&"2-digit"!==r.year||"numeric"!==r.month&&"2-digit"!==r.month||"numeric"!==r.day&&"2-digit"!==r.day||(l=1);var c=this.format(t,n),u=this.format(e,n);if(c===u)return c;var d=we(r,l),h=he(d,s,n),f=h(t),p=h(e),g=_e(c,f,u,p),m=s.separator||i||n.defaultSeparator||"";return g?g.before+f+m+p+g.after:c+m+u},t.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}},t}();function he(t,e,n){var i=Object.keys(t).length;return 1===i&&"short"===t.timeZoneName?function(t){return te(t.timeZoneOffset)}:0===i&&e.week?function(t){return be(n.computeWeekNumber(t.marker),n.weekText,n.weekTextLong,n.locale,e.week)}:fe(t,e,n)}function fe(t,e,n){t=(0,i.Cl)({},t),e=(0,i.Cl)({},e),pe(t,e),t.timeZone="UTC";var o,r=new Intl.DateTimeFormat(n.locale.codes,t);if(e.omitZeroMinute){var s=(0,i.Cl)({},t);delete s.minute,o=new Intl.DateTimeFormat(n.locale.codes,s)}return function(i){var s,a=i.marker;s=o&&!a.getUTCMinutes()?o:r;var l=s.format(a);return ge(l,i,t,e,n)}}function pe(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),"long"===t.timeZoneName&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function ge(t,e,n,i,o){return t=t.replace(ce,""),"short"===n.timeZoneName&&(t=me(t,"UTC"===o.timeZone||null==e.timeZoneOffset?"UTC":te(e.timeZoneOffset))),i.omitCommas&&(t=t.replace(ae,"").trim()),i.omitZeroMinute&&(t=t.replace(":00","")),!1===i.meridiem?t=t.replace(se,"").trim():"narrow"===i.meridiem?t=t.replace(se,function(t,e){return e.toLocaleLowerCase()}):"short"===i.meridiem?t=t.replace(se,function(t,e){return e.toLocaleLowerCase()+"m"}):"lowercase"===i.meridiem&&(t=t.replace(se,function(t){return t.toLocaleLowerCase()})),t=t.replace(le," "),t=t.trim(),t}function me(t,e){var n=!1;return t=t.replace(ue,function(){return n=!0,e}),n||(t+=" "+e),t}function be(t,e,n,i,o){var r=[];return"long"===o?r.push(n):"short"!==o&&"narrow"!==o||r.push(e),"long"!==o&&"short"!==o||r.push(" "),r.push(i.simpleNumberFormat.format(t)),"rtl"===i.options.direction&&r.reverse(),r.join("")}function ve(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:_t(t)!==_t(e)?1:0}function we(t,e){var n={};for(var i in t)(!(i in re)||re[i]<=e)&&(n[i]=t[i]);return n}function _e(t,e,n,i){var o=0;while(o<t.length){var r=t.indexOf(e,o);if(-1===r)break;var s=t.substr(0,r);o=r+e.length;var a=t.substr(o),l=0;while(l<n.length){var c=n.indexOf(i,l);if(-1===c)break;var u=n.substr(0,c);l=c+i.length;var d=n.substr(l);if(s===u&&a===d)return{before:s,after:a}}}return null}function ye(t,e){var n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function ke(t,e,n,i){var o=ye(t,n.calendarSystem),r=e?ye(e,n.calendarSystem):null;return{date:o,start:o,end:r,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:i||n.defaultSeparator}}var Ce=function(){function t(t){this.cmdStr=t}return t.prototype.format=function(t,e,n){return e.cmdFormatter(this.cmdStr,ke(t,null,e,n))},t.prototype.formatRange=function(t,e,n,i){return n.cmdFormatter(this.cmdStr,ke(t,e,n,i))},t}(),xe=function(){function t(t){this.func=t}return t.prototype.format=function(t,e,n){return this.func(ke(t,null,e,n))},t.prototype.formatRange=function(t,e,n,i){return this.func(ke(t,e,n,i))},t}();function Ee(t){return"object"===typeof t&&t?new de(t):"string"===typeof t?new Ce(t):"function"===typeof t?new xe(t):null}var Se={navLinkDayClick:Ve,navLinkWeekClick:Ve,duration:Bt,bootstrapFontAwesome:Ve,buttonIcons:Ve,customButtons:Ve,defaultAllDayEventDuration:Bt,defaultTimedEventDuration:Bt,nextDayThreshold:Bt,scrollTime:Bt,scrollTimeReset:Boolean,slotMinTime:Bt,slotMaxTime:Bt,dayPopoverFormat:Ee,slotDuration:Bt,snapDuration:Bt,headerToolbar:Ve,footerToolbar:Ve,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Ee,dayHeaderClassNames:Ve,dayHeaderContent:Ve,dayHeaderDidMount:Ve,dayHeaderWillUnmount:Ve,dayCellClassNames:Ve,dayCellContent:Ve,dayCellDidMount:Ve,dayCellWillUnmount:Ve,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ve,weekNumbers:Boolean,weekNumberClassNames:Ve,weekNumberContent:Ve,weekNumberDidMount:Ve,weekNumberWillUnmount:Ve,editable:Boolean,viewClassNames:Ve,viewDidMount:Ve,viewWillUnmount:Ve,nowIndicator:Boolean,nowIndicatorClassNames:Ve,nowIndicatorContent:Ve,nowIndicatorDidMount:Ve,nowIndicatorWillUnmount:Ve,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ve,locale:Ve,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ve,eventOrder:H,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ve,contentHeight:Ve,direction:String,weekNumberFormat:Ee,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ve,initialDate:Ve,now:Ve,eventDataTransform:Ve,stickyHeaderDates:Ve,stickyFooterScrollbar:Ve,viewHeight:Ve,defaultAllDay:Boolean,eventSourceFailure:Ve,eventSourceSuccess:Ve,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ve,eventConstraint:Ve,eventAllow:Ve,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ve,eventContent:Ve,eventDidMount:Ve,eventWillUnmount:Ve,selectConstraint:Ve,selectOverlap:Ve,selectAllow:Ve,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ve,slotLaneClassNames:Ve,slotLaneContent:Ve,slotLaneDidMount:Ve,slotLaneWillUnmount:Ve,slotLabelClassNames:Ve,slotLabelContent:Ve,slotLabelDidMount:Ve,slotLabelWillUnmount:Ve,dayMaxEvents:Ve,dayMaxEventRows:Ve,dayMinWidth:Number,slotLabelInterval:Bt,allDayText:String,allDayClassNames:Ve,allDayContent:Ve,allDayDidMount:Ve,allDayWillUnmount:Ve,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Ee,rerenderDelay:Number,moreLinkText:Ve,moreLinkHint:Ve,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ve,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Bt,hiddenDays:Ve,monthMode:Boolean,fixedWeekCount:Boolean,validRange:Ve,visibleRange:Ve,titleFormat:Ve,eventInteractive:Boolean,noEventsText:String,viewHint:Ve,navLinkHint:Ve,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ve,moreLinkClassNames:Ve,moreLinkContent:Ve,moreLinkDidMount:Ve,moreLinkWillUnmount:Ve},Te={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" â ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30},Ae={datesSet:Ve,eventsSet:Ve,eventAdd:Ve,eventChange:Ve,eventRemove:Ve,windowResize:Ve,eventClick:Ve,eventMouseEnter:Ve,eventMouseLeave:Ve,select:Ve,unselect:Ve,loading:Ve,_unmount:Ve,_beforeprint:Ve,_afterprint:Ve,_noEventDrop:Ve,_noEventResize:Ve,_resize:Ve,_scrollRequest:Ve},Pe={buttonText:Ve,buttonHints:Ve,views:Ve,plugins:Ve,initialEvents:Ve,events:Ve,eventSources:Ve},Ie={headerToolbar:Re,footerToolbar:Re,buttonText:Re,buttonHints:Re,buttonIcons:Re,dateIncrement:Re};function Re(t,e){return"object"===typeof t&&"object"===typeof e&&t&&e?At(t,e):t===e}var Oe={type:String,component:Ve,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ve,usesMinMaxTime:Boolean,classNames:Ve,content:Ve,didMount:Ve,willUnmount:Ve};function Me(t){return Ct(t,Ie)}function De(t,e){var n={},i={};for(var o in e)o in t&&(n[o]=e[o](t[o]));for(var o in t)o in e||(i[o]=t[o]);return{refined:n,extra:i}}function Ve(t){return t}function Ne(t,e,n,i){for(var o=ze(),r=nn(n),s=0,a=t;s<a.length;s++){var l=a[s],c=tn(l,e,n,i,r);c&&Le(c,o)}return o}function Le(t,e){return void 0===e&&(e=ze()),e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function Be(t,e){var n=t.instances[e];if(n){var i=t.defs[n.defId],o=We(t,function(t){return Fe(i,t)});return o.defs[i.defId]=i,o.instances[n.instanceId]=n,o}return ze()}function Fe(t,e){return Boolean(t.groupId&&t.groupId===e.groupId)}function ze(){return{defs:{},instances:{}}}function He(t,e){return{defs:(0,i.Cl)((0,i.Cl)({},t.defs),e.defs),instances:(0,i.Cl)((0,i.Cl)({},t.instances),e.instances)}}function We(t,e){var n=xt(t.defs,e),i=xt(t.instances,function(t){return n[t.defId]});return{defs:n,instances:i}}function je(t,e){var n=t.defs,i=t.instances,o={},r={};for(var s in n)e.defs[s]||(o[s]=n[s]);for(var a in i)!e.instances[a]&&o[i[a].defId]&&(r[a]=i[a]);return{defs:o,instances:r}}function $e(t,e){return Array.isArray(t)?Ne(t,null,e,!0):"object"===typeof t&&t?Ne([t],null,e,!0):null!=t?String(t):null}function Ue(t){return Array.isArray(t)?t:"string"===typeof t?t.split(/\s+/):[]}var qe={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ve,overlap:Ve,allow:Ve,className:Ue,classNames:Ue,color:String,backgroundColor:String,borderColor:String,textColor:String},Ge={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Ke(t,e){var n=$e(t.constraint,e);return{display:t.display||null,startEditable:null!=t.startEditable?t.startEditable:t.editable,durationEditable:null!=t.durationEditable?t.durationEditable:t.editable,constraints:null!=n?[n]:[],overlap:null!=t.overlap?t.overlap:null,allows:null!=t.allow?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function Ye(t){return t.reduce(Xe,Ge)}function Xe(t,e){return{display:null!=e.display?e.display:t.display,startEditable:null!=e.startEditable?e.startEditable:t.startEditable,durationEditable:null!=e.durationEditable?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:"boolean"===typeof e.overlap?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}var Je={id:String,groupId:String,title:String,url:String,interactive:Boolean},Ze={start:Ve,end:Ve,date:Ve,allDay:Boolean},Qe=(0,i.Cl)((0,i.Cl)((0,i.Cl)({},Je),Ze),{extendedProps:Ve});function tn(t,e,n,i,o){void 0===o&&(o=nn(n));var r=en(t,n,o),s=r.refined,a=r.extra,l=sn(e,n),c=Mt(s,l,n.dateEnv,n.pluginHooks.recurringTypes);if(c){var u=on(s,a,e?e.sourceId:"",c.allDay,Boolean(c.duration),n);return u.recurringDef={typeId:c.typeId,typeData:c.typeData,duration:c.duration},{def:u,instance:null}}var d=rn(s,l,n,i);if(d){u=on(s,a,e?e.sourceId:"",d.allDay,d.hasEnd,n);var h=yt(u.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return{def:u,instance:h}}return null}function en(t,e,n){return void 0===n&&(n=nn(e)),De(t,n)}function nn(t){return(0,i.Cl)((0,i.Cl)((0,i.Cl)({},qe),Qe),t.pluginHooks.eventRefiners)}function on(t,e,n,o,r,s){for(var a={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:D(),sourceId:n,allDay:o,hasEnd:r,interactive:t.interactive,ui:Ke(t,s),extendedProps:(0,i.Cl)((0,i.Cl)({},t.extendedProps||{}),e)},l=0,c=s.pluginHooks.eventDefMemberAdders;l<c.length;l++){var u=c[l];(0,i.Cl)(a,u(t))}return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function rn(t,e,n,i){var o,r,s=t.allDay,a=null,l=!1,c=null,u=null!=t.start?t.start:t.date;if(o=n.dateEnv.createMarkerMeta(u),o)a=o.marker;else if(!i)return null;return null!=t.end&&(r=n.dateEnv.createMarkerMeta(t.end)),null==s&&(s=null!=e?e:(!o||o.isTimeUnspecified)&&(!r||r.isTimeUnspecified)),s&&a&&(a=lt(a)),r&&(c=r.marker,s&&(c=lt(c)),a&&c<=a&&(c=null)),c?l=!0:i||(l=n.options.forceEventDuration||!1,c=n.dateEnv.add(a,s?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:s,hasEnd:l,range:{start:a,end:c},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:r?r.forcedTzo:null}}function sn(t,e){var n=null;return t&&(n=t.defaultAllDay),null==n&&(n=e.options.defaultAllDay),n}function an(t){var e=Math.floor(et(t.start,t.end))||1,n=lt(t.start),i=Z(n,e);return{start:n,end:i}}function ln(t,e){void 0===e&&(e=Bt(0));var n=null,i=null;if(t.end){i=lt(t.end);var o=t.end.valueOf()-i.valueOf();o&&o>=Kt(e)&&(i=Z(i,1))}return t.start&&(n=lt(t.start),i&&i<=n&&(i=Z(n,1))),{start:n,end:i}}function cn(t,e,n,i){return"year"===i?Bt(n.diffWholeYears(t,e),"year"):"month"===i?Bt(n.diffWholeMonths(t,e),"month"):rt(t,e)}function un(t,e){var n=null,i=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(i=e.createMarker(t.end)),n||i?n&&i&&i<n?null:{start:n,end:i}:null}function dn(t,e){var n,i,o=[],r=e.start;for(t.sort(hn),n=0;n<t.length;n+=1)i=t[n],i.start>r&&o.push({start:r,end:i.start}),i.end>r&&(r=i.end);return r<e.end&&o.push({start:r,end:e.end}),o}function hn(t,e){return t.start.valueOf()-e.start.valueOf()}function fn(t,e){var n=t.start,i=t.end,o=null;return null!==e.start&&(n=null===n?e.start:new Date(Math.max(n.valueOf(),e.start.valueOf()))),null!=e.end&&(i=null===i?e.end:new Date(Math.min(i.valueOf(),e.end.valueOf()))),(null===n||null===i||n<i)&&(o={start:n,end:i}),o}function pn(t,e){return(null===t.start?null:t.start.valueOf())===(null===e.start?null:e.start.valueOf())&&(null===t.end?null:t.end.valueOf())===(null===e.end?null:e.end.valueOf())}function gn(t,e){return(null===t.end||null===e.start||t.end>e.start)&&(null===t.start||null===e.end||t.start<e.end)}function mn(t,e){return(null===t.start||null!==e.start&&e.start>=t.start)&&(null===t.end||null!==e.end&&e.end<=t.end)}function bn(t,e){return(null===t.start||e>=t.start)&&(null===t.end||e<t.end)}function vn(t,e){return null!=e.start&&t<e.start?e.start:null!=e.end&&t>=e.end?new Date(e.end.valueOf()-1):t}function wn(t,e,n,i){var o={},r={},s={},a=[],l=[],c=Cn(t.defs,e);for(var u in t.defs){var d=t.defs[u],h=c[d.defId];"inverse-background"===h.display&&(d.groupId?(o[d.groupId]=[],s[d.groupId]||(s[d.groupId]=d)):r[u]=[])}for(var f in t.instances){var p=t.instances[f],g=(d=t.defs[p.defId],h=c[d.defId],p.range),m=!d.allDay&&i?ln(g,i):g,b=fn(m,n);b&&("inverse-background"===h.display?d.groupId?o[d.groupId].push(b):r[p.defId].push(b):"none"!==h.display&&("background"===h.display?a:l).push({def:d,ui:h,instance:p,range:b,isStart:m.start&&m.start.valueOf()===b.start.valueOf(),isEnd:m.end&&m.end.valueOf()===b.end.valueOf()}))}for(var v in o)for(var w=o[v],_=dn(w,n),y=0,k=_;y<k.length;y++){var C=k[y];d=s[v],h=c[d.defId];a.push({def:d,ui:h,instance:null,range:C,isStart:!1,isEnd:!1})}for(var u in r){w=r[u],_=dn(w,n);for(var x=0,E=_;x<E.length;x++){C=E[x];a.push({def:t.defs[u],ui:c[u],instance:null,range:C,isStart:!1,isEnd:!1})}}return{bg:a,fg:l}}function _n(t){return"background"===t.ui.display||"inverse-background"===t.ui.display}function yn(t,e){t.fcSeg=e}function kn(t){return t.fcSeg||t.parentNode.fcSeg||null}function Cn(t,e){return Et(t,function(t){return xn(t,e)})}function xn(t,e){var n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),Ye(n)}function En(t,e){var n=t.map(Sn);return n.sort(function(t,n){return W(t,n,e)}),n.map(function(t){return t._seg})}function Sn(t){var e=t.eventRange,n=e.def,o=e.instance?e.instance.range:e.range,r=o.start?o.start.valueOf():0,s=o.end?o.end.valueOf():0;return(0,i.Cl)((0,i.Cl)((0,i.Cl)({},n.extendedProps),n),{id:n.publicId,start:r,end:s,duration:s-r,allDay:Number(n.allDay),_seg:t})}function Tn(t,e){for(var n=e.pluginHooks,i=n.isDraggableTransformers,o=t.eventRange,r=o.def,s=o.ui,a=s.startEditable,l=0,c=i;l<c.length;l++){var u=c[l];a=u(a,r,s,e)}return a}function An(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function Pn(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function In(t,e,n,i,o,r,s){var a=n.dateEnv,l=n.options,c=l.displayEventTime,u=l.displayEventEnd,d=t.eventRange.def,h=t.eventRange.instance;null==c&&(c=!1!==i),null==u&&(u=!1!==o);var f=h.range.start,p=h.range.end,g=r||t.start||t.eventRange.range.start,m=s||t.end||t.eventRange.range.end,b=lt(f).valueOf()===lt(g).valueOf(),v=lt(Q(p,-1)).valueOf()===lt(Q(m,-1)).valueOf();return c&&!d.allDay&&(b||v)?(g=b?f:g,m=v?p:m,u&&d.hasEnd?a.formatRange(g,m,e,{forcedStartTzo:r?null:h.forcedStartTzo,forcedEndTzo:s?null:h.forcedEndTzo}):a.format(g,e,{forcedTzo:r?null:h.forcedStartTzo})):""}function Rn(t,e,n){var i=t.eventRange.range;return{isPast:i.end<(n||e.start),isFuture:i.start>=(n||e.end),isToday:e&&bn(e,i.start)}}function On(t){var e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function Mn(t){return t.instance?t.instance.instanceId:t.def.defId+":"+t.range.start.toISOString()}function Dn(t,e){var n=t.eventRange,i=n.def,o=n.instance,r=i.url;if(r)return{href:r};var s=e.emitter,a=e.options,l=a.eventInteractive;return null==l&&(l=i.interactive,null==l&&(l=Boolean(s.hasHandlers("eventClick")))),l?O(function(t){s.trigger("eventClick",{el:t.target,event:new si(e,i,o),jsEvent:t,view:e.viewApi})}):{}}var Vn={start:Ve,end:Ve,allDay:Boolean};function Nn(t,e,n){var i=Ln(t,e),o=i.range;if(!o.start)return null;if(!o.end){if(null==n)return null;o.end=e.add(o.start,n)}return i}function Ln(t,e){var n=De(t,Vn),o=n.refined,r=n.extra,s=o.start?e.createMarkerMeta(o.start):null,a=o.end?e.createMarkerMeta(o.end):null,l=o.allDay;return null==l&&(l=s&&s.isTimeUnspecified&&(!a||a.isTimeUnspecified)),(0,i.Cl)({range:{start:s?s.marker:null,end:a?a.marker:null},allDay:l},r)}function Bn(t,e){return pn(t.range,e.range)&&t.allDay===e.allDay&&Fn(t,e)}function Fn(t,e){for(var n in e)if("range"!==n&&"allDay"!==n&&t[n]!==e[n])return!1;for(var n in t)if(!(n in e))return!1;return!0}function zn(t,e){return(0,i.Cl)((0,i.Cl)({},Wn(t.range,e,t.allDay)),{allDay:t.allDay})}function Hn(t,e,n){return(0,i.Cl)((0,i.Cl)({},Wn(t,e,n)),{timeZone:e.timeZone})}function Wn(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function jn(t,e,n){var i=en({editable:!1},n),o=on(i.refined,i.extra,"",t.allDay,!0,n);return{def:o,ui:xn(o,e),instance:yt(o.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function $n(t,e,n){n.emitter.trigger("select",(0,i.Cl)((0,i.Cl)({},qn(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function Un(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function qn(t,e){for(var n={},o=0,r=e.pluginHooks.dateSpanTransforms;o<r.length;o++){var s=r[o];(0,i.Cl)(n,s(t,e))}return(0,i.Cl)(n,zn(t,e.dateEnv)),n}function Gn(t,e,n){var i=n.dateEnv,o=n.options,r=e;return t?(r=lt(r),r=i.add(r,o.defaultAllDayEventDuration)):r=i.add(r,o.defaultTimedEventDuration),r}function Kn(t,e,n,i){var o=Cn(t.defs,e),r=ze();for(var s in t.defs){var a=t.defs[s];r.defs[s]=Yn(a,o[s],n,i)}for(var l in t.instances){var c=t.instances[l];a=r.defs[c.defId];r.instances[l]=Xn(c,a,o[c.defId],n,i)}return r}function Yn(t,e,n,o){var r=n.standardProps||{};null==r.hasEnd&&e.durationEditable&&(n.startDelta||n.endDelta)&&(r.hasEnd=!0);var s=(0,i.Cl)((0,i.Cl)((0,i.Cl)({},t),r),{ui:(0,i.Cl)((0,i.Cl)({},t.ui),r.ui)});n.extendedProps&&(s.extendedProps=(0,i.Cl)((0,i.Cl)({},s.extendedProps),n.extendedProps));for(var a=0,l=o.pluginHooks.eventDefMutationAppliers;a<l.length;a++){var c=l[a];c(s,n,o)}return!s.hasEnd&&o.options.forceEventDuration&&(s.hasEnd=!0),s}function Xn(t,e,n,o,r){var s=r.dateEnv,a=o.standardProps&&!0===o.standardProps.allDay,l=o.standardProps&&!1===o.standardProps.hasEnd,c=(0,i.Cl)({},t);return a&&(c.range=an(c.range)),o.datesDelta&&n.startEditable&&(c.range={start:s.add(c.range.start,o.datesDelta),end:s.add(c.range.end,o.datesDelta)}),o.startDelta&&n.durationEditable&&(c.range={start:s.add(c.range.start,o.startDelta),end:c.range.end}),o.endDelta&&n.durationEditable&&(c.range={start:c.range.start,end:s.add(c.range.end,o.endDelta)}),l&&(c.range={start:c.range.start,end:Gn(e.allDay,c.range.start,r)}),e.allDay&&(c.range={start:lt(c.range.start),end:lt(c.range.end)}),c.range.end<c.range.start&&(c.range.end=Gn(e.allDay,c.range.start,r)),c}var Jn=function(){function t(t,e,n){this.type=t,this.getCurrentData=e,this.dateEnv=n}return Object.defineProperty(t.prototype,"calendar",{get:function(){return this.getCurrentData().calendarApi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getCurrentData().viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)},enumerable:!1,configurable:!0}),t.prototype.getOption=function(t){return this.getCurrentData().options[t]},t}(),Zn={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ve,eventDataTransform:Ve,success:Ve,failure:Ve};function Qn(t,e,n){var i;if(void 0===n&&(n=ti(e)),"string"===typeof t?i={url:t}:"function"===typeof t||Array.isArray(t)?i={events:t}:"object"===typeof t&&t&&(i=t),i){var o=De(i,n),r=o.refined,s=o.extra,a=ei(r,e);if(a)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:D(),sourceDefId:a.sourceDefId,meta:a.meta,ui:Ke(r,e),extendedProps:s}}return null}function ti(t){return(0,i.Cl)((0,i.Cl)((0,i.Cl)({},qe),Zn),t.pluginHooks.eventSourceRefiners)}function ei(t,e){for(var n=e.pluginHooks.eventSourceDefs,i=n.length-1;i>=0;i-=1){var o=n[i],r=o.parseMeta(t);if(r)return{sourceDefId:i,meta:r}}return null}function ni(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function ii(t,e){var n=t.initialDate;return null!=n?e.createMarker(n):oi(t.now,e)}function oi(t,e){return"function"===typeof t&&(t=t()),null==t?e.createNowMarker():e.createMarker(t)}var ri=function(){function t(){}return t.prototype.getCurrentData=function(){return this.currentDataManager.getCurrentData()},t.prototype.dispatch=function(t){return this.currentDataManager.dispatch(t)},Object.defineProperty(t.prototype,"view",{get:function(){return this.getCurrentData().viewApi},enumerable:!1,configurable:!0}),t.prototype.batchRendering=function(t){t()},t.prototype.updateSize=function(){this.trigger("_resize",!0)},t.prototype.setOption=function(t,e){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:e})},t.prototype.getOption=function(t){return this.currentDataManager.currentCalendarOptionsInput[t]},t.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.getCurrentData().availableRawLocales)},t.prototype.on=function(t,e){var n=this.currentDataManager;n.currentCalendarOptionsRefiners[t]?n.emitter.on(t,e):console.warn("Unknown listener name '"+t+"'")},t.prototype.off=function(t,e){this.currentDataManager.emitter.off(t,e)},t.prototype.trigger=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.currentDataManager.emitter).trigger.apply(e,(0,i.fX)([t],n))},t.prototype.changeView=function(t,e){var n=this;this.batchRendering(function(){if(n.unselect(),e)if(e.start&&e.end)n.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),n.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:e});else{var i=n.getCurrentData().dateEnv;n.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:i.createMarker(e)})}else n.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})},t.prototype.zoomTo=function(t,e){var n,i=this.getCurrentData();e=e||"day",n=i.viewSpecs[e]||this.getUnitViewSpec(e),this.unselect(),n?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:n.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})},t.prototype.getUnitViewSpec=function(t){var e,n,i=this.getCurrentData(),o=i.viewSpecs,r=i.toolbarConfig,s=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]);for(var a in o)s.push(a);for(e=0;e<s.length;e+=1)if(n=o[s[e]],n&&n.singleUnit===t)return n;return null},t.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},t.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},t.prototype.prevYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})},t.prototype.nextYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})},t.prototype.today=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:oi(t.calendarOptions.now,t.dateEnv)})},t.prototype.gotoDate=function(t){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.createMarker(t)})},t.prototype.incrementDate=function(t){var e=this.getCurrentData(),n=Bt(t);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.add(e.currentDate,n)}))},t.prototype.getDate=function(){var t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)},t.prototype.formatDate=function(t,e){var n=this.getCurrentData().dateEnv;return n.format(n.createMarker(t),Ee(e))},t.prototype.formatRange=function(t,e,n){var i=this.getCurrentData().dateEnv;return i.formatRange(i.createMarker(t),i.createMarker(e),Ee(n),n)},t.prototype.formatIso=function(t,e){var n=this.getCurrentData().dateEnv;return n.formatIso(n.createMarker(t),{omitTime:e})},t.prototype.select=function(t,e){var n;n=null==e?null!=t.start?t:{start:t,end:null}:{start:t,end:e};var i=this.getCurrentData(),o=Nn(n,i.dateEnv,Bt({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),$n(o,null,i))},t.prototype.unselect=function(t){var e=this.getCurrentData();e.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),Un(t,e))},t.prototype.addEvent=function(t,e){if(t instanceof si){var n=t._def,i=t._instance,o=this.getCurrentData();return o.eventStore.defs[n.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Le({def:n,instance:i})}),this.triggerEventAdd(t)),t}var r,s=this.getCurrentData();if(e instanceof f)r=e.internalEventSource;else if("boolean"===typeof e)e&&(r=Tt(s.eventSources)[0]);else if(null!=e){var a=this.getEventSourceById(e);if(!a)return console.warn('Could not find an event source with ID "'+e+'"'),null;r=a.internalEventSource}var l=tn(t,r,s,!1);if(l){var c=new si(s,l.def,l.def.recurringDef?null:l.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Le(l)}),this.triggerEventAdd(c),c}return null},t.prototype.triggerEventAdd=function(t){var e=this,n=this.getCurrentData().emitter;n.trigger("eventAdd",{event:t,relatedEvents:[],revert:function(){e.dispatch({type:"REMOVE_EVENTS",eventStore:ai(t)})}})},t.prototype.getEventById=function(t){var e=this.getCurrentData(),n=e.eventStore,i=n.defs,o=n.instances;for(var r in t=String(t),i){var s=i[r];if(s.publicId===t){if(s.recurringDef)return new si(e,s,null);for(var a in o){var l=o[a];if(l.defId===s.defId)return new si(e,s,l)}}}return null},t.prototype.getEvents=function(){var t=this.getCurrentData();return li(t.eventStore,t)},t.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},t.prototype.getEventSources=function(){var t=this.getCurrentData(),e=t.eventSources,n=[];for(var i in e)n.push(new f(t,e[i]));return n},t.prototype.getEventSourceById=function(t){var e=this.getCurrentData(),n=e.eventSources;for(var i in t=String(t),n)if(n[i].publicId===t)return new f(e,n[i]);return null},t.prototype.addEventSource=function(t){var e=this.getCurrentData();if(t instanceof f)return e.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;var n=Qn(t,e);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new f(e,n)):null},t.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},t.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})},t.prototype.scrollToTime=function(t){var e=Bt(t);e&&this.trigger("_scrollRequest",{time:e})},t}(),si=function(){function t(t,e,n){this._context=t,this._def=e,this._instance=n||null}return t.prototype.setProp=function(t,e){var n,i;if(t in Ze)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===t)e=Je[t](e),this.mutate({standardProps:{publicId:e}});else if(t in Je)e=Je[t](e),this.mutate({standardProps:(n={},n[t]=e,n)});else if(t in qe){var o=qe[t](e);"color"===t?o={backgroundColor:e,borderColor:e}:"editable"===t?o={startEditable:e,durationEditable:e}:(i={},i[t]=e,o=i),this.mutate({standardProps:{ui:o}})}else console.warn("Could not set prop '"+t+"'. Use setExtendedProp instead.")},t.prototype.setExtendedProp=function(t,e){var n;this.mutate({extendedProps:(n={},n[t]=e,n)})},t.prototype.setStart=function(t,e){void 0===e&&(e={});var n=this._context.dateEnv,i=n.createMarker(t);if(i&&this._instance){var o=this._instance.range,r=cn(o.start,i,n,e.granularity);e.maintainDuration?this.mutate({datesDelta:r}):this.mutate({startDelta:r})}},t.prototype.setEnd=function(t,e){void 0===e&&(e={});var n,i=this._context.dateEnv;if((null==t||(n=i.createMarker(t),n))&&this._instance)if(n){var o=cn(this._instance.range.end,n,i,e.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})},t.prototype.setDates=function(t,e,n){void 0===n&&(n={});var i,o=this._context.dateEnv,r={allDay:n.allDay},s=o.createMarker(t);if(s&&(null==e||(i=o.createMarker(e),i))&&this._instance){var a=this._instance.range;!0===n.allDay&&(a=an(a));var l=cn(a.start,s,o,n.granularity);if(i){var c=cn(a.end,i,o,n.granularity);Ht(l,c)?this.mutate({datesDelta:l,standardProps:r}):this.mutate({startDelta:l,endDelta:c,standardProps:r})}else r.hasEnd=!1,this.mutate({datesDelta:l,standardProps:r})}},t.prototype.moveStart=function(t){var e=Bt(t);e&&this.mutate({startDelta:e})},t.prototype.moveEnd=function(t){var e=Bt(t);e&&this.mutate({endDelta:e})},t.prototype.moveDates=function(t){var e=Bt(t);e&&this.mutate({datesDelta:e})},t.prototype.setAllDay=function(t,e){void 0===e&&(e={});var n={allDay:t},i=e.maintainDuration;null==i&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(n.hasEnd=i),this.mutate({standardProps:n})},t.prototype.formatRange=function(t){var e=this._context.dateEnv,n=this._instance,i=Ee(t);return this._def.hasEnd?e.formatRange(n.range.start,n.range.end,i,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):e.format(n.range.start,i,{forcedTzo:n.forcedStartTzo})},t.prototype.mutate=function(e){var n=this._instance;if(n){var i=this._def,o=this._context,r=o.getCurrentData().eventStore,s=Be(r,n.instanceId),a={"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}};s=Kn(s,a,e,o);var l=new t(o,i,n);this._def=s.defs[i.defId],this._instance=s.instances[n.instanceId],o.dispatch({type:"MERGE_EVENTS",eventStore:s}),o.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:li(s,o,n),revert:function(){o.dispatch({type:"RESET_EVENTS",eventStore:r})}})}},t.prototype.remove=function(){var t=this._context,e=ai(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:e}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:e})}})},Object.defineProperty(t.prototype,"source",{get:function(){var t=this._def.sourceId;return t?new f(this._context,this._context.getCurrentData().eventSources[t]):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startStr",{get:function(){var t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endStr",{get:function(){var t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._def.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._def.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._def.url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"display",{get:function(){return this._def.ui.display||"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!1,configurable:!0}),t.prototype.toPlainObject=function(t){void 0===t&&(t={});var e=this._def,n=e.ui,o=this,r=o.startStr,s=o.endStr,a={};return e.title&&(a.title=e.title),r&&(a.start=r),s&&(a.end=s),e.publicId&&(a.id=e.publicId),e.groupId&&(a.groupId=e.groupId),e.url&&(a.url=e.url),n.display&&"auto"!==n.display&&(a.display=n.display),t.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?a.color=n.backgroundColor:(n.backgroundColor&&(a.backgroundColor=n.backgroundColor),n.borderColor&&(a.borderColor=n.borderColor)),n.textColor&&(a.textColor=n.textColor),n.classNames.length&&(a.classNames=n.classNames),Object.keys(e.extendedProps).length&&(t.collapseExtendedProps?(0,i.Cl)(a,e.extendedProps):a.extendedProps=e.extendedProps),a},t.prototype.toJSON=function(){return this.toPlainObject()},t}();function ai(t){var e,n,i=t._def,o=t._instance;return{defs:(e={},e[i.defId]=i,e),instances:o?(n={},n[o.instanceId]=o,n):{}}}function li(t,e,n){var i=t.defs,o=t.instances,r=[],s=n?n.instanceId:"";for(var a in o){var l=o[a],c=i[l.defId];l.instanceId!==s&&r.push(new si(e,c,l))}return r}var ci={};function ui(t,e){ci[t]=e}function di(t){return new ci[t]}var hi=function(){function t(){}return t.prototype.getMarkerYear=function(t){return t.getUTCFullYear()},t.prototype.getMarkerMonth=function(t){return t.getUTCMonth()},t.prototype.getMarkerDay=function(t){return t.getUTCDate()},t.prototype.arrayToMarker=function(t){return vt(t)},t.prototype.markerToArray=function(t){return bt(t)},t}();ui("gregory",hi);var fi=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function pi(t){var e=fi.exec(t);if(e){var n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?1e3*Number("0."+e[12]):0));if(wt(n)){var i=null;return e[13]&&(i=("-"===e[15]?-1:1)*(60*Number(e[16]||0)+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}var gi=function(){function t(t){var e=this.timeZone=t.timeZone,n="local"!==e&&"UTC"!==e;t.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(e)),this.canComputeOffset=Boolean(!n||this.namedTimeZoneImpl),this.calendarSystem=di(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,"ISO"===t.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"===typeof t.firstDay&&(this.weekDow=t.firstDay),"function"===typeof t.weekNumberCalculation&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=null!=t.weekText?t.weekText:t.locale.options.weekText,this.weekTextLong=(null!=t.weekTextLong?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}return t.prototype.createMarker=function(t){var e=this.createMarkerMeta(t);return null===e?null:e.marker},t.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):vt(gt(new Date))},t.prototype.createMarkerMeta=function(t){if("string"===typeof t)return this.parse(t);var e=null;return"number"===typeof t?e=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(e=this.timestampToMarker(t))):Array.isArray(t)&&(e=vt(t)),null!==e&&wt(e)?{marker:e,isTimeUnspecified:!1,forcedTzo:null}:null},t.prototype.parse=function(t){var e=pi(t);if(null===e)return null;var n=e.marker,i=null;return null!==e.timeZoneOffset&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-60*e.timeZoneOffset*1e3):i=e.timeZoneOffset),{marker:n,isTimeUnspecified:e.isTimeUnspecified,forcedTzo:i}},t.prototype.getYear=function(t){return this.calendarSystem.getMarkerYear(t)},t.prototype.getMonth=function(t){return this.calendarSystem.getMarkerMonth(t)},t.prototype.add=function(t,e){var n=this.calendarSystem.markerToArray(t);return n[0]+=e.years,n[1]+=e.months,n[2]+=e.days,n[6]+=e.milliseconds,this.calendarSystem.arrayToMarker(n)},t.prototype.subtract=function(t,e){var n=this.calendarSystem.markerToArray(t);return n[0]-=e.years,n[1]-=e.months,n[2]-=e.days,n[6]-=e.milliseconds,this.calendarSystem.arrayToMarker(n)},t.prototype.addYears=function(t,e){var n=this.calendarSystem.markerToArray(t);return n[0]+=e,this.calendarSystem.arrayToMarker(n)},t.prototype.addMonths=function(t,e){var n=this.calendarSystem.markerToArray(t);return n[1]+=e,this.calendarSystem.arrayToMarker(n)},t.prototype.diffWholeYears=function(t,e){var n=this.calendarSystem;return _t(t)===_t(e)&&n.getMarkerDay(t)===n.getMarkerDay(e)&&n.getMarkerMonth(t)===n.getMarkerMonth(e)?n.getMarkerYear(e)-n.getMarkerYear(t):null},t.prototype.diffWholeMonths=function(t,e){var n=this.calendarSystem;return _t(t)===_t(e)&&n.getMarkerDay(t)===n.getMarkerDay(e)?n.getMarkerMonth(e)-n.getMarkerMonth(t)+12*(n.getMarkerYear(e)-n.getMarkerYear(t)):null},t.prototype.greatestWholeUnit=function(t,e){var n=this.diffWholeYears(t,e);return null!==n?{unit:"year",value:n}:(n=this.diffWholeMonths(t,e),null!==n?{unit:"month",value:n}:(n=st(t,e),null!==n?{unit:"week",value:n}:(n=at(t,e),null!==n?{unit:"day",value:n}:(n=nt(t,e),K(n)?{unit:"hour",value:n}:(n=it(t,e),K(n)?{unit:"minute",value:n}:(n=ot(t,e),K(n)?{unit:"second",value:n}:{unit:"millisecond",value:e.valueOf()-t.valueOf()}))))))},t.prototype.countDurationsBetween=function(t,e,n){var i;return n.years&&(i=this.diffWholeYears(t,e),null!==i)?i/Ut(n):n.months&&(i=this.diffWholeMonths(t,e),null!==i)?i/qt(n):n.days&&(i=at(t,e),null!==i)?i/Gt(n):(e.valueOf()-t.valueOf())/Kt(n)},t.prototype.startOf=function(t,e){return"year"===e?this.startOfYear(t):"month"===e?this.startOfMonth(t):"week"===e?this.startOfWeek(t):"day"===e?lt(t):"hour"===e?ct(t):"minute"===e?ut(t):"second"===e?dt(t):null},t.prototype.startOfYear=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])},t.prototype.startOfMonth=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])},t.prototype.startOfWeek=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])},t.prototype.computeWeekNumber=function(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):ht(t,this.weekDow,this.weekDoy)},t.prototype.format=function(t,e,n){return void 0===n&&(n={}),e.format({marker:t,timeZoneOffset:null!=n.forcedTzo?n.forcedTzo:this.offsetForMarker(t)},this)},t.prototype.formatRange=function(t,e,n,i){return void 0===i&&(i={}),i.isEndExclusive&&(e=Q(e,-1)),n.formatRange({marker:t,timeZoneOffset:null!=i.forcedStartTzo?i.forcedStartTzo:this.offsetForMarker(t)},{marker:e,timeZoneOffset:null!=i.forcedEndTzo?i.forcedEndTzo:this.offsetForMarker(e)},this,i.defaultSeparator)},t.prototype.formatIso=function(t,e){void 0===e&&(e={});var n=null;return e.omitTimeZoneOffset||(n=null!=e.forcedTzo?e.forcedTzo:this.offsetForMarker(t)),Jt(t,n,e.omitTime)},t.prototype.timestampToMarker=function(t){return"local"===this.timeZone?vt(gt(new Date(t))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?vt(this.namedTimeZoneImpl.timestampToArray(t)):new Date(t)},t.prototype.offsetForMarker=function(t){return"local"===this.timeZone?-mt(bt(t)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(bt(t)):null},t.prototype.toDate=function(t,e){return"local"===this.timeZone?mt(bt(t)):"UTC"===this.timeZone?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(bt(t))*60):new Date(t.valueOf()-(e||0))},t}(),mi=[],bi={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},vi=(0,i.Cl)((0,i.Cl)({},bi),{buttonHints:{prev:"Previous $0",next:"Next $0",today:function(t,e){return"day"===e?"Today":"This "+t}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:function(t){return"Show "+t+" more event"+(1===t?"":"s")}});function wi(t){for(var e=t.length>0?t[0].code:"en",n=mi.concat(t),i={en:vi},o=0,r=n;o<r.length;o++){var s=r[o];i[s.code]=s}return{map:i,defaultCode:e}}function _i(t,e){return"object"!==typeof t||Array.isArray(t)?yi(t,e):Ci(t.code,[t.code],t)}function yi(t,e){var n=[].concat(t||[]),i=ki(n,e)||vi;return Ci(t,n,i)}function ki(t,e){for(var n=0;n<t.length;n+=1)for(var i=t[n].toLocaleLowerCase().split("-"),o=i.length;o>0;o-=1){var r=i.slice(0,o).join("-");if(e[r])return e[r]}return null}function Ci(t,e,n){var i=Ct([bi,n],["buttonText"]);delete i.code;var o=i.week;return delete i.week,{codeArg:t,codes:e,week:o,simpleNumberFormat:new Intl.NumberFormat(t),options:i}}var xi,Ei={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Si(t,e){return Ne(Ti(t),null,e)}function Ti(t){var e;return e=!0===t?[{}]:Array.isArray(t)?t.filter(function(t){return t.daysOfWeek}):"object"===typeof t&&t?[t]:[],e=e.map(function(t){return(0,i.Cl)((0,i.Cl)({},Ei),t)}),e}function Ai(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function Pi(t,e){var n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom&&n}function Ii(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function Ri(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function Oi(t,e){return{left:t.left-e.left,top:t.top-e.top}}function Mi(){return null==xi&&(xi=Di()),xi}function Di(){if("undefined"===typeof document)return!0;var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);var e=t.querySelector("div"),n=e.offsetHeight>0;return document.body.removeChild(t),n}var Vi=ze(),Ni=function(){function t(){this.getKeysForEventDefs=ne(this._getKeysForEventDefs),this.splitDateSelection=ne(this._splitDateSpan),this.splitEventStore=ne(this._splitEventStore),this.splitIndividualUi=ne(this._splitIndividualUi),this.splitEventDrag=ne(this._splitInteraction),this.splitEventResize=ne(this._splitInteraction),this.eventUiBuilders={}}return t.prototype.splitProps=function(t){var e=this,n=this.getKeyInfo(t),i=this.getKeysForEventDefs(t.eventStore),o=this.splitDateSelection(t.dateSelection),r=this.splitIndividualUi(t.eventUiBases,i),s=this.splitEventStore(t.eventStore,i),a=this.splitEventDrag(t.eventDrag),l=this.splitEventResize(t.eventResize),c={};for(var u in this.eventUiBuilders=Et(n,function(t,n){return e.eventUiBuilders[n]||ne(Li)}),n){var d=n[u],h=s[u]||Vi,f=this.eventUiBuilders[u];c[u]={businessHours:d.businessHours||t.businessHours,dateSelection:o[u]||null,eventStore:h,eventUiBases:f(t.eventUiBases[""],d.ui,r[u]),eventSelection:h.instances[t.eventSelection]?t.eventSelection:"",eventDrag:a[u]||null,eventResize:l[u]||null}}return c},t.prototype._splitDateSpan=function(t){var e={};if(t)for(var n=this.getKeysForDateSpan(t),i=0,o=n;i<o.length;i++){var r=o[i];e[r]=t}return e},t.prototype._getKeysForEventDefs=function(t){var e=this;return Et(t.defs,function(t){return e.getKeysForEventDef(t)})},t.prototype._splitEventStore=function(t,e){var n=t.defs,i=t.instances,o={};for(var r in n)for(var s=0,a=e[r];s<a.length;s++){var l=a[s];o[l]||(o[l]=ze()),o[l].defs[r]=n[r]}for(var c in i)for(var u=i[c],d=0,h=e[u.defId];d<h.length;d++){l=h[d];o[l]&&(o[l].instances[c]=u)}return o},t.prototype._splitIndividualUi=function(t,e){var n={};for(var i in t)if(i)for(var o=0,r=e[i];o<r.length;o++){var s=r[o];n[s]||(n[s]={}),n[s][i]=t[i]}return n},t.prototype._splitInteraction=function(t){var e={};if(t){var n=this._splitEventStore(t.affectedEvents,this._getKeysForEventDefs(t.affectedEvents)),i=this._getKeysForEventDefs(t.mutatedEvents),o=this._splitEventStore(t.mutatedEvents,i),r=function(i){e[i]||(e[i]={affectedEvents:n[i]||Vi,mutatedEvents:o[i]||Vi,isEvent:t.isEvent})};for(var s in n)r(s);for(var s in o)r(s)}return e},t}();function Li(t,e,n){var o=[];t&&o.push(t),e&&o.push(e);var r={"":Ye(o)};return n&&(0,i.Cl)(r,n),r}function Bi(t,e,n,i){return{dow:t.getUTCDay(),isDisabled:Boolean(i&&!bn(i.activeRange,t)),isOther:Boolean(i&&!bn(i.currentRange,t)),isToday:Boolean(e&&bn(e,t)),isPast:Boolean(n?t<n:!!e&&t<e.start),isFuture:Boolean(n?t>n:!!e&&t>=e.end)}}function Fi(t,e){var n=["fc-day","fc-day-"+X[t.dow]];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}var zi=Ee({year:"numeric",month:"long",day:"numeric"}),Hi=Ee({week:"long"});function Wi(t,e,n,o){void 0===n&&(n="day"),void 0===o&&(o=!0);var r=t.dateEnv,s=t.options,a=t.calendarApi,l=r.format(e,"week"===n?Hi:zi);if(s.navLinks){var c=r.toDate(e),u=function(t){var i="day"===n?s.navLinkDayClick:"week"===n?s.navLinkWeekClick:null;"function"===typeof i?i.call(a,r.toDate(e),t):("string"===typeof i&&(n=i),a.zoomTo(e,n))};return(0,i.Cl)({title:q(s.navLinkHint,[l,c],l),"data-navlink":""},o?R(u):{onClick:u})}return{"aria-label":l}}var ji,$i=null;function Ui(){return null===$i&&($i=qi()),$i}function qi(){var t=document.createElement("div");w(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);var e=t.firstChild,n=e.getBoundingClientRect().left>t.getBoundingClientRect().left;return p(t),n}function Gi(){return ji||(ji=Ki()),ji}function Ki(){var t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);var e=Yi(t);return document.body.removeChild(t),e}function Yi(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function Xi(t,e){void 0===e&&(e=!1);var n=window.getComputedStyle(t),i=parseInt(n.borderLeftWidth,10)||0,o=parseInt(n.borderRightWidth,10)||0,r=parseInt(n.borderTopWidth,10)||0,s=parseInt(n.borderBottomWidth,10)||0,a=Yi(t),l=a.y-i-o,c=a.x-r-s,u={borderLeft:i,borderRight:o,borderTop:r,borderBottom:s,scrollbarBottom:c,scrollbarLeft:0,scrollbarRight:0};return Ui()&&"rtl"===n.direction?u.scrollbarLeft=l:u.scrollbarRight=l,e&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function Ji(t,e,n){void 0===e&&(e=!1);var i=n?t.getBoundingClientRect():Zi(t),o=Xi(t,e),r={left:i.left+o.borderLeft+o.scrollbarLeft,right:i.right-o.borderRight-o.scrollbarRight,top:i.top+o.borderTop,bottom:i.bottom-o.borderBottom-o.scrollbarBottom};return e&&(r.left+=o.paddingLeft,r.right-=o.paddingRight,r.top+=o.paddingTop,r.bottom-=o.paddingBottom),r}function Zi(t){var e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset}}function Qi(t){for(var e=to(t),n=t.getBoundingClientRect(),i=0,o=e;i<o.length;i++){var r=o[i],s=Pi(n,r.getBoundingClientRect());if(!s)return null;n=s}return n}function to(t){var e=[];while(t instanceof HTMLElement){var n=window.getComputedStyle(t);if("fixed"===n.position)break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}function eo(t,e,n){var i=!1,o=function(){i||(i=!0,e.apply(this,arguments))},r=function(){i||(i=!0,n&&n.apply(this,arguments))},s=t(o,r);s&&"function"===typeof s.then&&s.then(o,r)}var no=function(){function t(){this.handlers={},this.thisContext=null}return t.prototype.setThisContext=function(t){this.thisContext=t},t.prototype.setOptions=function(t){this.options=t},t.prototype.on=function(t,e){io(this.handlers,t,e)},t.prototype.off=function(t,e){oo(this.handlers,t,e)},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=this.handlers[t]||[],o=this.options&&this.options[t],r=[].concat(o||[],i),s=0,a=r;s<a.length;s++){var l=a[s];l.apply(this.thisContext,e)}},t.prototype.hasHandlers=function(t){return Boolean(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])},t}();function io(t,e,n){(t[e]||(t[e]=[])).push(n)}function oo(t,e,n){n?t[e]&&(t[e]=t[e].filter(function(t){return t!==n})):delete t[e]}var ro=function(){function t(t,e,n,i){this.els=e;var o=this.originClientRect=t.getBoundingClientRect();n&&this.buildElHorizontals(o.left),i&&this.buildElVerticals(o.top)}return t.prototype.buildElHorizontals=function(t){for(var e=[],n=[],i=0,o=this.els;i<o.length;i++){var r=o[i],s=r.getBoundingClientRect();e.push(s.left-t),n.push(s.right-t)}this.lefts=e,this.rights=n},t.prototype.buildElVerticals=function(t){for(var e=[],n=[],i=0,o=this.els;i<o.length;i++){var r=o[i],s=r.getBoundingClientRect();e.push(s.top-t),n.push(s.bottom-t)}this.tops=e,this.bottoms=n},t.prototype.leftToIndex=function(t){var e,n=this,i=n.lefts,o=n.rights,r=i.length;for(e=0;e<r;e+=1)if(t>=i[e]&&t<o[e])return e},t.prototype.topToIndex=function(t){var e,n=this,i=n.tops,o=n.bottoms,r=i.length;for(e=0;e<r;e+=1)if(t>=i[e]&&t<o[e])return e},t.prototype.getWidth=function(t){return this.rights[t]-this.lefts[t]},t.prototype.getHeight=function(t){return this.bottoms[t]-this.tops[t]},t}(),so=function(){function t(){}return t.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},t.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},t.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},t.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},t.prototype.canScrollUp=function(){return this.getScrollTop()>0},t.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},t.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},t.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},t}(),ao=function(t){function e(e){var n=t.call(this)||this;return n.el=e,n}return(0,i.C6)(e,t),e.prototype.getScrollTop=function(){return this.el.scrollTop},e.prototype.getScrollLeft=function(){return this.el.scrollLeft},e.prototype.setScrollTop=function(t){this.el.scrollTop=t},e.prototype.setScrollLeft=function(t){this.el.scrollLeft=t},e.prototype.getScrollWidth=function(){return this.el.scrollWidth},e.prototype.getScrollHeight=function(){return this.el.scrollHeight},e.prototype.getClientHeight=function(){return this.el.clientHeight},e.prototype.getClientWidth=function(){return this.el.clientWidth},e}(so),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.getScrollTop=function(){return window.pageYOffset},e.prototype.getScrollLeft=function(){return window.pageXOffset},e.prototype.setScrollTop=function(t){window.scroll(window.pageXOffset,t)},e.prototype.setScrollLeft=function(t){window.scroll(t,window.pageYOffset)},e.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},e.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},e.prototype.getClientHeight=function(){return document.documentElement.clientHeight},e.prototype.getClientWidth=function(){return document.documentElement.clientWidth},e}(so),co=function(){function t(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}return t.prototype.setIconOverride=function(t){var e,n;if("object"===typeof t&&t){for(n in e=(0,i.Cl)({},this.iconClasses),t)e[n]=this.applyIconOverridePrefix(t[n]);this.iconClasses=e}else!1===t&&(this.iconClasses={})},t.prototype.applyIconOverridePrefix=function(t){var e=this.iconOverridePrefix;return e&&0!==t.indexOf(e)&&(t=e+t),t},t.prototype.getClass=function(t){return this.classes[t]||""},t.prototype.getIconClass=function(t,e){var n;return n=e&&this.rtlIconClasses&&this.rtlIconClasses[t]||this.iconClasses[t],n?this.baseIconClass+" "+n:""},t.prototype.getCustomButtonIconClass=function(t){var e;return this.iconOverrideCustomButtonOption&&(e=t[this.iconOverrideCustomButtonOption],e)?this.baseIconClass+" "+this.applyIconOverridePrefix(e):""},t}();co.prototype.classes={},co.prototype.iconClasses={},co.prototype.baseIconClass="",co.prototype.iconOverridePrefix="";var uo=function(){function t(t,e,n,o){var r=this;this.execFunc=t,this.emitter=e,this.scrollTime=n,this.scrollTimeReset=o,this.handleScrollRequest=function(t){r.queuedRequest=(0,i.Cl)({},r.queuedRequest||{},t),r.drain()},e.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}return t.prototype.detach=function(){this.emitter.off("_scrollRequest",this.handleScrollRequest)},t.prototype.update=function(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()},t.prototype.fireInitialScroll=function(){this.handleScrollRequest({time:this.scrollTime})},t.prototype.drain=function(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)},t}(),ho=c({});function fo(t,e,n,i,o,r,s,a,l,c,u,d,h){return{dateEnv:o,options:n,pluginHooks:s,emitter:c,dispatch:a,getCurrentData:l,calendarApi:u,viewSpec:t,viewApi:e,dateProfileGenerator:i,theme:r,isRtl:"rtl"===n.direction,addResizeHandler:function(t){c.on("_resize",t)},removeResizeHandler:function(t){c.off("_resize",t)},createScrollResponder:function(t){return new uo(t,c,Bt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:d,unregisterInteractiveComponent:h}}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.debug&&console.log(Pt(t,this.props),Pt(e,this.state)),!It(this.props,t,this.propEquality)||!It(this.state,e,this.stateEquality)},e.prototype.safeSetState=function(t){It(this.state,(0,i.Cl)((0,i.Cl)({},this.state),t),this.stateEquality)||this.setState(t)},e.addPropsEquality=mo,e.addStateEquality=bo,e.contextType=ho,e}(o);po.prototype.propEquality={},po.prototype.stateEquality={};var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.contextType=ho,e}(po);function mo(t){var e=Object.create(this.prototype.propEquality);(0,i.Cl)(e,t),this.prototype.propEquality=e}function bo(t){var e=Object.create(this.prototype.stateEquality);(0,i.Cl)(e,t),this.prototype.stateEquality=e}function vo(t,e){"function"===typeof t?t(e):t&&(t.current=e)}var wo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uid=D(),e}return(0,i.C6)(e,t),e.prototype.prepareHits=function(){},e.prototype.queryHit=function(t,e,n,i){return null},e.prototype.isValidSegDownEl=function(t){return!this.props.eventDrag&&!this.props.eventResize&&!g(t,".fc-event-mirror")},e.prototype.isValidDateDownEl=function(t){return!g(t,".fc-event:not(.fc-bg-event)")&&!g(t,".fc-more-link")&&!g(t,"a[data-navlink]")&&!g(t,".fc-popover")},e}(go);function _o(t){return{id:D(),deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,contentTypeHandlers:t.contentTypeHandlers||{},listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function yo(t,e){var n={},i={reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,contentTypeHandlers:{},listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function o(t){for(var e=0,r=t;e<r.length;e++){var s=r[e];n[s.id]||(n[s.id]=!0,o(s.deps),i=Co(i,s))}}return t&&o(t),o(e),i}function ko(){var t,e=[],n=[];return function(i,o){return t&&ee(i,e)&&ee(o,n)||(t=yo(i,o)),e=i,n=o,t}}function Co(t,e){return{reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:(0,i.Cl)((0,i.Cl)({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:(0,i.Cl)((0,i.Cl)({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:(0,i.Cl)((0,i.Cl)({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:(0,i.Cl)((0,i.Cl)({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:(0,i.Cl)((0,i.Cl)({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,contentTypeHandlers:(0,i.Cl)((0,i.Cl)({},t.contentTypeHandlers),e.contentTypeHandlers),listenerRefiners:(0,i.Cl)((0,i.Cl)({},t.listenerRefiners),e.listenerRefiners),optionRefiners:(0,i.Cl)((0,i.Cl)({},t.optionRefiners),e.optionRefiners),propSetHandlers:(0,i.Cl)((0,i.Cl)({},t.propSetHandlers),e.propSetHandlers)}}var xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e}(co);function Eo(t,e){var n,i={};for(n in t)So(n,i,t,e);for(n in e)So(n,i,t,e);return i}function So(t,e,n,i){if(e[t])return e[t];var o=To(t,e,n,i);return o&&(e[t]=o),o}function To(t,e,n,o){var r=n[t],s=o[t],a=function(t){return r&&null!==r[t]?r[t]:s&&null!==s[t]?s[t]:null},l=a("component"),c=a("superType"),u=null;if(c){if(c===t)throw new Error("Can't have a custom view type that references itself");u=So(c,e,n,o)}return!l&&u&&(l=u.component),l?{type:t,component:l,defaults:(0,i.Cl)((0,i.Cl)({},u?u.defaults:{}),r?r.rawOptions:{}),overrides:(0,i.Cl)((0,i.Cl)({},u?u.overrides:{}),s?s.rawOptions:{})}:null}xo.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},xo.prototype.baseIconClass="fc-icon",xo.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},xo.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},xo.prototype.iconOverrideOption="buttonIcons",xo.prototype.iconOverrideCustomButtonOption="icon",xo.prototype.iconOverridePrefix="fc-icon-";var Ao=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootElRef=a(),e.handleRootEl=function(t){vo(e.rootElRef,t),e.props.elRef&&vo(e.props.elRef,t)},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.hookProps;return r(Oo,{hookProps:n,didMount:e.didMount,willUnmount:e.willUnmount,elRef:this.handleRootEl},function(i){return r(Io,{hookProps:n,content:e.content,defaultContent:e.defaultContent,backupElRef:t.rootElRef},function(t,o){return e.children(i,Do(e.classNames,n),t,o)})})},e}(go),Po=c(0);function Io(t){return r(Po.Consumer,null,function(e){return r(Ro,(0,i.Cl)({renderId:e},t))})}var Ro=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.innerElRef=a(),e}return(0,i.C6)(e,t),e.prototype.render=function(){return this.props.children(this.innerElRef,this.renderInnerContent())},e.prototype.componentDidMount=function(){this.updateCustomContent()},e.prototype.componentDidUpdate=function(){this.updateCustomContent()},e.prototype.componentWillUnmount=function(){this.customContentInfo&&this.customContentInfo.destroy&&this.customContentInfo.destroy()},e.prototype.renderInnerContent=function(){var t=this.customContentInfo,e=this.getInnerContent(),n=this.getContentMeta(e);return t&&t.contentKey===n.contentKey?t&&(t.contentVal=e[n.contentKey]):(t&&(t.destroy&&t.destroy(),t=this.customContentInfo=null),n.contentKey&&(t=this.customContentInfo=(0,i.Cl)({contentKey:n.contentKey,contentVal:e[n.contentKey]},n.buildLifecycleFuncs()))),t?[]:e},e.prototype.getInnerContent=function(){var t=this.props,e=Vo(t.content,t.hookProps);return void 0===e&&(e=Vo(t.defaultContent,t.hookProps)),null==e?null:e},e.prototype.getContentMeta=function(t){var e=this.context.pluginHooks.contentTypeHandlers,n="",i=null;if(t)for(var o in e)if(void 0!==t[o]){n=o,i=e[o];break}return{contentKey:n,buildLifecycleFuncs:i}},e.prototype.updateCustomContent=function(){this.customContentInfo&&this.customContentInfo.render(this.innerElRef.current||this.props.backupElRef.current,this.customContentInfo.contentVal)},e}(go),Oo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleRootEl=function(t){e.rootEl=t,e.props.elRef&&vo(e.props.elRef,t)},e}return(0,i.C6)(e,t),e.prototype.render=function(){return this.props.children(this.handleRootEl)},e.prototype.componentDidMount=function(){var t=this.props.didMount;t&&t((0,i.Cl)((0,i.Cl)({},this.props.hookProps),{el:this.rootEl}))},e.prototype.componentWillUnmount=function(){var t=this.props.willUnmount;t&&t((0,i.Cl)((0,i.Cl)({},this.props.hookProps),{el:this.rootEl}))},e}(go);function Mo(){var t,e,n=[];return function(i,o){return e&&At(e,o)&&i===t||(t=i,e=o,n=Do(i,o)),n}}function Do(t,e){return"function"===typeof t&&(t=t(e)),Ue(t)}function Vo(t,e){return"function"===typeof t?t(e,r):t}var No=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalizeClassNames=Mo(),e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,i=n.options,o={view:n.viewApi},s=this.normalizeClassNames(i.viewClassNames,o);return r(Oo,{hookProps:o,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount,elRef:e.elRef},function(t){return e.children(t,["fc-"+e.viewSpec.type+"-view","fc-view"].concat(s))})},e}(go);function Lo(t){return Et(t,Bo)}function Bo(t){var e="function"===typeof t?{component:t}:t,n=e.component;return e.content&&(n=Fo(e)),{superType:e.type,component:n,rawOptions:e}}function Fo(t){return function(e){return r(ho.Consumer,null,function(n){return r(No,{viewSpec:n.viewSpec},function(o,s){var a=(0,i.Cl)((0,i.Cl)({},e),{nextDayThreshold:n.options.nextDayThreshold});return r(Ao,{hookProps:a,classNames:t.classNames,content:t.content,didMount:t.didMount,willUnmount:t.willUnmount,elRef:o},function(t,e,n,i){return r("div",{className:s.concat(e).join(" "),ref:t},i)})})})}}function zo(t,e,n,i){var o=Lo(t),r=Lo(e.views),s=Eo(o,r);return Et(s,function(t){return Ho(t,r,e,n,i)})}function Ho(t,e,n,o,r){var s=t.overrides.duration||t.defaults.duration||o.duration||n.duration,a=null,l="",c="",u={};if(s&&(a=jo(s),a)){var d=Xt(a);l=d.unit,1===d.value&&(c=l,u=e[l]?e[l].rawOptions:{})}var h=function(e){var n=e.buttonText||{},i=t.defaults.buttonTextKey;return null!=i&&null!=n[i]?n[i]:null!=n[t.type]?n[t.type]:null!=n[c]?n[c]:null},f=function(e){var n=e.buttonHints||{},i=t.defaults.buttonTextKey;return null!=i&&null!=n[i]?n[i]:null!=n[t.type]?n[t.type]:null!=n[c]?n[c]:null};return{type:t.type,component:t.component,duration:a,durationUnit:l,singleUnit:c,optionDefaults:t.defaults,optionOverrides:(0,i.Cl)((0,i.Cl)({},u),t.overrides),buttonTextOverride:h(o)||h(n)||t.overrides.buttonText,buttonTextDefault:h(r)||t.defaults.buttonText||h(Te)||t.type,buttonTitleOverride:f(o)||f(n)||t.overrides.buttonHint,buttonTitleDefault:f(r)||t.defaults.buttonHint||f(Te)}}var Wo={};function jo(t){var e=JSON.stringify(t),n=Wo[e];return void 0===n&&(n=Bt(t),Wo[e]=n),n}var $o=function(){function t(t){this.props=t,this.nowDate=oi(t.nowInput,t.dateEnv),this.initHiddenDays()}return t.prototype.buildPrev=function(t,e,n){var i=this.props.dateEnv,o=i.subtract(i.startOf(e,t.currentRangeUnit),t.dateIncrement);return this.build(o,-1,n)},t.prototype.buildNext=function(t,e,n){var i=this.props.dateEnv,o=i.add(i.startOf(e,t.currentRangeUnit),t.dateIncrement);return this.build(o,1,n)},t.prototype.build=function(t,e,n){void 0===n&&(n=!0);var i,o,r,s,a,l,c=this.props;return i=this.buildValidRange(),i=this.trimHiddenDays(i),n&&(t=vn(t,i)),o=this.buildCurrentRangeInfo(t,e),r=/^(year|month|week|day)$/.test(o.unit),s=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,r),s=this.trimHiddenDays(s),a=s,c.showNonCurrentDates||(a=fn(a,o.range)),a=this.adjustActiveRange(a),a=fn(a,i),l=gn(o.range,i),{validRange:i,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:r,activeRange:a,renderRange:s,slotMinTime:c.slotMinTime,slotMaxTime:c.slotMaxTime,isValid:l,dateIncrement:this.buildDateIncrement(o.duration)}},t.prototype.buildValidRange=function(){var t=this.props.validRangeInput,e="function"===typeof t?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(e)||{start:null,end:null}},t.prototype.buildCurrentRangeInfo=function(t,e){var n,i=this.props,o=null,r=null,s=null;return i.duration?(o=i.duration,r=i.durationUnit,s=this.buildRangeFromDuration(t,e,o,r)):(n=this.props.dayCount)?(r="day",s=this.buildRangeFromDayCount(t,e,n)):(s=this.buildCustomVisibleRange(t))?r=i.dateEnv.greatestWholeUnit(s.start,s.end).unit:(o=this.getFallbackDuration(),r=Xt(o).unit,s=this.buildRangeFromDuration(t,e,o,r)),{duration:o,unit:r,range:s}},t.prototype.getFallbackDuration=function(){return Bt({day:1})},t.prototype.adjustActiveRange=function(t){var e=this.props,n=e.dateEnv,i=e.usesMinMaxTime,o=e.slotMinTime,r=e.slotMaxTime,s=t.start,a=t.end;return i&&(Gt(o)<0&&(s=lt(s),s=n.add(s,o)),Gt(r)>1&&(a=lt(a),a=Z(a,-1),a=n.add(a,r))),{start:s,end:a}},t.prototype.buildRangeFromDuration=function(t,e,n,i){var o,r,s,a=this.props,l=a.dateEnv,c=a.dateAlignment;if(!c){var u=this.props.dateIncrement;c=u&&Kt(u)<Kt(n)?Xt(u).unit:i}function d(){o=l.startOf(t,c),r=l.add(o,n),s={start:o,end:r}}return Gt(n)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,e),o=lt(o)),d(),this.trimHiddenDays(s)||(t=this.skipHiddenDays(t,e),d()),s},t.prototype.buildRangeFromDayCount=function(t,e,n){var i,o=this.props,r=o.dateEnv,s=o.dateAlignment,a=0,l=t;s&&(l=r.startOf(l,s)),l=lt(l),l=this.skipHiddenDays(l,e),i=l;do{i=Z(i,1),this.isHiddenDay(i)||(a+=1)}while(a<n);return{start:l,end:i}},t.prototype.buildCustomVisibleRange=function(t){var e=this.props,n=e.visibleRangeInput,i="function"===typeof n?n.call(e.calendarApi,e.dateEnv.toDate(t)):n,o=this.refineRange(i);return!o||null!=o.start&&null!=o.end?o:null},t.prototype.buildRenderRange=function(t,e,n){return t},t.prototype.buildDateIncrement=function(t){var e,n=this.props.dateIncrement;return n||((e=this.props.dateAlignment)?Bt(1,e):t||Bt({days:1}))},t.prototype.refineRange=function(t){if(t){var e=un(t,this.props.dateEnv);return e&&(e=ln(e)),e}return null},t.prototype.initHiddenDays=function(){var t,e=this.props.hiddenDays||[],n=[],i=0;for(!1===this.props.weekends&&e.push(0,6),t=0;t<7;t+=1)(n[t]=-1!==e.indexOf(t))||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n},t.prototype.trimHiddenDays=function(t){var e=t.start,n=t.end;return e&&(e=this.skipHiddenDays(e)),n&&(n=this.skipHiddenDays(n,-1,!0)),null==e||null==n||e<n?{start:e,end:n}:null},t.prototype.isHiddenDay=function(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]},t.prototype.skipHiddenDays=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);while(this.isHiddenDayHash[(t.getUTCDay()+(n?e:0)+7)%7])t=Z(t,e);return t},t}();function Uo(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function qo(t,e){var n;switch(e.type){case"SET_OPTION":return(0,i.Cl)((0,i.Cl)({},t),(n={},n[e.optionName]=e.rawOptionValue,n));default:return t}}function Go(t,e,n,i){var o;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||n);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(o=i.buildPrev(t,n),o.isValid)return o;break;case"NEXT":if(o=i.buildNext(t,n),o.isValid)return o;break}return t}function Ko(t,e,n){var i=e?e.activeRange:null;return Zo({},sr(t,n),i,n)}function Yo(t,e,n,i){var o=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return Zo(t,e.sources,o,i);case"REMOVE_EVENT_SOURCE":return Qo(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?tr(t,o,i):t;case"FETCH_EVENT_SOURCES":return nr(t,e.sourceIds?St(e.sourceIds):rr(t,i),o,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return or(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function Xo(t,e,n){var i=e?e.activeRange:null;return nr(t,rr(t,n),i,!0,n)}function Jo(t){for(var e in t)if(t[e].isFetching)return!0;return!1}function Zo(t,e,n,o){for(var r={},s=0,a=e;s<a.length;s++){var l=a[s];r[l.sourceId]=l}return n&&(r=tr(r,n,o)),(0,i.Cl)((0,i.Cl)({},t),r)}function Qo(t,e){return xt(t,function(t){return t.sourceId!==e})}function tr(t,e,n){return nr(t,xt(t,function(t){return er(t,e,n)}),e,!1,n)}function er(t,e,n){return ar(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function nr(t,e,n,i,o){var r={};for(var s in t){var a=t[s];e[s]?r[s]=ir(a,n,i,o):r[s]=a}return r}function ir(t,e,n,o){var r=o.options,s=o.calendarApi,a=o.pluginHooks.eventSourceDefs[t.sourceDefId],l=D();return a.fetch({eventSource:t,range:e,isRefetch:n,context:o},function(n){var i=n.rawEvents;r.eventSourceSuccess&&(i=r.eventSourceSuccess.call(s,i,n.xhr)||i),t.success&&(i=t.success.call(s,i,n.xhr)||i),o.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:l,fetchRange:e,rawEvents:i})},function(n){console.warn(n.message,n),r.eventSourceFailure&&r.eventSourceFailure.call(s,n),t.failure&&t.failure(n),o.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:l,fetchRange:e,error:n})}),(0,i.Cl)((0,i.Cl)({},t),{isFetching:!0,latestFetchId:l})}function or(t,e,n,o){var r,s=t[e];return s&&n===s.latestFetchId?(0,i.Cl)((0,i.Cl)({},t),(r={},r[e]=(0,i.Cl)((0,i.Cl)({},s),{isFetching:!1,fetchRange:o}),r)):t}function rr(t,e){return xt(t,function(t){return ar(t,e)})}function sr(t,e){var n=ti(e),i=[].concat(t.eventSources||[]),o=[];t.initialEvents&&i.unshift(t.initialEvents),t.events&&i.unshift(t.events);for(var r=0,s=i;r<s.length;r++){var a=s[r],l=Qn(a,e,n);l&&o.push(l)}return o}function ar(t,e){var n=e.pluginHooks.eventSourceDefs;return!n[t.sourceDefId].ignoreRange}function lr(t,e,n,i,o){switch(e.type){case"RECEIVE_EVENTS":return cr(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,o);case"ADD_EVENTS":return hr(t,e.eventStore,i?i.activeRange:null,o);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return He(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?Dt(t,i.activeRange,o):t;case"REMOVE_EVENTS":return je(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return pr(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return We(t,function(t){return!t.sourceId});case"REMOVE_ALL_EVENTS":return ze();default:return t}}function cr(t,e,n,i,o,r){if(e&&n===e.latestFetchId){var s=Ne(ur(o,e,r),e,r);return i&&(s=Dt(s,i,r)),He(pr(t,e.sourceId),s)}return t}function ur(t,e,n){var i=n.options.eventDataTransform,o=e?e.eventDataTransform:null;return o&&(t=dr(t,o)),i&&(t=dr(t,i)),t}function dr(t,e){var n;if(e){n=[];for(var i=0,o=t;i<o.length;i++){var r=o[i],s=e(r);s?n.push(s):null==s&&n.push(r)}}else n=t;return n}function hr(t,e,n,i){return n&&(e=Dt(e,n,i)),He(t,e)}function fr(t,e,n){var o=t.defs,r=Et(t.instances,function(t){var r=o[t.defId];return r.allDay||r.recurringDef?t:(0,i.Cl)((0,i.Cl)({},t),{range:{start:n.createMarker(e.toDate(t.range.start,t.forcedStartTzo)),end:n.createMarker(e.toDate(t.range.end,t.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:t.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:t.forcedEndTzo})});return{defs:o,instances:r}}function pr(t,e){return We(t,function(t){return t.sourceId!==e})}function gr(t,e){return{defs:t.defs,instances:xt(t.instances,function(t){return!e[t.instanceId]})}}function mr(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function br(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function vr(t,e){var n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function wr(t,e){var n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function _r(t,e,n,i,o){var r=t.headerToolbar?yr(t.headerToolbar,t,e,n,i,o):null,s=t.footerToolbar?yr(t.footerToolbar,t,e,n,i,o):null;return{header:r,footer:s}}function yr(t,e,n,i,o,r){var s={},a=[],l=!1;for(var c in t){var u=t[c],d=kr(u,e,n,i,o,r);s[c]=d.widgets,a.push.apply(a,d.viewsWithButtons),l=l||d.hasTitle}return{sectionWidgets:s,viewsWithButtons:a,hasTitle:l}}function kr(t,e,n,i,o,r){var s="rtl"===e.direction,a=e.customButtons||{},l=n.buttonText||{},c=e.buttonText||{},u=n.buttonHints||{},d=e.buttonHints||{},h=t?t.split(" "):[],f=[],p=!1,g=h.map(function(t){return t.split(",").map(function(t){if("title"===t)return p=!0,{buttonName:t};var n,h,g,m,b,v;if(n=a[t])g=function(t){n.click&&n.click.call(t.target,t,t.target)},(m=i.getCustomButtonIconClass(n))||(m=i.getIconClass(t,s))||(b=n.text),v=n.hint||n.text;else if(h=o[t]){f.push(t),g=function(){r.changeView(t)},(b=h.buttonTextOverride)||(m=i.getIconClass(t,s))||(b=h.buttonTextDefault);var w=h.buttonTextOverride||h.buttonTextDefault;v=q(h.buttonTitleOverride||h.buttonTitleDefault||e.viewHint,[w,t],w)}else if(r[t])if(g=function(){r[t]()},(b=l[t])||(m=i.getIconClass(t,s))||(b=c[t]),"prevYear"===t||"nextYear"===t){var _="prevYear"===t?"prev":"next";v=q(u[_]||d[_],[c.year||"year","year"],c[t])}else v=function(e){return q(u[t]||d[t],[c[e]||e,e],c[t])};return{buttonName:t,buttonClick:g,buttonIcon:m,buttonText:b,buttonHint:v}})});return{widgets:g,viewsWithButtons:f,hasTitle:p}}var Cr={ignoreRange:!0,parseMeta:function(t){return Array.isArray(t.events)?t.events:null},fetch:function(t,e){e({rawEvents:t.eventSource.meta})}},xr=_o({eventSourceDefs:[Cr]}),Er={parseMeta:function(t){return"function"===typeof t.events?t.events:null},fetch:function(t,e,n){var i=t.context.dateEnv,o=t.eventSource.meta;eo(o.bind(null,Hn(t.range,i)),function(t){e({rawEvents:t})},n)}},Sr=_o({eventSourceDefs:[Er]});function Tr(t,e,n,i,o){t=t.toUpperCase();var r=null;"GET"===t?e=Ar(e,n):r=Pr(n);var s=new XMLHttpRequest;s.open(t,e,!0),"GET"!==t&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onload=function(){if(s.status>=200&&s.status<400){var t=!1,e=void 0;try{e=JSON.parse(s.responseText),t=!0}catch(n){}t?i(e,s):o("Failure parsing JSON",s)}else o("Request failed",s)},s.onerror=function(){o("Request failed",s)},s.send(r)}function Ar(t,e){return t+(-1===t.indexOf("?")?"?":"&")+Pr(e)}function Pr(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}var Ir={method:String,extraParams:Ve,startParam:String,endParam:String,timeZoneParam:String},Rr={parseMeta:function(t){return!t.url||"json"!==t.format&&t.format?null:{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}},fetch:function(t,e,n){var i=t.eventSource.meta,o=Mr(i,t.range,t.context);Tr(i.method,i.url,o,function(t,n){e({rawEvents:t,xhr:n})},function(t,e){n({message:t,xhr:e})})}},Or=_o({eventSourceRefiners:Ir,eventSourceDefs:[Rr]});function Mr(t,e,n){var o,r,s,a,l=n.dateEnv,c=n.options,u={};return o=t.startParam,null==o&&(o=c.startParam),r=t.endParam,null==r&&(r=c.endParam),s=t.timeZoneParam,null==s&&(s=c.timeZoneParam),a="function"===typeof t.extraParams?t.extraParams():t.extraParams||{},(0,i.Cl)(u,a),u[o]=l.formatIso(e.start),u[r]=l.formatIso(e.end),"local"!==l.timeZone&&(u[s]=l.timeZone),u}var Dr={daysOfWeek:Ve,startTime:Bt,endTime:Bt,duration:Bt,startRecur:Ve,endRecur:Ve},Vr={parse:function(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){var n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null},i=void 0;return t.duration&&(i=t.duration),!i&&t.startTime&&t.endTime&&(i=jt(t.endTime,t.startTime)),{allDayGuess:Boolean(!t.startTime&&!t.endTime),duration:i,typeData:n}}return null},expand:function(t,e,n){var i=fn(e,{start:t.startRecur,end:t.endRecur});return i?Lr(t.daysOfWeek,t.startTime,i,n):[]}},Nr=_o({recurringTypes:[Vr],eventRefiners:Dr});function Lr(t,e,n,i){var o=t?St(t):null,r=lt(n.start),s=n.end,a=[];while(r<s){var l=void 0;o&&!o[r.getUTCDay()]||(l=e?i.add(r,e):r,a.push(l)),r=Z(r,1)}return a}var Br=_o({optionChangeHandlers:{events:function(t,e){Fr([t],e)},eventSources:Fr}});function Fr(t,e){for(var n=Tt(e.getCurrentData().eventSources),i=[],o=0,r=t;o<r.length;o++){for(var s=r[o],a=!1,l=0;l<n.length;l+=1)if(n[l]._raw===s){n.splice(l,1),a=!0;break}a||i.push(s)}for(var c=0,u=n;c<u.length;c++){var d=u[c];e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:d.sourceId})}for(var h=0,f=i;h<f.length;h++){var p=f[h];e.calendarApi.addEventSource(p)}}function zr(t,e){e.emitter.trigger("datesSet",(0,i.Cl)((0,i.Cl)({},Hn(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function Hr(t,e){var n=e.emitter;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",li(t,e))}var Wr=[xr,Sr,Or,Nr,Br,_o({isLoadingFuncs:[function(t){return Jo(t.eventSources)}],contentTypeHandlers:{html:jr,domNodes:$r},propSetHandlers:{dateProfile:zr,eventStore:Hr}})];function jr(){var t=null,e="";function n(n,i){n===t&&i===e||(n.innerHTML=i),t=n,e=i}function i(){t.innerHTML="",t=null,e=""}return{render:n,destroy:i}}function $r(){var t=null,e=[];function n(n,o){var r=Array.prototype.slice.call(o);if(n!==t||!ee(e,r)){for(var s=0,a=r;s<a.length;s++){var l=a[s];n.appendChild(l)}i()}t=n,e=r}function i(){e.forEach(p),e=[],t=null}return{render:n,destroy:i}}var Ur=function(){function t(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}return t.prototype.request=function(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==t?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))},t.prototype.pause=function(t){void 0===t&&(t="");var e=this.pauseDepths;e[t]=(e[t]||0)+1,this.clearTimeout()},t.prototype.resume=function(t,e){void 0===t&&(t="");var n=this.pauseDepths;if(t in n){if(e)delete n[t];else{n[t]-=1;var i=n[t];i<=0&&delete n[t]}this.tryDrain()}},t.prototype.isPaused=function(){return Object.keys(this.pauseDepths).length},t.prototype.tryDrain=function(){if(!this.isRunning&&!this.isPaused()){this.isRunning=!0;while(this.isDirty)this.isDirty=!1,this.drained();this.isRunning=!1}},t.prototype.clear=function(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}},t.prototype.clearTimeout=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},t.prototype.drained=function(){this.drainedOption&&this.drainedOption()},t}(),qr=function(){function t(t,e){this.runTaskOption=t,this.drainedOption=e,this.queue=[],this.delayedRunner=new Ur(this.drain.bind(this))}return t.prototype.request=function(t,e){this.queue.push(t),this.delayedRunner.request(e)},t.prototype.pause=function(t){this.delayedRunner.pause(t)},t.prototype.resume=function(t,e){this.delayedRunner.resume(t,e)},t.prototype.drain=function(){var t=this.queue;while(t.length){var e=[],n=void 0;while(n=t.shift())this.runTask(n),e.push(n);this.drained(e)}},t.prototype.runTask=function(t){this.runTaskOption&&this.runTaskOption(t)},t.prototype.drained=function(t){this.drainedOption&&this.drainedOption(t)},t}();function Gr(t,e,n){var i;return i=/^(year|month)$/.test(t.currentRangeUnit)?t.currentRange:t.activeRange,n.formatRange(i.start,i.end,Ee(e.titleFormat||Kr(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function Kr(t){var e=t.currentRangeUnit;if("year"===e)return{year:"numeric"};if("month"===e)return{year:"numeric",month:"long"};var n=at(t.currentRange.start,t.currentRange.end);return null!==n&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}var Yr=function(){function t(t){var e=this;this.computeOptionsData=ne(this._computeOptionsData),this.computeCurrentViewData=ne(this._computeCurrentViewData),this.organizeRawLocales=ne(wi),this.buildLocale=ne(_i),this.buildPluginHooks=ko(),this.buildDateEnv=ne(Xr),this.buildTheme=ne(Jr),this.parseToolbars=ne(_r),this.buildViewSpecs=ne(zo),this.buildDateProfileGenerator=ie(Zr),this.buildViewApi=ne(Qr),this.buildViewUiProps=ie(ns),this.buildEventUiBySource=ne(ts,At),this.buildEventUiBases=ne(es),this.parseContextBusinessHours=ie(os),this.buildTitle=ne(Gr),this.emitter=new no,this.actionRunner=new qr(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.getCurrentData=function(){return e.data},this.dispatch=function(t){e.actionRunner.request(t)},this.props=t,this.actionRunner.pause();var n={},o=this.computeOptionsData(t.optionOverrides,n,t.calendarApi),r=o.calendarOptions.initialView||o.pluginHooks.initialView,s=this.computeCurrentViewData(r,o,t.optionOverrides,n);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(s.options);var a=ii(o.calendarOptions,o.dateEnv),l=s.dateProfileGenerator.build(a);bn(l.activeRange,a)||(a=l.currentRange.start);for(var c={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},u=0,d=o.pluginHooks.contextInit;u<d.length;u++){var h=d[u];h(c)}for(var f=Ko(o.calendarOptions,l,c),p={dynamicOptionOverrides:n,currentViewType:r,currentDate:a,dateProfile:l,businessHours:this.parseContextBusinessHours(c),eventSources:f,eventUiBases:{},eventStore:ze(),renderableEventStore:ze(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(c).selectionConfig},g=(0,i.Cl)((0,i.Cl)({},c),p),m=0,b=o.pluginHooks.reducers;m<b.length;m++){var v=b[m];(0,i.Cl)(p,v(null,null,g))}is(p,c)&&this.emitter.trigger("loading",!0),this.state=p,this.updateData(),this.actionRunner.resume()}return t.prototype.resetOptions=function(t,e){var n=this.props;n.optionOverrides=e?(0,i.Cl)((0,i.Cl)({},n.optionOverrides),t):t,this.actionRunner.request({type:"NOTHING"})},t.prototype._handleAction=function(t){var e=this,n=e.props,o=e.state,r=e.emitter,s=qo(o.dynamicOptionOverrides,t),a=this.computeOptionsData(n.optionOverrides,s,n.calendarApi),l=Uo(o.currentViewType,t),c=this.computeCurrentViewData(l,a,n.optionOverrides,s);n.calendarApi.currentDataManager=this,r.setThisContext(n.calendarApi),r.setOptions(c.options);var u={dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},d=o.currentDate,h=o.dateProfile;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(h=c.dateProfileGenerator.build(d)),d=ni(d,t),h=Go(h,t,d,c.dateProfileGenerator),"PREV"!==t.type&&"NEXT"!==t.type&&bn(h.currentRange,d)||(d=h.currentRange.start);for(var f=Yo(o.eventSources,t,h,u),p=lr(o.eventStore,t,f,h,u),g=Jo(f),m=g&&!c.options.progressiveEventRendering&&o.renderableEventStore||p,b=this.buildViewUiProps(u),v=b.eventUiSingleBase,w=b.selectionConfig,_=this.buildEventUiBySource(f),y=this.buildEventUiBases(m.defs,v,_),k={dynamicOptionOverrides:s,currentViewType:l,currentDate:d,dateProfile:h,eventSources:f,eventStore:p,renderableEventStore:m,selectionConfig:w,eventUiBases:y,businessHours:this.parseContextBusinessHours(u),dateSelection:mr(o.dateSelection,t),eventSelection:br(o.eventSelection,t),eventDrag:vr(o.eventDrag,t),eventResize:wr(o.eventResize,t)},C=(0,i.Cl)((0,i.Cl)({},u),k),x=0,E=a.pluginHooks.reducers;x<E.length;x++){var S=E[x];(0,i.Cl)(k,S(o,t,C))}var T=is(o,u),A=is(k,u);!T&&A?r.trigger("loading",!0):T&&!A&&r.trigger("loading",!1),this.state=k,n.onAction&&n.onAction(t)},t.prototype.updateData=function(){var t=this,e=t.props,n=t.state,o=this.data,r=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(n.currentViewType,r,e.optionOverrides,n.dynamicOptionOverrides),a=this.data=(0,i.Cl)((0,i.Cl)((0,i.Cl)({viewTitle:this.buildTitle(n.dateProfile,s.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),s),n),l=r.pluginHooks.optionChangeHandlers,c=o&&o.calendarOptions,u=r.calendarOptions;if(c&&c!==u)for(var d in c.timeZone!==u.timeZone&&(n.eventSources=a.eventSources=Xo(a.eventSources,n.dateProfile,a),n.eventStore=a.eventStore=fr(a.eventStore,o.dateEnv,a.dateEnv)),l)c[d]!==u[d]&&l[d](u[d],a);e.onData&&e.onData(a)},t.prototype._computeOptionsData=function(t,e,n){var i=this.processRawCalendarOptions(t,e),o=i.refinedOptions,r=i.pluginHooks,s=i.localeDefaults,a=i.availableLocaleData,l=i.extra;rs(l);var c=this.buildDateEnv(o.timeZone,o.locale,o.weekNumberCalculation,o.firstDay,o.weekText,r,a,o.defaultRangeSeparator),u=this.buildViewSpecs(r.views,t,e,s),d=this.buildTheme(o,r),h=this.parseToolbars(o,t,d,u,n);return{calendarOptions:o,pluginHooks:r,dateEnv:c,viewSpecs:u,theme:d,toolbarConfig:h,localeDefaults:s,availableRawLocales:a.map}},t.prototype.processRawCalendarOptions=function(t,e){var n=Me([Te,t,e]),o=n.locales,r=n.locale,s=this.organizeRawLocales(o),a=s.map,l=this.buildLocale(r||s.defaultCode,a).options,c=this.buildPluginHooks(t.plugins||[],Wr),u=this.currentCalendarOptionsRefiners=(0,i.Cl)((0,i.Cl)((0,i.Cl)((0,i.Cl)((0,i.Cl)({},Se),Ae),Pe),c.listenerRefiners),c.optionRefiners),d={},h=Me([Te,l,t,e]),f={},p=this.currentCalendarOptionsInput,g=this.currentCalendarOptionsRefined,m=!1;for(var b in h)"plugins"!==b&&(h[b]===p[b]||Ie[b]&&b in p&&Ie[b](p[b],h[b])?f[b]=g[b]:u[b]?(f[b]=u[b](h[b]),m=!0):d[b]=p[b]);return m&&(this.currentCalendarOptionsInput=h,this.currentCalendarOptionsRefined=f),{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:s,localeDefaults:l,extra:d}},t.prototype._computeCurrentViewData=function(t,e,n,i){var o=e.viewSpecs[t];if(!o)throw new Error('viewType "'+t+"\" is not available. Please make sure you've loaded all neccessary plugins");var r=this.processRawViewOptions(o,e.pluginHooks,e.localeDefaults,n,i),s=r.refinedOptions,a=r.extra;rs(a);var l=this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:e.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,showNonCurrentDates:s.showNonCurrentDates,dayCount:s.dayCount,dateAlignment:s.dateAlignment,dateIncrement:s.dateIncrement,hiddenDays:s.hiddenDays,weekends:s.weekends,nowInput:s.now,validRangeInput:s.validRange,visibleRangeInput:s.visibleRange,monthMode:s.monthMode,fixedWeekCount:s.fixedWeekCount}),c=this.buildViewApi(t,this.getCurrentData,e.dateEnv);return{viewSpec:o,options:s,dateProfileGenerator:l,viewApi:c}},t.prototype.processRawViewOptions=function(t,e,n,o,r){var s=Me([Te,t.optionDefaults,n,o,t.optionOverrides,r]),a=(0,i.Cl)((0,i.Cl)((0,i.Cl)((0,i.Cl)((0,i.Cl)((0,i.Cl)({},Se),Ae),Pe),Oe),e.listenerRefiners),e.optionRefiners),l={},c=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,d=!1,h={};for(var f in s)s[f]===c[f]||Ie[f]&&Ie[f](s[f],c[f])?l[f]=u[f]:(s[f]===this.currentCalendarOptionsInput[f]||Ie[f]&&Ie[f](s[f],this.currentCalendarOptionsInput[f])?f in this.currentCalendarOptionsRefined&&(l[f]=this.currentCalendarOptionsRefined[f]):a[f]?l[f]=a[f](s[f]):h[f]=s[f],d=!0);return d&&(this.currentViewOptionsInput=s,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}},t}();function Xr(t,e,n,i,o,r,s,a){var l=_i(e||s.defaultCode,s.map);return new gi({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:r.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:i,weekText:o,cmdFormatter:r.cmdFormatter,defaultSeparator:a})}function Jr(t,e){var n=e.themeClasses[t.themeSystem]||xo;return new n(t)}function Zr(t){var e=t.dateProfileGeneratorClass||$o;return new e(t)}function Qr(t,e,n){return new Jn(t,e,n)}function ts(t){return Et(t,function(t){return t.ui})}function es(t,e,n){var i={"":e};for(var o in t){var r=t[o];r.sourceId&&n[r.sourceId]&&(i[o]=n[r.sourceId])}return i}function ns(t){var e=t.options;return{eventUiSingleBase:Ke({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:"boolean"===typeof e.eventOverlap?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Ke({constraint:e.selectConstraint,overlap:"boolean"===typeof e.selectOverlap?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function is(t,e){for(var n=0,i=e.pluginHooks.isLoadingFuncs;n<i.length;n++){var o=i[n];if(o(t))return!0}return!1}function os(t){return Si(t.options.businessHours,t)}function rs(t,e){for(var n in t)console.warn("Unknown option '"+n+"'"+(e?" for view '"+e+"'":""))}(function(t){function e(e){var n=t.call(this,e)||this;return n.handleData=function(t){n.dataManager?n.setState(t):n.state=t},n.dataManager=new Yr({optionOverrides:e.optionOverrides,calendarApi:e.calendarApi,onData:n.handleData}),n}(0,i.C6)(e,t),e.prototype.render=function(){return this.props.children(this.state)},e.prototype.componentDidUpdate=function(t){var e=this.props.optionOverrides;e!==t.optionOverrides&&this.dataManager.resetOptions(e)}})(o);(function(){function t(t){this.timeZoneName=t}})();var ss=function(){function t(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}return t.prototype.addSegs=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var o=i[n];this.insertEntry(o,e)}return e},t.prototype.insertEntry=function(t,e){var n=this.findInsertion(t);return this.isInsertionValid(n,t)?(this.insertEntryAt(t,n),1):this.handleInvalidInsertion(n,t,e)},t.prototype.isInsertionValid=function(t,e){return(-1===this.maxCoord||t.levelCoord+e.thickness<=this.maxCoord)&&(-1===this.maxStackCnt||t.stackCnt<this.maxStackCnt)},t.prototype.handleInvalidInsertion=function(t,e,n){return this.allowReslicing&&t.touchingEntry?this.splitEntry(e,t.touchingEntry,n):(n.push(e),0)},t.prototype.splitEntry=function(t,e,n){var o=0,r=[],s=t.span,a=e.span;return s.start<a.start&&(o+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:s.start,end:a.start}},r)),s.end>a.end&&(o+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:a.end,end:s.end}},r)),o?(n.push.apply(n,(0,i.fX)([{index:t.index,thickness:t.thickness,span:ds(a,s)}],r)),o):(n.push(t),0)},t.prototype.insertEntryAt=function(t,e){var n=this,i=n.entriesByLevel,o=n.levelCoords;-1===e.lateral?(hs(o,e.level,e.levelCoord),hs(i,e.level,[t])):hs(i[e.level],e.lateral,t),this.stackCnts[ls(t)]=e.stackCnt},t.prototype.findInsertion=function(t){for(var e=this,n=e.levelCoords,i=e.entriesByLevel,o=e.strictOrder,r=e.stackCnts,s=n.length,a=0,l=-1,c=-1,u=null,d=0,h=0;h<s;h+=1){var f=n[h];if(!o&&f>=a+t.thickness)break;var p=i[h],g=void 0,m=fs(p,t.span.start,as),b=m[0]+m[1];while((g=p[b])&&g.span.start<t.span.end){var v=f+g.thickness;v>a&&(a=v,u=g,l=h,c=b),v===a&&(d=Math.max(d,r[ls(g)]+1)),b+=1}}var w=0;if(u){w=l+1;while(w<s&&n[w]<a)w+=1}var _=-1;return w<s&&n[w]===a&&(_=fs(i[w],t.span.end,as)[0]),{touchingLevel:l,touchingLateral:c,touchingEntry:u,stackCnt:d,levelCoord:a,level:w,lateral:_}},t.prototype.toRects=function(){for(var t=this,e=t.entriesByLevel,n=t.levelCoords,o=e.length,r=[],s=0;s<o;s+=1)for(var a=e[s],l=n[s],c=0,u=a;c<u.length;c++){var d=u[c];r.push((0,i.Cl)((0,i.Cl)({},d),{levelCoord:l}))}return r},t}();function as(t){return t.span.end}function ls(t){return t.index+":"+t.span.start}function cs(t){for(var e=[],n=0,i=t;n<i.length;n++){for(var o=i[n],r=[],s={span:o.span,entries:[o]},a=0,l=e;a<l.length;a++){var c=l[a];ds(c.span,s.span)?s={entries:c.entries.concat(s.entries),span:us(c.span,s.span)}:r.push(c)}r.push(s),e=r}return e}function us(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function ds(t,e){var n=Math.max(t.start,e.start),i=Math.min(t.end,e.end);return n<i?{start:n,end:i}:null}function hs(t,e,n){t.splice(e,0,n)}function fs(t,e,n){var i=0,o=t.length;if(!o||e<n(t[i]))return[0,0];if(e>n(t[o-1]))return[o,0];while(i<o){var r=Math.floor(i+(o-i)/2),s=n(t[r]);if(e<s)o=r;else{if(!(e>s))return[r,1];i=r+1}}return[i,0]}var ps=function(){function t(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}return t.prototype.destroy=function(){},t}();function gs(t,e){return{component:t,el:e.el,useEventCenter:null==e.useEventCenter||e.useEventCenter,isHitComboAllowed:e.isHitComboAllowed||null}}function ms(t){var e;return e={},e[t.component.uid]=t,e}var bs={},vs=function(){function t(t,e){this.emitter=new no}return t.prototype.destroy=function(){},t.prototype.setMirrorIsVisible=function(t){},t.prototype.setMirrorNeedsRevert=function(t){},t.prototype.setAutoScrollEnabled=function(t){},t}(),ws={},_s={startTime:Bt,duration:Bt,create:Boolean,sourceId:String};function ys(t){var e=De(t,_s),n=e.refined,i=e.extra;return{startTime:n.startTime||null,duration:n.duration||null,create:null==n.create||n.create,sourceId:n.sourceId,leftoverProps:i}}var ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=this.props.widgetGroups.map(function(e){return t.renderWidgetGroup(e)});return r.apply(void 0,(0,i.fX)(["div",{className:"fc-toolbar-chunk"}],e))},e.prototype.renderWidgetGroup=function(t){for(var e=this.props,n=this.context.theme,o=[],s=!0,a=0,l=t;a<l.length;a++){var c=l[a],u=c.buttonName,d=c.buttonClick,h=c.buttonText,f=c.buttonIcon,p=c.buttonHint;if("title"===u)s=!1,o.push(r("h2",{className:"fc-toolbar-title",id:e.titleId},e.title));else{var g=u===e.activeButton,m=!e.isTodayEnabled&&"today"===u||!e.isPrevEnabled&&"prev"===u||!e.isNextEnabled&&"next"===u,b=["fc-"+u+"-button",n.getClass("button")];g&&b.push(n.getClass("buttonActive")),o.push(r("button",{type:"button",title:"function"===typeof p?p(e.navUnit):p,disabled:m,"aria-pressed":g,className:b.join(" "),onClick:d},h||(f?r("span",{className:f}):"")))}}if(o.length>1){var v=s&&n.getClass("buttonGroup")||"";return r.apply(void 0,(0,i.fX)(["div",{className:v}],o))}return o[0]},e}(go),Cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.render=function(){var t,e,n=this.props,i=n.model,o=n.extraClassName,s=!1,a=i.sectionWidgets,l=a.center;a.left?(s=!0,t=a.left):t=a.start,a.right?(s=!0,e=a.right):e=a.end;var c=[o||"","fc-toolbar",s?"fc-toolbar-ltr":""];return r("div",{className:c.join(" ")},this.renderSection("start",t||[]),this.renderSection("center",l||[]),this.renderSection("end",e||[]))},e.prototype.renderSection=function(t,e){var n=this.props;return r(ks,{key:t,widgetGroups:e,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})},e}(go),xs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={availableWidth:null},e.handleEl=function(t){e.el=t,vo(e.props.elRef,t),e.updateAvailableWidth()},e.handleResize=function(){e.updateAvailableWidth()},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.state,i=e.aspectRatio,o=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",a="";return i?null!==n.availableWidth?s=n.availableWidth/i:a=1/i*100+"%":s=e.height||"",r("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:o.join(" "),style:{height:s,paddingBottom:a}},e.children)},e.prototype.componentDidMount=function(){this.context.addResizeHandler(this.handleResize)},e.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleResize)},e.prototype.updateAvailableWidth=function(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})},e}(go),Es=function(t){function e(e){var n=t.call(this,e)||this;return n.handleSegClick=function(t,e){var i=n.component,o=i.context,r=kn(e);if(r&&i.isValidSegDownEl(t.target)){var s=g(t.target,".fc-event-forced-url"),a=s?s.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:e,event:new si(i.context,r.eventRange.def,r.eventRange.instance),jsEvent:t,view:o.viewApi}),a&&!t.defaultPrevented&&(window.location.href=a)}},n.destroy=T(e.el,"click",".fc-event",n.handleSegClick),n}return(0,i.C6)(e,t),e}(ps),Ss=function(t){function e(e){var n=t.call(this,e)||this;return n.handleEventElRemove=function(t){t===n.currentSegEl&&n.handleSegLeave(null,n.currentSegEl)},n.handleSegEnter=function(t,e){kn(e)&&(n.currentSegEl=e,n.triggerEvent("eventMouseEnter",t,e))},n.handleSegLeave=function(t,e){n.currentSegEl&&(n.currentSegEl=null,n.triggerEvent("eventMouseLeave",t,e))},n.removeHoverListeners=A(e.el,".fc-event",n.handleSegEnter,n.handleSegLeave),n}return(0,i.C6)(e,t),e.prototype.destroy=function(){this.removeHoverListeners()},e.prototype.triggerEvent=function(t,e,n){var i=this.component,o=i.context,r=kn(n);e&&!i.isValidSegDownEl(e.target)||o.emitter.trigger(t,{el:n,event:new si(o,r.eventRange.def,r.eventRange.instance),jsEvent:e,view:o.viewApi})},e}(ps),Ts=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildViewContext=ne(fo),e.buildViewPropTransformers=ne(Ps),e.buildToolbarProps=ne(As),e.headerRef=a(),e.footerRef=a(),e.interactionsStore={},e.state={viewLabelId:x()},e.registerInteractiveComponent=function(t,n){var i=gs(t,n),o=[Es,Ss],r=o.concat(e.props.pluginHooks.componentInteractions),s=r.map(function(t){return new t(i)});e.interactionsStore[t.uid]=s,bs[t.uid]=i},e.unregisterInteractiveComponent=function(t){var n=e.interactionsStore[t.uid];if(n){for(var i=0,o=n;i<o.length;i++){var r=o[i];r.destroy()}delete e.interactionsStore[t.uid]}delete bs[t.uid]},e.resizeRunner=new Ur(function(){e.props.emitter.trigger("_resize",!0),e.props.emitter.trigger("windowResize",{view:e.props.viewApi})}),e.handleWindowResize=function(t){var n=e.props.options;n.handleWindowResize&&t.target===window&&e.resizeRunner.request(n.windowResizeDelay)},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t,e=this.props,n=e.toolbarConfig,o=e.options,s=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,oi(e.options.now,e.dateEnv),e.viewTitle),a=!1,l="";e.isHeightAuto||e.forPrint?l="":null!=o.height?a=!0:null!=o.contentHeight?l=o.contentHeight:t=Math.max(o.aspectRatio,.5);var c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),u=n.header&&n.header.hasTitle?this.state.viewLabelId:"";return r(ho.Provider,{value:c},n.header&&r(Cs,(0,i.Cl)({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:u},s)),r(xs,{liquid:a,height:l,aspectRatio:t,labeledById:u},this.renderView(e),this.buildAppendContent()),n.footer&&r(Cs,(0,i.Cl)({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},s)))},e.prototype.componentDidMount=function(){var t=this.props;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(function(e){return new e(t)}),window.addEventListener("resize",this.handleWindowResize);var e=t.pluginHooks.propSetHandlers;for(var n in e)e[n](t[n],t)},e.prototype.componentDidUpdate=function(t){var e=this.props,n=e.pluginHooks.propSetHandlers;for(var i in n)e[i]!==t[i]&&n[i](e[i],e)},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(var t=0,e=this.calendarInteractions;t<e.length;t++){var n=e[t];n.destroy()}this.props.emitter.trigger("_unmount")},e.prototype.buildAppendContent=function(){var t=this.props,e=t.pluginHooks.viewContainerAppends.map(function(e){return e(t)});return r.apply(void 0,(0,i.fX)([l,{}],e))},e.prototype.renderView=function(t){for(var e=t.pluginHooks,n=t.viewSpec,o={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},s=this.buildViewPropTransformers(e.viewPropsTransformers),a=0,l=s;a<l.length;a++){var c=l[a];(0,i.Cl)(o,c.transform(o,t))}var u=n.component;return r(u,(0,i.Cl)({},o))},e}(po);function As(t,e,n,i,o,r){var s=n.build(o,void 0,!1),a=n.buildPrev(e,i,!1),l=n.buildNext(e,i,!1);return{title:r,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:s.isValid&&!bn(e.currentRange,o),isPrevEnabled:a.isValid,isNextEnabled:l.isValid}}function Ps(t){return t.map(function(t){return new t})}var Is=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={forPrint:!1},e.handleBeforePrint=function(){e.setState({forPrint:!0})},e.handleAfterPrint=function(){e.setState({forPrint:!1})},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.props,e=t.options,n=this.state.forPrint,i=n||"auto"===e.height||"auto"===e.contentHeight,o=i||null==e.height?"":e.height,r=["fc",n?"fc-media-print":"fc-media-screen","fc-direction-"+e.direction,t.theme.getClass("root")];return Mi()||r.push("fc-liquid-hack"),t.children(r,o,i,n)},e.prototype.componentDidMount=function(){var t=this.props.emitter;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)},e.prototype.componentWillUnmount=function(){var t=this.props.emitter;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)},e}(go);function Rs(t,e){return Ee(!t||e>10?{weekday:"short"}:e>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}var Os="fc-col-header-cell";function Ms(t){return t.text}var Ds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.context,e=t.dateEnv,n=t.options,o=t.theme,s=t.viewApi,a=this.props,l=a.date,c=a.dateProfile,u=Bi(l,a.todayRange,null,c),d=[Os].concat(Fi(u,o)),h=e.format(l,a.dayHeaderFormat),f=!u.isDisabled&&a.colCnt>1?Wi(this.context,l):{},p=(0,i.Cl)((0,i.Cl)((0,i.Cl)({date:e.toDate(l),view:s},a.extraHookProps),{text:h}),u);return r(Ao,{hookProps:p,classNames:n.dayHeaderClassNames,content:n.dayHeaderContent,defaultContent:Ms,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},function(t,e,n,o){return r("th",(0,i.Cl)({ref:t,role:"columnheader",className:d.concat(e).join(" "),"data-date":u.isDisabled?void 0:Zt(l),colSpan:a.colSpan},a.extraDataAttrs),r("div",{className:"fc-scrollgrid-sync-inner"},!u.isDisabled&&r("a",(0,i.Cl)({ref:n,className:["fc-col-header-cell-cushion",a.isSticky?"fc-sticky":""].join(" ")},f),o)))})},e}(go),Vs=Ee({weekday:"long"}),Ns=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.props,e=this.context,n=e.dateEnv,o=e.theme,s=e.viewApi,a=e.options,l=Z(new Date(2592e5),t.dow),c={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},u=[Os].concat(Fi(c,o),t.extraClassNames||[]),d=n.format(l,t.dayHeaderFormat),h=(0,i.Cl)((0,i.Cl)((0,i.Cl)((0,i.Cl)({date:l},c),{view:s}),t.extraHookProps),{text:d});return r(Ao,{hookProps:h,classNames:a.dayHeaderClassNames,content:a.dayHeaderContent,defaultContent:Ms,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},function(e,o,s,a){return r("th",(0,i.Cl)({ref:e,role:"columnheader",className:u.concat(o).join(" "),colSpan:t.colSpan},t.extraDataAttrs),r("div",{className:"fc-scrollgrid-sync-inner"},r("a",{"aria-label":n.format(l,Vs),className:["fc-col-header-cell-cushion",t.isSticky?"fc-sticky":""].join(" "),ref:s},a)))})},e}(go),Ls=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.initialNowDate=oi(n.options.now,n.dateEnv),i.initialNowQueriedMs=(new Date).valueOf(),i.state=i.computeTiming().currentState,i}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.state;return e.children(n.nowDate,n.todayRange)},e.prototype.componentDidMount=function(){this.setTimeout()},e.prototype.componentDidUpdate=function(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())},e.prototype.componentWillUnmount=function(){this.clearTimeout()},e.prototype.computeTiming=function(){var t=this,e=t.props,n=t.context,i=Q(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),o=n.dateEnv.startOf(i,e.unit),r=n.dateEnv.add(o,Bt(1,e.unit)),s=r.valueOf()-i.valueOf();return s=Math.min(864e5,s),{currentState:{nowDate:o,todayRange:Bs(o)},nextState:{nowDate:r,todayRange:Bs(r)},waitMs:s}},e.prototype.setTimeout=function(){var t=this,e=this.computeTiming(),n=e.nextState,i=e.waitMs;this.timeoutId=setTimeout(function(){t.setState(n,function(){t.setTimeout()})},i)},e.prototype.clearTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e.contextType=ho,e}(o);function Bs(t){var e=lt(t),n=Z(e,1);return{start:e,end:n}}var Fs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createDayHeaderFormatter=ne(zs),e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.context,e=this.props,n=e.dates,i=e.dateProfile,o=e.datesRepDistinctDays,s=e.renderIntro,a=this.createDayHeaderFormatter(t.options.dayHeaderFormat,o,n.length);return r(Ls,{unit:"day"},function(t,e){return r("tr",{role:"row"},s&&s("day"),n.map(function(t){return o?r(Ds,{key:t.toISOString(),date:t,dateProfile:i,todayRange:e,colCnt:n.length,dayHeaderFormat:a}):r(Ns,{key:t.getUTCDay(),dow:t.getUTCDay(),dayHeaderFormat:a})}))})},e}(go);function zs(t,e,n){return t||Rs(e,n)}var Hs=function(){function t(t,e){var n=t.start,i=t.end,o=[],r=[],s=-1;while(n<i)e.isHiddenDay(n)?o.push(s+.5):(s+=1,o.push(s),r.push(n)),n=Z(n,1);this.dates=r,this.indices=o,this.cnt=r.length}return t.prototype.sliceRange=function(t){var e=this.getDateDayIndex(t.start),n=this.getDateDayIndex(Z(t.end,-1)),i=Math.max(0,e),o=Math.min(this.cnt-1,n);return i=Math.ceil(i),o=Math.floor(o),i<=o?{firstIndex:i,lastIndex:o,isStart:e===i,isEnd:n===o}:null},t.prototype.getDateDayIndex=function(t){var e=this.indices,n=Math.floor(et(this.dates[0],t));return n<0?e[0]-1:n>=e.length?e[e.length-1]+1:e[n]},t}(),Ws=function(){function t(t,e){var n,i,o,r=t.dates;if(e){for(i=r[0].getUTCDay(),n=1;n<r.length;n+=1)if(r[n].getUTCDay()===i)break;o=Math.ceil(r.length/n)}else o=1,n=r.length;this.rowCnt=o,this.colCnt=n,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return t.prototype.buildCells=function(){for(var t=[],e=0;e<this.rowCnt;e+=1){for(var n=[],i=0;i<this.colCnt;i+=1)n.push(this.buildCell(e,i));t.push(n)}return t},t.prototype.buildCell=function(t,e){var n=this.daySeries.dates[t*this.colCnt+e];return{key:n.toISOString(),date:n}},t.prototype.buildHeaderDates=function(){for(var t=[],e=0;e<this.colCnt;e+=1)t.push(this.cells[0][e].date);return t},t.prototype.sliceRange=function(t){var e=this.colCnt,n=this.daySeries.sliceRange(t),i=[];if(n){var o=n.firstIndex,r=n.lastIndex,s=o;while(s<=r){var a=Math.floor(s/e),l=Math.min((a+1)*e,r+1);i.push({row:a,firstCol:s%e,lastCol:(l-1)%e,isStart:n.isStart&&s===o,isEnd:n.isEnd&&l-1===r}),s=l}}return i},t}(),js=function(){function t(){this.sliceBusinessHours=ne(this._sliceBusinessHours),this.sliceDateSelection=ne(this._sliceDateSpan),this.sliceEventStore=ne(this._sliceEventStore),this.sliceEventDrag=ne(this._sliceInteraction),this.sliceEventResize=ne(this._sliceInteraction),this.forceDayIfListItem=!1}return t.prototype.sliceProps=function(t,e,n,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];var a=t.eventUiBases,l=this.sliceEventStore.apply(this,(0,i.fX)([t.eventStore,a,e,n],r));return{dateSelectionSegs:this.sliceDateSelection.apply(this,(0,i.fX)([t.dateSelection,a,o],r)),businessHourSegs:this.sliceBusinessHours.apply(this,(0,i.fX)([t.businessHours,e,n,o],r)),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag.apply(this,(0,i.fX)([t.eventDrag,a,e,n],r)),eventResize:this.sliceEventResize.apply(this,(0,i.fX)([t.eventResize,a,e,n],r)),eventSelection:t.eventSelection}},t.prototype.sliceNowDate=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return this._sliceDateSpan.apply(this,(0,i.fX)([{range:{start:t,end:Q(t,1)},allDay:!1},{},e],n))},t.prototype._sliceBusinessHours=function(t,e,n,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];return t?this._sliceEventStore.apply(this,(0,i.fX)([Dt(t,$s(e,Boolean(n)),o),{},e,n],r)).bg:[]},t.prototype._sliceEventStore=function(t,e,n,i){for(var o=[],r=4;r<arguments.length;r++)o[r-4]=arguments[r];if(t){var s=wn(t,e,$s(n,Boolean(i)),i);return{bg:this.sliceEventRanges(s.bg,o),fg:this.sliceEventRanges(s.fg,o)}}return{bg:[],fg:[]}},t.prototype._sliceInteraction=function(t,e,n,i){for(var o=[],r=4;r<arguments.length;r++)o[r-4]=arguments[r];if(!t)return null;var s=wn(t.mutatedEvents,e,$s(n,Boolean(i)),i);return{segs:this.sliceEventRanges(s.fg,o),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}},t.prototype._sliceDateSpan=function(t,e,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];if(!t)return[];for(var s=jn(t,e,n),a=this.sliceRange.apply(this,(0,i.fX)([t.range],o)),l=0,c=a;l<c.length;l++){var u=c[l];u.eventRange=s}return a},t.prototype.sliceEventRanges=function(t,e){for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i];n.push.apply(n,this.sliceEventRange(r,e))}return n},t.prototype.sliceEventRange=function(t,e){var n=t.range;this.forceDayIfListItem&&"list-item"===t.ui.display&&(n={start:n.start,end:Z(n.start,1)});for(var o=this.sliceRange.apply(this,(0,i.fX)([n],e)),r=0,s=o;r<s.length;r++){var a=s[r];a.eventRange=t,a.isStart=t.isStart&&a.isStart,a.isEnd=t.isEnd&&a.isEnd}return o},t}();function $s(t,e){var n=t.activeRange;return e?n:{start:Q(n.start,t.slotMinTime.milliseconds),end:Q(n.end,t.slotMaxTime.milliseconds-864e5)}}function Us(t,e,n){var i=t.mutatedEvents.instances;for(var o in i)if(!mn(e.validRange,i[o].range))return!1;return Gs({eventDrag:t},n)}function qs(t,e,n){return!!mn(e.validRange,t.range)&&Gs({dateSelection:t},n)}function Gs(t,e){var n=e.getCurrentData(),o=(0,i.Cl)({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||Ks)(o,e)}function Ks(t,e,n,i){return void 0===n&&(n={}),!(t.eventDrag&&!Ys(t,e,n,i))&&!(t.dateSelection&&!Xs(t,e,n,i))}function Ys(t,e,n,o){var r=e.getCurrentData(),s=t.eventDrag,a=s.mutatedEvents,l=a.defs,c=a.instances,u=Cn(l,s.isEvent?t.eventUiBases:{"":r.selectionConfig});o&&(u=Et(u,o));var d=gr(t.eventStore,s.affectedEvents.instances),h=d.defs,f=d.instances,p=Cn(h,t.eventUiBases);for(var g in c){var m=c[g],b=m.range,v=u[m.defId],w=l[m.defId];if(!Js(v.constraints,b,d,t.businessHours,e))return!1;var _=e.options.eventOverlap,y="function"===typeof _?_:null;for(var k in f){var C=f[k];if(gn(b,C.range)){var x=p[C.defId].overlap;if(!1===x&&s.isEvent)return!1;if(!1===v.overlap)return!1;if(y&&!y(new si(e,h[C.defId],C),new si(e,w,m)))return!1}}for(var E=r.eventStore,S=0,T=v.allows;S<T.length;S++){var A=T[S],P=(0,i.Cl)((0,i.Cl)({},n),{range:m.range,allDay:w.allDay}),I=E.defs[w.defId],R=E.instances[g],O=void 0;if(O=I?new si(e,I,R):new si(e,w),!A(qn(P,e),O))return!1}}return!0}function Xs(t,e,n,o){var r=t.eventStore,s=r.defs,a=r.instances,l=t.dateSelection,c=l.range,u=e.getCurrentData().selectionConfig;if(o&&(u=o(u)),!Js(u.constraints,c,r,t.businessHours,e))return!1;var d=e.options.selectOverlap,h="function"===typeof d?d:null;for(var f in a){var p=a[f];if(gn(c,p.range)){if(!1===u.overlap)return!1;if(h&&!h(new si(e,s[p.defId],p),null))return!1}}for(var g=0,m=u.allows;g<m.length;g++){var b=m[g],v=(0,i.Cl)((0,i.Cl)({},n),l);if(!b(qn(v,e),null))return!1}return!0}function Js(t,e,n,i,o){for(var r=0,s=t;r<s.length;r++){var a=s[r];if(!ta(Zs(a,e,n,i,o),e))return!1}return!0}function Zs(t,e,n,i,o){return"businessHours"===t?Qs(Dt(i,e,o)):"string"===typeof t?Qs(We(n,function(e){return e.groupId===t})):"object"===typeof t&&t?Qs(Dt(t,e,o)):[]}function Qs(t){var e=t.instances,n=[];for(var i in e)n.push(e[i].range);return n}function ta(t,e){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(mn(o,e))return!0}return!1}var ea=/^(visible|hidden)$/,na=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleEl=function(t){e.el=t,vo(e.props.elRef,t)},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.props,e=t.liquid,n=t.liquidIsAbsolute,i=e&&n,o=["fc-scroller"];return e&&(n?o.push("fc-scroller-liquid-absolute"):o.push("fc-scroller-liquid")),r("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:i&&-(t.overcomeLeft||0)||"",right:i&&-(t.overcomeRight||0)||"",bottom:i&&-(t.overcomeBottom||0)||"",marginLeft:!i&&-(t.overcomeLeft||0)||"",marginRight:!i&&-(t.overcomeRight||0)||"",marginBottom:!i&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)},e.prototype.needsXScrolling=function(){if(ea.test(this.props.overflowX))return!1;for(var t=this.el,e=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),n=t.children,i=0;i<n.length;i+=1){var o=n[i];if(o.getBoundingClientRect().width>e)return!0}return!1},e.prototype.needsYScrolling=function(){if(ea.test(this.props.overflowY))return!1;for(var t=this.el,e=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),n=t.children,i=0;i<n.length;i+=1){var o=n[i];if(o.getBoundingClientRect().height>e)return!0}return!1},e.prototype.getXScrollbarWidth=function(){return ea.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight},e.prototype.getYScrollbarWidth=function(){return ea.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth},e}(go),ia=function(){function t(t){var e=this;this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=function(t,n){var i=e,o=i.depths,r=i.currentMap,s=!1,a=!1;null!==t?(s=n in r,r[n]=t,o[n]=(o[n]||0)+1,a=!0):(o[n]-=1,o[n]||(delete r[n],delete e.callbackMap[n],s=!0)),e.masterCallback&&(s&&e.masterCallback(null,String(n)),a&&e.masterCallback(t,String(n)))}}return t.prototype.createRef=function(t){var e=this,n=this.callbackMap[t];return n||(n=this.callbackMap[t]=function(n){e.handleValue(n,String(t))}),n},t.prototype.collect=function(t,e,n){return Ot(this.currentMap,t,e,n)},t.prototype.getAll=function(){return Tt(this.currentMap)},t}();function oa(t){for(var e=b(t,".fc-scrollgrid-shrink"),n=0,i=0,o=e;i<o.length;i++){var r=o[i];n=Math.max(n,Y(r))}return Math.ceil(n)}function ra(t,e){return t.liquid&&e.liquid}function sa(t,e){return null!=e.maxHeight||ra(t,e)}function aa(t,e,n,i){var o=n.expandRows,s="function"===typeof e.content?e.content(n):r("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:o?n.clientHeight:""}},n.tableColGroupNode,r(i?"thead":"tbody",{role:"presentation"},"function"===typeof e.rowContent?e.rowContent(n):e.rowContent));return s}function la(t,e){return ee(t,e,At)}function ca(t,e){for(var n=[],o=0,s=t;o<s.length;o++)for(var a=s[o],l=a.span||1,c=0;c<l;c+=1)n.push(r("col",{style:{width:"shrink"===a.width?ua(e):a.width||"",minWidth:a.minWidth||""}}));return r.apply(void 0,(0,i.fX)(["colgroup",{}],n))}function ua(t){return null==t?4:t}function da(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];if("shrink"===i.width)return!0}return!1}function ha(t,e){var n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function fa(t,e){var n=["fc-scrollgrid-section","fc-scrollgrid-section-"+t.type,t.className];return e&&t.liquid&&null==t.maxHeight&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function pa(t){return r("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function ga(t){var e=t.stickyHeaderDates;return null!=e&&"auto"!==e||(e="auto"===t.height||"auto"===t.viewHeight),e}function ma(t){var e=t.stickyFooterScrollbar;return null!=e&&"auto"!==e||(e="auto"===t.height||"auto"===t.viewHeight),e}var ba=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processCols=ne(function(t){return t},la),e.renderMicroColGroup=ne(ca),e.scrollerRefs=new ia,e.scrollerElRefs=new ia(e._handleScrollerEl.bind(e)),e.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},e.handleSizing=function(){e.safeSetState((0,i.Cl)({shrinkWidth:e.computeShrinkWidth()},e.computeScrollerDims()))},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.state,o=t.context,s=e.sections||[],a=this.processCols(e.cols),l=this.renderMicroColGroup(a,n.shrinkWidth),c=ha(e.liquid,o);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");var u,d=s.length,h=0,f=[],p=[],g=[];while(h<d&&"header"===(u=s[h]).type)f.push(this.renderSection(u,l,!0)),h+=1;while(h<d&&"body"===(u=s[h]).type)p.push(this.renderSection(u,l,!1)),h+=1;while(h<d&&"footer"===(u=s[h]).type)g.push(this.renderSection(u,l,!0)),h+=1;var m=!Mi(),b={role:"rowgroup"};return r("table",{role:"grid",className:c.join(" "),style:{height:e.height}},Boolean(!m&&f.length)&&r.apply(void 0,(0,i.fX)(["thead",b],f)),Boolean(!m&&p.length)&&r.apply(void 0,(0,i.fX)(["tbody",b],p)),Boolean(!m&&g.length)&&r.apply(void 0,(0,i.fX)(["tfoot",b],g)),m&&r.apply(void 0,(0,i.fX)((0,i.fX)((0,i.fX)(["tbody",b],f),p),g)))},e.prototype.renderSection=function(t,e,n){return"outerContent"in t?r(l,{key:t.key},t.outerContent):r("tr",{key:t.key,role:"presentation",className:fa(t,this.props.liquid).join(" ")},this.renderChunkTd(t,e,t.chunk,n))},e.prototype.renderChunkTd=function(t,e,n,i){if("outerContent"in n)return n.outerContent;var o=this.props,s=this.state,a=s.forceYScrollbars,l=s.scrollerClientWidths,c=s.scrollerClientHeights,u=sa(o,t),d=ra(o,t),h=o.liquid?a?"scroll":u?"auto":"hidden":"visible",f=t.key,p=aa(t,n,{tableColGroupNode:e,tableMinWidth:"",clientWidth:o.collapsibleWidth||void 0===l[f]?null:l[f],clientHeight:void 0!==c[f]?c[f]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:function(){}},i);return r(i?"th":"td",{ref:n.elRef,role:"presentation"},r("div",{className:"fc-scroller-harness"+(d?" fc-scroller-harness-liquid":"")},r(na,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:h,overflowX:o.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:d,liquidIsAbsolute:!0},p)))},e.prototype._handleScrollerEl=function(t,e){var n=va(this.props.sections,e);n&&vo(n.chunk.scrollerElRef,t)},e.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},e.prototype.componentDidUpdate=function(){this.handleSizing()},e.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},e.prototype.computeShrinkWidth=function(){return da(this.props.cols)?oa(this.scrollerElRefs.getAll()):0},e.prototype.computeScrollerDims=function(){var t=Gi(),e=this,n=e.scrollerRefs,i=e.scrollerElRefs,o=!1,r={},s={};for(var a in n.currentMap){var l=n.currentMap[a];if(l&&l.needsYScrolling()){o=!0;break}}for(var c=0,u=this.props.sections;c<u.length;c++){var d=u[c],h=(a=d.key,i.currentMap[a]);if(h){var f=h.parentNode;r[a]=Math.floor(f.getBoundingClientRect().width-(o?t.y:0)),s[a]=Math.floor(f.getBoundingClientRect().height)}}return{forceYScrollbars:o,scrollerClientWidths:r,scrollerClientHeights:s}},e}(go);function va(t,e){for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.key===e)return o}return null}ba.addStateEquality({scrollerClientWidths:At,scrollerClientHeights:At});var wa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.elRef=a(),e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,i=n.options,o=e.seg,s=o.eventRange,a=s.ui,l={event:new si(n,s.def,s.instance),view:n.viewApi,timeText:e.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!e.disableDragging&&Tn(o,n),isStartResizable:!e.disableResizing&&An(o,n),isEndResizable:!e.disableResizing&&Pn(o),isMirror:Boolean(e.isDragging||e.isResizing||e.isDateSelecting),isStart:Boolean(o.isStart),isEnd:Boolean(o.isEnd),isPast:Boolean(e.isPast),isFuture:Boolean(e.isFuture),isToday:Boolean(e.isToday),isSelected:Boolean(e.isSelected),isDragging:Boolean(e.isDragging),isResizing:Boolean(e.isResizing)},c=On(l).concat(a.classNames);return r(Ao,{hookProps:l,classNames:i.eventClassNames,content:i.eventContent,defaultContent:e.defaultContent,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount,elRef:this.elRef},function(t,n,i,o){return e.children(t,c.concat(n),i,o,l)})},e.prototype.componentDidMount=function(){yn(this.elRef.current,this.props.seg)},e.prototype.componentDidUpdate=function(t){var e=this.props.seg;e!==t.seg&&yn(this.elRef.current,e)},e}(go),_a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,o=e.seg,s=n.options.eventTimeFormat||e.defaultTimeFormat,a=In(o,s,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return r(wa,{seg:o,timeText:a,disableDragging:e.disableDragging,disableResizing:e.disableResizing,defaultContent:e.defaultContent||ya,isDragging:e.isDragging,isResizing:e.isResizing,isDateSelecting:e.isDateSelecting,isSelected:e.isSelected,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},function(t,s,a,l,c){return r("a",(0,i.Cl)({className:e.extraClassNames.concat(s).join(" "),style:{borderColor:c.borderColor,backgroundColor:c.backgroundColor},ref:t},Dn(o,n)),r("div",{className:"fc-event-main",ref:a,style:{color:c.textColor}},l),c.isStartResizable&&r("div",{className:"fc-event-resizer fc-event-resizer-start"}),c.isEndResizable&&r("div",{className:"fc-event-resizer fc-event-resizer-end"}))})},e}(go);function ya(t){return r("div",{className:"fc-event-main-frame"},t.timeText&&r("div",{className:"fc-event-time"},t.timeText),r("div",{className:"fc-event-title-container"},r("div",{className:"fc-event-title fc-sticky"},t.event.title||r(l,null,"Â "))))}var ka=function(t){return r(ho.Consumer,null,function(e){var n=e.options,i={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return r(Ao,{hookProps:i,classNames:n.nowIndicatorClassNames,content:n.nowIndicatorContent,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)})},Ca=Ee({day:"numeric"}),xa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,i=n.options,o=Ea({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,showDayNumber:e.showDayNumber,extraProps:e.extraHookProps,viewApi:n.viewApi,dateEnv:n.dateEnv});return r(Io,{hookProps:o,content:i.dayCellContent,defaultContent:e.defaultContent},e.children)},e}(go);function Ea(t){var e=t.date,n=t.dateEnv,o=Bi(e,t.todayRange,null,t.dateProfile);return(0,i.Cl)((0,i.Cl)((0,i.Cl)({date:n.toDate(e),view:t.viewApi},o),{dayNumberText:t.showDayNumber?n.format(e,Ca):""}),t.extraProps)}var Sa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refineHookProps=ie(Ea),e.normalizeClassNames=Mo(),e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,i=n.options,o=this.refineHookProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,showDayNumber:e.showDayNumber,extraProps:e.extraHookProps,viewApi:n.viewApi,dateEnv:n.dateEnv}),s=Fi(o,n.theme).concat(o.isDisabled?[]:this.normalizeClassNames(i.dayCellClassNames,o)),a=o.isDisabled?{}:{"data-date":Zt(e.date)};return r(Oo,{hookProps:o,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount,elRef:e.elRef},function(t){return e.children(t,s,a,o.isDisabled)})},e}(go);function Ta(t){return r("div",{className:"fc-"+t})}var Aa=function(t){return r(wa,{defaultContent:Pa,seg:t.seg,timeText:"",disableDragging:!0,disableResizing:!0,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday},function(t,e,n,i,o){return r("div",{ref:t,className:["fc-bg-event"].concat(e).join(" "),style:{backgroundColor:o.backgroundColor}},i)})};function Pa(t){var e=t.event.title;return e&&r("div",{className:"fc-event-title"},t.event.title)}var Ia=function(t){return r(ho.Consumer,null,function(e){var n=e.dateEnv,i=e.options,o=t.date,s=i.weekNumberFormat||t.defaultFormat,a=n.computeWeekNumber(o),l=n.format(o,s),c={num:a,text:l,date:o};return r(Ao,{hookProps:c,classNames:i.weekNumberClassNames,content:i.weekNumberContent,defaultContent:Ra,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount},t.children)})};function Ra(t){return t.text}var Oa=10,Ma=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={titleId:x()},e.handleRootEl=function(t){e.rootEl=t,e.props.elRef&&vo(e.props.elRef,t)},e.handleDocumentMouseDown=function(t){var n=y(t);e.rootEl.contains(n)||e.handleCloseClick()},e.handleDocumentKeyDown=function(t){"Escape"===t.key&&e.handleCloseClick()},e.handleCloseClick=function(){var t=e.props.onClose;t&&t()},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.context,e=t.theme,n=t.options,o=this,s=o.props,a=o.state,l=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return u(r("div",(0,i.Cl)({id:s.id,className:l.join(" "),"aria-labelledby":a.titleId},s.extraAttrs,{ref:this.handleRootEl}),r("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},r("span",{className:"fc-popover-title",id:a.titleId},s.title),r("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),r("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)},e.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)},e.prototype.updateSize=function(){var t=this.context.isRtl,e=this.props,n=e.alignmentEl,i=e.alignGridTop,o=this.rootEl,r=Qi(n);if(r){var s=o.getBoundingClientRect(),a=i?g(n,".fc-scrollgrid").getBoundingClientRect().top:r.top,l=t?r.right-s.width:r.left;a=Math.max(a,Oa),l=Math.min(l,document.documentElement.clientWidth-Oa-s.width),l=Math.max(l,Oa);var c=o.offsetParent.getBoundingClientRect();w(o,{top:a-c.top,left:l-c.left})}},e}(go),Da=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleRootEl=function(t){e.rootEl=t,t?e.context.registerInteractiveComponent(e,{el:t,useEventCenter:!1}):e.context.unregisterInteractiveComponent(e)},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this.context,e=t.options,n=t.dateEnv,i=this.props,o=i.startDate,s=i.todayRange,a=i.dateProfile,l=n.format(o,e.dayPopoverFormat);return r(Sa,{date:o,dateProfile:a,todayRange:s,elRef:this.handleRootEl},function(t,e,n){return r(Ma,{elRef:t,id:i.id,title:l,extraClassNames:["fc-more-popover"].concat(e),extraAttrs:n,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},r(xa,{date:o,dateProfile:a,todayRange:s},function(t,e){return e&&r("div",{className:"fc-more-popover-misc",ref:t},e)}),i.children)})},e.prototype.queryHit=function(t,e,n,o){var r=this,s=r.rootEl,a=r.props;return t>=0&&t<n&&e>=0&&e<o?{dateProfile:a.dateProfile,dateSpan:(0,i.Cl)({allDay:!0,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:n,bottom:o},layer:1}:null},e}(wo),Va=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.linkElRef=a(),e.state={isPopoverOpen:!1,popoverId:x()},e.handleClick=function(t){var n=e,i=n.props,o=n.context,r=o.options.moreLinkClick,s=La(i).start;function a(t){var e=t.eventRange,n=e.def,i=e.instance,r=e.range;return{event:new si(o,n,i),start:o.dateEnv.toDate(r.start),end:o.dateEnv.toDate(r.end),isStart:t.isStart,isEnd:t.isEnd}}"function"===typeof r&&(r=r({date:s,allDay:Boolean(i.allDayDate),allSegs:i.allSegs.map(a),hiddenSegs:i.hiddenSegs.map(a),jsEvent:t,view:o.viewApi})),r&&"popover"!==r?"string"===typeof r&&o.calendarApi.zoomTo(s,r):e.setState({isPopoverOpen:!0})},e.handlePopoverClose=function(){e.setState({isPopoverOpen:!1})},e}return(0,i.C6)(e,t),e.prototype.render=function(){var t=this,e=this,n=e.props,i=e.state;return r(ho.Consumer,null,function(e){var o=e.viewApi,s=e.options,a=e.calendarApi,c=s.moreLinkText,u=n.moreCnt,d=La(n),h="function"===typeof c?c.call(a,u):"+"+u+" "+c,f=q(s.moreLinkHint,[u],h),p={num:u,shortText:"+"+u,text:h,view:o};return r(l,null,Boolean(n.moreCnt)&&r(Ao,{elRef:t.linkElRef,hookProps:p,classNames:s.moreLinkClassNames,content:s.moreLinkContent,defaultContent:n.defaultContent||Na,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},function(e,o,r,s){return n.children(e,["fc-more-link"].concat(o),r,s,t.handleClick,f,i.isPopoverOpen,i.isPopoverOpen?i.popoverId:"")}),i.isPopoverOpen&&r(Da,{id:i.popoverId,startDate:d.start,endDate:d.end,dateProfile:n.dateProfile,todayRange:n.todayRange,extraDateSpan:n.extraDateSpan,parentEl:t.parentEl,alignmentEl:n.alignmentElRef.current,alignGridTop:n.alignGridTop,onClose:t.handlePopoverClose},n.popoverContent()))})},e.prototype.componentDidMount=function(){this.updateParentEl()},e.prototype.componentDidUpdate=function(){this.updateParentEl()},e.prototype.updateParentEl=function(){this.linkElRef.current&&(this.parentEl=g(this.linkElRef.current,".fc-view-harness"))},e}(go);function Na(t){return t.text}function La(t){if(t.allDayDate)return{start:t.allDayDate,end:Z(t.allDayDate,1)};var e=t.hiddenSegs;return{start:Ba(e),end:za(e)}}function Ba(t){return t.reduce(Fa).eventRange.range.start}function Fa(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function za(t){return t.reduce(Ha).eventRange.range.end}function Ha(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}},6843:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6845:function(t,e,n){"use strict";var i,o,r=n(200),s=n(7061),a=r.process,l=r.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(i=u.split("."),o=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!o&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(o=+i[1]))),t.exports=o},6885:function(t,e,n){"use strict";var i=n(3091),o=n(4601),r=n(8823),s=i(i.bind);t.exports=function(t,e){return o(t),void 0===e?t:r?s(t,e):function(){return t.apply(e,arguments)}}},6926:function(t){"use strict";t.exports=!1},7061:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7168:function(t,e,n){"use strict";var i=n(2074);t.exports=!i(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},7242:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},7319:function(t,e,n){"use strict";var i=n(6794),o=n(1635),r=n(1836),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.getKeyInfo=function(){return{allDay:{},timed:{}}},e.prototype.getKeysForDateSpan=function(t){return t.allDay?["allDay"]:["timed"]},e.prototype.getKeysForEventDef=function(t){return t.allDay?(0,i.CuQ)(t)?["timed","allDay"]:["allDay"]:["timed"]},e}(i.O3W),a=(0,i.xi1)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function l(t){var e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return(0,i.na4)(i.TYi.Consumer,null,function(n){if(!t.isLabeled)return(0,i.na4)("td",{className:e.join(" "),"data-time":t.isoTimeStr});var o=n.dateEnv,r=n.options,s=n.viewApi,l=null==r.slotLabelFormat?a:Array.isArray(r.slotLabelFormat)?(0,i.xi1)(r.slotLabelFormat[0]):(0,i.xi1)(r.slotLabelFormat),u={level:0,time:t.time,date:o.toDate(t.date),view:s,text:o.format(t.date,l)};return(0,i.na4)(i.iT7,{hookProps:u,classNames:r.slotLabelClassNames,content:r.slotLabelContent,defaultContent:c,didMount:r.slotLabelDidMount,willUnmount:r.slotLabelWillUnmount},function(n,o,r,s){return(0,i.na4)("td",{ref:n,className:e.concat(o).join(" "),"data-time":t.isoTimeStr},(0,i.na4)("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},(0,i.na4)("div",{className:"fc-timegrid-slot-label-cushion fc-scrollgrid-shrink-cushion",ref:r},s)))})})}function c(t){return t.text}var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){return this.props.slatMetas.map(function(t){return(0,i.na4)("tr",{key:t.key},(0,i.na4)(l,(0,o.Cl)({},t)))})},e}(i.$GR),d=(0,i.xi1)({week:"short"}),h=5,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allDaySplitter=new s,e.headerElRef=(0,i._3b)(),e.rootElRef=(0,i._3b)(),e.scrollerElRef=(0,i._3b)(),e.state={slatCoords:null},e.handleScrollTopRequest=function(t){var n=e.scrollerElRef.current;n&&(n.scrollTop=t)},e.renderHeadAxis=function(t,n){void 0===n&&(n="");var r=e.context.options,s=e.props.dateProfile,a=s.renderRange,l=(0,i.z$z)(a.start,a.end),c=1===l?(0,i.myk)(e.context,a.start,"week"):{};return r.weekNumbers&&"day"===t?(0,i.na4)(i.SUi,{date:a.start,defaultFormat:d},function(t,e,r,s){return(0,i.na4)("th",{ref:t,"aria-hidden":!0,className:["fc-timegrid-axis","fc-scrollgrid-shrink"].concat(e).join(" ")},(0,i.na4)("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame fc-timegrid-axis-frame-liquid",style:{height:n}},(0,i.na4)("a",(0,o.Cl)({ref:r,className:"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner"},c),s)))}):(0,i.na4)("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},(0,i.na4)("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},e.renderTableRowAxis=function(t){var n=e.context,o=n.options,r=n.viewApi,s={text:o.allDayText,view:r};return(0,i.na4)(i.iT7,{hookProps:s,classNames:o.allDayClassNames,content:o.allDayContent,defaultContent:p,didMount:o.allDayDidMount,willUnmount:o.allDayWillUnmount},function(e,n,o,r){return(0,i.na4)("td",{ref:e,"aria-hidden":!0,className:["fc-timegrid-axis","fc-scrollgrid-shrink"].concat(n).join(" ")},(0,i.na4)("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame"+(null==t?" fc-timegrid-axis-frame-liquid":""),style:{height:t}},(0,i.na4)("span",{className:"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner",ref:o},r)))})},e.handleSlatCoords=function(t){e.setState({slatCoords:t})},e}return(0,o.C6)(e,t),e.prototype.renderSimpleLayout=function(t,e,n){var o=this,r=o.context,s=o.props,a=[],l=(0,i._Dp)(r.options);return t&&a.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),e&&(a.push({type:"body",key:"all-day",chunk:{content:e}}),a.push({type:"body",key:"all-day-divider",outerContent:(0,i.na4)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,i.na4)("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),a.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(r.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:n}}),(0,i.na4)(i.q4f,{viewSpec:r.viewSpec,elRef:this.rootElRef},function(t,e){return(0,i.na4)("div",{className:["fc-timegrid"].concat(e).join(" "),ref:t},(0,i.na4)(i.en1,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:a}))})},e.prototype.renderHScrollLayout=function(t,e,n,o,r,s,a){var l=this,c=this.context.pluginHooks.scrollGridImpl;if(!c)throw new Error("No ScrollGrid implementation");var d=this,h=d.context,f=d.props,p=!f.forPrint&&(0,i._Dp)(h.options),g=!f.forPrint&&(0,i.v2o)(h.options),m=[];t&&m.push({type:"header",key:"header",isSticky:p,syncRowHeights:!0,chunks:[{key:"axis",rowContent:function(t){return(0,i.na4)("tr",{role:"presentation"},l.renderHeadAxis("day",t.rowSyncHeights[0]))}},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),e&&(m.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:function(t){return(0,i.na4)("tr",{role:"presentation"},l.renderTableRowAxis(t.rowSyncHeights[0]))}},{key:"cols",content:e}]}),m.push({key:"all-day-divider",type:"body",outerContent:(0,i.na4)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,i.na4)("td",{colSpan:2,className:"fc-timegrid-divider "+h.theme.getClass("tableCellShaded")}))}));var b=h.options.nowIndicator;return m.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(h.options.expandRows),chunks:[{key:"axis",content:function(t){return(0,i.na4)("div",{className:"fc-timegrid-axis-chunk"},(0,i.na4)("table",{"aria-hidden":!0,style:{height:t.expandRows?t.clientHeight:""}},t.tableColGroupNode,(0,i.na4)("tbody",null,(0,i.na4)(u,{slatMetas:s}))),(0,i.na4)("div",{className:"fc-timegrid-now-indicator-container"},(0,i.na4)(i.O6g,{unit:b?"minute":"day"},function(t){var e=b&&a&&a.safeComputeTop(t);return"number"===typeof e?(0,i.na4)(i.qc,{isAxis:!0,date:t},function(t,n,o,r){return(0,i.na4)("div",{ref:t,className:["fc-timegrid-now-indicator-arrow"].concat(n).join(" "),style:{top:e}},r)}):null})))}},{key:"cols",scrollerElRef:this.scrollerElRef,content:n}]}),g&&m.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:i.bLJ},{key:"cols",content:i.bLJ}]}),(0,i.na4)(i.q4f,{viewSpec:h.viewSpec,elRef:this.rootElRef},function(t,e){return(0,i.na4)("div",{className:["fc-timegrid"].concat(e).join(" "),ref:t},(0,i.na4)(c,{liquid:!f.isHeightAuto&&!f.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:o,minWidth:r}]}],sections:m}))})},e.prototype.getAllDayMaxEventProps=function(){var t=this.context.options,e=t.dayMaxEvents,n=t.dayMaxEventRows;return!0!==e&&!0!==n||(e=void 0,n=h),{dayMaxEvents:e,dayMaxEventRows:n}},e}(i.gzh);function p(t){return t.text}var g=function(){function t(t,e,n){this.positions=t,this.dateProfile=e,this.slotDuration=n}return t.prototype.safeComputeTop=function(t){var e=this.dateProfile;if((0,i.$Bw)(e.currentRange,t)){var n=(0,i.ol1)(t),o=t.valueOf()-n.valueOf();if(o>=(0,i.Oh8)(e.slotMinTime)&&o<(0,i.Oh8)(e.slotMaxTime))return this.computeTimeTop((0,i.xCT)(o))}return null},t.prototype.computeDateTop=function(t,e){return e||(e=(0,i.ol1)(t)),this.computeTimeTop((0,i.xCT)(t.valueOf()-e.valueOf()))},t.prototype.computeTimeTop=function(t){var e,n,o=this,r=o.positions,s=o.dateProfile,a=r.els.length,l=(t.milliseconds-(0,i.Oh8)(s.slotMinTime))/(0,i.Oh8)(this.slotDuration);return l=Math.max(0,l),l=Math.min(a,l),e=Math.floor(l),e=Math.min(e,a-1),n=l-e,r.tops[e]+r.getHeight(e)*n},t}(),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context,r=n.options,s=e.slatElRefs;return(0,i.na4)("tbody",null,e.slatMetas.map(function(t,a){var c={time:t.time,date:n.dateEnv.toDate(t.date),view:n.viewApi},u=["fc-timegrid-slot","fc-timegrid-slot-lane",t.isLabeled?"":"fc-timegrid-slot-minor"];return(0,i.na4)("tr",{key:t.key,ref:s.createRef(t.key)},e.axis&&(0,i.na4)(l,(0,o.Cl)({},t)),(0,i.na4)(i.iT7,{hookProps:c,classNames:r.slotLaneClassNames,content:r.slotLaneContent,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount},function(e,n,o,r){return(0,i.na4)("td",{ref:e,className:u.concat(n).join(" "),"data-time":t.isoTimeStr},r)}))}))},e}(i.$GR),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootElRef=(0,i._3b)(),e.slatElRefs=new i.kFN,e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.context;return(0,i.na4)("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},(0,i.na4)("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,(0,i.na4)(m,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))},e.prototype.componentDidMount=function(){this.updateSizing()},e.prototype.componentDidUpdate=function(){this.updateSizing()},e.prototype.componentWillUnmount=function(){this.props.onCoords&&this.props.onCoords(null)},e.prototype.updateSizing=function(){var t=this,e=t.context,n=t.props;if(n.onCoords&&null!==n.clientWidth){var o=this.rootElRef.current;o.offsetHeight&&n.onCoords(new g(new i.Qnh(this.rootElRef.current,v(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}},e}(i.$GR);function v(t,e){return e.map(function(e){return t[e.key]})}function w(t,e){var n,i=[];for(n=0;n<e;n+=1)i.push([]);if(t)for(n=0;n<t.length;n+=1)i[t[n].col].push(t[n]);return i}function _(t,e){var n=[];if(t){for(s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(var i=0,o=t.segs;i<o.length;i++){var r=o[i];n[r.col].segs.push(r)}}else for(var s=0;s<e;s+=1)n[s]=null;return n}var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootElRef=(0,i._3b)(),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this.props;return(0,i.na4)(i.knM,{allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,alignmentElRef:this.rootElRef,defaultContent:k,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:function(){return B(e.hiddenSegs,e)}},function(n,o,r,s,a,l,c,u){return(0,i.na4)("a",{ref:function(e){(0,i.cZi)(n,e),(0,i.cZi)(t.rootElRef,e)},className:["fc-timegrid-more-link"].concat(o).join(" "),style:{top:e.top,bottom:e.bottom},onClick:a,title:l,"aria-expanded":c,"aria-controls":u},(0,i.na4)("div",{ref:r,className:"fc-timegrid-more-link-inner fc-sticky"},s))})},e}(i.$GR);function k(t){return t.shortText}function C(t,e,n){var o=new i.XpW;null!=e&&(o.strictOrder=e),null!=n&&(o.maxStackCnt=n);var r=o.addSegs(t),s=(0,i.XbD)(r),a=x(o);a=P(a,1);var l=I(a);return{segRects:l,hiddenGroups:s}}function x(t){var e=t.entriesByLevel,n=R(function(t,e){return t+":"+e},function(i,r){var s=A(t,i,r),a=E(s,n),l=e[i][r];return[(0,o.Cl)((0,o.Cl)({},l),{nextLevelNodes:a[0]}),l.thickness+a[1]]});return E(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function E(t,e){if(!t)return[[],0];var n=t.level,i=t.lateralStart,o=t.lateralEnd,r=i,s=[];while(r<o)s.push(e(n,r)),r+=1;return s.sort(S),[s.map(T),s[0][1]]}function S(t,e){return e[1]-t[1]}function T(t){return t[0]}function A(t,e,n){for(var o=t.levelCoords,r=t.entriesByLevel,s=r[e][n],a=o[e]+s.thickness,l=o.length,c=e;c<l&&o[c]<a;c+=1);for(;c<l;c+=1){var u=r[c],d=void 0,h=(0,i.ElE)(u,s.span.start,i.m7H),f=h[0]+h[1],p=f;while((d=u[p])&&d.span.start<s.span.end)p+=1;if(f<p)return{level:c,lateralStart:f,lateralEnd:p}}return null}function P(t,e){var n=R(function(t,e,n){return(0,i.qAn)(t)},function(t,i,r){var s,a=t.nextLevelNodes,l=t.thickness,c=l+r,u=l/c,d=[];if(a.length)for(var h=0,f=a;h<f.length;h++){var p=f[h];if(void 0===s){var g=n(p,i,c);s=g[0],d.push(g[1])}else{g=n(p,s,0);d.push(g[1])}}else s=e;var m=(s-i)*u;return[s-m,(0,o.Cl)((0,o.Cl)({},t),{thickness:m,nextLevelNodes:d})]});return t.map(function(t){return n(t,0,0)[1]})}function I(t){var e=[],n=R(function(t,e,n){return(0,i.qAn)(t)},function(t,n,i){var s=(0,o.Cl)((0,o.Cl)({},t),{levelCoord:n,stackDepth:i,stackForward:0});return e.push(s),s.stackForward=r(t.nextLevelNodes,n+t.thickness,i+1)+1});function r(t,e,i){for(var o=0,r=0,s=t;r<s.length;r++){var a=s[r];o=Math.max(n(a,e,i),o)}return o}return r(t,0,0),e}function R(t,e){var n={};return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var r=t.apply(void 0,i);return r in n?n[r]:n[r]=e.apply(void 0,i)}}function O(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=0);var o=[];if(n)for(var r=0;r<t.length;r+=1){var s=t[r],a=n.computeDateTop(s.start,e),l=Math.max(a+(i||0),n.computeDateTop(s.end,e));o.push({start:Math.round(a),end:Math.round(l)})}return o}function M(t,e,n,i){for(var o=[],r=[],s=0;s<t.length;s+=1){var a=e[s];a?o.push({index:s,thickness:1,span:a}):r.push(t[s])}for(var l=C(o,n,i),c=l.segRects,u=l.hiddenGroups,d=[],h=0,f=c;h<f.length;h++){var p=f[h];d.push({seg:t[p.index],rect:p})}for(var g=0,m=r;g<m.length;g++){var b=m[g];d.push({seg:b,rect:null})}return{segPlacements:d,hiddenGroups:u}}var D=(0,i.xi1)({hour:"numeric",minute:"2-digit",meridiem:!1}),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){var t=["fc-timegrid-event","fc-v-event"];return this.props.isShort&&t.push("fc-timegrid-event-short"),(0,i.na4)(i.y8j,(0,o.Cl)({},this.props,{defaultTimeFormat:D,extraClassNames:t}))},e}(i.$GR),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this.props;return(0,i.na4)(i.ux1,{date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,extraHookProps:t.extraHookProps},function(t,e){return e&&(0,i.na4)("div",{className:"fc-timegrid-col-misc",ref:t},e)})},e}(i.$GR),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortEventSegs=(0,i.BjF)(i.B4w),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this,n=e.props,r=e.context,s=r.options.selectMirror,a=n.eventDrag&&n.eventDrag.segs||n.eventResize&&n.eventResize.segs||s&&n.dateSelectionSegs||[],l=n.eventDrag&&n.eventDrag.affectedInstances||n.eventResize&&n.eventResize.affectedInstances||{},c=this.sortEventSegs(n.fgEventSegs,r.options.eventOrder);return(0,i.na4)(i.rrN,{elRef:n.elRef,date:n.date,dateProfile:n.dateProfile,todayRange:n.todayRange,extraHookProps:n.extraHookProps},function(e,r,u){return(0,i.na4)("td",(0,o.Cl)({ref:e,role:"gridcell",className:["fc-timegrid-col"].concat(r,n.extraClassNames||[]).join(" ")},u,n.extraDataAttrs),(0,i.na4)("div",{className:"fc-timegrid-col-frame"},(0,i.na4)("div",{className:"fc-timegrid-col-bg"},t.renderFillSegs(n.businessHourSegs,"non-business"),t.renderFillSegs(n.bgEventSegs,"bg-event"),t.renderFillSegs(n.dateSelectionSegs,"highlight")),(0,i.na4)("div",{className:"fc-timegrid-col-events"},t.renderFgSegs(c,l,!1,!1,!1)),(0,i.na4)("div",{className:"fc-timegrid-col-events"},t.renderFgSegs(a,{},Boolean(n.eventDrag),Boolean(n.eventResize),Boolean(s))),(0,i.na4)("div",{className:"fc-timegrid-now-indicator-container"},t.renderNowIndicator(n.nowIndicatorSegs)),(0,i.na4)(N,{date:n.date,dateProfile:n.dateProfile,todayRange:n.todayRange,extraHookProps:n.extraHookProps})))})},e.prototype.renderFgSegs=function(t,e,n,i,o){var r=this.props;return r.forPrint?B(t,r):this.renderPositionedFgSegs(t,e,n,i,o)},e.prototype.renderPositionedFgSegs=function(t,e,n,r,s){var a=this,l=this.context.options,c=l.eventMaxStack,u=l.eventShortHeight,d=l.eventOrderStrict,h=l.eventMinHeight,f=this.props,p=f.date,g=f.slatCoords,m=f.eventSelection,b=f.todayRange,v=f.nowDate,w=n||r||s,_=O(t,p,g,h),y=M(t,_,d,c),k=y.segPlacements,C=y.hiddenGroups;return(0,i.na4)(i.FK,null,this.renderHiddenGroups(C,t),k.map(function(t){var l=t.seg,c=t.rect,d=l.eventRange.instance.instanceId,h=w||Boolean(!e[d]&&c),f=F(c&&c.span),p=!w&&c?a.computeSegHStyle(c):{left:0,right:0},g=Boolean(c)&&c.stackForward>0,_=Boolean(c)&&c.span.end-c.span.start<u;return(0,i.na4)("div",{className:"fc-timegrid-event-harness"+(g?" fc-timegrid-event-harness-inset":""),key:d,style:(0,o.Cl)((0,o.Cl)({visibility:h?"":"hidden"},f),p)},(0,i.na4)(V,(0,o.Cl)({seg:l,isDragging:n,isResizing:r,isDateSelecting:s,isSelected:d===m,isShort:_},(0,i.F29)(l,b,v))))}))},e.prototype.renderHiddenGroups=function(t,e){var n=this.props,o=n.extraDateSpan,r=n.dateProfile,s=n.todayRange,a=n.nowDate,l=n.eventSelection,c=n.eventDrag,u=n.eventResize;return(0,i.na4)(i.FK,null,t.map(function(t){var n=F(t.span),d=z(t.entries,e);return(0,i.na4)(y,{key:(0,i.NIT)((0,i.aQG)(d)),hiddenSegs:d,top:n.top,bottom:n.bottom,extraDateSpan:o,dateProfile:r,todayRange:s,nowDate:a,eventSelection:l,eventDrag:c,eventResize:u})}))},e.prototype.renderFillSegs=function(t,e){var n=this,r=n.props,s=n.context,a=O(t,r.date,r.slatCoords,s.options.eventMinHeight),l=a.map(function(n,s){var a=t[s];return(0,i.na4)("div",{key:(0,i.N8)(a.eventRange),className:"fc-timegrid-bg-harness",style:F(n)},"bg-event"===e?(0,i.na4)(i.s_G,(0,o.Cl)({seg:a},(0,i.F29)(a,r.todayRange,r.nowDate))):(0,i.aOA)(e))});return(0,i.na4)(i.FK,null,l)},e.prototype.renderNowIndicator=function(t){var e=this.props,n=e.slatCoords,o=e.date;return n?t.map(function(t,e){return(0,i.na4)(i.qc,{isAxis:!1,date:o,key:e},function(e,r,s,a){return(0,i.na4)("div",{ref:e,className:["fc-timegrid-now-indicator-line"].concat(r).join(" "),style:{top:n.computeDateTop(t.start,o)}},a)})}):null},e.prototype.computeSegHStyle=function(t){var e,n,i=this.context,o=i.isRtl,r=i.options,s=r.slotEventOverlap,a=t.levelCoord,l=t.levelCoord+t.thickness;s&&(l=Math.min(1,a+2*(l-a))),o?(e=1-l,n=a):(e=a,n=1-l);var c={zIndex:t.stackDepth+1,left:100*e+"%",right:100*n+"%"};return s&&!t.stackForward&&(c[o?"marginLeft":"marginRight"]=20),c},e}(i.$GR);function B(t,e){var n=e.todayRange,r=e.nowDate,s=e.eventSelection,a=e.eventDrag,l=e.eventResize,c=(a?a.affectedInstances:null)||(l?l.affectedInstances:null)||{};return(0,i.na4)(i.FK,null,t.map(function(t){var e=t.eventRange.instance.instanceId;return(0,i.na4)("div",{key:e,style:{visibility:c[e]?"hidden":""}},(0,i.na4)(V,(0,o.Cl)({seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:e===s,isShort:!1},(0,i.F29)(t,n,r))))}))}function F(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function z(t,e){return t.map(function(t){return e[t.index]})}var H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.splitFgEventSegs=(0,i.BjF)(w),e.splitBgEventSegs=(0,i.BjF)(w),e.splitBusinessHourSegs=(0,i.BjF)(w),e.splitNowIndicatorSegs=(0,i.BjF)(w),e.splitDateSelectionSegs=(0,i.BjF)(w),e.splitEventDrag=(0,i.BjF)(_),e.splitEventResize=(0,i.BjF)(_),e.rootElRef=(0,i._3b)(),e.cellElRefs=new i.kFN,e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this,n=e.props,o=e.context,r=o.options.nowIndicator&&n.slatCoords&&n.slatCoords.safeComputeTop(n.nowDate),s=n.cells.length,a=this.splitFgEventSegs(n.fgEventSegs,s),l=this.splitBgEventSegs(n.bgEventSegs,s),c=this.splitBusinessHourSegs(n.businessHourSegs,s),u=this.splitNowIndicatorSegs(n.nowIndicatorSegs,s),d=this.splitDateSelectionSegs(n.dateSelectionSegs,s),h=this.splitEventDrag(n.eventDrag,s),f=this.splitEventResize(n.eventResize,s);return(0,i.na4)("div",{className:"fc-timegrid-cols",ref:this.rootElRef},(0,i.na4)("table",{role:"presentation",style:{minWidth:n.tableMinWidth,width:n.clientWidth}},n.tableColGroupNode,(0,i.na4)("tbody",{role:"presentation"},(0,i.na4)("tr",{role:"row"},n.axis&&(0,i.na4)("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},(0,i.na4)("div",{className:"fc-timegrid-col-frame"},(0,i.na4)("div",{className:"fc-timegrid-now-indicator-container"},"number"===typeof r&&(0,i.na4)(i.qc,{isAxis:!0,date:n.nowDate},function(t,e,n,o){return(0,i.na4)("div",{ref:t,className:["fc-timegrid-now-indicator-arrow"].concat(e).join(" "),style:{top:r}},o)})))),n.cells.map(function(e,o){return(0,i.na4)(L,{key:e.key,elRef:t.cellElRefs.createRef(e.key),dateProfile:n.dateProfile,date:e.date,nowDate:n.nowDate,todayRange:n.todayRange,extraHookProps:e.extraHookProps,extraDataAttrs:e.extraDataAttrs,extraClassNames:e.extraClassNames,extraDateSpan:e.extraDateSpan,fgEventSegs:a[o],bgEventSegs:l[o],businessHourSegs:c[o],nowIndicatorSegs:u[o],dateSelectionSegs:d[o],eventDrag:h[o],eventResize:f[o],slatCoords:n.slatCoords,eventSelection:n.eventSelection,forPrint:n.forPrint})})))))},e.prototype.componentDidMount=function(){this.updateCoords()},e.prototype.componentDidUpdate=function(){this.updateCoords()},e.prototype.updateCoords=function(){var t=this.props;t.onColCoords&&null!==t.clientWidth&&t.onColCoords(new i.Qnh(this.rootElRef.current,W(this.cellElRefs.currentMap,t.cells),!0,!1))},e}(i.$GR);function W(t,e){return e.map(function(e){return t[e.key]})}var j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processSlotOptions=(0,i.BjF)($),e.state={slatCoords:null},e.handleRootEl=function(t){t?e.context.registerInteractiveComponent(e,{el:t,isHitComboAllowed:e.props.isHitComboAllowed}):e.context.unregisterInteractiveComponent(e)},e.handleScrollRequest=function(t){var n=e.props.onScrollTopRequest,i=e.state.slatCoords;if(n&&i){if(t.time){var o=i.computeTimeTop(t.time);o=Math.ceil(o),o&&(o+=1),n(o)}return!0}return!1},e.handleColCoords=function(t){e.colCoords=t},e.handleSlatCoords=function(t){e.setState({slatCoords:t}),e.props.onSlatCoords&&e.props.onSlatCoords(t)},e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=t.props,n=t.state;return(0,i.na4)("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},(0,i.na4)(b,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),(0,i.na4)(H,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))},e.prototype.componentDidMount=function(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)},e.prototype.componentDidUpdate=function(t){this.scrollResponder.update(t.dateProfile!==this.props.dateProfile)},e.prototype.componentWillUnmount=function(){this.scrollResponder.detach()},e.prototype.queryHit=function(t,e){var n=this.context,r=n.dateEnv,s=n.options,a=this.colCoords,l=this.props.dateProfile,c=this.state.slatCoords,u=this.processSlotOptions(this.props.slotDuration,s.snapDuration),d=u.snapDuration,h=u.snapsPerSlot,f=a.leftToIndex(t),p=c.positions.topToIndex(e);if(null!=f&&null!=p){var g=this.props.cells[f],m=c.positions.tops[p],b=c.positions.getHeight(p),v=(e-m)/b,w=Math.floor(v*h),_=p*h+w,y=this.props.cells[f].date,k=(0,i.do1)(l.slotMinTime,(0,i.Nay)(d,_)),C=r.add(y,k),x=r.add(C,d);return{dateProfile:l,dateSpan:(0,o.Cl)({range:{start:C,end:x},allDay:!1},g.extraDateSpan),dayEl:a.els[f],rect:{left:a.lefts[f],right:a.rights[f],top:m,bottom:m+b},layer:0}}return null},e}(i.gzh);function $(t,e){var n=e||t,o=(0,i.Y2k)(t,n);return null===o&&(n=t,o=1),{snapDuration:n,snapsPerSlot:o}}var U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.C6)(e,t),e.prototype.sliceRange=function(t,e){for(var n=[],o=0;o<e.length;o+=1){var r=(0,i.imr)(t,e[o]);r&&n.push({start:r.start,end:r.end,isStart:r.start.valueOf()===t.start.valueOf(),isEnd:r.end.valueOf()===t.end.valueOf(),col:o})}return n},e}(i.$He),q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildDayRanges=(0,i.BjF)(G),e.slicer=new U,e.timeColsRef=(0,i._3b)(),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this,n=e.props,r=e.context,s=n.dateProfile,a=n.dayTableModel,l=r.options.nowIndicator,c=this.buildDayRanges(a,s,r.dateEnv);return(0,i.na4)(i.O6g,{unit:l?"minute":"day"},function(e,u){return(0,i.na4)(j,(0,o.Cl)({ref:t.timeColsRef},t.slicer.sliceProps(n,s,null,r,c),{forPrint:n.forPrint,axis:n.axis,dateProfile:s,slatMetas:n.slatMetas,slotDuration:n.slotDuration,cells:a.cells[0],tableColGroupNode:n.tableColGroupNode,tableMinWidth:n.tableMinWidth,clientWidth:n.clientWidth,clientHeight:n.clientHeight,expandRows:n.expandRows,nowDate:e,nowIndicatorSegs:l&&t.slicer.sliceNowDate(e,r,c),todayRange:u,onScrollTopRequest:n.onScrollTopRequest,onSlatCoords:n.onSlatCoords}))})},e}(i.gzh);function G(t,e,n){for(var i=[],o=0,r=t.headerDates;o<r.length;o++){var s=r[o];i.push({start:n.add(s,e.slotMinTime),end:n.add(s,e.slotMaxTime)})}return i}var K=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Y(t,e,n,o,r){var s=new Date(0),a=t,l=(0,i.xCT)(0),c=n||X(o),u=[];while((0,i.Oh8)(a)<(0,i.Oh8)(e)){var d=r.add(s,a),h=null!==(0,i.Y2k)(l,c);u.push({date:d,time:a,key:d.toISOString(),isoTimeStr:(0,i.PeH)(d),isLabeled:h}),a=(0,i.do1)(a,o),l=(0,i.do1)(l,o)}return u}function X(t){var e,n,o;for(e=K.length-1;e>=0;e-=1)if(n=(0,i.xCT)(K[e]),o=(0,i.Y2k)(n,t),null!==o&&o>1)return n;return t}var J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildTimeColsModel=(0,i.BjF)(Z),e.buildSlatMetas=(0,i.BjF)(Y),e}return(0,o.C6)(e,t),e.prototype.render=function(){var t=this,e=this.context,n=e.options,s=e.dateEnv,a=e.dateProfileGenerator,l=this.props,c=l.dateProfile,u=this.buildTimeColsModel(c,a),d=this.allDaySplitter.splitProps(l),h=this.buildSlatMetas(c.slotMinTime,c.slotMaxTime,n.slotLabelInterval,n.slotDuration,s),f=n.dayMinWidth,p=!f,g=f,m=n.dayHeaders&&(0,i.na4)(i.A1b,{dates:u.headerDates,dateProfile:c,datesRepDistinctDays:!0,renderIntro:p?this.renderHeadAxis:null}),b=!1!==n.allDaySlot&&function(e){return(0,i.na4)(r.t7,(0,o.Cl)({},d.allDay,{dateProfile:c,dayTableModel:u,nextDayThreshold:n.nextDayThreshold,tableMinWidth:e.tableMinWidth,colGroupNode:e.tableColGroupNode,renderRowIntro:p?t.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:t.headerElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:l.forPrint},t.getAllDayMaxEventProps()))},v=function(e){return(0,i.na4)(q,(0,o.Cl)({},d.timed,{dayTableModel:u,dateProfile:c,axis:p,slotDuration:n.slotDuration,slatMetas:h,forPrint:l.forPrint,tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,onSlatCoords:t.handleSlatCoords,expandRows:e.expandRows,onScrollTopRequest:t.handleScrollTopRequest}))};return g?this.renderHScrollLayout(m,b,v,u.colCnt,f,h,this.state.slatCoords):this.renderSimpleLayout(m,b,v)},e}(f);function Z(t,e){var n=new i.NC_(t.renderRange,e);return new i.mql(n,!1)}var Q={allDaySlot:Boolean},tt=(0,i.i1g)({initialView:"timeGridWeek",optionRefiners:Q,views:{timeGrid:{component:J,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});e.Ay=tt},7485:function(t,e,n){"use strict";var i=n(8420),o=n(3610),r=n(8218),s=n(9430);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&r(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},7632:function(t,e,n){"use strict";var i=n(5077),o=n(2368),r=n(9304),s=n(6843),a=n(5476),l=n(6032),c=n(6490),u=n(7694),d=Object.getOwnPropertyDescriptor;e.f=i?d:function(t,e){if(t=a(t),e=l(e),u)try{return d(t,e)}catch(n){}if(c(t,e))return s(!o(r.f,t,e),t[e])}},7658:function(t,e,n){"use strict";var i=n(281);t.exports=i({}.isPrototypeOf)},7694:function(t,e,n){"use strict";var i=n(5077),o=n(2074),r=n(3262);t.exports=!i&&!o(function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},7708:function(t){"use strict";t.exports={}},7712:function(t,e,n){"use strict";var i=n(5077),o=n(3610),r=n(6843);t.exports=i?function(t,e,n){return o.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},7970:function(t,e,n){"use strict";var i=n(6490),o=n(8420),r=n(2612),s=n(5904),a=n(7168),l=s("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=r(t);if(i(e,l))return e[l];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof c?u:null}},8186:function(t,e,n){"use strict";var i=n(5476),o=n(6539),r=n(3493),s=function(t){return function(e,n,s){var a,l=i(e),c=r(l),u=o(s,c);if(t&&n!==n){while(c>u)if(a=l[u++],a!==a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},8218:function(t,e,n){"use strict";var i=n(281),o=n(2074),r=n(8420),s=n(6490),a=n(5077),l=n(2071).CONFIGURABLE,c=n(9965),u=n(9206),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,g=i("".slice),m=i("".replace),b=i([].join),v=a&&!o(function(){return 8!==p(function(){},"length",{value:8}).length}),w=String(String).split("String"),_=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(o){}var i=d(t);return s(i,"source")||(i.source=b(w,"string"==typeof e?e:"")),t};Function.prototype.toString=_(function(){return r(this)&&h(this).source||c(this)},"toString")},8293:function(t,e,n){"use strict";
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function i(t){return t+.5|0}n.d(e,{Ay:function(){return Nc}});const o=(t,e,n)=>Math.max(Math.min(t,n),e);function r(t){return o(i(2.55*t),0,255)}function s(t){return o(i(255*t),0,255)}function a(t){return o(i(t/2.55)/100,0,1)}function l(t){return o(i(100*t),0,100)}const c={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u=[..."0123456789ABCDEF"],d=t=>u[15&t],h=t=>u[(240&t)>>4]+u[15&t],f=t=>(240&t)>>4===(15&t),p=t=>f(t.r)&&f(t.g)&&f(t.b)&&f(t.a);function g(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*c[t[1]],g:255&17*c[t[2]],b:255&17*c[t[3]],a:5===n?17*c[t[4]]:255}:7!==n&&9!==n||(e={r:c[t[1]]<<4|c[t[2]],g:c[t[3]]<<4|c[t[4]],b:c[t[5]]<<4|c[t[6]],a:9===n?c[t[7]]<<4|c[t[8]]:255})),e}const m=(t,e)=>t<255?e(t):"";function b(t){var e=p(t)?d:h;return t?"#"+e(t.r)+e(t.g)+e(t.b)+m(t.a,e):void 0}const v=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function w(t,e,n){const i=e*Math.min(n,1-n),o=(e,o=(e+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function _(t,e,n){const i=(i,o=(i+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function y(t,e,n){const i=w(t,1,.5);let o;for(e+n>1&&(o=1/(e+n),e*=o,n*=o),o=0;o<3;o++)i[o]*=1-e-n,i[o]+=e;return i}function k(t,e,n,i,o){return t===o?(e-n)/i+(e<n?6:0):e===o?(n-t)/i+2:(t-e)/i+4}function C(t){const e=255,n=t.r/e,i=t.g/e,o=t.b/e,r=Math.max(n,i,o),s=Math.min(n,i,o),a=(r+s)/2;let l,c,u;return r!==s&&(u=r-s,c=a>.5?u/(2-r-s):u/(r+s),l=k(n,i,o,u,r),l=60*l+.5),[0|l,c||0,a]}function x(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(s)}function E(t,e,n){return x(w,t,e,n)}function S(t,e,n){return x(y,t,e,n)}function T(t,e,n){return x(_,t,e,n)}function A(t){return(t%360+360)%360}function P(t){const e=v.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?r(+e[5]):s(+e[5]));const o=A(+e[2]),a=+e[3]/100,l=+e[4]/100;return n="hwb"===e[1]?S(o,a,l):"hsv"===e[1]?T(o,a,l):E(o,a,l),{r:n[0],g:n[1],b:n[2],a:i}}function I(t,e){var n=C(t);n[0]=A(n[0]+e),n=E(n),t.r=n[0],t.g=n[1],t.b=n[2]}function R(t){if(!t)return;const e=C(t),n=e[0],i=l(e[1]),o=l(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${o}%, ${a(t.a)})`:`hsl(${n}, ${i}%, ${o}%)`}const O={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},M={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D(){const t={},e=Object.keys(M),n=Object.keys(O);let i,o,r,s,a;for(i=0;i<e.length;i++){for(s=a=e[i],o=0;o<n.length;o++)r=n[o],a=a.replace(r,O[r]);r=parseInt(M[s],16),t[a]=[r>>16&255,r>>8&255,255&r]}return t}let V;function N(t){V||(V=D(),V.transparent=[0,0,0,0]);const e=V[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const L=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function B(t){const e=L.exec(t);let n,i,s,a=255;if(e){if(e[7]!==n){const t=+e[7];a=e[8]?r(t):o(255*t,0,255)}return n=+e[1],i=+e[3],s=+e[5],n=255&(e[2]?r(n):o(n,0,255)),i=255&(e[4]?r(i):o(i,0,255)),s=255&(e[6]?r(s):o(s,0,255)),{r:n,g:i,b:s,a:a}}}function F(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${a(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const z=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,H=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function W(t,e,n){const i=H(a(t.r)),o=H(a(t.g)),r=H(a(t.b));return{r:s(z(i+n*(H(a(e.r))-i))),g:s(z(o+n*(H(a(e.g))-o))),b:s(z(r+n*(H(a(e.b))-r))),a:t.a+n*(e.a-t.a)}}function j(t,e,n){if(t){let i=C(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=E(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function $(t,e){return t?Object.assign(e||{},t):t}function U(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=s(t[3]))):(e=$(t,{r:0,g:0,b:0,a:1}),e.a=s(e.a)),e}function q(t){return"r"===t.charAt(0)?B(t):P(t)}class G{constructor(t){if(t instanceof G)return t;const e=typeof t;let n;"object"===e?n=U(t):"string"===e&&(n=g(t)||N(t)||q(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=$(this._rgb);return t&&(t.a=a(t.a)),t}set rgb(t){this._rgb=U(t)}rgbString(){return this._valid?F(this._rgb):void 0}hexString(){return this._valid?b(this._rgb):void 0}hslString(){return this._valid?R(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let o;const r=e===o?.5:e,s=2*r-1,a=n.a-i.a,l=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;o=1-l,n.r=255&l*n.r+o*i.r+.5,n.g=255&l*n.g+o*i.g+.5,n.b=255&l*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=W(this._rgb,t._rgb,e)),this}clone(){return new G(this.rgb)}alpha(t){return this._rgb.a=s(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=i(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return j(this._rgb,2,t),this}darken(t){return j(this._rgb,2,-t),this}saturate(t){return j(this._rgb,1,t),this}desaturate(t){return j(this._rgb,1,-t),this}rotate(t){return I(this._rgb,t),this}}
/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
function K(){}const Y=(()=>{let t=0;return()=>t++})();function X(t){return null===t||"undefined"===typeof t}function J(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Z(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Q(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function tt(t,e){return Q(t)?t:e}function et(t,e){return"undefined"===typeof t?e:t}const nt=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,it=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ot(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function rt(t,e,n,i){let o,r,s;if(J(t))if(r=t.length,i)for(o=r-1;o>=0;o--)e.call(n,t[o],o);else for(o=0;o<r;o++)e.call(n,t[o],o);else if(Z(t))for(s=Object.keys(t),r=s.length,o=0;o<r;o++)e.call(n,t[s[o]],s[o])}function st(t,e){let n,i,o,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(o=t[n],r=e[n],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function at(t){if(J(t))return t.map(at);if(Z(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let o=0;for(;o<i;++o)e[n[o]]=at(t[n[o]]);return e}return t}function lt(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ct(t,e,n,i){if(!lt(t))return;const o=e[t],r=n[t];Z(o)&&Z(r)?ut(o,r,i):e[t]=at(r)}function ut(t,e,n){const i=J(e)?e:[e],o=i.length;if(!Z(t))return t;n=n||{};const r=n.merger||ct;let s;for(let a=0;a<o;++a){if(s=i[a],!Z(s))continue;const e=Object.keys(s);for(let i=0,o=e.length;i<o;++i)r(e[i],t,s,n)}return t}function dt(t,e){return ut(t,e,{merger:ht})}function ht(t,e,n){if(!lt(t))return;const i=e[t],o=n[t];Z(i)&&Z(o)?dt(i,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=at(o))}const ft={"":t=>t,x:t=>t.x,y:t=>t.y};function pt(t){const e=t.split("."),n=[];let i="";for(const o of e)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function gt(t){const e=pt(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}function mt(t,e){const n=ft[e]||(ft[e]=gt(e));return n(t)}function bt(t){return t.charAt(0).toUpperCase()+t.slice(1)}const vt=t=>"undefined"!==typeof t,wt=t=>"function"===typeof t,_t=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function yt(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const kt=Math.PI,Ct=2*kt,xt=Ct+kt,Et=Number.POSITIVE_INFINITY,St=kt/180,Tt=kt/2,At=kt/4,Pt=2*kt/3,It=Math.log10,Rt=Math.sign;function Ot(t,e,n){return Math.abs(t-e)<n}function Mt(t){const e=Math.round(t);t=Ot(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(It(t))),i=t/n,o=i<=1?1:i<=2?2:i<=5?5:10;return o*n}function Dt(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}function Vt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Nt(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Lt(t,e,n){let i,o,r;for(i=0,o=t.length;i<o;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Bt(t){return t*(kt/180)}function Ft(t){return t*(180/kt)}function zt(t){if(!Q(t))return;let e=1,n=0;while(Math.round(t*e)/e!==t)e*=10,n++;return n}function Ht(t,e){const n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*kt&&(r+=Ct),{angle:r,distance:o}}function Wt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jt(t,e){return(t-e+xt)%Ct-kt}function $t(t){return(t%Ct+Ct)%Ct}function Ut(t,e,n,i){const o=$t(t),r=$t(e),s=$t(n),a=$t(r-o),l=$t(s-o),c=$t(o-r),u=$t(o-s);return o===r||o===s||i&&r===s||a>l&&c<u}function qt(t,e,n){return Math.max(e,Math.min(n,t))}function Gt(t){return qt(t,-32768,32767)}function Kt(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Yt(t,e,n){n=n||(n=>t[n]<e);let i,o=t.length-1,r=0;while(o-r>1)i=r+o>>1,n(i)?r=i:o=i;return{lo:r,hi:o}}const Xt=(t,e,n,i)=>Yt(t,n,i?i=>{const o=t[i][e];return o<n||o===n&&t[i+1][e]===n}:i=>t[i][e]<n),Jt=(t,e,n)=>Yt(t,n,i=>t[i][e]>=n);function Zt(t,e,n){let i=0,o=t.length;while(i<o&&t[i]<e)i++;while(o>i&&t[o-1]>n)o--;return i>0||o<t.length?t.slice(i,o):t}const Qt=["push","pop","shift","splice","unshift"];function te(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Qt.forEach(e=>{const n="_onData"+bt(e),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const o=i.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"===typeof t[n]&&t[n](...e)}),o}})}))}function ee(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(e);-1!==o&&i.splice(o,1),i.length>0||(Qt.forEach(e=>{delete t[e]}),delete t._chartjs)}function ne(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ie=function(){return"undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame}();function oe(t,e){let n=[],i=!1;return function(...o){n=o,i||(i=!0,ie.call(window,()=>{i=!1,t.apply(e,n)}))}}function re(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const se=t=>"start"===t?"left":"end"===t?"right":"center",ae=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,le=(t,e,n,i)=>{const o=i?"left":"right";return t===o?n:"center"===t?(e+n)/2:e};function ce(t,e,n){const i=e.length;let o=0,r=i;if(t._sorted){const{iScale:s,_parsed:a}=t,l=s.axis,{min:c,max:u,minDefined:d,maxDefined:h}=s.getUserBounds();d&&(o=qt(Math.min(Xt(a,l,c).lo,n?i:Xt(e,l,s.getPixelForValue(c)).lo),0,i-1)),r=h?qt(Math.max(Xt(a,s.axis,u,!0).hi+1,n?0:Xt(e,l,s.getPixelForValue(u),!0).hi+1),o,i)-o:i-o}return{start:o,count:r}}function ue(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,o={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=o,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),r}const de=t=>0===t||1===t,he=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ct/n),fe=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ct/n)+1,pe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Tt),easeOutSine:t=>Math.sin(t*Tt),easeInOutSine:t=>-.5*(Math.cos(kt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>de(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>de(t)?t:he(t,.075,.3),easeOutElastic:t=>de(t)?t:fe(t,.075,.3),easeInOutElastic(t){const e=.1125,n=.45;return de(t)?t:t<.5?.5*he(2*t,e,n):.5+.5*fe(2*t-1,e,n)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-pe.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*pe.easeInBounce(2*t):.5*pe.easeOutBounce(2*t-1)+.5};function ge(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function me(t){return ge(t)?t:new G(t)}function be(t){return ge(t)?t:new G(t).saturate(.5).darken(.1).hexString()}const ve=["x","y","borderWidth","radius","tension"],we=["color","borderColor","backgroundColor"];function _e(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:we},numbers:{type:"number",properties:ve}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})}function ye(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ke=new Map;function Ce(t,e){e=e||{};const n=t+JSON.stringify(e);let i=ke.get(n);return i||(i=new Intl.NumberFormat(t,e),ke.set(n,i)),i}function xe(t,e,n){return Ce(e,n).format(t)}const Ee={values(t){return J(t)?t:""+t},numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let o,r=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),r=Se(t,n)}const s=It(Math.abs(r)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),xe(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(It(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Ee.numeric.call(this,t,e,n):""}};function Se(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Te={formatters:Ee};function Ae(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Te.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}const Pe=Object.create(null),Ie=Object.create(null);function Re(t,e){if(!e)return t;const n=e.split(".");for(let i=0,o=n.length;i<o;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function Oe(t,e,n){return"string"===typeof e?ut(Re(t,e),n):ut(Re(t,""),e)}class Me{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>be(e.backgroundColor),this.hoverBorderColor=(t,e)=>be(e.borderColor),this.hoverColor=(t,e)=>be(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Oe(this,t,e)}get(t){return Re(this,t)}describe(t,e){return Oe(Ie,t,e)}override(t,e){return Oe(Pe,t,e)}route(t,e,n,i){const o=Re(this,t),r=Re(this,n),s="_"+e;Object.defineProperties(o,{[s]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=r[i];return Z(t)?Object.assign({},e,t):et(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach(t=>t(this))}}var De=new Me({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_e,ye,Ae]);function Ve(t){return!t||X(t.size)||X(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ne(t,e,n,i,o){let r=e[o];return r||(r=e[o]=t.measureText(o).width,n.push(o)),r>i&&(i=r),i}function Le(t,e,n,i){i=i||{};let o=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(o=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],void 0===d||null===d||J(d)){if(J(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||J(h)||(s=Ne(t,o,r,s,h))}else s=Ne(t,o,r,s,d);t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete o[r[l]];r.splice(0,f)}return s}function Be(t,e,n){const i=t.currentDevicePixelRatio,o=0!==n?Math.max(n/2,.5):0;return Math.round((e-o)*i)/i+o}function Fe(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function ze(t,e,n,i){He(t,e,n,i,null)}function He(t,e,n,i,o){let r,s,a,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*St;if(f&&"object"===typeof f&&(r=f.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:o?t.ellipse(n,i,o/2,g,0,0,Ct):t.arc(n,i,g,0,Ct),t.closePath();break;case"triangle":u=o?o/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Pt,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Pt,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,s=Math.cos(m+At)*l,d=Math.cos(m+At)*(o?o/2-c:l),a=Math.sin(m+At)*l,h=Math.sin(m+At)*(o?o/2-c:l),t.arc(n-d,i-a,c,m-kt,m-Tt),t.arc(n+h,i-s,c,m-Tt,m),t.arc(n+d,i+a,c,m,m+Tt),t.arc(n-h,i+s,c,m+Tt,m+kt),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=o?o/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=At;case"rectRot":d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),t.moveTo(n-d,i-a),t.lineTo(n+h,i-s),t.lineTo(n+d,i+a),t.lineTo(n-h,i+s),t.closePath();break;case"crossRot":m+=At;case"cross":d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s);break;case"star":d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s),m+=At,d=Math.cos(m)*(o?o/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(o?o/2:g),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s);break;case"line":s=o?o/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-s,i-a),t.lineTo(n+s,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(o?o/2:g),i+Math.sin(m)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function We(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function je(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function $e(t){t.restore()}function Ue(t,e,n,i,o){if(!e)return t.lineTo(n.x,n.y);if("middle"===o){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===o!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function qe(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Ge(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),X(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ke(t,e,n,i,o){if(o.strikethrough||o.underline){const r=t.measureText(i),s=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function Ye(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xe(t,e,n,i,o,r={}){const s=J(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(t.save(),t.font=o.string,Ge(t,r),l=0;l<s.length;++l)c=s[l],r.backdrop&&Ye(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),X(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),Ke(t,n,i,c,r),i+=Number(o.lineHeight);t.restore()}function Je(t,e){const{x:n,y:i,w:o,h:r,radius:s}=e;t.arc(n+s.topLeft,i+s.topLeft,s.topLeft,1.5*kt,kt,!0),t.lineTo(n,i+r-s.bottomLeft),t.arc(n+s.bottomLeft,i+r-s.bottomLeft,s.bottomLeft,kt,Tt,!0),t.lineTo(n+o-s.bottomRight,i+r),t.arc(n+o-s.bottomRight,i+r-s.bottomRight,s.bottomRight,Tt,0,!0),t.lineTo(n+o,i+s.topRight),t.arc(n+o-s.topRight,i+s.topRight,s.topRight,0,-Tt,!0),t.lineTo(n+s.topLeft,i)}const Ze=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Qe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tn(t,e){const n=(""+t).match(Ze);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const en=t=>+t||0;function nn(t,e){const n={},i=Z(e),o=i?Object.keys(e):e,r=Z(t)?i?n=>et(t[n],t[e[n]]):e=>t[e]:()=>t;for(const s of o)n[s]=en(r(s));return n}function on(t){return nn(t,{top:"y",right:"x",bottom:"y",left:"x"})}function rn(t){return nn(t,["topLeft","topRight","bottomLeft","bottomRight"])}function sn(t){const e=on(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function an(t,e){t=t||{},e=e||De.font;let n=et(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=et(t.style,e.style);i&&!(""+i).match(Qe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:et(t.family,e.family),lineHeight:tn(et(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:et(t.weight,e.weight),string:""};return o.string=Ve(o),o}function ln(t,e,n,i){let o,r,s,a=!0;for(o=0,r=t.length;o<r;++o)if(s=t[o],void 0!==s&&(void 0!==e&&"function"===typeof s&&(s=s(e),a=!1),void 0!==n&&J(s)&&(s=s[n%s.length],a=!1),void 0!==s))return i&&!a&&(i.cacheable=!1),s}function cn(t,e,n){const{min:i,max:o}=t,r=it(e,(o-i)/2),s=(t,e)=>n&&0===t?0:t+e;return{min:s(i,-Math.abs(r)),max:s(o,r)}}function un(t,e){return Object.assign(Object.create(t),e)}function dn(t,e=[""],n,i,o=()=>t[0]){const r=n||t;"undefined"===typeof i&&(i=Tn("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:o,override:n=>dn([n,...t],e,r,i)};return new Proxy(s,{deleteProperty(e,n){return delete e[n],delete e._keys,delete t[0][n],!0},get(n,i){return mn(n,i,()=>Sn(i,e,t,n))},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(t,e){return An(t).includes(e)},ownKeys(t){return An(t)},set(t,e,n){const i=t._storage||(t._storage=o());return t[e]=i[e]=n,delete t._keys,!0}})}function hn(t,e,n,i){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fn(t,i),setContext:e=>hn(t,e,n,i),override:o=>hn(t.override(o),e,n,i)};return new Proxy(o,{deleteProperty(e,n){return delete e[n],delete t[n],!0},get(t,e,n){return mn(t,e,()=>bn(t,e,n))},getOwnPropertyDescriptor(e,n){return e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(e,n){return Reflect.has(t,n)},ownKeys(){return Reflect.ownKeys(t)},set(e,n,i){return t[n]=i,delete e[n],!0}})}function fn(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:n,indexable:i,isScriptable:wt(n)?n:()=>n,isIndexable:wt(i)?i:()=>i}}const pn=(t,e)=>t?t+bt(e):e,gn=(t,e)=>Z(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function mn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function bn(t,e,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:s}=t;let a=i[e];return wt(a)&&s.isScriptable(e)&&(a=vn(e,a,t,n)),J(a)&&a.length&&(a=wn(e,a,t,s.isIndexable)),gn(e,a)&&(a=hn(a,o,r&&r[e],s)),a}function vn(t,e,n,i){const{_proxy:o,_context:r,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,s||i);return a.delete(t),gn(t,l)&&(l=Cn(o._scopes,o,t,l)),l}function wn(t,e,n,i){const{_proxy:o,_context:r,_subProxy:s,_descriptors:a}=n;if("undefined"!==typeof r.index&&i(t))return e[r.index%e.length];if(Z(e[0])){const n=e,i=o._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Cn(i,o,t,l);e.push(hn(n,r,s&&s[t],a))}}return e}function _n(t,e,n){return wt(t)?t(e,n):t}const yn=(t,e)=>!0===t?e:"string"===typeof t?mt(e,t):void 0;function kn(t,e,n,i,o){for(const r of e){const e=yn(n,r);if(e){t.add(e);const r=_n(e._fallback,n,o);if("undefined"!==typeof r&&r!==n&&r!==i)return r}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function Cn(t,e,n,i){const o=e._rootScopes,r=_n(e._fallback,n,i),s=[...t,...o],a=new Set;a.add(i);let l=xn(a,s,n,r||n,i);return null!==l&&(("undefined"===typeof r||r===n||(l=xn(a,s,r,l,i),null!==l))&&dn(Array.from(a),[""],o,r,()=>En(e,n,i)))}function xn(t,e,n,i,o){while(n)n=kn(t,e,n,i,o);return n}function En(t,e,n){const i=t._getTarget();e in i||(i[e]={});const o=i[e];return J(o)&&Z(n)?n:o||{}}function Sn(t,e,n,i){let o;for(const r of e)if(o=Tn(pn(r,t),n),"undefined"!==typeof o)return gn(t,o)?Cn(n,i,t,o):o}function Tn(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function An(t){let e=t._keys;return e||(e=t._keys=Pn(t._scopes)),e}function Pn(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}function In(t,e,n,i){const{iScale:o}=t,{key:r="r"}=this._parsing,s=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],s[a]={r:o.parse(mt(u,r),c)};return s}const Rn=Number.EPSILON||1e-14,On=(t,e)=>e<t.length&&!t[e].skip&&t[e],Mn=t=>"x"===t?"y":"x";function Dn(t,e,n,i){const o=t.skip?e:t,r=e,s=n.skip?e:n,a=Wt(r,o),l=Wt(s,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:r.x-d*(s.x-o.x),y:r.y-d*(s.y-o.y)},next:{x:r.x+h*(s.x-o.x),y:r.y+h*(s.y-o.y)}}}function Vn(t,e,n){const i=t.length;let o,r,s,a,l,c=On(t,0);for(let u=0;u<i-1;++u)l=c,c=On(t,u+1),l&&c&&(Ot(e[u],0,Rn)?n[u]=n[u+1]=0:(o=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(o,2)+Math.pow(r,2),a<=9||(s=3/Math.sqrt(a),n[u]=o*s*e[u],n[u+1]=r*s*e[u])))}function Nn(t,e,n="x"){const i=Mn(n),o=t.length;let r,s,a,l=On(t,0);for(let c=0;c<o;++c){if(s=a,a=l,l=On(t,c+1),!a)continue;const o=a[n],u=a[i];s&&(r=(o-s[n])/3,a[`cp1${n}`]=o-r,a[`cp1${i}`]=u-r*e[c]),l&&(r=(l[n]-o)/3,a[`cp2${n}`]=o+r,a[`cp2${i}`]=u+r*e[c])}}function Ln(t,e="x"){const n=Mn(e),i=t.length,o=Array(i).fill(0),r=Array(i);let s,a,l,c=On(t,0);for(s=0;s<i;++s)if(a=l,l=c,c=On(t,s+1),l){if(c){const t=c[e]-l[e];o[s]=0!==t?(c[n]-l[n])/t:0}r[s]=a?c?Rt(o[s-1])!==Rt(o[s])?0:(o[s-1]+o[s])/2:o[s-1]:o[s]}Vn(t,o,r),Nn(t,r,e)}function Bn(t,e,n){return Math.max(Math.min(t,n),e)}function Fn(t,e){let n,i,o,r,s,a=We(t[0],e);for(n=0,i=t.length;n<i;++n)s=r,r=a,a=n<i-1&&We(t[n+1],e),r&&(o=t[n],s&&(o.cp1x=Bn(o.cp1x,e.left,e.right),o.cp1y=Bn(o.cp1y,e.top,e.bottom)),a&&(o.cp2x=Bn(o.cp2x,e.left,e.right),o.cp2y=Bn(o.cp2y,e.top,e.bottom)))}function zn(t,e,n,i,o){let r,s,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)Ln(t,o);else{let n=i?t[t.length-1]:t[0];for(r=0,s=t.length;r<s;++r)a=t[r],l=Dn(n,a,t[Math.min(r+1,s-(i?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&Fn(t,n)}function Hn(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Wn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function jn(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const $n=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Un(t,e){return $n(t).getPropertyValue(e)}const qn=["top","right","bottom","left"];function Gn(t,e,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const r=qn[o];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Kn=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Yn(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:o,offsetY:r}=i;let s,a,l=!1;if(Kn(o,r,t.target))s=o,a=r;else{const t=e.getBoundingClientRect();s=i.clientX-t.left,a=i.clientY-t.top,l=!0}return{x:s,y:a,box:l}}function Xn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,o=$n(n),r="border-box"===o.boxSizing,s=Gn(o,"padding"),a=Gn(o,"border","width"),{x:l,y:c,box:u}=Yn(t,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/p*n.height/i)}}function Jn(t,e,n){let i,o;if(void 0===e||void 0===n){const r=Wn(t);if(r){const t=r.getBoundingClientRect(),s=$n(r),a=Gn(s,"border","width"),l=Gn(s,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,i=jn(s.maxWidth,r,"clientWidth"),o=jn(s.maxHeight,r,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||Et,maxHeight:o||Et}}const Zn=t=>Math.round(10*t)/10;function Qn(t,e,n,i){const o=$n(t),r=Gn(o,"margin"),s=jn(o.maxWidth,t,"clientWidth")||Et,a=jn(o.maxHeight,t,"clientHeight")||Et,l=Jn(t,e,n);let{width:c,height:u}=l;if("content-box"===o.boxSizing){const t=Gn(o,"border","width"),e=Gn(o,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Zn(Math.min(c,s,l.maxWidth)),u=Zn(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Zn(c/2));const d=void 0!==e||void 0!==n;return d&&i&&l.height&&u>l.height&&(u=l.height,c=Zn(Math.floor(u*i))),{width:c,height:u}}function ti(t,e,n){const i=e||1,o=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||s.height!==o||s.width!==r)&&(t.currentDevicePixelRatio=i,s.height=o,s.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0)}const ei=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return t}();function ni(t,e){const n=Un(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ii(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function oi(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function ri(t,e,n,i){const o={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},s=ii(t,o,n),a=ii(o,r,n),l=ii(r,e,n),c=ii(s,a,n),u=ii(a,l,n);return ii(c,u,n)}const si=function(t,e){return{x(n){return t+t+e-n},setWidth(t){e=t},textAlign(t){return"center"===t?t:"right"===t?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}},ai=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function li(t,e,n){return t?si(e,n):ai()}function ci(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function ui(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function di(t){return"angle"===t?{between:Ut,compare:jt,normalize:$t}:{between:Kt,compare:(t,e)=>t-e,normalize:t=>t}}function hi({start:t,end:e,count:n,loop:i,style:o}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:o}}function fi(t,e,n){const{property:i,start:o,end:r}=n,{between:s,normalize:a}=di(i),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u;++c){if(!s(a(e[d%l][i]),o,r))break;d--,h--}d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}function pi(t,e,n){if(!n)return[t];const{property:i,start:o,end:r}=n,s=e.length,{compare:a,between:l,normalize:c}=di(i),{start:u,end:d,loop:h,style:f}=fi(t,e,n),p=[];let g,m,b,v=!1,w=null;const _=()=>l(o,b,g)&&0!==a(o,b),y=()=>0===a(r,g)||l(r,b,g),k=()=>v||_(),C=()=>!v||y();for(let x=u,E=u;x<=d;++x)m=e[x%s],m.skip||(g=c(m[i]),g!==b&&(v=l(g,o,r),null===w&&k()&&(w=0===a(g,o)?x:E),null!==w&&C()&&(p.push(hi({start:w,end:x,loop:h,count:s,style:f})),w=null),E=x,b=g));return null!==w&&p.push(hi({start:w,end:d,loop:h,count:s,style:f})),p}function gi(t,e){const n=[],i=t.segments;for(let o=0;o<i.length;o++){const r=pi(i[o],t.points,e);r.length&&n.push(...r)}return n}function mi(t,e,n,i){let o=0,r=e-1;if(n&&!i)while(o<e&&!t[o].skip)o++;while(o<e&&t[o].skip)o++;o%=e,n&&(r+=o);while(r>o&&t[r%e].skip)r--;return r%=e,{start:o,end:r}}function bi(t,e,n,i){const o=t.length,r=[];let s,a=e,l=t[e];for(s=e+1;s<=n;++s){const n=t[s%o];n.skip||n.stop?l.skip||(i=!1,r.push({start:e%o,end:(s-1)%o,loop:i}),e=a=n.stop?s:null):(a=s,l.skip&&(e=s)),l=n}return null!==a&&r.push({start:e%o,end:a%o,loop:i}),r}function vi(t,e){const n=t.points,i=t.options.spanGaps,o=n.length;if(!o)return[];const r=!!t._loop,{start:s,end:a}=mi(n,o,r,i);if(!0===i)return wi(t,[{start:s,end:a,loop:r}],n,e);const l=a<s?a+o:a,c=!!t._fullLoop&&0===s&&a===o-1;return wi(t,bi(n,s,l,c),n,e)}function wi(t,e,n,i){return i&&i.setContext&&n?_i(t,e,n,i):e}function _i(t,e,n,i){const o=t._chart.getContext(),r=yi(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,d=e[0].start,h=d;function f(t,e,i,o){const r=a?-1:1;if(t!==e){t+=l;while(n[t%l].skip)t-=r;while(n[e%l].skip)e+=r;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:o}),u=o,d=e%l)}}for(const p of e){d=a?d:p.start;let t,e=n[d%l];for(h=d+1;h<=p.end;h++){const r=n[h%l];t=yi(i.setContext(un(o,{type:"segment",p0:e,p1:r,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),ki(t,u)&&f(d,h-1,p.loop,u),e=r,u=t}d<h-1&&f(d,h-1,p.loop,u)}return c}function yi(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function ki(t,e){if(!e)return!1;const n=[],i=function(t,e){return ge(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}
/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
class Ci{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const o=e.listeners[i],r=e.duration;o.forEach(i=>i({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=ie.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r,s=o.length-1,a=!1;for(;s>=0;--s)r=o[s],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(t),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xi=new Ci;const Ei="transparent",Si={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=me(t||Ei),o=i.valid&&me(e||Ei);return o&&o.valid?o.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ti{constructor(t,e,n,i){const o=e[n];i=ln([t.to,i,o,t.from]);const r=ln([t.from,o,i]);this._active=!0,this._fn=t.fn||Si[t.type||typeof r],this._easing=pe[t.easing]||pe.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=ln([t.to,e,i,t.from]),this._from=ln([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,s=this._to;let a;if(this._active=o!==s&&(r||e<n),!this._active)return this._target[i]=s,void this._notify(!0);e<0?this._target[i]=o:(a=e/n%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(o,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class Ai{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Z(t))return;const e=Object.keys(De.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!Z(o))return;const r={};for(const t of e)r[t]=o[t];(J(o.properties)&&o.properties||[i]).forEach(t=>{t!==i&&n.has(t)||n.set(t,r)})})}_animateOptions(t,e){const n=e.options,i=Ii(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&Pi(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),s=Date.now();let a;for(a=r.length-1;a>=0;--a){const l=r[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=o[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(o[l]=u=new Ti(d,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(xi.add(this._chart,n),!0):void 0}}function Pi(t,e){const n=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const e=t[i[o]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}function Ii(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}function Ri(t,e){const n=t&&t.options||{},i=n.reverse,o=void 0===n.min?e:0,r=void 0===n.max?e:0;return{start:i?r:o,end:i?o:r}}function Oi(t,e,n){if(!1===n)return!1;const i=Ri(t,n),o=Ri(e,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function Mi(t){let e,n,i,o;return Z(t)?(e=t.top,n=t.right,i=t.bottom,o=t.left):e=n=i=o=t,{top:e,right:n,bottom:i,left:o,disabled:!1===t}}function Di(t,e){const n=[],i=t._getSortedDatasetMetas(e);let o,r;for(o=0,r=i.length;o<r;++o)n.push(i[o].index);return n}function Vi(t,e,n,i={}){const o=t.keys,r="single"===i.mode;let s,a,l,c;if(null!==e){for(s=0,a=o.length;s<a;++s){if(l=+o[s],l===n){if(i.all)continue;break}c=t.values[l],Q(c)&&(r||0===e||Rt(e)===Rt(c))&&(e+=c)}return e}}function Ni(t){const e=Object.keys(t),n=new Array(e.length);let i,o,r;for(i=0,o=e.length;i<o;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function Li(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Bi(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Fi(t){const{min:e,max:n,minDefined:i,maxDefined:o}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function zi(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Hi(t,e,n,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const e=t[o.index];if(n&&e>0||!n&&e<0)return o.index}return null}function Wi(t,e){const{chart:n,_cachedMeta:i}=t,o=n._stacks||(n._stacks={}),{iScale:r,vScale:s,index:a}=i,l=r.axis,c=s.axis,u=Bi(r,s,i),d=e.length;let h;for(let f=0;f<d;++f){const t=e[f],{[l]:n,[c]:r}=t,d=t._stacks||(t._stacks={});h=d[c]=zi(o,u,n),h[a]=r,h._top=Hi(h,s,!0,i.type),h._bottom=Hi(h,s,!1,i.type);const p=h._visualValues||(h._visualValues={});p[a]=r}}function ji(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function $i(t,e){return un(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Ui(t,e,n){return un(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function qi(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Gi=t=>"reset"===t||"none"===t,Ki=(t,e)=>e?t:Object.assign({},t),Yi=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Di(n,!0),values:null};class Xi{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Li(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,o=e.xAxisID=et(n.xAxisID,ji(t,"x")),r=e.yAxisID=et(n.yAxisID,ji(t,"y")),s=e.rAxisID=et(n.rAxisID,ji(t,"r")),a=e.indexAxis,l=e.iAxisID=i(a,o,r,s),c=e.vAxisID=i(a,r,o,s);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ee(this._data,this),t._stacked&&qi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Z(e))this._data=Ni(e);else if(n!==e){if(n){ee(n,this);const t=this._cachedMeta;qi(t),t._parsed=[]}e&&Object.isExtensible(e)&&te(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=e._stacked;e._stacked=Li(e.vScale,e),e.stack!==n.stack&&(i=!0,qi(e),e.stack=n.stack),this._resyncElements(t),(i||o!==e._stacked)&&Wi(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,s=o.axis;let a,l,c,u=0===t&&e===i.length||n._sorted,d=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=J(i[t])?this.parseArrayData(n,i,t,e):Z(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const o=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(o()&&(u=!1),d=l);n._sorted=u}r&&Wi(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:o,vScale:r}=t,s=o.axis,a=r.axis,l=o.getLabels(),c=o===r,u=new Array(i);let d,h,f;for(d=0,h=i;d<h;++d)f=d+n,u[d]={[s]:c||o.parse(l[f],f),[a]:r.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:o,yScale:r}=t,s=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],s[a]={x:o.parse(u[0],c),y:r.parse(u[1],c)};return s}parseObjectData(t,e,n,i){const{xScale:o,yScale:r}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=e[d],l[c]={x:o.parse(mt(h,s),d),y:r.parse(mt(h,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,o=this._cachedMeta,r=e[t.axis],s={keys:Di(i,!0),values:e._stacks[t.axis]._visualValues};return Vi(s,r,o.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const o=n[e.axis];let r=null===o?NaN:o;const s=i&&n._stacks[e.axis];i&&s&&(i.values=s,r=Vi(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,r=i.length,s=this._getOtherScale(t),a=Yi(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=Fi(s);let d,h;function f(){h=i[d];const e=h[s.axis];return!Q(h[t.axis])||c>e||u<e}for(d=0;d<r;++d)if(!f()&&(this.updateRangeFromParsed(l,t,h,a),o))break;if(o)for(d=r-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=e.length;i<o;++i)r=e[i][t.axis],Q(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Mi(et(this.options.clip,Oi(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],o=e.chartArea,r=[],s=this._drawStart||0,a=this._drawCount||i.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,o,s,a),c=s;c<s+a;++c){const e=i[c];e.hidden||(e.active&&l?r.push(e):e.draw(t,o))}for(c=0;c<r.length;++c)r[c].draw(t,o)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];o=e.$context||(e.$context=Ui(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=$i(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,o=this._cachedDataOpts,r=t+"-"+e,s=o[r],a=this.enableOptionSharing&&vt(n);if(s)return Ki(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(De.elements[t]),f=()=>this.getContext(n,i,e),p=l.resolveNamedOptions(d,h,f,u);return p.$shared&&(p.$shared=a,o[r]=Object.freeze(Ki(p,a))),p}_resolveAnimations(t,e,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,s=o[r];if(s)return s;let a;if(!1!==i.options.animation){const i=this.chart.config,o=i.datasetAnimationScopeKeys(this._type,e),r=i.getOptionScopes(this.getDataset(),o);a=i.createResolver(r,this.getContext(t,n,e))}const l=new Ai(i,a&&a.animations);return a&&a._cacheable&&(o[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Gi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(e,o)||o!==i;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:r}}updateElement(t,e,n,i){Gi(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Gi(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const o=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[s,a,l]of this._syncList)this[s](a,l);this._syncList=[];const i=n.length,o=e.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,e,n=!0){const i=this._cachedMeta,o=i.data,r=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=r;s--)t[s]=t[s-e]};for(a(o),s=t;s<r;++s)o[s]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&qi(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ji(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,o=n.length;e<o;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=ne(i.sort((t,e)=>t-e))}return t._cache.$bar}function Zi(t){const e=t.iScale,n=Ji(e,t.type);let i,o,r,s,a=e._length;const l=()=>{32767!==r&&-32768!==r&&(vt(s)&&(a=Math.min(a,Math.abs(r-s)||a)),s=r)};for(i=0,o=n.length;i<o;++i)r=e.getPixelForValue(n[i]),l();for(s=void 0,i=0,o=e.ticks.length;i<o;++i)r=e.getPixelForTick(i),l();return a}function Qi(t,e,n,i){const o=n.barThickness;let r,s;return X(o)?(r=e.min*n.categoryPercentage,s=n.barPercentage):(r=o*i,s=1),{chunk:r/i,ratio:s,start:e.pixels[t]-r/2}}function to(t,e,n,i){const o=e.pixels,r=o[t];let s=t>0?o[t-1]:null,a=t<o.length-1?o[t+1]:null;const l=n.categoryPercentage;null===s&&(s=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-s);const c=r-(r-Math.min(s,a))/2*l,u=Math.abs(a-s)/2*l;return{chunk:u/i,ratio:n.barPercentage,start:c}}function eo(t,e,n,i){const o=n.parse(t[0],i),r=n.parse(t[1],i),s=Math.min(o,r),a=Math.max(o,r);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:r,min:s,max:a}}function no(t,e,n,i){return J(t)?eo(t,e,n,i):e[n.axis]=n.parse(t,i),e}function io(t,e,n,i){const o=t.iScale,r=t.vScale,s=o.getLabels(),a=o===r,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[o.axis]=a||o.parse(s[c],c),l.push(no(h,d,r,c));return l}function oo(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ro(t,e,n){return 0!==t?Rt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function so(t){let e,n,i,o,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(o="end",r="start"):(o="start",r="end"),{start:n,end:i,reverse:e,top:o,bottom:r}}function ao(t,e,n,i){let o=e.borderSkipped;const r={};if(!o)return void(t.borderSkipped=r);if(!0===o)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:u}=so(t);"middle"===o&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?o=c:(n._bottom||0)===i?o=u:(r[lo(u,s,a,l)]=!0,o=c)),r[lo(o,s,a,l)]=!0,t.borderSkipped=r}function lo(t,e,n,i){return i?(t=co(t,e,n),t=uo(t,n,e)):t=uo(t,e,n),t}function co(t,e,n){return t===e?n:t===n?e:t}function uo(t,e,n){return"start"===t?e:"end"===t?n:t}function ho(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class fo extends Xi{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,i){return io(t,e,n,i)}parseArrayData(t,e,n,i){return io(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:o,vScale:r}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===o.axis?s:a,c="x"===r.axis?s:a,u=[];let d,h,f,p;for(d=n,h=n+i;d<h;++d)p=e[d],f={},f[o.axis]=o.parse(mt(p,l),d),u.push(no(mt(p,c),f,r,d));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,o=this.getParsed(t),r=o._custom,s=oo(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const o="reset"===i,{index:r,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,i);for(let h=e;h<e+n;h++){const e=this.getParsed(h),n=o||X(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(e._stacks||{})[s.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||oo(e._custom)||r===p._top||r===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(g.options=u||this.resolveDataElementOptions(h,t[h].active?"active":i));const m=g.options||t[h].options;ao(g,m,p,r),ho(g,m,c.ratio),this.updateElement(t[h],h,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),o=n.options.stacked,r=[],s=t=>{const n=t.controller.getParsed(e),i=n&&n[t.vScale.axis];if(X(i)||isNaN(i))return!0};for(const a of i)if((void 0===e||!s(a))&&((!1===o||-1===r.indexOf(a.stack)||void 0===o&&void 0===a.stack)&&r.push(a.stack),a.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),o=void 0!==e?i.indexOf(e):-1;return-1===o?i.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let o,r;for(o=0,r=e.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const s=t.barThickness,a=s||Zi(e);return{min:a,pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,s=o||0,a=this.getParsed(t),l=a._custom,c=oo(l);let u,d,h=a[e.axis],f=0,p=n?this.applyStack(e,a,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&Rt(h)!==Rt(l.barEnd)&&(f=0),f+=h);const g=X(o)||c?f:o;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,d=u-m,Math.abs(d)<r){d=ro(d,e,s)*r,h===s&&(m-=d/2);const t=e.getPixelForDecimal(0),o=e.getPixelForDecimal(1),l=Math.min(t,o),f=Math.max(t,o);m=Math.max(Math.min(m,f),l),u=m+d,n&&!c&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(s)){const t=Rt(d)*e.getLineWidthForValue(s)/2;m+=t,d-=t}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,o=i.skipNull,r=et(i.maxBarThickness,1/0);let s,a;if(e.grouped){const n=o?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?to(t,e,i,n):Qi(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(r,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(r,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)null!==this.getParsed(o)[e.axis]&&n[o].draw(this._ctx)}}class po extends Xi{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const o=super.parsePrimitiveData(t,e,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,e,n,i){const o=super.parseArrayData(t,e,n,i);for(let r=0;r<o.length;r++){const t=e[n+r];o[r]._custom=et(t[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(t,e,n,i){const o=super.parseObjectData(t,e,n,i);for(let r=0;r<o.length;r++){const t=e[n+r];o[r]._custom=et(t&&t.r&&+t.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=e,r=this.getParsed(t),s=i.getLabelForValue(r.x),a=o.getLabelForValue(r.y),l=r._custom;return{label:n[t]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const o="reset"===i,{iScale:r,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,i),c=r.axis,u=s.axis;for(let d=e;d<e+n;d++){const e=t[d],n=!o&&this.getParsed(d),h={},f=h[c]=o?r.getPixelForDecimal(.5):r.getPixelForValue(n[c]),p=h[u]=o?s.getBasePixel():s.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=a||this.resolveDataElementOptions(d,e.active?"active":i),o&&(h.options.radius=0)),this.updateElement(e,d,h,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return"active"!==e&&(i.radius=0),i.radius+=et(n&&n._custom,o),i}}function go(t,e,n){let i=1,o=1,r=0,s=0;if(e<Ct){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(t,e,i)=>Ut(t,a,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Ut(t,a,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,d),m=f(Tt,u,h),b=p(kt,c,d),v=p(kt+Tt,u,h);i=(g-b)/2,o=(m-v)/2,r=-(g+b)/2,s=-(m+v)/2}return{ratioX:i,ratioY:o,offsetX:r,offsetY:s}}class mo extends Xi{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,o)=>{const r=t.getDatasetMeta(0),s=r.controller.getStyle(o);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let o,r,s=t=>+n[t];if(Z(n[t])){const{key:t="value"}=this._parsing;s=e=>+mt(n[e],t)}for(o=t,r=t+e;o<r;++o)i._parsed[o]=s(o)}}_getRotation(){return Bt(this.options.rotation-90)}_getCircumference(){return Bt(this.options.circumference)}_getRotationExtents(){let t=Ct,e=-Ct;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-r)/2,0),a=Math.min(nt(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:h,offsetX:f,offsetY:p}=go(u,c,a),g=(n.width-r)/d,m=(n.height-r)/h,b=Math.max(Math.min(g,m)/2,0),v=it(this.options.radius,b),w=Math.max(v*a,0),_=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=f*v,this.offsetY=p*v,i.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*l,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Ct)}updateElements(t,e,n,i){const o="reset"===i,r=this.chart,s=r.chartArea,a=r.options,l=a.animation,c=(s.left+s.right)/2,u=(s.top+s.bottom)/2,d=o&&l.animateScale,h=d?0:this.innerRadius,f=d?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,i);let m,b=this._getRotation();for(m=0;m<e;++m)b+=this._circumference(m,o);for(m=e;m<e+n;++m){const e=this._circumference(m,o),n=t[m],r={x:c+this.offsetX,y:u+this.offsetY,startAngle:b,endAngle:b+e,circumference:e,outerRadius:f,innerRadius:h};g&&(r.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),b+=e,this.updateElement(n,m,r,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const o=t._parsed[n];null===o||isNaN(o)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Ct*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=xe(e._parsed[t],n.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,o,r,s,a;if(!t)for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,s=r.controller;break}if(!t)return 0;for(i=0,o=t.length;i<o;++i)a=s.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(et(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class bo extends Xi{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:s,count:a}=ce(e,i,r);this._drawStart=s,this._drawCount=a,ue(e)&&(s=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:l},t),this.updateElements(i,s,a,t)}updateElements(t,e,n,i){const o="reset"===i,{iScale:r,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),d=r.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,g=Vt(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||o||"none"===i,b=e+n,v=t.length;let w=e>0&&this.getParsed(e-1);for(let _=0;_<v;++_){const n=t[_],f=m?n:{};if(_<e||_>=b){f.skip=!0;continue}const v=this.getParsed(_),y=X(v[h]),k=f[d]=r.getPixelForValue(v[d],_),C=f[h]=o||y?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,v,a):v[h],_);f.skip=isNaN(k)||isNaN(C)||y,f.stop=_>0&&Math.abs(v[d]-w[d])>g,p&&(f.parsed=v,f.raw=l.data[_]),u&&(f.options=c||this.resolveDataElementOptions(_,n.active?"active":i)),m||this.updateElement(n,_,f,i),w=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class vo extends Xi{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,o)=>{const r=t.getDatasetMeta(0),s=r.controller.getStyle(o);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=xe(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:o}}parseObjectData(t,e,n,i){return In.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(i/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),s=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const o="reset"===i,r=this.chart,s=r.options,a=s.animation,l=this._cachedMeta.rScale,c=l.xCenter,u=l.yCenter,d=l.getIndexAngle(0)-.5*kt;let h,f=d;const p=360/this.countVisibleElements();for(h=0;h<e;++h)f+=this._computeAngle(h,i,p);for(h=e;h<e+n;h++){const e=t[h];let n=f,s=f+this._computeAngle(h,i,p),g=r.getDataVisibility(h)?l.getDistanceFromCenterForValue(this.getParsed(h).r):0;f=s,o&&(a.animateScale&&(g=0),a.animateRotate&&(n=s=d));const m={x:c,y:u,innerRadius:0,outerRadius:g,startAngle:n,endAngle:s,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Bt(this.resolveDataElementOptions(t,e).angle||n):0}}class wo extends mo{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class _o extends Xi{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return In.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],o=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const r={_loop:!0,_fullLoop:o.length===i.length,options:e};this.updateElement(n,void 0,r,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const o=this._cachedMeta.rScale,r="reset"===i;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":i),a=o.getPointPositionForValue(s,this.getParsed(s).r),l=r?o.xCenter:a.x,c=r?o.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,s,u,i)}}}class yo extends Xi{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=e,r=this.getParsed(t),s=i.getLabelForValue(r.x),a=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:o,count:r}=ce(e,n,i);if(this._drawStart=o,this._drawCount=r,ue(e)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:r}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!r._decimated,o.points=n;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:s},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const o="reset"===i,{iScale:r,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=r.axis,f=s.axis,{spanGaps:p,segment:g}=this.options,m=Vt(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||"none"===i;let v=e>0&&this.getParsed(e-1);for(let w=e;w<e+n;++w){const e=t[w],n=this.getParsed(w),c=b?e:{},p=X(n[f]),_=c[h]=r.getPixelForValue(n[h],w),y=c[f]=o||p?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[f],w);c.skip=isNaN(_)||isNaN(y)||p,c.stop=w>0&&Math.abs(n[h]-v[h])>m,g&&(c.parsed=n,c.raw=l.data[w]),d&&(c.options=u||this.resolveDataElementOptions(w,e.active?"active":i)),b||this.updateElement(e,w,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const o=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,o,r)/2}}var ko=Object.freeze({__proto__:null,BarController:fo,BubbleController:po,DoughnutController:mo,LineController:bo,PieController:wo,PolarAreaController:vo,RadarController:_o,ScatterController:yo});function Co(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xo{static override(t){Object.assign(xo.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Co()}parse(){return Co()}format(){return Co()}add(){return Co()}diff(){return Co()}startOf(){return Co()}endOf(){return Co()}}var Eo={_date:xo};function So(t,e,n,i){const{controller:o,data:r,_sorted:s}=t,a=o._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&s&&r.length){const t=a._reversePixels?Jt:Xt;if(!i)return t(r,e,n);if(o._sharedOptions){const i=r[0],o="function"===typeof i.getRange&&i.getRange(e);if(o){const i=t(r,e,n-o),s=t(r,e,n+o);return{lo:i.lo,hi:s.hi}}}}return{lo:0,hi:r.length-1}}function To(t,e,n,i,o){const r=t.getSortedVisibleDatasetMetas(),s=n[e];for(let a=0,l=r.length;a<l;++a){const{index:t,data:n}=r[a],{lo:l,hi:c}=So(r[a],e,s,o);for(let e=l;e<=c;++e){const o=n[e];o.skip||i(o,t,e)}}}function Ao(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const o=e?Math.abs(t.x-i.x):0,r=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Po(t,e,n,i,o){const r=[];if(!o&&!t.isPointInArea(e))return r;const s=function(n,s,a){(o||We(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&r.push({element:n,datasetIndex:s,index:a})};return To(t,n,e,s,!0),r}function Io(t,e,n,i){let o=[];function r(t,n,r){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:l}=Ht(t,{x:e.x,y:e.y});Ut(l,s,a)&&o.push({element:t,datasetIndex:n,index:r})}return To(t,n,e,r),o}function Ro(t,e,n,i,o,r){let s=[];const a=Ao(n);let l=Number.POSITIVE_INFINITY;function c(n,c,u){const d=n.inRange(e.x,e.y,o);if(i&&!d)return;const h=n.getCenterPoint(o),f=!!r||t.isPointInArea(h);if(!f&&!d)return;const p=a(e,h);p<l?(s=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&s.push({element:n,datasetIndex:c,index:u})}return To(t,n,e,c),s}function Oo(t,e,n,i,o,r){return r||t.isPointInArea(e)?"r"!==n||i?Ro(t,e,n,i,o,r):Io(t,e,n,o):[]}function Mo(t,e,n,i,o){const r=[],s="x"===n?"inXRange":"inYRange";let a=!1;return To(t,n,e,(t,i,l)=>{t[s](e[n],o)&&(r.push({element:t,datasetIndex:i,index:l}),a=a||t.inRange(e.x,e.y,o))}),i&&!a?[]:r}var Do={evaluateInteractionItems:To,modes:{index(t,e,n,i){const o=Xn(e,t),r=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?Po(t,o,r,i,s):Oo(t,o,r,!1,i,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const o=Xn(e,t),r=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?Po(t,o,r,i,s):Oo(t,o,r,!1,i,s);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point(t,e,n,i){const o=Xn(e,t),r=n.axis||"xy",s=n.includeInvisible||!1;return Po(t,o,r,i,s)},nearest(t,e,n,i){const o=Xn(e,t),r=n.axis||"xy",s=n.includeInvisible||!1;return Oo(t,o,r,n.intersect,i,s)},x(t,e,n,i){const o=Xn(e,t);return Mo(t,o,"x",n.intersect,i)},y(t,e,n,i){const o=Xn(e,t);return Mo(t,o,"y",n.intersect,i)}}};const Vo=["left","top","right","bottom"];function No(t,e){return t.filter(t=>t.pos===e)}function Lo(t,e){return t.filter(t=>-1===Vo.indexOf(t.pos)&&t.box.axis===e)}function Bo(t,e){return t.sort((t,n)=>{const i=e?n:t,o=e?t:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function Fo(t){const e=[];let n,i,o,r,s,a;for(n=0,i=(t||[]).length;n<i;++n)o=t[n],({position:r,options:{stack:s,stackWeight:a=1}}=o),e.push({index:n,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:s&&r+s,stackWeight:a});return e}function zo(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:o}=n;if(!t||!Vo.includes(i))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function Ho(t,e){const n=zo(t),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let r,s,a;for(r=0,s=t.length;r<s;++r){a=t[r];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:s&&e.availableWidth,a.height=o):(a.width=i,a.height=c?c*o:s&&e.availableHeight)}return n}function Wo(t){const e=Fo(t),n=Bo(e.filter(t=>t.box.fullSize),!0),i=Bo(No(e,"left"),!0),o=Bo(No(e,"right")),r=Bo(No(e,"top"),!0),s=Bo(No(e,"bottom")),a=Lo(e,"x"),l=Lo(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:o.concat(l).concat(s).concat(a),chartArea:No(e,"chartArea"),vertical:i.concat(o).concat(l),horizontal:r.concat(s).concat(a)}}function jo(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function $o(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Uo(t,e,n,i){const{pos:o,box:r}=n,s=t.maxPadding;if(!Z(o)){n.size&&(t[o]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?r.height:r.width),n.size=e.size/e.count,t[o]+=n.size}r.getPadding&&$o(s,r.getPadding());const a=Math.max(0,e.outerWidth-jo(s,t,"left","right")),l=Math.max(0,e.outerHeight-jo(s,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function qo(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Go(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}return i(t?["left","right"]:["top","bottom"])}function Ko(t,e,n,i){const o=[];let r,s,a,l,c,u;for(r=0,s=t.length,c=0;r<s;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,Go(a.horizontal,e));const{same:s,other:d}=Uo(e,n,a,i);c|=s&&o.length,u=u||d,l.fullSize||o.push(a)}return c&&Ko(o,e,n,i)||u}function Yo(t,e,n,i,o){t.top=n,t.left=e,t.right=e+i,t.bottom=n+o,t.width=i,t.height=o}function Xo(t,e,n,i){const o=n.padding;let{x:r,y:s}=e;for(const a of t){const t=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=e.w*c,r=l.size||t.height;vt(l.start)&&(s=l.start),t.fullSize?Yo(t,o.left,s,n.outerWidth-o.right-o.left,r):Yo(t,e.left+l.placed,s,i,r),l.start=s,l.placed+=i,s=t.bottom}else{const i=e.h*c,s=l.size||t.width;vt(l.start)&&(r=l.start),t.fullSize?Yo(t,r,o.top,s,n.outerHeight-o.bottom-o.top):Yo(t,r,e.top+l.placed,s,i),l.start=r,l.placed+=i,r=t.right}}e.x=r,e.y=s}var Jo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const o=sn(t.options.layout.padding),r=Math.max(e-o.width,0),s=Math.max(n-o.height,0),a=Wo(t.boxes),l=a.vertical,c=a.horizontal;rt(t.boxes,t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:r,availableHeight:s,vBoxMaxWidth:r/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},o);$o(h,sn(i));const f=Object.assign({maxPadding:h,w:r,h:s,x:o.left,y:o.top},o),p=Ho(l.concat(c),d);Ko(a.fullSize,f,d,p),Ko(l,f,d,p),Ko(c,f,d,p)&&Ko(l,f,d,p),qo(f),Xo(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Xo(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},rt(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Zo{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Qo extends Zo{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const tr="$chartjs",er={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nr=t=>null===t||""===t;function ir(t,e){const n=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t[tr]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",nr(o)){const e=ni(t,"width");void 0!==e&&(t.width=e)}if(nr(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=ni(t,"height");void 0!==e&&(t.height=e)}return t}const or=!!ei&&{passive:!0};function rr(t,e,n){t.addEventListener(e,n,or)}function sr(t,e,n){t.canvas.removeEventListener(e,n,or)}function ar(t,e){const n=er[t.type]||t.type,{x:i,y:o}=Xn(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==o?o:null}}function lr(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function cr(t,e,n){const i=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||lr(n.addedNodes,i),e=e&&!lr(n.removedNodes,i);e&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function ur(t,e,n){const i=t.canvas,o=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||lr(n.removedNodes,i),e=e&&!lr(n.addedNodes,i);e&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const dr=new Map;let hr=0;function fr(){const t=window.devicePixelRatio;t!==hr&&(hr=t,dr.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function pr(t,e){dr.size||window.addEventListener("resize",fr),dr.set(t,e)}function gr(t){dr.delete(t),dr.size||window.removeEventListener("resize",fr)}function mr(t,e,n){const i=t.canvas,o=i&&Wn(i);if(!o)return;const r=oe((t,e)=>{const i=o.clientWidth;n(t,e),i<o.clientWidth&&n()},window),s=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||r(n,i)});return s.observe(o),pr(t,r),s}function br(t,e,n){n&&n.disconnect(),"resize"===e&&gr(t)}function vr(t,e,n){const i=t.canvas,o=oe(e=>{null!==t.ctx&&n(ar(e,t))},t);return rr(i,e,o),o}class wr extends Zo{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(ir(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[tr])return!1;const n=e[tr].initial;["height","width"].forEach(t=>{const i=n[t];X(i)?e.removeAttribute(t):e.setAttribute(t,i)});const i=n.style||{};return Object.keys(i).forEach(t=>{e.style[t]=i[t]}),e.width=e.width,delete e[tr],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),o={attach:cr,detach:ur,resize:mr},r=o[e]||vr;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;const o={attach:br,detach:br,resize:br},r=o[e]||sr;r(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return Qn(t,e,n,i)}isAttached(t){const e=Wn(t);return!(!e||!e.isConnected)}}function _r(t){return!Hn()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Qo:wr}class yr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Vt(this.x)&&Vt(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}function kr(t,e){const n=t.options.ticks,i=Cr(t),o=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?Er(e):[],s=r.length,a=r[0],l=r[s-1],c=[];if(s>o)return Sr(e,c,r,s/o),c;const u=xr(r,e,o);if(s>0){let t,n;const i=s>1?Math.round((l-a)/(s-1)):null;for(Tr(e,c,u,X(i)?0:a-i,a),t=0,n=s-1;t<n;t++)Tr(e,c,u,r[t],r[t+1]);return Tr(e,c,u,l,X(i)?e.length:l+i),c}return Tr(e,c,u),c}function Cr(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),o=t._maxLength/n;return Math.floor(Math.min(i,o))}function xr(t,e,n){const i=Ar(t),o=e.length/n;if(!i)return Math.max(o,1);const r=Dt(i);for(let s=0,a=r.length-1;s<a;s++){const t=r[s];if(t>o)return t}return Math.max(o,1)}function Er(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function Sr(t,e,n,i){let o,r=0,s=n[0];for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Tr(t,e,n,i,o){const r=et(i,0),s=Math.min(et(o,t.length),t.length);let a,l,c,u=0;n=Math.ceil(n),o&&(a=o-i,n=a/Math.floor(a/n)),c=r;while(c<0)u++,c=Math.round(r+u*n);for(l=Math.max(r,0);l<s;l++)l===c&&(e.push(t[l]),u++,c=Math.round(r+u*n))}function Ar(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Pr=t=>"left"===t?"right":"right"===t?"left":t,Ir=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Rr=(t,e)=>Math.min(e||t,t);function Or(t,e){const n=[],i=t.length/e,o=t.length;let r=0;for(;r<o;r+=i)n.push(t[Math.floor(r)]);return n}function Mr(t,e,n){const i=t.ticks.length,o=Math.min(e,i-1),r=t._startPixel,s=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(o);if(!(n&&(l=1===i?Math.max(c-r,s-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<r-a||c>s+a)))return c}function Dr(t,e){rt(t,t=>{const n=t.gc,i=n.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[n[o]];n.splice(0,i)}})}function Vr(t){return t.drawTicks?t.tickLength:0}function Nr(t,e){if(!t.display)return 0;const n=an(t.font,e),i=sn(t.padding),o=J(t.text)?t.text.length:1;return o*n.lineHeight+i.height}function Lr(t,e){return un(t,{scale:e,type:"scale"})}function Br(t,e,n){return un(t,{tick:n,index:e,type:"tick"})}function Fr(t,e,n){let i=se(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=Pr(i)),i}function zr(t,e,n,i){const{top:o,left:r,bottom:s,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d,h,f,p=0;const g=s-o,m=a-r;if(t.isHorizontal()){if(h=ae(i,r,a),Z(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:Ir(t,n,e);d=a-r}else{if(Z(n)){const t=Object.keys(n)[0],i=n[t];h=u[t].getPixelForValue(i)-m+e}else h="center"===n?(c.left+c.right)/2-m+e:Ir(t,n,e);f=ae(i,s,o),p="left"===n?-Tt:Tt}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}class Hr extends yr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=tt(t,Number.POSITIVE_INFINITY),e=tt(e,Number.NEGATIVE_INFINITY),n=tt(n,Number.POSITIVE_INFINITY),i=tt(i,Number.NEGATIVE_INFINITY),{min:tt(t,n),max:tt(e,i),minDefined:Q(t),maxDefined:Q(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:o,maxDefined:r}=this.getUserBounds();if(o&&r)return{min:n,max:i};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),o||(n=Math.min(n,e.min)),r||(i=Math.max(i,e.max));return n=r&&n>i?i:n,i=o&&n>i?n:i,{min:tt(n,tt(i,n)),max:tt(i,tt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){const e=this._labelItems||(this._labelItems=this._computeLabelItems(t));return e}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ot(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,s=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cn(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?Or(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=kr(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ot(this.options.afterUpdate,[this])}beforeSetDimensions(){ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ot(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ot(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=ot(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Rr(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,o=e.maxRotation;let r,s,a,l=i;if(!this._isVisible()||!e.display||i>=o||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=qt(this.chart.width-u,0,this.maxWidth);r=t.offset?this.maxWidth/n:h/(n-1),u+6>r&&(r=h/(n-(t.offset?.5:1)),s=this.maxHeight-Vr(t.grid)-e.padding-Nr(t.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=Ft(Math.min(Math.asin(qt((c.highest.height+6)/r,-1,1)),Math.asin(qt(s/a,-1,1))-Math.asin(qt(d/a,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ot(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),s=this.isHorizontal();if(r){const r=Nr(i,e.options.font);if(s?(t.width=this.maxWidth,t.height=Vr(o)+r):(t.height=this.maxHeight,t.width=Vr(o)+r),n.display&&this.ticks.length){const{first:e,last:i,widest:o,highest:r}=this._getLabelSizes(),a=2*n.padding,l=Bt(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const e=n.mirror?0:u*o.width+c*r.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*o.width+u*r.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:o,padding:r},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=i*t.width,d=n*e.height):(u=n*t.height,d=i*e.width):"start"===o?d=e.width:"end"===o?u=t.width:"inner"!==o&&(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-s+r)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+r)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===o?(n=0,i=t.height):"end"===o&&(n=e.height,i=0),this.paddingTop=n+r,this.paddingBottom=i+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ot(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)X(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Or(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:o}=this,r=[],s=[],a=Math.floor(e/Rr(e,n));let l,c,u,d,h,f,p,g,m,b,v,w=0,_=0;for(l=0;l<e;l+=a){if(d=t[l].label,h=this._resolveTickFontOptions(l),i.font=f=h.string,p=o[f]=o[f]||{data:{},gc:[]},g=h.lineHeight,m=b=0,X(d)||J(d)){if(J(d))for(c=0,u=d.length;c<u;++c)v=d[c],X(v)||J(v)||(m=Ne(i,p.data,p.gc,m,v),b+=g)}else m=Ne(i,p.data,p.gc,m,d),b=g;r.push(m),s.push(b),w=Math.max(m,w),_=Math.max(b,_)}Dr(o,e);const y=r.indexOf(w),k=s.indexOf(_),C=t=>({width:r[t]||0,height:s[t]||0});return{first:C(0),last:C(e-1),widest:C(y),highest:C(k),widths:r,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Gt(this._alignToPixels?Be(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=Br(this.getContext(),t,n))}return this.$context||(this.$context=Lr(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Bt(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,s=o?o.widest.width+r:0,a=o?o.highest.height+r:0;return this.isHorizontal()?a*n>s*i?s/n:a/i:a*i<s*n?a/n:s/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:s}=i,a=o.offset,l=this.isHorizontal(),c=this.ticks,u=c.length+(a?1:0),d=Vr(o),h=[],f=s.setContext(this.getContext()),p=f.display?f.width:0,g=p/2,m=function(t){return Be(n,t,p)};let b,v,w,_,y,k,C,x,E,S,T,A;if("top"===r)b=m(this.bottom),k=this.bottom-d,x=b-g,S=m(t.top)+g,A=t.bottom;else if("bottom"===r)b=m(this.top),S=t.top,A=m(t.bottom)-g,k=b+g,x=this.top+d;else if("left"===r)b=m(this.right),y=this.right-d,C=b-g,E=m(t.left)+g,T=t.right;else if("right"===r)b=m(this.left),E=t.left,T=m(t.right)-g,y=b+g,C=this.left+d;else if("x"===e){if("center"===r)b=m((t.top+t.bottom)/2+.5);else if(Z(r)){const t=Object.keys(r)[0],e=r[t];b=m(this.chart.scales[t].getPixelForValue(e))}S=t.top,A=t.bottom,k=b+g,x=k+d}else if("y"===e){if("center"===r)b=m((t.left+t.right)/2);else if(Z(r)){const t=Object.keys(r)[0],e=r[t];b=m(this.chart.scales[t].getPixelForValue(e))}y=b-g,C=y-d,E=t.left,T=t.right}const P=et(i.ticks.maxTicksLimit,u),I=Math.max(1,Math.ceil(u/P));for(v=0;v<u;v+=I){const t=this.getContext(v),e=o.setContext(t),i=s.setContext(t),r=e.lineWidth,c=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;w=Mr(this,v,a),void 0!==w&&(_=Be(n,w,r),l?y=C=E=T=_:k=x=S=A=_,h.push({tx1:y,ty1:k,tx2:C,ty2:x,x1:E,y1:S,x2:T,y2:A,width:r,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=u,this._borderValue=b,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=o,d=Vr(n.grid),h=d+c,f=u?-c:h,p=-Bt(this.labelRotation),g=[];let m,b,v,w,_,y,k,C,x,E,S,T,A="middle";if("top"===i)y=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===i)y=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,_=t.x}else if("x"===e){if("center"===i)y=(t.top+t.bottom)/2+h;else if(Z(i)){const t=Object.keys(i)[0],e=i[t];y=this.chart.scales[t].getPixelForValue(e)+h}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-h;else if(Z(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?A="top":"end"===a&&(A="bottom"));const P=this._getLabelSizes();for(m=0,b=s.length;m<b;++m){v=s[m],w=v.label;const t=o.setContext(this.getContext(m));C=this.getPixelForTick(m)+o.labelOffset,x=this._resolveTickFontOptions(m),E=x.lineHeight,S=J(w)?w.length:1;const e=S/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let d,h=k;if(r?(_=C,"inner"===k&&(h=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-S*E+E/2:"center"===l?-P.highest.height/2-e*E+E:-P.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?P.highest.height/2-e*E:P.highest.height-S*E,u&&(T*=-1),0===p||t.showLabelBackdrop||(_+=E/2*Math.sin(p))):(y=C,T=(1-S)*E/2),t.showLabelBackdrop){const e=sn(t.backdropPadding),n=P.heights[m],i=P.widths[m];let o=T-e.top,r=0-e.left;switch(A){case"middle":o-=n/2;break;case"bottom":o-=n;break}switch(k){case"center":r-=i/2;break;case"right":r-=i;break}d={left:r,top:o,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:w,font:x,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:A,translation:[_,y],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options,n=-Bt(this.labelRotation);if(n)return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),s=t+o,a=r.widest.width;let l,c;return"left"===e?i?(c=this.right+o,"near"===n?l="left":"center"===n?(l="center",c+=a/2):(l="right",c+=a)):(c=this.right-s,"near"===n?l="right":"center"===n?(l="center",c-=a/2):(l="left",c=this.left)):"right"===e?i?(c=this.left+o,"near"===n?l="right":"center"===n?(l="center",c-=a/2):(l="left",c-=a)):(c=this.left+s,"near"===n?l="left":"center"===n?(l="center",c+=a/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks,i=n.findIndex(e=>e.value===t);if(i>=0){const t=e.setContext(this.getContext(i));return t.lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const s=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(o=0,r=i.length;o<r;++o){const t=i[o];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const s=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Be(t,this.left,r)-r/2,c=Be(t,this.right,s)+s/2,u=d=a):(u=Be(t,this.top,r)-r/2,d=Be(t,this.bottom,s)+s/2,l=c=a),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){const e=this.options.ticks;if(!e.display)return;const n=this.ctx,i=this._computeLabelArea();i&&je(n,i);const o=this.getLabelItems(t);for(const r of o){const t=r.options,e=r.font,i=r.label,o=r.textOffset;Xe(n,i,0,o,e,t)}i&&$e(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const o=an(n.font),r=sn(n.padding),s=n.align;let a=o.lineHeight/2;"bottom"===e||"center"===e||Z(e)?(a+=r.bottom,J(n.text)&&(a+=o.lineHeight*(n.text.length-1))):a+=r.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=zr(this,a,e,s);Xe(t,n.text,0,0,o,{color:n.color,maxWidth:u,rotation:d,textAlign:Fr(s,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=et(t.grid&&t.grid.z,-1),i=et(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Hr.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=e.length;o<r;++o){const r=e[o];r[n]!==this.id||t&&r.type!==t||i.push(r)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return an(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Wr{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Ur(e)&&(n=this.register(e));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,jr(t,r,n),this.override&&De.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in De[i]&&(delete De[i][n],this.override&&delete Pe[n])}}function jr(t,e,n){const i=ut(Object.create(null),[n?De.get(n):{},De.get(e),t.defaults]);De.set(e,i),t.defaultRoutes&&$r(e,t.defaultRoutes),t.descriptors&&De.describe(e,t.descriptors)}function $r(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),o=i.pop(),r=[t].concat(i).join("."),s=e[n].split("."),a=s.pop(),l=s.join(".");De.route(r,o,l,a)})}function Ur(t){return"id"in t&&"defaults"in t}class qr{constructor(){this.controllers=new Wr(Xi,"datasets",!0),this.elements=new Wr(yr,"elements"),this.plugins=new Wr(Object,"plugins"),this.scales=new Wr(Hr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):rt(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=bt(t);ot(n["before"+i],[],n),e[t](n),ot(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var Gr=new qr;class Kr{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,e,n);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,i){i=i||{};for(const o of t){const t=o.plugin,r=t[n],s=[e,i,o.options];if(!1===ot(r,s,t)&&i.cancelable)return!1}return!0}invalidate(){X(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=et(n.options&&n.options.plugins,{}),o=Yr(n);return!1!==i||e?Jr(t,o,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Yr(t){const e={},n=[],i=Object.keys(Gr.plugins.items);for(let r=0;r<i.length;r++)n.push(Gr.getPlugin(i[r]));const o=t.plugins||[];for(let r=0;r<o.length;r++){const t=o[r];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}function Xr(t,e){return e||!1!==t?!0===t?{}:t:null}function Jr(t,{plugins:e,localIds:n},i,o){const r=[],s=t.getContext();for(const a of e){const e=a.id,l=Xr(i[e],o);null!==l&&r.push({plugin:a,options:Zr(t.config,{plugin:a,local:n[e]},l,s)})}return r}function Zr(t,{plugin:e,local:n},i,o){const r=t.pluginScopeKeys(e),s=t.getOptionScopes(i,r);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qr(t,e){const n=De.datasets[t]||{},i=(e.datasets||{})[t]||{};return i.indexAxis||e.indexAxis||n.indexAxis||"x"}function ts(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}function es(t,e){return t===e?"_index_":"_value_"}function ns(t){if("x"===t||"y"===t||"r"===t)return t}function is(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function os(t,...e){if(ns(t))return t;for(const n of e){const e=n.axis||is(n.position)||t.length>1&&ns(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rs(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function ss(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return rs(t,"x",n[0])||rs(t,"y",n[0])}return{}}function as(t,e){const n=Pe[t.type]||{scales:{}},i=e.scales||{},o=Qr(t.type,e),r=Object.create(null);return Object.keys(i).forEach(e=>{const s=i[e];if(!Z(s))return console.error(`Invalid scale configuration for scale: ${e}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=os(e,s,ss(e,t),De.scales[s.type]),l=es(a,o),c=n.scales||{};r[e]=dt(Object.create(null),[{axis:a},s,c[a],c[l]])}),t.data.datasets.forEach(n=>{const o=n.type||t.type,s=n.indexAxis||Qr(o,e),a=Pe[o]||{},l=a.scales||{};Object.keys(l).forEach(t=>{const e=ts(t,s),o=n[e+"AxisID"]||e;r[o]=r[o]||Object.create(null),dt(r[o],[{axis:e},i[o],l[t]])})}),Object.keys(r).forEach(t=>{const e=r[t];dt(e,[De.scales[e.type],De.scale])}),r}function ls(t){const e=t.options||(t.options={});e.plugins=et(e.plugins,{}),e.scales=as(t,e)}function cs(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function us(t){return t=t||{},t.data=cs(t.data),ls(t),t}const ds=new Map,hs=new Set;function fs(t,e){let n=ds.get(t);return n||(n=e(),ds.set(t,n),hs.add(n)),n}const ps=(t,e,n)=>{const i=mt(e,n);void 0!==i&&t.add(i)};class gs{constructor(t){this._config=us(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=cs(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ls(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fs(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return fs(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return fs(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return fs(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:o}=this,r=this._cachedScopes(t,n),s=r.get(e);if(s)return s;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>ps(a,t,e))),e.forEach(t=>ps(a,i,t)),e.forEach(t=>ps(a,Pe[o]||{},t)),e.forEach(t=>ps(a,De,t)),e.forEach(t=>ps(a,Ie,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),hs.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Pe[e]||{},De.datasets[e]||{},{type:e},De,Ie]}resolveNamedOptions(t,e,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:s}=ms(this._resolverCache,t,i);let a=r;if(vs(r,e)){o.$shared=!1,n=wt(n)?n():n;const e=this.createResolver(t,n,s);a=hn(r,n,e)}for(const l of e)o[l]=a[l];return o}createResolver(t,e,n=[""],i){const{resolver:o}=ms(this._resolverCache,t,n);return Z(e)?hn(o,e,void 0,i):o}}function ms(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=n.join();let r=i.get(o);if(!r){const t=dn(e,n);r={resolver:t,subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(o,r)}return r}const bs=t=>Z(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||wt(t[n]),!1);function vs(t,e){const{isScriptable:n,isIndexable:i}=fn(t);for(const o of e){const e=n(o),r=i(o),s=(r||e)&&t[o];if(e&&(wt(s)||bs(s))||r&&J(s))return!0}return!1}var ws="4.4.0";const _s=["top","bottom","left","right","chartArea"];function ys(t,e){return"top"===t||"bottom"===t||-1===_s.indexOf(t)&&"x"===e}function ks(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Cs(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ot(n&&n.onComplete,[t],e)}function xs(t){const e=t.chart,n=e.options.animation;ot(n&&n.onProgress,[t],e)}function Es(t){return Hn()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ss={},Ts=t=>{const e=Es(t);return Object.values(Ss).filter(t=>t.canvas===e).pop()};function As(t,e,n){const i=Object.keys(t);for(const o of i){const i=+o;if(i>=e){const r=t[o];delete t[o],(n>0||i>e)&&(t[i+n]=r)}}}function Ps(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}function Is(t,e,n){return t.options.clip?t[n]:e[n]}function Rs(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Is(n,e,"left"),right:Is(n,e,"right"),top:Is(i,e,"top"),bottom:Is(i,e,"bottom")}:e}class Os{static defaults=De;static instances=Ss;static overrides=Pe;static registry=Gr;static version=ws;static getChart=Ts;static register(...t){Gr.add(...t),Ms()}static unregister(...t){Gr.remove(...t),Ms()}constructor(t,e){const n=this.config=new gs(e),i=Es(t),o=Ts(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||_r(i)),this.platform.updateConfig(n);const s=this.platform.acquireContext(i,r.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=Y(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Kr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=re(t=>this.update(t),r.resizeDelay||0),this._dataChanges=[],Ss[this.id]=this,s&&a?(xi.listen(this,"complete",Cs),xi.listen(this,"progress",xs),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:o}=this;return X(t)?e&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Gr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ti(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fe(this.canvas,this.ctx),this}stop(){return xi.stop(this),this}resize(t,e){xi.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,e,o),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ti(this,s,!0)&&(this.notifyPlugins("resize",{size:r}),ot(n.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const t=this.options,e=t.scales||{};rt(e,(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let o=[];e&&(o=o.concat(Object.keys(e).map(t=>{const n=e[t],i=os(t,n),o="r"===i,r="x"===i;return{options:n,dposition:o?"chartArea":r?"bottom":"left",dtype:o?"radialLinear":r?"category":"linear"}}))),rt(o,e=>{const o=e.options,r=o.id,s=os(r,o),a=et(o.type,e.dtype);void 0!==o.position&&ys(o.position,s)===ys(e.dposition)||(o.position=e.dposition),i[r]=!0;let l=null;if(r in n&&n[r].type===a)l=n[r];else{const t=Gr.getScale(a);l=new t({id:r,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(o,t)}),rt(i,(t,e)=>{t||delete n[e]}),rt(n,t=>{Jo.configure(this,t,t.options),Jo.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(ks("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let o=this.getDatasetMeta(n);const r=i.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=r,o.indexAxis=i.indexAxis||Qr(r,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const e=Gr.getController(r),{datasetElementType:i,dataElementType:s}=De.datasets[r];Object.assign(e,{dataElementType:Gr.getElement(s),datasetElementType:i&&Gr.getElement(i)}),o.controller=new e(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){rt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===o.indexOf(t);t.buildOrUpdateElements(e),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||rt(o,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ks("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){rt(this.scales,t=>{Jo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);_t(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of e){const e="_removeElements"===n?-o:o;As(t,i,e)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let o=1;o<e;o++)if(!_t(i,n(o)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Jo.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],rt(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,wt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(xi.has(this)?this.attached&&!xi.running(this)&&xi.start(this):(this.draw(),Cs({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];t&&!o.visible||n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,o=Rs(t,this.chartArea),r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(i&&je(e,{left:!1===n.left?0:o.left-n.left,right:!1===n.right?this.width:o.right+n.right,top:!1===n.top?0:o.top-n.top,bottom:!1===n.bottom?this.height:o.bottom+n.bottom}),t.controller.draw(),i&&$e(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return We(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const o=Do.modes[e];return"function"===typeof o?o(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=un(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);vt(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),xi.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Fe(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ss[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};rt(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},o=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const s=()=>{i("attach",s),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",s)},e.isAttached(this.canvas)?s():r()}unbindEvents(){rt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},rt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let o,r,s,a;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){r=t[s];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),i=!st(n,e);i&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const i=this.options.hover,o=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),r=o(e,t),s=n?t:o(t,e);r.length&&this.updateHoverStyle(r,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:o}=this,r=e,s=this._getActiveElements(t,i,n,r),a=yt(t),l=Ps(t,this._lastEvent,n,a);n&&(this._lastEvent=null,ot(o.onHover,[t,s,this],this),a&&ot(o.onClick,[t,s,this],this));const c=!st(s,i);return(c||e)&&(this._active=s,this._updateHoverStyles(s,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}function Ms(){return rt(Os.instances,t=>t._plugins.invalidate())}function Ds(t,e,n){const{startAngle:i,pixelMargin:o,x:r,y:s,outerRadius:a,innerRadius:l}=e;let c=o/a;t.beginPath(),t.arc(r,s,a,i-c,n+c),l>o?(c=o/l,t.arc(r,s,l,n+c,i-c,!0)):t.arc(r,s,o,n+Tt,i-Tt),t.closePath(),t.clip()}function Vs(t){return nn(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Ns(t,e,n,i){const o=Vs(t.options.borderRadius),r=(n-e)/2,s=Math.min(r,i*e/2),a=t=>{const e=(n-Math.min(r,t))*i/2;return qt(t,0,Math.min(r,e))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:qt(o.innerStart,0,s),innerEnd:qt(o.innerEnd,0,s)}}function Ls(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Bs(t,e,n,i,o,r){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let f=0;const p=o-l;if(i){const t=u>0?u-i:0,e=d>0?d-i:0,n=(t+e)/2,o=0!==n?p*n/(n+i):p;f=(p-o)/2}const g=Math.max(.001,p*d-n/kt)/d,m=(p-g)/2,b=l+m+f,v=o-m-f,{outerStart:w,outerEnd:_,innerStart:y,innerEnd:k}=Ns(e,h,d,v-b),C=d-w,x=d-_,E=b+w/C,S=v-_/x,T=h+y,A=h+k,P=b+y/T,I=v-k/A;if(t.beginPath(),r){const e=(E+S)/2;if(t.arc(s,a,d,E,e),t.arc(s,a,d,e,S),_>0){const e=Ls(x,S,s,a);t.arc(e.x,e.y,_,S,v+Tt)}const n=Ls(A,v,s,a);if(t.lineTo(n.x,n.y),k>0){const e=Ls(A,I,s,a);t.arc(e.x,e.y,k,v+Tt,I+Math.PI)}const i=(v-k/h+(b+y/h))/2;if(t.arc(s,a,h,v-k/h,i,!0),t.arc(s,a,h,i,b+y/h,!0),y>0){const e=Ls(T,P,s,a);t.arc(e.x,e.y,y,P+Math.PI,b-Tt)}const o=Ls(C,b,s,a);if(t.lineTo(o.x,o.y),w>0){const e=Ls(C,E,s,a);t.arc(e.x,e.y,w,b-Tt,E)}}else{t.moveTo(s,a);const e=Math.cos(E)*d+s,n=Math.sin(E)*d+a;t.lineTo(e,n);const i=Math.cos(S)*d+s,o=Math.sin(S)*d+a;t.lineTo(i,o)}t.closePath()}function Fs(t,e,n,i,o){const{fullCircles:r,startAngle:s,circumference:a}=e;let l=e.endAngle;if(r){Bs(t,e,n,i,l,o);for(let e=0;e<r;++e)t.fill();isNaN(a)||(l=s+(a%Ct||Ct))}return Bs(t,e,n,i,l,o),t.fill(),l}function zs(t,e,n,i,o){const{fullCircles:r,startAngle:s,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,f?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(r){Bs(t,e,n,i,p,o);for(let e=0;e<r;++e)t.stroke();isNaN(a)||(p=s+(a%Ct||Ct))}f&&Ds(t,e,p),r||(Bs(t,e,n,i,p,o),t.stroke())}class Hs extends yr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:o,distance:r}=Ht(i,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=et(u,a-s),f=h>=Ct||Ut(o,s,a),p=Kt(r,l+d,c+d);return f&&p}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:o,innerRadius:r,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(i+o)/2,u=(r+s+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,o=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>Ct?Math.floor(n/Ct):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*i,Math.sin(s)*i);const a=1-Math.sin(Math.min(kt,n||0)),l=i*a;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,Fs(t,this,l,o,r),zs(t,this,l,o,r),t.restore()}}function Ws(t,e,n=e){t.lineCap=et(n.borderCapStyle,e.borderCapStyle),t.setLineDash(et(n.borderDash,e.borderDash)),t.lineDashOffset=et(n.borderDashOffset,e.borderDashOffset),t.lineJoin=et(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=et(n.borderWidth,e.borderWidth),t.strokeStyle=et(n.borderColor,e.borderColor)}function js(t,e,n){t.lineTo(n.x,n.y)}function $s(t){return t.stepped?Ue:t.tension||"monotone"===t.cubicInterpolationMode?qe:js}function Us(t,e,n={}){const i=t.length,{start:o=0,end:r=i-1}=n,{start:s,end:a}=e,l=Math.max(o,s),c=Math.min(r,a),u=o<s&&r<s||o>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function qs(t,e,n,i){const{points:o,options:r}=e,{count:s,start:a,loop:l,ilen:c}=Us(o,n,i),u=$s(r);let d,h,f,{move:p=!0,reverse:g}=i||{};for(d=0;d<=c;++d)h=o[(a+(g?c-d:d))%s],h.skip||(p?(t.moveTo(h.x,h.y),p=!1):u(t,f,h,g,r.stepped),f=h);return l&&(h=o[(a+(g?c:0))%s],u(t,f,h,g,r.stepped)),!!l}function Gs(t,e,n,i){const o=e.points,{count:r,start:s,ilen:a}=Us(o,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,f,p,g,m=0,b=0;const v=t=>(s+(c?a-t:t))%r,w=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(d=o[v(0)],t.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=o[v(u)],d.skip)continue;const e=d.x,n=d.y,i=0|e;i===h?(n<f?f=n:n>p&&(p=n),m=(b*m+e)/++b):(w(),t.lineTo(e,n),h=i,b=0,f=p=n),g=n}w()}function Ks(t){const e=t.options,n=e.borderDash&&e.borderDash.length,i=!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n;return i?Gs:qs}function Ys(t){return t.stepped?oi:t.tension||"monotone"===t.cubicInterpolationMode?ri:ii}function Xs(t,e,n,i){let o=e._path;o||(o=e._path=new Path2D,e.path(o,n,i)&&o.closePath()),Ws(t,e.options),t.stroke(o)}function Js(t,e,n,i){const{segments:o,options:r}=e,s=Ks(e);for(const a of o)Ws(t,r,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const Zs="function"===typeof Path2D;function Qs(t,e,n,i){Zs&&!e.options.segment?Xs(t,e,n,i):Js(t,e,n,i)}class ta extends yr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;zn(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=vi(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],o=this.points,r=gi(this,{property:e,start:i,end:i});if(!r.length)return;const s=[],a=Ys(n);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:u}=r[l],d=o[c],h=o[u];if(d===h){s.push(d);continue}const f=Math.abs((i-d[e])/(h[e]-d[e])),p=a(d,h,f,n.stepped);p[e]=t[e],s.push(p)}return 1===s.length?s[0]:s}pathSegment(t,e,n){const i=Ks(this);return i(t,this,e,n)}path(t,e,n){const i=this.segments,o=Ks(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const s of i)r&=o(t,this,s,{start:e,end:e+n-1});return!!r}draw(t,e,n,i){const o=this.options||{},r=this.points||[];r.length&&o.borderWidth&&(t.save(),Qs(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ea(t,e,n,i){const o=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<o.radius+o.hitRadius}class na extends yr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(e-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return ea(this,t,"x",e)}inYRange(t,e){return ea(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const n=e&&t.borderWidth||0;return 2*(e+n)}draw(t,e){const n=this.options;this.skip||n.radius<.1||!We(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,ze(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ia(t,e){const{x:n,y:i,base:o,width:r,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=s/2,a=Math.min(n,o),l=Math.max(n,o),c=i-d,u=i+d):(d=r/2,a=n-d,l=n+d,c=Math.min(i,o),u=Math.max(i,o)),{left:a,top:c,right:l,bottom:u}}function oa(t,e,n,i){return t?0:qt(e,n,i)}function ra(t,e,n){const i=t.options.borderWidth,o=t.borderSkipped,r=on(i);return{t:oa(o.top,r.top,0,n),r:oa(o.right,r.right,0,e),b:oa(o.bottom,r.bottom,0,n),l:oa(o.left,r.left,0,e)}}function sa(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,r=rn(o),s=Math.min(e,n),a=t.borderSkipped,l=i||Z(o);return{topLeft:oa(!l||a.top||a.left,r.topLeft,0,s),topRight:oa(!l||a.top||a.right,r.topRight,0,s),bottomLeft:oa(!l||a.bottom||a.left,r.bottomLeft,0,s),bottomRight:oa(!l||a.bottom||a.right,r.bottomRight,0,s)}}function aa(t){const e=ia(t),n=e.right-e.left,i=e.bottom-e.top,o=ra(t,n/2,i/2),r=sa(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+o.l,y:e.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function la(t,e,n,i){const o=null===e,r=null===n,s=o&&r,a=t&&!s&&ia(t,i);return a&&(o||Kt(e,a.left,a.right))&&(r||Kt(n,a.top,a.bottom))}function ca(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function ua(t,e){t.rect(e.x,e.y,e.w,e.h)}function da(t,e,n={}){const i=t.x!==n.x?-e:0,o=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,s=(t.y+t.h!==n.y+n.h?e:0)-o;return{x:t.x+i,y:t.y+o,w:t.w+r,h:t.h+s,radius:t.radius}}class ha extends yr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=aa(this),s=ca(r.radius)?Je:ua;t.save(),r.w===o.w&&r.h===o.h||(t.beginPath(),s(t,da(r,e,o)),t.clip(),s(t,da(o,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),s(t,da(o,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return la(this,t,e,n)}inXRange(t,e){return la(this,t,null,e)}inYRange(t,e){return la(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+i)/2:e,y:o?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}var fa=Object.freeze({__proto__:null,ArcElement:Hs,BarElement:ha,LineElement:ta,PointElement:na});const pa=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ga=pa.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function ma(t){return pa[t%pa.length]}function ba(t){return ga[t%ga.length]}function va(t,e){return t.borderColor=ma(e),t.backgroundColor=ba(e),++e}function wa(t,e){return t.backgroundColor=t.data.map(()=>ma(e++)),e}function _a(t,e){return t.backgroundColor=t.data.map(()=>ba(e++)),e}function ya(t){let e=0;return(n,i)=>{const o=t.getDatasetMeta(i).controller;o instanceof mo?e=wa(n,e):o instanceof vo?e=_a(n,e):o&&(e=va(n,e))}}function ka(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Ca(t){return t&&(t.borderColor||t.backgroundColor)}var xa={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:o}=t.config,{elements:r}=o;if(!n.forceOverride&&(ka(i)||Ca(o)||r&&ka(r)))return;const s=ya(t);i.forEach(s)}};function Ea(t,e,n,i,o){const r=o.samples||i;if(r>=n)return t.slice(e,e+n);const s=[],a=(n-2)/(r-2);let l=0;const c=e+n-1;let u,d,h,f,p,g=e;for(s[l++]=t[g],u=0;u<r-2;u++){let i,o=0,r=0;const c=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,b=m-c;for(i=c;i<m;i++)o+=t[i].x,r+=t[i].y;o/=b,r/=b;const v=Math.floor(u*a)+1+e,w=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:_,y:y}=t[g];for(h=f=-1,i=v;i<w;i++)f=.5*Math.abs((_-o)*(t[i].y-y)-(_-t[i].x)*(r-y)),f>h&&(h=f,d=t[i],p=i);s[l++]=d,g=p}return s[l++]=t[c],s}function Sa(t,e,n,i){let o,r,s,a,l,c,u,d,h,f,p=0,g=0;const m=[],b=e+n-1,v=t[e].x,w=t[b].x,_=w-v;for(o=e;o<e+n;++o){r=t[o],s=(r.x-v)/_*i,a=r.y;const e=0|s;if(e===l)a<h?(h=a,c=o):a>f&&(f=a,u=o),p=(g*p+r.x)/++g;else{const n=o-1;if(!X(c)&&!X(u)){const e=Math.min(c,u),i=Math.max(c,u);e!==d&&e!==n&&m.push({...t[e],x:p}),i!==d&&i!==n&&m.push({...t[i],x:p})}o>0&&n!==d&&m.push(t[n]),m.push(r),l=e,g=0,h=f=a,c=u=d=o}}return m}function Ta(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Aa(t){t.data.datasets.forEach(t=>{Ta(t)})}function Pa(t,e){const n=e.length;let i,o=0;const{iScale:r}=t,{min:s,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(o=qt(Xt(e,r.axis,s).lo,0,n-1)),i=c?qt(Xt(e,r.axis,a).hi+1,o,n)-o:n-o,{start:o,count:i}}var Ia={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void Aa(t);const i=t.width;t.data.datasets.forEach((e,o)=>{const{_data:r,indexAxis:s}=e,a=t.getDatasetMeta(o),l=r||e.data;if("y"===ln([s,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:d}=Pa(a,l);const h=n.threshold||4*i;if(d<=h)return void Ta(e);let f;switch(X(r)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":f=Ea(l,u,d,i,n);break;case"min-max":f=Sa(l,u,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=f})},destroy(t){Aa(t)}};function Ra(t,e,n){const i=t.segments,o=t.points,r=e.points,s=[];for(const a of i){let{start:t,end:i}=a;i=Da(t,i,o);const l=Oa(n,o[t],o[i],a.loop);if(!e.segments){s.push({source:a,target:l,start:o[t],end:o[i]});continue}const c=gi(e,l);for(const e of c){const t=Oa(n,r[e.start],r[e.end],e.loop),i=pi(a,o,t);for(const o of i)s.push({source:o,target:e,start:{[n]:Va(l,t,"start",Math.max)},end:{[n]:Va(l,t,"end",Math.min)}})}}return s}function Oa(t,e,n,i){if(i)return;let o=e[t],r=n[t];return"angle"===t&&(o=$t(o),r=$t(r)),{property:t,start:o,end:r}}function Ma(t,e){const{x:n=null,y:i=null}=t||{},o=e.points,r=[];return e.segments.forEach(({start:t,end:e})=>{e=Da(t,e,o);const s=o[t],a=o[e];null!==i?(r.push({x:s.x,y:i}),r.push({x:a.x,y:i})):null!==n&&(r.push({x:n,y:s.y}),r.push({x:n,y:a.y}))}),r}function Da(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Va(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Na(t,e){let n=[],i=!1;return J(t)?(i=!0,n=t):n=Ma(t,e),n.length?new ta({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function La(t){return t&&!1!==t.fill}function Ba(t,e,n){const i=t[e];let o=i.fill;const r=[e];let s;if(!n)return o;while(!1!==o&&-1===r.indexOf(o)){if(!Q(o))return o;if(s=t[o],!s)return!1;if(s.visible)return o;r.push(o),o=s.fill}return!1}function Fa(t,e,n){const i=ja(t);if(Z(i))return!isNaN(i.value)&&i;let o=parseFloat(i);return Q(o)&&Math.floor(o)===o?za(i[0],e,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function za(t,e,n,i){return"-"!==t&&"+"!==t||(n=e+n),!(n===e||n<0||n>=i)&&n}function Ha(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Z(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Wa(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Z(t)?t.value:e.getBaseValue(),i}function ja(t){const e=t.options,n=e.fill;let i=et(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}function $a(t){const{scale:e,index:n,line:i}=t,o=[],r=i.segments,s=i.points,a=Ua(e,n);a.push(Na({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const t=r[l];for(let e=t.start;e<=t.end;e++)qa(o,s[e],a)}return new ta({points:o,options:{}})}function Ua(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const t=i[o];if(t.index===e)break;t.hidden||n.unshift(t.dataset)}return n}function qa(t,e,n){const i=[];for(let o=0;o<n.length;o++){const r=n[o],{first:s,last:a,point:l}=Ga(r,e,"x");if(!(!l||s&&a))if(s)i.unshift(l);else if(t.push(l),!a)break}t.push(...i)}function Ga(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const o=i[n],r=t.segments,s=t.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const t=r[c],e=s[t.start][n],i=s[t.end][n];if(Kt(o,e,i)){a=o===e,l=o===i;break}}return{first:a,last:l,point:i}}class Ka{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:o,radius:r}=this;return e=e||{start:0,end:Ct},t.arc(i,o,r,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,o=t.angle;return{x:e+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function Ya(t){const{chart:e,fill:n,line:i}=t;if(Q(n))return Xa(e,n);if("stack"===n)return $a(t);if("shape"===n)return!0;const o=Ja(t);return o instanceof Ka?o:Na(o,i)}function Xa(t,e){const n=t.getDatasetMeta(e),i=n&&t.isDatasetVisible(e);return i?n.dataset:null}function Ja(t){const e=t.scale||{};return e.getPointPositionForValue?Qa(t):Za(t)}function Za(t){const{scale:e={},fill:n}=t,i=Ha(n,e);if(Q(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}function Qa(t){const{scale:e,fill:n}=t,i=e.options,o=e.getLabels().length,r=i.reverse?e.max:e.min,s=Wa(n,e,r),a=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,r);return new Ka({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<o;++l)a.push(e.getPointPositionForValue(l,s));return a}function tl(t,e,n){const i=Ya(e),{line:o,scale:r,axis:s}=e,a=o.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&o.points.length&&(je(t,n),el(t,{line:o,target:i,above:u,below:d,area:n,scale:r,axis:s}),$e(t))}function el(t,e){const{line:n,target:i,above:o,below:r,area:s,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&r!==o&&(nl(t,i,s.top),il(t,{line:n,target:i,color:o,scale:a,property:l}),t.restore(),t.save(),nl(t,i,s.bottom)),il(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore()}function nl(t,e,n){const{segments:i,points:o}=e;let r=!0,s=!1;t.beginPath();for(const a of i){const{start:i,end:l}=a,c=o[i],u=o[Da(i,l,o)];r?(t.moveTo(c.x,c.y),r=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function il(t,e){const{line:n,target:i,property:o,color:r,scale:s}=e,a=Ra(n,i,o);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:e=r}={}}=l,a=!0!==i;t.save(),t.fillStyle=e,ol(t,s,a&&Oa(o,u,d)),t.beginPath();const h=!!n.pathSegment(t,l);let f;if(a){h?t.closePath():rl(t,i,d,o);const e=!!i.pathSegment(t,c,{move:h,reverse:!0});f=h&&e,f||rl(t,i,u,o)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function ol(t,e,n){const{top:i,bottom:o}=e.chart.chartArea,{property:r,start:s,end:a}=n||{};"x"===r&&(t.beginPath(),t.rect(s,i,a-s,o-i),t.clip())}function rl(t,e,n,i){const o=e.interpolate(n,i);o&&t.lineTo(o.x,o.y)}var sl={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,o=[];let r,s,a,l;for(s=0;s<i;++s)r=t.getDatasetMeta(s),a=r.dataset,l=null,a&&a.options&&a instanceof ta&&(l={visible:t.isDatasetVisible(s),index:s,fill:Fa(a,s,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,o.push(l);for(s=0;s<i;++s)l=o[s],l&&!1!==l.fill&&(l.fill=Ba(o,s,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,o=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let s=o.length-1;s>=0;--s){const e=o[s].$filler;e&&(e.line.updateControlPoints(r,e.axis),i&&e.fill&&tl(t.ctx,e,r))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const e=i[o].$filler;La(e)&&tl(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;La(i)&&"beforeDatasetDraw"===n.drawTime&&tl(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const al=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},ll=(t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class cl extends yr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ot(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=an(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=al(n,o);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,o,s,a)+10):(c=this.maxHeight,l=this._fitCols(r,i,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+s;let u=t;o.textAlign="left",o.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+o.measureText(t.text).width;(0===f||l[l.length-1]+p+2*s>r)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:i},l[l.length-1]+=p+s}),u}_fitCols(t,e,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-t;let u=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach((t,r)=>{const{itemWidth:g,itemHeight:m}=ul(n,e,o,t,i);r>0&&h+m+2*s>c&&(u+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),a[r]={left:f,top:h,col:p,width:g,height:m},d=Math.max(d,g),h+=m+s}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:o}}=this,r=li(o,this.left,this.width);if(this.isHorizontal()){let o=0,s=ae(n,this.left+i,this.right-this.lineWidths[o]);for(const a of e)o!==a.row&&(o=a.row,s=ae(n,this.left+i,this.right-this.lineWidths[o])),a.top+=this.top+t+i,a.left=r.leftForLtr(r.x(s),a.width),s+=a.width+i}else{let o=0,s=ae(n,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const a of e)a.col!==o&&(o=a.col,s=ae(n,this.top+t+i,this.bottom-this.columnSizes[o].height)),a.top=s,a.left+=this.left+i,a.left=r.leftForLtr(r.x(a.left),a.width),s+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;je(t,this),this._draw(),$e(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:o,labels:r}=t,s=De.color,a=li(t.rtl,this.left,this.width),l=an(r.font),{padding:c}=r,u=l.size,d=u/2;let h;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=al(r,u),m=function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const o=et(n.lineWidth,1);if(i.fillStyle=et(n.fillStyle,s),i.lineCap=et(n.lineCap,"butt"),i.lineDashOffset=et(n.lineDashOffset,0),i.lineJoin=et(n.lineJoin,"miter"),i.lineWidth=o,i.strokeStyle=et(n.strokeStyle,s),i.setLineDash(et(n.lineDash,[])),r.usePointStyle){const s={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:o},l=a.xPlus(t,f/2),c=e+d;He(i,s,l,c,r.pointStyleWidth&&f)}else{const r=e+Math.max((u-p)/2,0),s=a.leftForLtr(t,f),l=rn(n.borderRadius);i.beginPath(),Object.values(l).some(t=>0!==t)?Je(i,{x:s,y:r,w:f,h:p,radius:l}):i.rect(s,r,f,p),i.fill(),0!==o&&i.stroke()}i.restore()},b=function(t,e,n){Xe(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();h=v?{x:ae(o,this.left+c,this.right-n[0]),y:this.top+c+w,line:0}:{x:this.left+c,y:ae(o,this.top+w+c,this.bottom-e[0].height),line:0},ci(this.ctx,t.textDirection);const _=g+c;this.legendItems.forEach((s,u)=>{i.strokeStyle=s.fontColor,i.fillStyle=s.fontColor;const p=i.measureText(s.text).width,g=a.textAlign(s.textAlign||(s.textAlign=r.textAlign)),y=f+d+p;let k=h.x,C=h.y;a.setWidth(this.width),v?u>0&&k+y+c>this.right&&(C=h.y+=_,h.line++,k=h.x=ae(o,this.left+c,this.right-n[h.line])):u>0&&C+_>this.bottom&&(k=h.x=k+e[h.line].width+c,h.line++,C=h.y=ae(o,this.top+w+c,this.bottom-e[h.line].height));const x=a.x(k);if(m(x,C,s),k=le(g,k+f+d,v?k+y:this.right,t.rtl),b(a.x(k),C,s),v)h.x+=y+c;else if("string"!==typeof s.text){const t=l.lineHeight;h.y+=fl(s,t)+c}else h.y+=_}),ui(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=an(e.font),i=sn(e.padding);if(!e.display)return;const o=li(t.rtl,this.left,this.width),r=this.ctx,s=e.position,a=n.size/2,l=i.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=ae(t.align,u,this.right-d);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+ae(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=ae(s,u,u+d);r.textAlign=o.textAlign(se(s)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,Xe(r,e.text,h,c,n)}_computeTitleHeight(){const t=this.options.title,e=an(t.font),n=sn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,o;if(Kt(t,this.left,this.right)&&Kt(e,this.top,this.bottom))for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Kt(t,i.left,i.left+i.width)&&Kt(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!pl(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,o=ll(i,n);i&&!o&&ot(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!o&&ot(e.onHover,[t,n,this],this)}else n&&ot(e.onClick,[t,n,this],this)}}function ul(t,e,n,i,o){const r=dl(i,t,e,n),s=hl(o,i,e.lineHeight);return{itemWidth:r,itemHeight:s}}function dl(t,e,n,i){let o=t.text;return o&&"string"!==typeof o&&(o=o.reduce((t,e)=>t.length>e.length?t:e)),e+n.size/2+i.measureText(o).width}function hl(t,e,n){let i=t;return"string"!==typeof e.text&&(i=fl(e,n)),i}function fl(t,e){const n=t.text?t.text.length:0;return e*n}function pl(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}var gl={id:"legend",_element:cl,start(t,e,n){const i=t.legend=new cl({ctx:t.ctx,options:n,chart:t});Jo.configure(t,i,n),Jo.addBox(t,i)},stop(t){Jo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Jo.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:r,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=sn(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:o||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ml extends yr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=J(n.text)?n.text.length:1;this._padding=sn(n.padding);const o=i*an(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:o,options:r}=this,s=r.align;let a,l,c,u=0;return this.isHorizontal()?(l=ae(s,n,o),c=e+t,a=o-n):("left"===r.position?(l=n+t,c=ae(s,i,e),u=-.5*kt):(l=o-t,c=ae(s,e,i),u=.5*kt),a=i-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=an(e.font),i=n.lineHeight,o=i/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:l}=this._drawArgs(o);Xe(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:l,textAlign:se(e.align),textBaseline:"middle",translation:[r,s]})}}function bl(t,e){const n=new ml({ctx:t.ctx,options:e,chart:t});Jo.configure(t,n,e),Jo.addBox(t,n),t.titleBlock=n}var vl={id:"title",_element:ml,start(t,e,n){bl(t,n)},stop(t){const e=t.titleBlock;Jo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Jo.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wl=new WeakMap;var _l={id:"subtitle",start(t,e,n){const i=new ml({ctx:t.ctx,options:n,chart:t});Jo.configure(t,i,n),Jo.addBox(t,i),wl.set(t,i)},stop(t){Jo.removeBox(t,wl.get(t)),wl.delete(t)},beforeUpdate(t,e,n){const i=wl.get(t);Jo.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const yl={average(t){if(!t.length)return!1;let e,n,i=0,o=0,r=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,o+=t.y,++r}}return{x:i/r,y:o/r}},nearest(t,e){if(!t.length)return!1;let n,i,o,r=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=i.getCenterPoint(),n=Wt(e,t);n<a&&(a=n,o=i)}}if(o){const t=o.tooltipPosition();r=t.x,s=t.y}return{x:r,y:s}}};function kl(t,e){return e&&(J(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Cl(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function xl(t,e){const{element:n,datasetIndex:i,index:o}=e,r=t.getDatasetMeta(i).controller,{label:s,value:a}=r.getLabelAndValue(o);return{chart:t,label:s,parsed:r.getParsed(o),raw:t.data.datasets[i].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function El(t,e){const n=t.chart.ctx,{body:i,footer:o,title:r}=t,{boxWidth:s,boxHeight:a}=e,l=an(e.bodyFont),c=an(e.titleFont),u=an(e.footerFont),d=r.length,h=o.length,f=i.length,p=sn(e.padding);let g=p.height,m=0,b=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const t=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*t+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let v=0;const w=function(t){m=Math.max(m,n.measureText(t).width+v)};return n.save(),n.font=c.string,rt(t.title,w),n.font=l.string,rt(t.beforeBody.concat(t.afterBody),w),v=e.displayColors?s+2+e.boxPadding:0,rt(i,t=>{rt(t.before,w),rt(t.lines,w),rt(t.after,w)}),v=0,n.font=u.string,rt(t.footer,w),n.restore(),m+=p.width,{width:m,height:g}}function Sl(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function Tl(t,e,n,i){const{x:o,width:r}=i,s=n.caretSize+n.caretPadding;return"left"===t&&o+r+s>e.width||("right"===t&&o-r-s<0||void 0)}function Al(t,e,n,i){const{x:o,width:r}=n,{width:s,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=o<=(a+l)/2?"left":"right":o<=r/2?c="left":o>=s-r/2&&(c="right"),Tl(c,t,e,n)&&(c="center"),c}function Pl(t,e,n){const i=n.yAlign||e.yAlign||Sl(t,n);return{xAlign:n.xAlign||e.xAlign||Al(t,e,n,i),yAlign:i}}function Il(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}function Rl(t,e,n){let{y:i,height:o}=t;return"top"===e?i+=n:i-="bottom"===e?o+n:o/2,i}function Ol(t,e,n,i){const{caretSize:o,caretPadding:r,cornerRadius:s}=t,{xAlign:a,yAlign:l}=n,c=o+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=rn(s);let p=Il(e,a);const g=Rl(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+o:"right"===a&&(p+=Math.max(d,f)+o),{x:qt(p,0,i.width-e.width),y:qt(g,0,i.height-e.height)}}function Ml(t,e,n){const i=sn(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Dl(t){return kl([],Cl(t))}function Vl(t,e,n){return un(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Nl(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ll={beforeTitle:K,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:K,beforeBody:K,beforeLabel:K,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return X(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex),n=e.controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex),n=e.controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:K,afterBody:K,beforeFooter:K,footer:K,afterFooter:K};function Bl(t,e,n,i){const o=t[e].call(n,i);return"undefined"===typeof o?Ll[e].call(n,i):o}class Fl extends yr{static positioners=yl;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,o=new Ai(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Vl(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,i=Bl(n,"beforeTitle",this,t),o=Bl(n,"title",this,t),r=Bl(n,"afterTitle",this,t);let s=[];return s=kl(s,Cl(i)),s=kl(s,Cl(o)),s=kl(s,Cl(r)),s}getBeforeBody(t,e){return Dl(Bl(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return rt(t,t=>{const e={before:[],lines:[],after:[]},o=Nl(n,t);kl(e.before,Cl(Bl(o,"beforeLabel",this,t))),kl(e.lines,Bl(o,"label",this,t)),kl(e.after,Cl(Bl(o,"afterLabel",this,t))),i.push(e)}),i}getAfterBody(t,e){return Dl(Bl(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Bl(n,"beforeFooter",this,t),o=Bl(n,"footer",this,t),r=Bl(n,"afterFooter",this,t);let s=[];return s=kl(s,Cl(i)),s=kl(s,Cl(o)),s=kl(s,Cl(r)),s}_createItems(t){const e=this._active,n=this.chart.data,i=[],o=[],r=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(xl(this.chart,e[s]));return t.filter&&(l=l.filter((e,i,o)=>t.filter(e,i,o,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),rt(l,e=>{const n=Nl(t.callbacks,e);i.push(Bl(n,"labelColor",this,e)),o.push(Bl(n,"labelPointStyle",this,e)),r.push(Bl(n,"labelTextColor",this,e))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(i.length){const t=yl[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const e=this._size=El(this,n),s=Object.assign({},t,e),a=Pl(this.chart,n,s),l=Ol(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,o={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const o=this.getCaretPosition(t,n,i);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=rn(s),{x:d,y:h}=t,{width:f,height:p}=e;let g,m,b,v,w,_;return"center"===o?(w=h+p/2,"left"===i?(g=d,m=g-r,v=w+r,_=w-r):(g=d+f,m=g+r,v=w-r,_=w+r),b=g):(m="left"===i?d+Math.max(a,c)+r:"right"===i?d+f-Math.max(l,u)-r:this.caretX,"top"===o?(v=h,w=v-r,g=m-r,b=m+r):(v=h+p,w=v+r,g=m+r,b=m-r),_=v),{x1:g,x2:m,x3:b,y1:v,y2:w,y3:_}}drawTitle(t,e,n){const i=this.title,o=i.length;let r,s,a;if(o){const l=li(n.rtl,this.x,this.width);for(t.x=Ml(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",r=an(n.titleFont),s=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,a=0;a<o;++a)e.fillText(i[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+s,a+1===o&&(t.y+=n.titleMarginBottom-s)}}_drawColorBox(t,e,n,i,o){const r=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=o,c=an(o.bodyFont),u=Ml(this,"left",o),d=i.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+h;if(o.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,c=f+a/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ze(t,e,n,c),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,ze(t,e,n,c)}else{t.lineWidth=Z(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=i.leftForLtr(d,l),n=i.leftForLtr(i.xPlus(d,1),l-2),s=rn(r.borderRadius);Object.values(s).some(t=>0!==t)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Je(t,{x:e,y:f,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Je(t,{x:n,y:f+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=r.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=an(n.bodyFont);let d=u.lineHeight,h=0;const f=li(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+h),t.y+d/2),t.y+=d+o},g=f.textAlign(r);let m,b,v,w,_,y,k;for(e.textAlign=r,e.textBaseline="middle",e.font=u.string,t.x=Ml(this,g,n),e.fillStyle=n.bodyColor,rt(this.beforeBody,p),h=s&&"right"!==g?"center"===r?l/2+c:l+2+c:0,w=0,y=i.length;w<y;++w){for(m=i[w],b=this.labelTextColors[w],e.fillStyle=b,rt(m.before,p),v=m.lines,s&&v.length&&(this._drawColorBox(e,t,w,f,n),d=Math.max(u.lineHeight,a)),_=0,k=v.length;_<k;++_)p(v[_]),d=u.lineHeight;rt(m.after,p)}h=0,d=u.lineHeight,rt(this.afterBody,p),t.y-=o}drawFooter(t,e,n){const i=this.footer,o=i.length;let r,s;if(o){const a=li(n.rtl,this.x,this.width);for(t.x=Ml(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",r=an(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,s=0;s<o;++s)e.fillText(i[s],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:o,yAlign:r}=this,{x:s,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=rn(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(s+u,a),"top"===r&&this.drawCaret(t,e,n,i),e.lineTo(s+l-d,a),e.quadraticCurveTo(s+l,a,s+l,a+d),"center"===r&&"right"===o&&this.drawCaret(t,e,n,i),e.lineTo(s+l,a+c-f),e.quadraticCurveTo(s+l,a+c,s+l-f,a+c),"bottom"===r&&this.drawCaret(t,e,n,i),e.lineTo(s+h,a+c),e.quadraticCurveTo(s,a+c,s,a+c-h),"center"===r&&"left"===o&&this.drawCaret(t,e,n,i),e.lineTo(s,a+u),e.quadraticCurveTo(s,a,s+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const n=yl[t.position].call(this,this._active,this._eventPosition);if(!n)return;const r=this._size=El(this,t),s=Object.assign({},n,this._size),a=Pl(e,t,s),l=Ol(t,s,a,e);i._to===l.x&&o._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=r.width,this.height=r.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=sn(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,e),ci(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),ui(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),o=!st(n,i),r=this._positionChanged(i,e);(o||r)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,n),s=this._positionChanged(r,t),a=e||!st(r,o)||s;return a&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const o=this.options;if("mouseout"===t.type)return[];if(!i)return e;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:i,options:o}=this,r=yl[o.position].call(this,t,e);return!1!==r&&(n!==r.x||i!==r.y)}}var zl={id:"tooltip",_element:Fl,positioners:yl,afterInit(t,e,n){n&&(t.tooltip=new Fl({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ll},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Hl=Object.freeze({__proto__:null,Colors:xa,Decimation:Ia,Filler:sl,Legend:gl,SubTitle:_l,Title:vl,Tooltip:zl});const Wl=(t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function jl(t,e,n,i){const o=t.indexOf(e);if(-1===o)return Wl(t,e,n,i);const r=t.lastIndexOf(e);return o!==r?n:o}const $l=(t,e)=>null===t?null:qt(Math.round(t),0,e);function Ul(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ql extends Hr{static id="category";static defaults={ticks:{callback:Ul}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(X(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:jl(n,t,et(e,t),this._addedLabels),$l(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=0===t&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=e;r++)i.push({value:r});return i}getLabelForValue(t){return Ul.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Gl(t,e){const n=[],i=1e-14,{bounds:o,step:r,min:s,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=r||1,p=u-1,{min:g,max:m}=e,b=!X(s),v=!X(a),w=!X(c),_=(m-g)/(d+1);let y,k,C,x,E=Mt((m-g)/p/f)*f;if(E<i&&!b&&!v)return[{value:g},{value:m}];x=Math.ceil(m/E)-Math.floor(g/E),x>p&&(E=Mt(x*E/p/f)*f),X(l)||(y=Math.pow(10,l),E=Math.ceil(E*y)/y),"ticks"===o?(k=Math.floor(g/E)*E,C=Math.ceil(m/E)*E):(k=g,C=m),b&&v&&r&&Nt((a-s)/r,E/1e3)?(x=Math.round(Math.min((a-s)/E,u)),E=(a-s)/x,k=s,C=a):w?(k=b?s:k,C=v?a:C,x=c-1,E=(C-k)/x):(x=(C-k)/E,x=Ot(x,Math.round(x),E/1e3)?Math.round(x):Math.ceil(x));const S=Math.max(zt(E),zt(k));y=Math.pow(10,X(l)?S:l),k=Math.round(k*y)/y,C=Math.round(C*y)/y;let T=0;for(b&&(h&&k!==s?(n.push({value:s}),k<s&&T++,Ot(Math.round((k+T*E)*y)/y,s,Kl(s,_,t))&&T++):k<s&&T++);T<x;++T){const t=Math.round((k+T*E)*y)/y;if(v&&t>a)break;n.push({value:t})}return v&&h&&C!==a?n.length&&Ot(n[n.length-1].value,a,Kl(a,_,t))?n[n.length-1].value=a:n.push({value:a}):v&&C!==a||n.push({value:C}),n}function Kl(t,e,{horizontal:n,minRotation:i}){const o=Bt(i),r=(n?Math.sin(o):Math.cos(o))||.001,s=.75*e*(""+t).length;return Math.min(e/r,s)}class Yl extends Hr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return X(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=t=>i=e?i:t,s=t=>o=n?o:t;if(t){const t=Rt(i),e=Rt(o);t<0&&e<0?s(0):t>0&&e>0&&r(0)}if(i===o){let e=0===o?1:Math.abs(.05*o);s(o+e),t||r(i-e)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},o=this._range||this,r=Gl(i,o);return"ticks"===t.bounds&&Lt(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return xe(t,this.chart.options.locale,this.options.ticks.format)}}class Xl extends Yl{static id="linear";static defaults={ticks:{callback:Te.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Q(t)?t:0,this.max=Q(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Bt(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Jl=t=>Math.floor(It(t)),Zl=(t,e)=>Math.pow(10,Jl(t)+e);function Ql(t){const e=t/Math.pow(10,Jl(t));return 1===e}function tc(t,e,n){const i=Math.pow(10,n),o=Math.floor(t/i),r=Math.ceil(e/i);return r-o}function ec(t,e){const n=e-t;let i=Jl(n);while(tc(t,e,i)>10)i++;while(tc(t,e,i)<10)i--;return Math.min(i,Jl(t))}function nc(t,{min:e,max:n}){e=tt(t.min,e);const i=[],o=Jl(e);let r=ec(e,n),s=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=o>r?Math.pow(10,o):0,c=Math.round((e-l)*s)/s,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),h=tt(t.min,Math.round((l+u+d*Math.pow(10,r))*s)/s);while(h<n)i.push({value:h,major:Ql(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,s=r>=0?1:s),h=Math.round((l+u+d*Math.pow(10,r))*s)/s;const f=tt(t.max,h);return i.push({value:f,major:Ql(f),significand:d}),i}class ic extends Hr{static id="logarithmic";static defaults={ticks:{callback:Te.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Yl.prototype.parse.apply(this,[t,e]);if(0!==n)return Q(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Q(t)?Math.max(0,t):null,this.max=Q(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Q(this._userMin)&&(this.min=t===Zl(this.min,0)?Zl(this.min,-1):Zl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const o=e=>n=t?n:e,r=t=>i=e?i:t;n===i&&(n<=0?(o(1),r(10)):(o(Zl(n,-1)),r(Zl(i,1)))),n<=0&&o(Zl(i,-1)),i<=0&&r(Zl(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},n=nc(e,this);return"ticks"===t.bounds&&Lt(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":xe(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=It(t),this._valueRange=It(this.max)-It(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(It(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function oc(t){const e=t.ticks;if(e.display&&t.display){const t=sn(e.backdropPadding);return et(e.font&&e.font.size,De.font.size)+t.height}return 0}function rc(t,e,n){return n=J(n)?n:[n],{w:Le(t,e.string,n),h:n.length*e.lineHeight}}function sc(t,e,n,i,o){return t===i||t===o?{start:e-n/2,end:e+n/2}:t<i||t>o?{start:e-n,end:e}:{start:e,end:e+n}}function ac(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],o=[],r=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?kt/r:0;for(let l=0;l<r;l++){const r=s.setContext(t.getPointLabelContext(l));o[l]=r.padding;const c=t.getPointPosition(l,t.drawingArea+o[l],a),u=an(r.font),d=rc(t.ctx,u,t._pointLabels[l]);i[l]=d;const h=$t(t.getIndexAngle(l)+a),f=Math.round(Ft(h)),p=sc(f,c.x,d.w,0,180),g=sc(f,c.y,d.h,90,270);lc(n,e,h,p,g)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=dc(t,i,o)}function lc(t,e,n,i,o){const r=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),o.start<e.t?(l=(e.t-o.start)/s,t.t=Math.min(t.t,e.t-l)):o.end>e.b&&(l=(o.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function cc(t,e,n){const i=t.drawingArea,{extra:o,additionalAngle:r,padding:s,size:a}=n,l=t.getPointPosition(e,i+o+s,r),c=Math.round(Ft($t(l.angle+Tt))),u=pc(l.y,a.h,c),d=hc(c),h=fc(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function uc(t,e){if(!e)return!0;const{left:n,top:i,right:o,bottom:r}=t,s=We({x:n,y:i},e)||We({x:n,y:r},e)||We({x:o,y:i},e)||We({x:o,y:r},e);return!s}function dc(t,e,n){const i=[],o=t._pointLabels.length,r=t.options,{centerPointLabels:s,display:a}=r.pointLabels,l={extra:oc(r)/2,additionalAngle:s?kt/o:0};let c;for(let u=0;u<o;u++){l.padding=n[u],l.size=e[u];const o=cc(t,u,l);i.push(o),"auto"===a&&(o.visible=uc(o,c),o.visible&&(c=o))}return i}function hc(t){return 0===t||180===t?"center":t<180?"left":"right"}function fc(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function pc(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function gc(t,e,n){const{left:i,top:o,right:r,bottom:s}=n,{backdropColor:a}=e;if(!X(a)){const n=rn(e.borderRadius),l=sn(e.backdropPadding);t.fillStyle=a;const c=i-l.left,u=o-l.top,d=r-i+l.width,h=s-o+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),Je(t,{x:c,y:u,w:d,h:h,radius:n}),t.fill()):t.fillRect(c,u,d,h)}}function mc(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let o=e-1;o>=0;o--){const e=t._pointLabelItems[o];if(!e.visible)continue;const r=i.setContext(t.getPointLabelContext(o));gc(n,r,e);const s=an(r.font),{x:a,y:l,textAlign:c}=e;Xe(n,t._pointLabels[o],a,l+s.lineHeight/2,s,{color:r.color,textAlign:c,textBaseline:"middle"})}}function bc(t,e,n,i){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,Ct);else{let n=t.getPointPosition(0,e);o.moveTo(n.x,n.y);for(let r=1;r<i;r++)n=t.getPointPosition(r,e),o.lineTo(n.x,n.y)}}function vc(t,e,n,i,o){const r=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(o.dash),r.lineDashOffset=o.dashOffset,r.beginPath(),bc(t,n,s,i),r.closePath(),r.stroke(),r.restore())}function wc(t,e,n){return un(t,{label:n,index:e,type:"pointLabel"})}class _c extends Yl{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Te.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=sn(oc(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Q(t)&&!isNaN(t)?t:0,this.max=Q(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/oc(this.options))}generateTickLabels(t){Yl.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=ot(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?ac(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){const e=Ct/(this._pointLabels.length||1),n=this.options.startAngle||0;return $t(t*e+Bt(n))}getDistanceFromCenterForValue(t){if(X(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(X(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return wc(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-Tt+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:o}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),bc(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:o}=e,r=this._pointLabels.length;let s,a,l;if(e.pointLabels.display&&mc(this,r),i.display&&this.ticks.forEach((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),s=i.setContext(n),l=o.setContext(n);vc(this,s,a,r,l)}}),n.display){for(t.save(),s=r-1;s>=0;s--){const i=n.setContext(this.getPointLabelContext(s)),{color:o,lineWidth:r}=i;r&&o&&(t.lineWidth=r,t.strokeStyle=o,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(s,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,s)=>{if(0===s&&!e.reverse)return;const a=n.setContext(this.getContext(s)),l=an(a.font);if(o=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,r=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=sn(a.backdropPadding);t.fillRect(-r/2-e.left,-o-l.size/2-e.top,r+e.width,l.size+e.height)}Xe(t,i.label,0,-o,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}const yc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kc=Object.keys(yc);function Cc(t,e){return t-e}function xc(t,e){if(X(e))return null;const n=t._adapter,{parser:i,round:o,isoWeekday:r}=t._parseOpts;let s=e;return"function"===typeof i&&(s=i(s)),Q(s)||(s="string"===typeof i?n.parse(s,i):n.parse(s)),null===s?null:(o&&(s="week"!==o||!Vt(r)&&!0!==r?n.startOf(s,o):n.startOf(s,"isoWeek",r)),+s)}function Ec(t,e,n,i){const o=kc.length;for(let r=kc.indexOf(t);r<o-1;++r){const t=yc[kc[r]],o=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(o*t.size))<=i)return kc[r]}return kc[o-1]}function Sc(t,e,n,i,o){for(let r=kc.length-1;r>=kc.indexOf(n);r--){const n=kc[r];if(yc[n].common&&t._adapter.diff(o,i,n)>=e-1)return n}return kc[n?kc.indexOf(n):0]}function Tc(t){for(let e=kc.indexOf(t)+1,n=kc.length;e<n;++e)if(yc[kc[e]].common)return kc[e]}function Ac(t,e,n){if(n){if(n.length){const{lo:i,hi:o}=Yt(n,e),r=n[i]>=e?n[i]:n[o];t[r]=!0}}else t[e]=!0}function Pc(t,e,n,i){const o=t._adapter,r=+o.startOf(e[0].value,i),s=e[e.length-1].value;let a,l;for(a=r;a<=s;a=+o.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Ic(t,e,n){const i=[],o={},r=e.length;let s,a;for(s=0;s<r;++s)a=e[s],o[a]=s,i.push({value:a,major:!1});return 0!==r&&n?Pc(t,i,o,n):i}class Rc extends Hr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new Eo._date(t.adapters.date);i.init(e),dt(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:xc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:s}=this.getUserBounds();function a(t){r||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(o=Math.max(o,t.max))}r&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=Q(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),o=Q(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,s=Zt(i,o,r);return this._unit=e.unit||(n.autoSkip?Ec(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):Sc(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?Tc(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),Ic(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,i=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),o=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=qt(i,0,r),o=qt(o,0,r),this._offsets={start:i,end:o,factor:1/(i+1+o)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||Ec(o.minUnit,e,n,this._getLabelCapacity(e)),s=et(i.ticks.stepSize,1),a="week"===r&&o.isoWeekday,l=Vt(a)||!0===a,c={};let u,d,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":r),t.diff(n,e,r)>1e5*s)throw new Error(e+" and "+n+" are too far apart with stepSize of "+s+" "+r);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+t.add(u,s,r),d++)Ac(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==d||Ac(c,u,f),Object.keys(c).sort(Cc).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options,i=n.time.displayFormats,o=this._unit,r=e||i[o];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const o=this.options,r=o.ticks.callback;if(r)return ot(r,[t,e,n],this);const s=o.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],u=l&&s[l],d=n[e],h=l&&u&&d&&d.major;return this._adapter.format(t,i||(h?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=Bt(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(i),r=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:n*o+s*r,h:n*r+s*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,Ic(this,[t],this._majorUnit),i),r=this._getLabelSize(o),s=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(xc(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ne(t.sort(Cc))}}function Oc(t,e,n){let i,o,r,s,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Xt(t,"pos",e)),({pos:i,time:r}=t[a]),({pos:o,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Xt(t,"time",e)),({time:i,pos:r}=t[a]),({time:o,pos:s}=t[l]));const c=o-i;return c?r+(s-r)*(e-i)/c:r}class Mc extends Rc{static id="timeseries";static defaults=Rc.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Oc(e,this.min),this._tableRange=Oc(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],o=[];let r,s,a,l,c;for(r=0,s=t.length;r<s;++r)l=t[r],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,s=i.length;r<s;++r)c=i[r+1],a=i[r-1],l=i[r],Math.round((c+a)/2)!==l&&o.push({time:l,pos:r/(s-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Oc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Oc(this._table,n*this._tableRange+this._minPos,!0)}}var Dc=Object.freeze({__proto__:null,CategoryScale:ql,LinearScale:Xl,LogarithmicScale:ic,RadialLinearScale:_c,TimeScale:Rc,TimeSeriesScale:Mc});const Vc=[ko,fa,Hl,Dc];Os.register(...Vc);var Nc=Os},8296:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},8318:function(t,e,n){"use strict";var i=n(2368),o=n(4601),r=n(3938),s=n(938),a=n(1523),l=n(1332),c=a(function(){var t=this.iterator,e=r(i(this.next,t)),n=this.done=!!e.done;if(!n)return l(t,this.mapper,[e.value,this.counter++],!0)});t.exports=function(t){return r(this),o(t),new c(s(this),{mapper:t})}},8369:function(t,e,n){"use strict";var i=n(200),o=n(8420),r=i.WeakMap;t.exports=o(r)&&/native code/.test(String(r))},8406:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},8420:function(t,e,n){"use strict";var i=n(6568),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},8569:function(t,e,n){"use strict";var i=n(281),o=i({}.toString),r=i("".slice);t.exports=function(t){return r(o(t),8,-1)}},8664:function(t,e,n){"use strict";var i=n(281),o=n(2074),r=n(8569),s=Object,a=i("".split);t.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(t){return"String"===r(t)?a(t,""):s(t)}:s},8679:function(t,e,n){"use strict";var i=n(8569);t.exports=Array.isArray||function(t){return"Array"===i(t)}},8743:function(t,e,n){"use strict";var i=n(1605),o=n(2612),r=n(3493),s=n(6648),a=n(7242),l=n(2074),c=l(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=c||!u();i({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var e=o(this),n=r(e),i=arguments.length;a(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})},8823:function(t,e,n){"use strict";var i=n(2074);t.exports=!i(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},8890:function(t,e,n){"use strict";var i=n(6492);t.exports=i("document","documentElement")},8916:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},9034:function(t,e,n){"use strict";var i=n(1602),o=n(2228),r=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[r]===t)}},9206:function(t,e,n){"use strict";var i,o,r,s=n(8369),a=n(200),l=n(5335),c=n(7712),u=n(6490),d=n(9310),h=n(5904),f=n(7708),p="Object already initialized",g=a.TypeError,m=a.WeakMap,b=function(t){return r(t)?o(t):i(t,{})},v=function(t){return function(e){var n;if(!l(e)||(n=o(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}};if(s||d.state){var w=d.state||(d.state=new m);w.get=w.get,w.has=w.has,w.set=w.set,i=function(t,e){if(w.has(t))throw new g(p);return e.facade=t,w.set(t,e),e},o=function(t){return w.get(t)||{}},r=function(t){return w.has(t)}}else{var _=h("state");f[_]=!0,i=function(t,e){if(u(t,_))throw new g(p);return e.facade=t,c(t,_,e),e},o=function(t){return u(t,_)?t[_]:{}},r=function(t){return u(t,_)}}t.exports={set:i,get:o,has:r,enforce:b,getterFor:v}},9229:function(t,e,n){"use strict";var i=n(1605),o=n(2929),r=n(4601),s=n(3938),a=n(938);i({target:"Iterator",proto:!0,real:!0},{some:function(t){s(this),r(t);var e=a(this),n=0;return o(e,function(e,i){if(t(e,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},9304:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},9306:function(t,e,n){"use strict";var i,o,r,s=n(2074),a=n(8420),l=n(5335),c=n(3105),u=n(7970),d=n(7485),h=n(1602),f=n(6926),p=h("iterator"),g=!1;[].keys&&(r=[].keys(),"next"in r?(o=u(u(r)),o!==Object.prototype&&(i=o)):g=!0);var m=!l(i)||s(function(){var t={};return i[p].call(t)!==t});m?i={}:f&&(i=c(i)),a(i[p])||d(i,p,function(){return this}),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},9310:function(t,e,n){"use strict";var i=n(200),o=n(9430),r="__core-js_shared__",s=i[r]||o(r,{});t.exports=s},9322:function(t,e,n){"use strict";n.d(e,{Ef:function(){return te},lH:function(){return Lt},XL:function(){return Ft},u1:function(){return zt},Jo:function(){return Nt},aG:function(){return Yt},jR:function(){return Kt},D$:function(){return qt}});var i=n(2644),o=n(641),r=n(9841);function s(t,e){const n=Object.create(null),i=t.split(",");for(let o=0;o<i.length;o++)n[i[o]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const a=/^on[^a-z]/,l=t=>a.test(t),c=t=>t.startsWith("onUpdate:"),u=Object.assign,d=(Object.prototype.hasOwnProperty,Array.isArray),h=t=>"[object Set]"===w(t),f=t=>"[object Date]"===w(t),p=t=>"function"===typeof t,g=t=>"string"===typeof t,m=t=>"symbol"===typeof t,b=t=>null!==t&&"object"===typeof t,v=Object.prototype.toString,w=t=>v.call(t),_=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},y=/-(\w)/g,k=(_(t=>t.replace(y,(t,e)=>e?e.toUpperCase():"")),/\B([A-Z])/g),C=_(t=>t.replace(k,"-$1").toLowerCase()),x=_(t=>t.charAt(0).toUpperCase()+t.slice(1)),E=(_(t=>t?`on${x(t)}`:""),(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)}),S=t=>{const e=parseFloat(t);return isNaN(e)?t:e},T=t=>{const e=g(t)?Number(t):NaN;return isNaN(e)?t:e};const A="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",P=s(A);function I(t){return!!t||""===t}function R(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=O(t[i],e[i]);return n}function O(t,e){if(t===e)return!0;let n=f(t),i=f(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=m(t),i=m(e),n||i)return t===e;if(n=d(t),i=d(e),n||i)return!(!n||!i)&&R(t,e);if(n=b(t),i=b(e),n||i){if(!n||!i)return!1;const o=Object.keys(t).length,r=Object.keys(e).length;if(o!==r)return!1;for(const n in t){const i=t.hasOwnProperty(n),o=e.hasOwnProperty(n);if(i&&!o||!i&&o||!O(t[n],e[n]))return!1}}return String(t)===String(e)}function M(t,e){return t.findIndex(t=>O(t,e))}const D="http://www.w3.org/2000/svg",V="undefined"!==typeof document?document:null,N=V&&V.createElement("template"),L={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const o=e?V.createElementNS(D,t):V.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&o.setAttribute("multiple",i.multiple),o},createText:t=>V.createTextNode(t),createComment:t=>V.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>V.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,o,r){const s=n?n.previousSibling:e.lastChild;if(o&&(o===r||o.nextSibling)){while(1)if(e.insertBefore(o.cloneNode(!0),n),o===r||!(o=o.nextSibling))break}else{N.innerHTML=i?`<svg>${t}</svg>`:t;const o=N.content;if(i){const t=o.firstChild;while(t.firstChild)o.appendChild(t.firstChild);o.removeChild(t)}e.insertBefore(o,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function B(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function F(t,e,n){const i=t.style,o=g(n);if(n&&!o){if(e&&!g(e))for(const t in e)null==n[t]&&H(i,t,"");for(const t in n)H(i,t,n[t])}else{const r=i.display;o?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const z=/\s*!important$/;function H(t,e,n){if(d(n))n.forEach(n=>H(t,e,n));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=$(t,e);z.test(n)?t.setProperty(C(i),n.replace(z,""),"important"):t[i]=n}}const W=["Webkit","Moz","ms"],j={};function $(t,e){const n=j[e];if(n)return n;let o=(0,i.PT)(e);if("filter"!==o&&o in t)return j[e]=o;o=x(o);for(let i=0;i<W.length;i++){const n=W[i]+o;if(n in t)return j[e]=n}return e}const U="http://www.w3.org/1999/xlink";function q(t,e,n,i,o){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(U,e.slice(6,e.length)):t.setAttributeNS(U,e,n);else{const i=P(e);null==n||i&&!I(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function G(t,e,n,i,o,r,s){if("innerHTML"===e||"textContent"===e)return i&&s(i,o,r),void(t[e]=null==n?"":n);const a=t.tagName;if("value"===e&&"PROGRESS"!==a&&!a.includes("-")){t._value=n;const i="OPTION"===a?t.getAttribute("value"):t.value,o=null==n?"":n;return i!==o&&(t.value=o),void(null==n&&t.removeAttribute(e))}let l=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=I(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{t[e]=n}catch(c){0}l&&t.removeAttribute(e)}function K(t,e,n,i){t.addEventListener(e,n,i)}function Y(t,e,n,i){t.removeEventListener(e,n,i)}function X(t,e,n,i,o=null){const r=t._vei||(t._vei={}),s=r[e];if(i&&s)s.value=i;else{const[n,a]=Z(e);if(i){const s=r[e]=nt(i,o);K(t,n,s,a)}else s&&(Y(t,n,s,a),r[e]=void 0)}}const J=/(?:Once|Passive|Capture)$/;function Z(t){let e;if(J.test(t)){let n;e={};while(n=t.match(J))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):C(t.slice(2));return[n,e]}let Q=0;const tt=Promise.resolve(),et=()=>Q||(tt.then(()=>Q=0),Q=Date.now());function nt(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,o.qL)(it(t,n.value),e,5,[t])};return n.value=t,n.attached=et(),n}function it(t,e){if(d(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t&&t(e))}return e}const ot=/^on[a-z]/,rt=(t,e,n,i,o=!1,r,s,a,u)=>{"class"===e?B(t,i,o):"style"===e?F(t,n,i):l(e)?c(e)||X(t,e,n,i,s):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):st(t,e,i,o))?G(t,e,i,r,s,a,u):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),q(t,e,i,o))};function st(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&ot.test(e)&&p(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!ot.test(e)||!g(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const at="transition",lt="animation",ct=(t,{slots:e})=>(0,o.h)(o.pR,pt(t),e);ct.displayName="Transition";const ut={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},dt=ct.props=u({},o.QP,ut),ht=(t,e=[])=>{d(t)?t.forEach(t=>t(...e)):t&&t(...e)},ft=t=>!!t&&(d(t)?t.some(t=>t.length>1):t.length>1);function pt(t){const e={};for(const u in t)u in ut||(e[u]=t[u]);if(!1===t.css)return e;const{name:n="v",type:i,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=s,appearToClass:d=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=gt(o),m=g&&g[0],b=g&&g[1],{onBeforeEnter:v,onEnter:w,onEnterCancelled:_,onLeave:y,onLeaveCancelled:k,onBeforeAppear:C=v,onAppear:x=w,onAppearCancelled:E=_}=e,S=(t,e,n)=>{vt(t,e?d:a),vt(t,e?c:s),n&&n()},T=(t,e)=>{t._isLeaving=!1,vt(t,h),vt(t,p),vt(t,f),e&&e()},A=t=>(e,n)=>{const o=t?x:w,s=()=>S(e,t,n);ht(o,[e,s]),wt(()=>{vt(e,t?l:r),bt(e,t?d:a),ft(o)||yt(e,i,m,s)})};return u(e,{onBeforeEnter(t){ht(v,[t]),bt(t,r),bt(t,s)},onBeforeAppear(t){ht(C,[t]),bt(t,l),bt(t,c)},onEnter:A(!1),onAppear:A(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>T(t,e);bt(t,h),Et(),bt(t,f),wt(()=>{t._isLeaving&&(vt(t,h),bt(t,p),ft(y)||yt(t,i,b,n))}),ht(y,[t,n])},onEnterCancelled(t){S(t,!1),ht(_,[t])},onAppearCancelled(t){S(t,!0),ht(E,[t])},onLeaveCancelled(t){T(t),ht(k,[t])}})}function gt(t){if(null==t)return null;if(b(t))return[mt(t.enter),mt(t.leave)];{const e=mt(t);return[e,e]}}function mt(t){const e=T(t);return e}function bt(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function vt(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function wt(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _t=0;function yt(t,e,n,i){const o=t._endId=++_t,r=()=>{o===t._endId&&i()};if(n)return setTimeout(r,n);const{type:s,timeout:a,propCount:l}=kt(t,e);if(!s)return i();const c=s+"end";let u=0;const d=()=>{t.removeEventListener(c,h),r()},h=e=>{e.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function kt(t,e){const n=window.getComputedStyle(t),i=t=>(n[t]||"").split(", "),o=i(`${at}Delay`),r=i(`${at}Duration`),s=Ct(o,r),a=i(`${lt}Delay`),l=i(`${lt}Duration`),c=Ct(a,l);let u=null,d=0,h=0;e===at?s>0&&(u=at,d=s,h=r.length):e===lt?c>0&&(u=lt,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?at:lt:null,h=u?u===at?r.length:l.length:0);const f=u===at&&/\b(transform|all)(,|$)/.test(i(`${at}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Ct(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map((e,n)=>xt(e)+xt(t[n])))}function xt(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Et(){return document.body.offsetHeight}const St=new WeakMap,Tt=new WeakMap,At={name:"TransitionGroup",props:u({},dt,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,o.nI)(),i=(0,o.Gy)();let s,a;return(0,o.$u)(()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!Ot(s[0].el,n.vnode.el,e))return;s.forEach(Pt),s.forEach(It);const i=s.filter(Rt);Et(),i.forEach(t=>{const n=t.el,i=n.style;bt(n,e),i.transform=i.webkitTransform=i.transitionDuration="";const o=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",o),n._moveCb=null,vt(n,e))};n.addEventListener("transitionend",o)})}),()=>{const l=(0,r.ux)(t),c=pt(l);let u=l.tag||o.FK;s=a,a=e.default?(0,o.Df)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,o.MZ)(e,(0,o.OW)(e,c,i,n))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,o.MZ)(e,(0,o.OW)(e,c,i,n)),St.set(e,e.el.getBoundingClientRect())}return(0,o.bF)(u,null,a)}}};At.props;function Pt(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function It(t){Tt.set(t,t.el.getBoundingClientRect())}function Rt(t){const e=St.get(t),n=Tt.get(t),i=e.left-n.left,o=e.top-n.top;if(i||o){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${o}px)`,e.transitionDuration="0s",t}}function Ot(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach(t=>{t.split(/\s+/).forEach(t=>t&&i.classList.remove(t))}),n.split(/\s+/).forEach(t=>t&&i.classList.add(t)),i.style.display="none";const o=1===e.nodeType?e:e.parentNode;o.appendChild(i);const{hasTransform:r}=kt(i);return o.removeChild(i),r}const Mt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return d(e)?t=>E(e,t):e};function Dt(t){t.target.composing=!0}function Vt(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Nt={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t._assign=Mt(o);const r=i||o.props&&"number"===o.props.type;K(t,e?"change":"input",e=>{if(e.target.composing)return;let i=t.value;n&&(i=i.trim()),r&&(i=S(i)),t._assign(i)}),n&&K(t,"change",()=>{t.value=t.value.trim()}),e||(K(t,"compositionstart",Dt),K(t,"compositionend",Vt),K(t,"change",Vt))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:o}},r){if(t._assign=Mt(r),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(i&&t.value.trim()===e)return;if((o||"number"===t.type)&&S(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}},Lt={deep:!0,created(t,e,n){t._assign=Mt(n),K(t,"change",()=>{const e=t._modelValue,n=Wt(t),i=t.checked,o=t._assign;if(d(e)){const t=M(e,n),r=-1!==t;if(i&&!r)o(e.concat(n));else if(!i&&r){const n=[...e];n.splice(t,1),o(n)}}else if(h(e)){const t=new Set(e);i?t.add(n):t.delete(n),o(t)}else o(jt(t,i))})},mounted:Bt,beforeUpdate(t,e,n){t._assign=Mt(n),Bt(t,e,n)}};function Bt(t,{value:e,oldValue:n},i){t._modelValue=e,d(e)?t.checked=M(e,i.props.value)>-1:h(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=O(e,jt(t,!0)))}const Ft={created(t,{value:e},n){t.checked=O(e,n.props.value),t._assign=Mt(n),K(t,"change",()=>{t._assign(Wt(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t._assign=Mt(i),e!==n&&(t.checked=O(e,i.props.value))}},zt={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const o=h(e);K(t,"change",()=>{const e=Array.prototype.filter.call(t.options,t=>t.selected).map(t=>n?S(Wt(t)):Wt(t));t._assign(t.multiple?o?new Set(e):e:e[0])}),t._assign=Mt(i)},mounted(t,{value:e}){Ht(t,e)},beforeUpdate(t,e,n){t._assign=Mt(n)},updated(t,{value:e}){Ht(t,e)}};function Ht(t,e){const n=t.multiple;if(!n||d(e)||h(e)){for(let i=0,o=t.options.length;i<o;i++){const o=t.options[i],r=Wt(o);if(n)d(e)?o.selected=M(e,r)>-1:o.selected=e.has(r);else if(O(Wt(o),e))return void(t.selectedIndex!==i&&(t.selectedIndex=i))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function Wt(t){return"_value"in t?t._value:t.value}function jt(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const $t=["ctrl","shift","alt","meta"],Ut={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>$t.some(n=>t[`${n}Key`]&&!e.includes(n))},qt=(t,e)=>(n,...i)=>{for(let t=0;t<e.length;t++){const i=Ut[e[t]];if(i&&i(n,e))return}return t(n,...i)},Gt={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Kt=(t,e)=>n=>{if(!("key"in n))return;const i=C(n.key);return e.some(t=>t===i||Gt[t]===i)?t(n):void 0},Yt={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Xt(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!==!n&&(i?e?(i.beforeEnter(t),Xt(t,!0),i.enter(t)):i.leave(t,()=>{Xt(t,!1)}):Xt(t,e))},beforeUnmount(t,{value:e}){Xt(t,e)}};function Xt(t,e){t.style.display=e?t._vod:"none"}const Jt=u({patchProp:rt},L);let Zt;function Qt(){return Zt||(Zt=(0,o.K9)(Jt))}const te=(...t)=>{const e=Qt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=ee(t);if(!i)return;const o=e._component;p(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const r=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function ee(t){if(g(t)){const e=document.querySelector(t);return e}return t}},9328:function(t,e,n){"use strict";var i=n(9830);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},9430:function(t,e,n){"use strict";var i=n(200),o=Object.defineProperty;t.exports=function(t,e){try{o(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9471:function(t,e,n){"use strict";var i=n(1605),o=n(2929),r=n(4601),s=n(3938),a=n(938),l=TypeError;i({target:"Iterator",proto:!0,real:!0},{reduce:function(t){s(this),r(t);var e=a(this),n=arguments.length<2,i=n?void 0:arguments[1],c=0;if(o(e,function(e){n?(n=!1,i=e):i=t(i,e,c),c++},{IS_RECORD:!0}),n)throw new l("Reduce of empty iterator with no initial value");return i}})},9526:function(t,e,n){"use strict";var i=n(2368),o=n(4601),r=n(3938),s=n(3838),a=n(1898),l=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(o(n))return r(i(n,t));throw new l(s(t)+" is not iterable")}},9751:function(t,e,n){"use strict";var i=n(2368),o=n(8420),r=n(5335),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&o(n=t.toString)&&!r(a=i(n,t)))return a;if(o(n=t.valueOf)&&!r(a=i(n,t)))return a;if("string"!==e&&o(n=t.toString)&&!r(a=i(n,t)))return a;throw new s("Can't convert object to primitive value")}},9830:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},9838:function(t,e,n){"use strict";var i=n(1605),o=n(2929),r=n(4601),s=n(3938),a=n(938);i({target:"Iterator",proto:!0,real:!0},{forEach:function(t){s(this),r(t);var e=a(this),n=0;o(e,function(e){t(e,n++)},{IS_RECORD:!0})}})},9841:function(t,e,n){"use strict";function i(t,e){const n=Object.create(null),i=t.split(",");for(let o=0;o<i.length;o++)n[i[o]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{yC:function(){return E},X2:function(){return W},EW:function(){return be},uY:function(){return S},o5:function(){return A},ju:function(){return Zt},g8:function(){return Yt},i9:function(){return re},fE:function(){return Jt},IG:function(){return te},jr:function(){return P},C4:function(){return q},Pr:function(){return he},Kh:function(){return Ut},KR:function(){return se},bl:function(){return G},Gc:function(){return qt},IJ:function(){return ae},ux:function(){return Qt},QW:function(){return fe},u4:function(){return K},hZ:function(){return X},R1:function(){return ue}});const o=()=>{},r=Object.assign,s=Object.prototype.hasOwnProperty,a=(t,e)=>s.call(t,e),l=Array.isArray,c=t=>"[object Map]"===g(t),u=t=>"function"===typeof t,d=t=>"string"===typeof t,h=t=>"symbol"===typeof t,f=t=>null!==t&&"object"===typeof t,p=Object.prototype.toString,g=t=>p.call(t),m=t=>g(t).slice(8,-1),b=t=>d(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,v=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},w=/-(\w)/g,_=(v(t=>t.replace(w,(t,e)=>e?e.toUpperCase():"")),/\B([A-Z])/g),y=(v(t=>t.replace(_,"-$1").toLowerCase()),v(t=>t.charAt(0).toUpperCase()+t.slice(1))),k=(v(t=>t?`on${y(t)}`:""),(t,e)=>!Object.is(t,e)),C=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})};let x;class E{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=x,!t&&x&&(this.index=(x.scopes||(x.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=x;try{return x=this,t()}finally{x=e}}else 0}on(){x=this}off(){x=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function S(t){return new E(t)}function T(t,e=x){e&&e.active&&e.effects.push(t)}function A(){return x}function P(t){x&&x.cleanups.push(t)}const I=t=>{const e=new Set(t);return e.w=0,e.n=0,e},R=t=>(t.w&L)>0,O=t=>(t.n&L)>0,M=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=L},D=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const o=e[i];R(o)&&!O(o)?o.delete(t):e[n++]=o,o.w&=~L,o.n&=~L}e.length=n}},V=new WeakMap;let N=0,L=1;const B=30;let F;const z=Symbol(""),H=Symbol("");class W{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,T(this,n)}run(){if(!this.active)return this.fn();let t=F,e=$;while(t){if(t===this)return;t=t.parent}try{return this.parent=F,F=this,$=!0,L=1<<++N,N<=B?M(this):j(this),this.fn()}finally{N<=B&&D(this),L=1<<--N,F=this.parent,$=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){F===this?this.deferStop=!0:this.active&&(j(this),this.onStop&&this.onStop(),this.active=!1)}}function j(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let $=!0;const U=[];function q(){U.push($),$=!1}function G(){const t=U.pop();$=void 0===t||t}function K(t,e,n){if($&&F){let e=V.get(t);e||V.set(t,e=new Map);let i=e.get(n);i||e.set(n,i=I());const o=void 0;Y(i,o)}}function Y(t,e){let n=!1;N<=B?O(t)||(t.n|=L,n=!R(t)):n=!t.has(F),n&&(t.add(F),F.deps.push(t))}function X(t,e,n,i,o,r){const s=V.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&l(t)){const t=Number(i);s.forEach((e,n)=>{("length"===n||n>=t)&&a.push(e)})}else switch(void 0!==n&&a.push(s.get(n)),e){case"add":l(t)?b(n)&&a.push(s.get("length")):(a.push(s.get(z)),c(t)&&a.push(s.get(H)));break;case"delete":l(t)||(a.push(s.get(z)),c(t)&&a.push(s.get(H)));break;case"set":c(t)&&a.push(s.get(z));break}if(1===a.length)a[0]&&J(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);J(I(t))}}function J(t,e){const n=l(t)?t:[...t];for(const i of n)i.computed&&Z(i,e);for(const i of n)i.computed||Z(i,e)}function Z(t,e){(t!==F||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Q(t,e){var n;return null==(n=V.get(t))?void 0:n.get(e)}const tt=i("__proto__,__v_isRef,__isVue"),et=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>"arguments"!==t&&"caller"!==t).map(t=>Symbol[t]).filter(h)),nt=lt(),it=lt(!1,!0),ot=lt(!0),rt=st();function st(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...t){const n=Qt(this);for(let e=0,o=this.length;e<o;e++)K(n,"get",e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Qt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...t){q();const n=Qt(this)[e].apply(this,t);return G(),n}}),t}function at(t){const e=Qt(this);return K(e,"has",t),e.hasOwnProperty(t)}function lt(t=!1,e=!1){return function(n,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&o===(t?e?Wt:Ht:e?zt:Ft).get(n))return n;const r=l(n);if(!t){if(r&&a(rt,i))return Reflect.get(rt,i,o);if("hasOwnProperty"===i)return at}const s=Reflect.get(n,i,o);return(h(i)?et.has(i):tt(i))?s:(t||K(n,"get",i),e?s:re(s)?r&&b(i)?s:s.value:f(s)?t?Gt(s):Ut(s):s)}}const ct=dt(),ut=dt(!0);function dt(t=!1){return function(e,n,i,o){let r=e[n];if(Xt(r)&&re(r)&&!re(i))return!1;if(!t&&(Jt(i)||Xt(i)||(r=Qt(r),i=Qt(i)),!l(e)&&re(r)&&!re(i)))return r.value=i,!0;const s=l(e)&&b(n)?Number(n)<e.length:a(e,n),c=Reflect.set(e,n,i,o);return e===Qt(o)&&(s?k(i,r)&&X(e,"set",n,i,r):X(e,"add",n,i)),c}}function ht(t,e){const n=a(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&X(t,"delete",e,void 0,i),o}function ft(t,e){const n=Reflect.has(t,e);return h(e)&&et.has(e)||K(t,"has",e),n}function pt(t){return K(t,"iterate",l(t)?"length":z),Reflect.ownKeys(t)}const gt={get:nt,set:ct,deleteProperty:ht,has:ft,ownKeys:pt},mt={get:ot,set(t,e){return!0},deleteProperty(t,e){return!0}},bt=r({},gt,{get:it,set:ut}),vt=t=>t,wt=t=>Reflect.getPrototypeOf(t);function _t(t,e,n=!1,i=!1){t=t["__v_raw"];const o=Qt(t),r=Qt(e);n||(e!==r&&K(o,"get",e),K(o,"get",r));const{has:s}=wt(o),a=i?vt:n?ne:ee;return s.call(o,e)?a(t.get(e)):s.call(o,r)?a(t.get(r)):void(t!==o&&t.get(e))}function yt(t,e=!1){const n=this["__v_raw"],i=Qt(n),o=Qt(t);return e||(t!==o&&K(i,"has",t),K(i,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function kt(t,e=!1){return t=t["__v_raw"],!e&&K(Qt(t),"iterate",z),Reflect.get(t,"size",t)}function Ct(t){t=Qt(t);const e=Qt(this),n=wt(e),i=n.has.call(e,t);return i||(e.add(t),X(e,"add",t,t)),this}function xt(t,e){e=Qt(e);const n=Qt(this),{has:i,get:o}=wt(n);let r=i.call(n,t);r||(t=Qt(t),r=i.call(n,t));const s=o.call(n,t);return n.set(t,e),r?k(e,s)&&X(n,"set",t,e,s):X(n,"add",t,e),this}function Et(t){const e=Qt(this),{has:n,get:i}=wt(e);let o=n.call(e,t);o||(t=Qt(t),o=n.call(e,t));const r=i?i.call(e,t):void 0,s=e.delete(t);return o&&X(e,"delete",t,void 0,r),s}function St(){const t=Qt(this),e=0!==t.size,n=void 0,i=t.clear();return e&&X(t,"clear",void 0,void 0,n),i}function Tt(t,e){return function(n,i){const o=this,r=o["__v_raw"],s=Qt(r),a=e?vt:t?ne:ee;return!t&&K(s,"iterate",z),r.forEach((t,e)=>n.call(i,a(t),a(e),o))}}function At(t,e,n){return function(...i){const o=this["__v_raw"],r=Qt(o),s=c(r),a="entries"===t||t===Symbol.iterator&&s,l="keys"===t&&s,u=o[t](...i),d=n?vt:e?ne:ee;return!e&&K(r,"iterate",l?H:z),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:a?[d(t[0]),d(t[1])]:d(t),done:e}},[Symbol.iterator](){return this}}}}function Pt(t){return function(...e){return"delete"!==t&&this}}function It(){const t={get(t){return _t(this,t)},get size(){return kt(this)},has:yt,add:Ct,set:xt,delete:Et,clear:St,forEach:Tt(!1,!1)},e={get(t){return _t(this,t,!1,!0)},get size(){return kt(this)},has:yt,add:Ct,set:xt,delete:Et,clear:St,forEach:Tt(!1,!0)},n={get(t){return _t(this,t,!0)},get size(){return kt(this,!0)},has(t){return yt.call(this,t,!0)},add:Pt("add"),set:Pt("set"),delete:Pt("delete"),clear:Pt("clear"),forEach:Tt(!0,!1)},i={get(t){return _t(this,t,!0,!0)},get size(){return kt(this,!0)},has(t){return yt.call(this,t,!0)},add:Pt("add"),set:Pt("set"),delete:Pt("delete"),clear:Pt("clear"),forEach:Tt(!0,!0)},o=["keys","values","entries",Symbol.iterator];return o.forEach(o=>{t[o]=At(o,!1,!1),n[o]=At(o,!0,!1),e[o]=At(o,!1,!0),i[o]=At(o,!0,!0)}),[t,n,e,i]}const[Rt,Ot,Mt,Dt]=It();function Vt(t,e){const n=e?t?Dt:Mt:t?Ot:Rt;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(a(n,i)&&i in e?n:e,i,o)}const Nt={get:Vt(!1,!1)},Lt={get:Vt(!1,!0)},Bt={get:Vt(!0,!1)};const Ft=new WeakMap,zt=new WeakMap,Ht=new WeakMap,Wt=new WeakMap;function jt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $t(t){return t["__v_skip"]||!Object.isExtensible(t)?0:jt(m(t))}function Ut(t){return Xt(t)?t:Kt(t,!1,gt,Nt,Ft)}function qt(t){return Kt(t,!1,bt,Lt,zt)}function Gt(t){return Kt(t,!0,mt,Bt,Ht)}function Kt(t,e,n,i,o){if(!f(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const r=o.get(t);if(r)return r;const s=$t(t);if(0===s)return t;const a=new Proxy(t,2===s?i:n);return o.set(t,a),a}function Yt(t){return Xt(t)?Yt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Xt(t){return!(!t||!t["__v_isReadonly"])}function Jt(t){return!(!t||!t["__v_isShallow"])}function Zt(t){return Yt(t)||Xt(t)}function Qt(t){const e=t&&t["__v_raw"];return e?Qt(e):t}function te(t){return C(t,"__v_skip",!0),t}const ee=t=>f(t)?Ut(t):t,ne=t=>f(t)?Gt(t):t;function ie(t){$&&F&&(t=Qt(t),Y(t.dep||(t.dep=I())))}function oe(t,e){t=Qt(t);const n=t.dep;n&&J(n)}function re(t){return!(!t||!0!==t.__v_isRef)}function se(t){return le(t,!1)}function ae(t){return le(t,!0)}function le(t,e){return re(t)?t:new ce(t,e)}class ce{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Qt(t),this._value=e?t:ee(t)}get value(){return ie(this),this._value}set value(t){const e=this.__v_isShallow||Jt(t)||Xt(t);t=e?t:Qt(t),k(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:ee(t),oe(this,t))}}function ue(t){return re(t)?t.value:t}const de={get:(t,e,n)=>ue(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const o=t[e];return re(o)&&!re(n)?(o.value=n,!0):Reflect.set(t,e,n,i)}};function he(t){return Yt(t)?t:new Proxy(t,de)}function fe(t){const e=l(t)?new Array(t.length):{};for(const n in t)e[n]=ge(t,n);return e}class pe{constructor(t,e,n){this._object=t,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return void 0===t?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Q(Qt(this._object),this._key)}}function ge(t,e,n){const i=t[e];return re(i)?i:new pe(t,e,n)}class me{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new W(t,()=>{this._dirty||(this._dirty=!0,oe(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const t=Qt(this);return ie(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function be(t,e,n=!1){let i,r;const s=u(t);s?(i=t,r=o):(i=t.get,r=t.set);const a=new me(i,r,s||!r,n);return a}},9868:function(t,e,n){"use strict";var i=n(2368),o=n(3938),r=n(6457);t.exports=function(t,e,n){var s,a;o(t);try{if(s=r(t,"return"),!s){if("throw"===e)throw n;return n}s=i(s,t)}catch(l){a=!0,s=l}if("throw"===e)throw n;if(a)throw s;return o(s),n}},9965:function(t,e,n){"use strict";var i=n(281),o=n(8420),r=n(9310),s=i(Function.toString);o(r.inspectSource)||(r.inspectSource=function(t){return s(t)}),t.exports=r.inspectSource}}]);
//# sourceMappingURL=chunk-vendors.b6ffb7ac.js.map