{"version":3,"file":"@/assets/js/826.33acb6fc.js","mappings":"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","sources":["webpack://vue-material-dashboard-2/./src/components/MaterialTextarea.vue","webpack://vue-material-dashboard-2/./src/components/MaterialTextarea.vue?6270","webpack://vue-material-dashboard-2/./src/views/SurveyWrite.vue","webpack://vue-material-dashboard-2/./src/views/SurveyWrite.vue?3a9a"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"input-group\"\r\n    :class=\"`input-group-${variant} ${getStatus(error, success)}`\"\r\n  >\r\n    <textarea\r\n      :id=\"id\"\r\n      class=\"form-control\"\r\n      :rows=\"rows\"\r\n      :name=\"name\"\r\n      :value=\"value\"\r\n      :placeholder=\"placeholder\"\r\n      :isRequired=\"isRequired\"\r\n      :disabled=\"disabled\"\r\n    ></textarea>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport setMaterialInput from \"@/assets/js/material-input.js\";\r\n\r\nexport default {\r\n  name: \"MaterialTextarea\",\r\n  props: {\r\n    variant: {\r\n      type: String,\r\n      default: \"outline\",\r\n    },\r\n    id: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    name: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"Your text here...\",\r\n    },\r\n    isRequired: Boolean,\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    rows: {\r\n      type: Number,\r\n      default: 5,\r\n    },\r\n    success: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    error: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  mounted() {\r\n    setMaterialInput();\r\n  },\r\n  methods: {\r\n    getStatus: (error, success) => {\r\n      let isValidValue;\r\n\r\n      if (success) {\r\n        isValidValue = \"is-valid\";\r\n      } else if (error) {\r\n        isValidValue = \"is-invalid\";\r\n      } else {\r\n        isValidValue = null;\r\n      }\r\n\r\n      return isValidValue;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./MaterialTextarea.vue?vue&type=template&id=204b2d53\"\nimport script from \"./MaterialTextarea.vue?vue&type=script&lang=js\"\nexport * from \"./MaterialTextarea.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <section class=\"p-6 max-w-5xl mx-auto\">\r\n    <!-- í—¤ë” -->\r\n    <header class=\"mb-3 flex items-center justify-between header-row\">\r\n      <h2 class=\"text-2xl font-semibold\">ì¡°ì‚¬ì§€ ì‘ì„±</h2>\r\n\r\n      <div class=\"space-x-2\">\r\n        <MaterialButton\r\n          color=\"dark\"\r\n          size=\"sm\"\r\n          variant=\"outlined\"\r\n          @click=\"goBack\"\r\n        >\r\n          â† ëª©ë¡\r\n        </MaterialButton>\r\n      </div>\r\n    </header>\r\n\r\n    <!-- ì‘ì„±ì ì •ë³´ -->\r\n    <div class=\"writer-card\">\r\n      <h3 class=\"writer-title\">ì§€ì›ì ì •ë³´</h3>\r\n      <p class=\"writer-desc\">ì§€ì›ì„ ì‹ ì²­í•˜ëŠ” ì§€ì›ìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>\r\n\r\n      <div class=\"space-y-3\">\r\n        <!-- ë³¸ì¸ ì‘ì„± -->\r\n        <label class=\"writer-row\">\r\n          <span class=\"writer-left\">\r\n            <input\r\n              type=\"radio\"\r\n              value=\"SELF\"\r\n              v-model=\"writerType\"\r\n              class=\"writer-radio\"\r\n            />\r\n            <span> ì§€ì›ì ë³¸ì¸ ì…ë‹ˆë‹¤.</span>\r\n          </span>\r\n\r\n          <!-- ì˜¤ë¥¸ìª½ ì—´: ì²« ì¤„ì€ ë¹„ì›Œë‘ê¸° (ì •ë ¬ìš©) -->\r\n          <span class=\"writer-right\">\r\n            <input\r\n              type=\"text\"\r\n              v-model=\"disabilityType\"\r\n              class=\"delegate-select\"\r\n              :disabled=\"writerType !== 'SELF'\"\r\n              placeholder=\"ì¥ì•  ìœ í˜•ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            />\r\n          </span>\r\n        </label>\r\n\r\n        <!-- ëŒ€ë¦¬ì¸ ì‘ì„± -->\r\n        <label class=\"writer-row\">\r\n          <span class=\"writer-left\">\r\n            <input\r\n              type=\"radio\"\r\n              value=\"DELEGATE\"\r\n              v-model=\"writerType\"\r\n              class=\"writer-radio\"\r\n            />\r\n            <span> ëŒ€ë¦¬ì¸ ì…ë‹ˆë‹¤.</span>\r\n          </span>\r\n\r\n          <span class=\"writer-right\">\r\n            <select\r\n              v-model=\"selectedPersonCode\"\r\n              class=\"delegate-select\"\r\n              :disabled=\"writerType !== 'DELEGATE'\"\r\n            >\r\n              <option value=\"\">ì§€ì›ìë¥¼ ì„ íƒí•˜ì„¸ìš”</option>\r\n              <option\r\n                v-for=\"person in delegateOptions\"\r\n                :key=\"person.code\"\r\n                :value=\"person.code\"\r\n              >\r\n                {{ person.name }}\r\n              </option>\r\n            </select>\r\n          </span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"!survey\" class=\"text-gray-500 mt-4\">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>\r\n\r\n    <div v-else class=\"space-y-6 mt-4\">\r\n      <!-- ì„¹ì…˜ ì¹´ë“œ -->\r\n      <div\r\n        v-for=\"section in survey.sections\"\r\n        :key=\"section.section_code\"\r\n        class=\"section-card\"\r\n      >\r\n        <div class=\"section-header\">\r\n          <h3 class=\"section-title\">\r\n            {{ section.section_title }}\r\n          </h3>\r\n          <p v-if=\"section.section_desc\" class=\"section-desc\">\r\n            {{ section.section_desc }}\r\n          </p>\r\n        </div>\r\n\r\n        <!-- ì„¸ë¶€í•­ëª©ë“¤ -->\r\n        <div\r\n          v-for=\"sub in section.subsections\"\r\n          :key=\"sub.subsection_code\"\r\n          class=\"subsection-card\"\r\n        >\r\n          <div class=\"sub-header\">\r\n            <div class=\"font-medium text-sm text-gray-800 question-title\">\r\n              {{ sub.subsection_title }}\r\n            </div>\r\n            <p v-if=\"sub.subsection_desc\" class=\"text-xs text-gray-500 mt-0.5\">\r\n              {{ sub.subsection_desc }}\r\n            </p>\r\n          </div>\r\n\r\n          <!-- ì§ˆë¬¸ë“¤ -->\r\n          <div class=\"space-y-4 mt-2\">\r\n            <div\r\n              v-for=\"item in sub.items\"\r\n              :key=\"item.item_code\"\r\n              class=\"question-card\"\r\n            >\r\n              <!-- ì§ˆë¬¸ í—¤ë” -->\r\n              <div class=\"flex items-center justify-between mb-2\">\r\n                <div class=\"question-title\">\r\n                  {{ item.question_text }}\r\n                  <span\r\n                    v-if=\"item.is_required === 'Y'\"\r\n                    class=\"text-red-500 text-xs ml-1\"\r\n                    >*</span\r\n                  >\r\n                </div>\r\n              </div>\r\n\r\n              <!-- TEXT: MaterialInput ì‚¬ìš© -->\r\n              <div v-if=\"item.question_type === 'TEXT'\">\r\n                <MaterialInput\r\n                  v-model=\"answers[item.item_code]\"\r\n                  :id=\"`item-${item.item_code}`\"\r\n                  label=\"ë‹µë³€\"\r\n                  variant=\"static\"\r\n                  size=\"default\"\r\n                />\r\n              </div>\r\n\r\n              <!-- TEXTAREA -->\r\n              <div v-else-if=\"item.question_type === 'TEXTAREA'\">\r\n                <label\r\n                  class=\"block text-xs font-medium text-gray-500 mb-1\"\r\n                  :for=\"`item-${item.item_code}`\"\r\n                >\r\n                  ë‚´ìš©\r\n                </label>\r\n                <MaterialTextarea\r\n                  :id=\"`item-${item.item_code}`\"\r\n                  variant=\"outline\"\r\n                  :rows=\"5\"\r\n                  placeholder=\"ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n                  :value=\"answers[item.item_code]\"\r\n                  @input=\"(e) => (answers[item.item_code] = e.target.value)\"\r\n                />\r\n              </div>\r\n\r\n              <!-- RADIO (ê¸°ë³¸ input ì‚¬ìš©) -->\r\n              <div v-else-if=\"item.question_type === 'RADIO'\" class=\"space-y-1\">\r\n                <div class=\"helper-text\">ë³´ê¸° ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>\r\n\r\n                <label\r\n                  v-for=\"opt in item.option_values\"\r\n                  :key=\"opt.value\"\r\n                  class=\"choice-basic\"\r\n                >\r\n                  <input\r\n                    type=\"radio\"\r\n                    :name=\"`item_${item.item_code}`\"\r\n                    :value=\"opt.value\"\r\n                    v-model=\"answers[item.item_code]\"\r\n                    class=\"basic-radio\"\r\n                  />\r\n                  <span>{{ opt.label }}</span>\r\n                </label>\r\n              </div>\r\n\r\n              <!-- CHECKBOX (ê¸°ë³¸ input ì‚¬ìš©) -->\r\n              <div\r\n                v-else-if=\"item.question_type === 'CHECKBOX'\"\r\n                class=\"space-y-1\"\r\n              >\r\n                <div class=\"helper-text\">í•´ë‹¹ë˜ëŠ” í•­ëª©ì„ ëª¨ë‘ ì„ íƒí•˜ì„¸ìš”</div>\r\n\r\n                <label\r\n                  v-for=\"opt in item.option_values\"\r\n                  :key=\"opt.value\"\r\n                  class=\"choice-basic\"\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    :value=\"opt.value\"\r\n                    :checked=\"isChecked(item.item_code, opt.value)\"\r\n                    class=\"basic-checkbox\"\r\n                    @change=\"\r\n                      toggleCheckbox(\r\n                        item.item_code,\r\n                        opt.value,\r\n                        $event.target.checked\r\n                      )\r\n                    \"\r\n                  />\r\n                  <span>{{ opt.label }}</span>\r\n                </label>\r\n              </div>\r\n\r\n              <!-- ê¸°íƒ€ íƒ€ì… ë°©ì–´ -->\r\n              <div v-else class=\"text-xs text-gray-400 italic\">\r\n                ì§€ì›ë˜ì§€ ì•ŠëŠ” ì§ˆë¬¸ íƒ€ì…ì…ë‹ˆë‹¤.\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- í•˜ë‹¨ ë²„íŠ¼ -->\r\n      <div class=\"form-actions\">\r\n        <MaterialButton\r\n          color=\"dark\"\r\n          size=\"sm\"\r\n          class=\"px-5\"\r\n          @click=\"submitSurvey\"\r\n        >\r\n          ì œì¶œí•˜ê¸°\r\n        </MaterialButton>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nimport MaterialButton from \"@/components/MaterialButton.vue\";\r\nimport MaterialInput from \"@/components/MaterialInput.vue\";\r\nimport MaterialTextarea from \"@/components/MaterialTextarea.vue\";\r\n\r\nconst router = useRouter();\r\nconst survey = ref(null);\r\nconst answers = ref({});\r\n\r\n/** ì‘ì„±ì ì„ íƒ ìƒíƒœ */\r\nconst writerType = ref(\"SELF\"); // SELF | DELEGATE\r\nconst selectedPersonCode = ref(\"\");\r\n// TODO: ì‹¤ì œ API ì—°ê²° ì‹œ axiosë¡œ êµì²´\r\nconst delegateOptions = ref([]);\r\n\r\nconst disabilityType = ref(\"\");\r\n\r\n// ì²´í¬ë°•ìŠ¤ìš© í—¬í¼: í˜„ì¬ ê°’ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€\r\nfunction isChecked(itemCode, value) {\r\n  const arr = answers.value[itemCode];\r\n  if (!Array.isArray(arr)) return false;\r\n  return arr.includes(value);\r\n}\r\n\r\n// ì²´í¬ë°•ìŠ¤ í† ê¸€ â†’ ë°°ì—´ë¡œ ì €ì¥\r\nfunction toggleCheckbox(itemCode, value, checked) {\r\n  const current = Array.isArray(answers.value[itemCode])\r\n    ? [...answers.value[itemCode]]\r\n    : [];\r\n\r\n  if (checked) {\r\n    if (!current.includes(value)) current.push(value);\r\n  } else {\r\n    const idx = current.indexOf(value);\r\n    if (idx !== -1) current.splice(idx, 1);\r\n  }\r\n\r\n  answers.value[itemCode] = current;\r\n}\r\n\r\nonMounted(async () => {\r\n  try {\r\n    // 1) ìµœì‹  ì¡°ì‚¬ì§€\r\n    const { data } = await axios.get(\"/api/survey/latest\");\r\n    const payload = data?.result ?? data;\r\n    survey.value = payload;\r\n\r\n    const initial = {};\r\n    for (const section of payload?.sections ?? []) {\r\n      for (const sub of section.subsections ?? []) {\r\n        for (const item of sub.items ?? []) {\r\n          const t = String(item.question_type).toUpperCase();\r\n          initial[item.item_code] = t === \"CHECKBOX\" ? [] : \"\";\r\n        }\r\n      }\r\n    }\r\n    answers.value = initial;\r\n\r\n    // 2) ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´ì—ì„œ user_code êº¼ë‚´ê¸°\r\n    const stored = localStorage.getItem(\"user\");\r\n    if (stored) {\r\n      const u = JSON.parse(stored);\r\n      const userCode = u.user_code ?? null;\r\n\r\n      if (userCode) {\r\n        // 3) ìë…€(ì§€ì›ì) ëª©ë¡ ì¡°íšŒ\r\n        const { data: childRes } = await axios.get(\"/api/survey/children\", {\r\n          params: { userId: userCode },\r\n        });\r\n        delegateOptions.value = childRes.result ?? [];\r\n\r\n        const { data: meRes } = await axios.get(\"/api/survey/disability-type\", {\r\n          params: { user_code: userCode },\r\n        });\r\n        disabilityType.value = meRes.result?.disability_type ?? \"\";\r\n      }\r\n    }\r\n  } catch (e) {\r\n    alert(\"ì¡°ì‚¬ì§€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: \" + (e.response?.data?.message || e.message));\r\n  }\r\n});\r\n\r\n// ì œì¶œí•˜ê¸°\r\nasync function submitSurvey() {\r\n  try {\r\n    //  1) SELF ì„ íƒ ì‹œ ì¥ì• ìœ í˜• í•„ìˆ˜\r\n    if (writerType.value === \"SELF\") {\r\n      if (!disabilityType.value || disabilityType.value.trim() === \"\") {\r\n        alert(\"ì¥ì•  ìœ í˜•ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    //  2) í•„ìˆ˜ ì§ˆë¬¸ ìœ íš¨ì„± ê²€ì‚¬\r\n    for (const section of survey.value.sections) {\r\n      for (const sub of section.subsections) {\r\n        for (const item of sub.items) {\r\n          if (item.is_required === \"Y\") {\r\n            const val = answers.value[item.item_code];\r\n\r\n            // TEXT / TEXTAREA\r\n            if (\r\n              item.question_type === \"TEXT\" ||\r\n              item.question_type === \"TEXTAREA\"\r\n            ) {\r\n              if (!val || val.trim() === \"\") {\r\n                alert(`í•„ìˆ˜ ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:\\n\"${item.question_text}\"`);\r\n                return;\r\n              }\r\n            }\r\n\r\n            // RADIO (ë‹¨ì¼ ì„ íƒ)\r\n            if (item.question_type === \"RADIO\") {\r\n              if (!val || val === \"\") {\r\n                alert(`í•„ìˆ˜ ì§ˆë¬¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”:\\n\"${item.question_text}\"`);\r\n                return;\r\n              }\r\n            }\r\n\r\n            // CHECKBOX (ë³µìˆ˜ ì„ íƒ)\r\n            if (item.question_type === \"CHECKBOX\") {\r\n              if (!Array.isArray(val) || val.length === 0) {\r\n                alert(\r\n                  `í•„ìˆ˜ ì²´í¬ë°•ìŠ¤ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”:\\n\"${item.question_text}\"`\r\n                );\r\n                return;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // ëŒ€ë¦¬ì¸ì¸ë° ëŒ€ìƒìë¥¼ ì•ˆ ê³¨ëì„ ë•Œ ê°„ë‹¨ ê²€ì¦\r\n    if (writerType.value === \"DELEGATE\" && !selectedPersonCode.value) {\r\n      alert(\"ëŒ€ìƒìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¹ ë¡œê·¸ì¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\r\n    const stored = localStorage.getItem(\"user\");\r\n    let userCode = null;\r\n\r\n    if (stored) {\r\n      const u = JSON.parse(stored);\r\n      userCode = u.user_code ?? u.userCode ?? u.id ?? null;\r\n    }\r\n\r\n    if (!userCode) {\r\n      alert(\"ë¡œê·¸ì¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (user_code ì—†ìŒ)\");\r\n      return;\r\n    }\r\n\r\n    // ğŸ”¥ SELFì¼ ê²½ìš° ì¥ì• ìœ í˜• ì €ì¥\r\n    if (writerType.value === \"SELF\" && disabilityType.value) {\r\n      await axios.put(\"/api/survey/disability-type\", {\r\n        user_code: Number(userCode),\r\n        disability_type: disabilityType.value,\r\n      });\r\n    }\r\n\r\n    const payload = {\r\n      template_ver_code: survey.value.template_ver_code,\r\n      answers: answers.value,\r\n      written_by: Number(userCode),\r\n      writer_type: writerType.value,\r\n      target_person_code:\r\n        writerType.value === \"DELEGATE\" ? selectedPersonCode.value : null,\r\n    };\r\n\r\n    const res = await axios.post(\"/api/survey/submit\", payload);\r\n\r\n    if (res.data?.success !== false) {\r\n      alert(\"ì‘ë‹µì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\");\r\n      router.push(\"/survey-list\");\r\n    } else {\r\n      alert(\"ì €ì¥ ì‹¤íŒ¨: \" + (res.data?.message || \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜\"));\r\n    }\r\n  } catch (e) {\r\n    alert(\"ì €ì¥ ì‹¤íŒ¨: \" + (e.response?.data?.message || e.message));\r\n  }\r\n}\r\n\r\nfunction goBack() {\r\n  router.push(\"/survey-list\");\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nsection {\r\n  color: #111827;\r\n}\r\n\r\n/* í—¤ë” í•œ ì¤„ ìœ ì§€ */\r\n.header-row {\r\n  flex-wrap: nowrap;\r\n}\r\n\r\n/* ---------- ì‘ì„±ì ì¹´ë“œ ---------- */\r\n.writer-card {\r\n  border-radius: 0.9rem;\r\n  border: 1px solid #e5e7eb;\r\n  background-color: #ffffff;\r\n  padding: 1.25rem;\r\n  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.04);\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.writer-title {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #111827;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.writer-desc {\r\n  font-size: 0.75rem;\r\n  color: #6b7280;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.writer-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-size: 0.875rem;\r\n  color: #111827;\r\n}\r\n\r\n.writer-row-delegate {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem; /* ë¼ë””ì˜¤-í…ìŠ¤íŠ¸-ì…€ë ‰íŠ¸ ê°„ê²© */\r\n  flex-wrap: nowrap; /* ì¤„ë°”ê¿ˆ X */\r\n}\r\n\r\n.writer-radio {\r\n  width: 14px;\r\n  height: 14px;\r\n}\r\n\r\n.delegate-select {\r\n  min-width: 180px;\r\n  border-radius: 0.5rem;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 0.35rem 0.75rem;\r\n  font-size: 0.875rem;\r\n  background-color: #ffffff;\r\n}\r\n\r\n/* ì„¹ì…˜ ì¹´ë“œ */\r\n.section-card {\r\n  border-radius: 0.9rem;\r\n  border: 1px solid #e5e7eb;\r\n  background-color: #ffffff;\r\n  padding: 1.25rem;\r\n  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.04);\r\n}\r\n\r\n.section-header {\r\n  border-bottom: 1px solid #e5e7eb;\r\n  padding-bottom: 0.5rem;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.section-title {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.section-desc {\r\n  font-size: 0.75rem;\r\n  color: #6b7280;\r\n  margin-top: 0.2rem;\r\n}\r\n\r\n/* ì„œë¸Œì„¹ì…˜ ì¹´ë“œ */\r\n.subsection-card {\r\n  border-radius: 0.75rem;\r\n  border: 1px solid #e5e7eb;\r\n  background-color: #f9fafb;\r\n  padding: 0.9rem;\r\n  margin-top: 0.75rem;\r\n}\r\n\r\n.sub-header {\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n/* ì§ˆë¬¸ ì¹´ë“œ */\r\n.question-card {\r\n  border-radius: 0.7rem;\r\n  border: 1px dashed #d1d5db;\r\n  padding: 0.8rem;\r\n  background-color: #ffffff;\r\n}\r\n\r\n/* MaterialInput ìœ„/ì•„ë˜ ê°„ê²© ì¤„ì´ê¸° */\r\n:deep(.input-group) {\r\n  margin-top: 0.15rem;\r\n  margin-bottom: 0.15rem;\r\n}\r\n\r\n/* TEXTAREA ìŠ¤íƒ€ì¼ */\r\n.textarea-basic {\r\n  border-radius: 0.5rem;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 0.5rem 0.75rem;\r\n  font-size: 0.875rem;\r\n  outline: none;\r\n  resize: vertical;\r\n  min-height: 80px;\r\n  background-color: #ffffff;\r\n  transition:\r\n    border-color 0.15s ease,\r\n    box-shadow 0.15s ease;\r\n}\r\n\r\n.textarea-basic:focus {\r\n  border-color: #111827;\r\n  box-shadow: 0 0 0 1px rgba(17, 24, 39, 0.18);\r\n}\r\n\r\n/* ì§ˆë¬¸ ì œëª©: ë” í¬ê³  ë˜ë ·í•˜ê²Œ */\r\n.question-title {\r\n  font-size: 0.95rem; /* ê¸°ë³¸ 15px ì •ë„ */\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n/* ë³´ì¡° ì„¤ëª… í…ìŠ¤íŠ¸: ë” ì‘ê³  ì˜…ê²Œ */\r\n.helper-text {\r\n  font-size: 0.7rem; /* 11px ì •ë„ */\r\n  color: #6b7280;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n/* ë¼ë””ì˜¤/ì²´í¬ë°•ìŠ¤ ì™¼ìª½ ë“¤ì—¬ì“°ê¸° í†µì¼ */\r\n.choice-control {\r\n  margin-left: 0;\r\n  padding-left: 0;\r\n}\r\n\r\n.form-actions {\r\n  margin-top: 10px;\r\n  padding-top: 0.5rem;\r\n  border-top: 1px solid #e5e7eb;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 0.5rem;\r\n}\r\n/* ê¸°ë³¸ ë¼ë””ì˜¤/ì²´í¬ë°•ìŠ¤ + ë¼ë²¨ ì •ë ¬ */\r\n.choice-basic {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 0.85rem;\r\n  color: #111827;\r\n}\r\n\r\n/* ë¼ë””ì˜¤/ì²´í¬ë°•ìŠ¤ í¬ê¸° */\r\n.basic-radio,\r\n.basic-checkbox {\r\n  width: 15px;\r\n  height: 15px;\r\n}\r\n</style>\r\n","import script from \"./SurveyWrite.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SurveyWrite.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SurveyWrite.vue?vue&type=style&index=0&id=035c00ce&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-035c00ce\"]])\n\nexport default __exports__"],"names":["_createElementBlock","class","_normalizeClass","$props","variant","$options","getStatus","error","success","_createElementVNode","id","rows","name","value","placeholder","isRequired","disabled","props","type","String","default","required","Boolean","Number","mounted","setMaterialInput","methods","isValidValue","__exports__","render","router","useRouter","survey","ref","answers","writerType","selectedPersonCode","delegateOptions","disabilityType","isChecked","itemCode","arr","Array","isArray","includes","toggleCheckbox","checked","current","push","idx","indexOf","splice","async","submitSurvey","trim","alert","section","sections","sub","subsections","item","items","is_required","val","item_code","question_type","question_text","length","stored","localStorage","getItem","userCode","u","JSON","parse","user_code","axios","put","disability_type","payload","template_ver_code","written_by","writer_type","target_person_code","res","post","data","message","e","response","goBack","onMounted","get","result","initial","t","toUpperCase","childRes","params","userId","meRes"],"sourceRoot":""}